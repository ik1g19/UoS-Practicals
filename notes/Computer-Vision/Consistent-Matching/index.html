<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Constrained Matching Assume we are given a number of correspondences between the interest points in a pair of images We estimate which of the correspondences are inliers (e."><meta property="og:title" content="Consistent Matching"><meta property="og:description" content="Constrained Matching Assume we are given a number of correspondences between the interest points in a pair of images We estimate which of the correspondences are inliers (e."><meta property="og:type" content="website"><meta property="og:image" content="https://ik1g19.github.io/UoS-Notes/icon.png"><meta property="og:url" content="https://ik1g19.github.io/UoS-Notes/notes/Computer-Vision/Consistent-Matching/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="Consistent Matching"><meta name=twitter:description content="Constrained Matching Assume we are given a number of correspondences between the interest points in a pair of images We estimate which of the correspondences are inliers (e."><meta name=twitter:image content="https://ik1g19.github.io/UoS-Notes/icon.png"><meta name=twitter:site content="_jzhao"><title>Consistent Matching</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://ik1g19.github.io/UoS-Notes//icon.png><link href=https://ik1g19.github.io/UoS-Notes/styles.80333fa2099c0bee674efa435fde378c.min.css rel=stylesheet><link href=https://ik1g19.github.io/UoS-Notes/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://ik1g19.github.io/UoS-Notes/js/darkmode.fdbb50a651b073e7d85910aebde4469d.min.js></script>
<script src=https://ik1g19.github.io/UoS-Notes/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script async src=https://ik1g19.github.io/UoS-Notes/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://ik1g19.github.io/UoS-Notes/",fetchData=Promise.all([fetch("https://ik1g19.github.io/UoS-Notes/indices/linkIndex.4cd7744b37da745103d2e306cd2cd001.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://ik1g19.github.io/UoS-Notes/indices/contentIndex.a1e306a3e6a8cedcc8275a04564ca752.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://ik1g19.github.io/UoS-Notes",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://ik1g19.github.io/UoS-Notes",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/ik1g19.github.io\/UoS-Notes\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=ik1g19.github.io/UoS-Notes src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://ik1g19.github.io/UoS-Notes/>My UoS Notes</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Consistent Matching</h1><p class=meta>Last updated
Apr 11, 2023
<a href=https://github.com/ik1g19/notes/Computer%20Vision/Consistent%20Matching.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><ol><li></li></ol></li></ol><ol><li><a href=#similarity-transform>Similarity Transform</a></li><li><a href=#aspect-ratio>Aspect Ratio</a></li><li><a href=#affine-transform>Affine Transform</a></li><li><a href=#the-affine-transform>The Affine Transform</a></li><li><a href=#translation-and-rotation>Translation and Rotation</a></li><li><a href=#translation>Translation</a></li><li><a href=#shear>Shear</a></li><li><a href=#scaling>Scaling</a></li></ol><ol><li><a href=#simultaneous-equations>Simultaneous Equations</a><ol><li><a href=#least-squares>Least Squares</a></li></ol></li><li><a href=#robust-estimation>Robust Estimation</a><ol><li><a href=#ransac---random-sample-consensus>RANSAC - RANdom SAmple Consensus</a></li></ol></li></ol><ol><li><a href=#3d-reconstruction>3D Reconstruction</a></li><li><a href=#matching-musicsounds>Matching Music/Sounds</a><ol><li><a href=#how-shazams-aglorithms-work>How Shazams aglorithms work</a></li></ol></li><li><a href=#object-recognition--ar>Object Recognition & AR</a><ol><li><a href=#object-recognition>Object Recognition</a></li><li><a href=#augmented-reality>Augmented Reality</a></li></ol></li></ol><ol><li><a href=#local-feature-matching-is-slow>Local feature matching is slow</a></li><li><a href=#optimising>Optimising</a><ol><li><a href=#hashing>Hashing</a></li><li><a href=#efficient-nearest-neighbour-search>Efficient Nearest Neighbour Search</a></li><li><a href=#sketching>Sketching</a></li></ol></li></ol></nav></details></aside><a href=#constrained-matching><h1 id=constrained-matching><span class=hanchor arialabel=Anchor># </span>Constrained Matching</h1></a><p>Assume we are given a number of correspondences between the interest points in a pair of images
<img src=https://remnote-user-data.s3.amazonaws.com/eaiIjWPdu_I8cqT5l2Cx_FcUPLRmVowmdKTV0HVUFXehJVHviybk3ke3U4zrnYqrhaG-7f13aeUNAVaW4tkrje0cTfqMModRNqULHmCe2BacS5LM8OGYo5vWAZZEekJK.png width=400 alt=|400>
We estimate which of the correspondences are inliers (e.g. correct) or outliers (e.g. incorrect/mismatches)
We assume there is a geometric mapping between the two scenes, that can help us eliminate the mismatches</p><a href=#geometric-mappings><h4 id=geometric-mappings><span class=hanchor arialabel=Anchor># </span>Geometric Mappings</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/s_ded5ZwlepxfNXL0upv6LEcv1XdAC2f7DntDbQmxthAdI0akbGF7JUAuEK2MunQKLWa5A8v-Cj2_e-lsO27bidg97zlED8VHHvEcwwNtLW168zk4hgOIog-bmuoOKee.png width=400 alt=|400></p><a href=#point-transforms><h1 id=point-transforms><span class=hanchor arialabel=Anchor># </span>Point Transforms</h1></a><p>We use point transforms of the form
$$x&rsquo;=Tx$$
Where</p><ul><li>$x$ - the original coordinate</li><li>$x&rsquo;$ - the transformed coordinate</li><li>$T$ - the transform matrix</li></ul><a href=#similarity-transform><h2 id=similarity-transform><span class=hanchor arialabel=Anchor># </span>Similarity Transform</h2></a><p>Has 4 Degrees of Freedom</p><ul><li>Translation + Rotation + Scale</li></ul><a href=#aspect-ratio><h2 id=aspect-ratio><span class=hanchor arialabel=Anchor># </span>Aspect Ratio</h2></a><p><img src=https://remnote-user-data.s3.amazonaws.com/9_Ls2O4_CLThyLytQtG2tzbakOPk-NAKLxiAqzKO-dsSNRQe81taqzye6MNjR2wxt3ft7UXupH2h4LT0fy7pqwMUctqZQRo5X3v543cWvWykC--ZkY1Sl4NAqNHeCVLe.png width=400 alt=|400></p><p><img src=https://remnote-user-data.s3.amazonaws.com/kI7es1GN4mbQjcSwEvjIWjuy_rl_jMnEIiCFfvNGYftRfTVjVbLp8GPhaCs-CB3WHGj4m86FfK3mGPuHxwNE_Ljp11FDdCXyrzeChK7MHCbN53Yelm56ZYdRE7OfEkKO.png width=400 alt=|400></p><a href=#affine-transform><h2 id=affine-transform><span class=hanchor arialabel=Anchor># </span>Affine Transform</h2></a><p>Has 6 Degrees of Freedom
Translation + Rotation + Scale + Aspect Ratio + Shear</p><a href=#the-affine-transform><h2 id=the-affine-transform><span class=hanchor arialabel=Anchor># </span>The Affine Transform</h2></a><p>It is more convenient to write this as a single transform matrix by adding an extra dimension to each vector
<img src=https://remnote-user-data.s3.amazonaws.com/Pavhub8UGazgnMcKT7eoopwbI6jcdn0oxfqWbgzvL04qlYd7SQayjQLdjstGB4Xpco18_sAbAkV0vXC0wgSJwKcyWftD9m9ILZQBOjjltUJFZXOIZppvaQ9mxyHAoThH.png width=400 alt=|400>
<strong>Defined as</strong>
<img src=https://remnote-user-data.s3.amazonaws.com/RUa3QjasjqgjwQMMmm8MFS3qShOjRWWCZXAxeeFMopes4jQ9ZRre_LdYwn2lEGotwHeE5dzV29rKBo8yP3sHDNx3jmY960NGbkr5zxoxQu6077WIEIIqHfeCCR1PfdEw.png width=400 alt=|400>
$$x&rsquo;=Ax+b$$</p><a href=#translation-and-rotation><h2 id=translation-and-rotation><span class=hanchor arialabel=Anchor># </span>Translation and Rotation</h2></a><p><img src=https://remnote-user-data.s3.amazonaws.com/EGziOPVB4v7X9N4Wu58tE_BowSWrwVKRkA1iL1FiO05-gpMApn1WyHCZMzitVsUCmoKYq3A-vNFbZrdPgwYv01EhGI4YgAHBVWVCTZy8XCB9R1auL-YMAxzvK6QHlaKn.png width=400 alt=|400>
<img src=https://remnote-user-data.s3.amazonaws.com/UZIGqWE3ZOKwSFsRoWC5wCLjG6bXHT0pVeNFJ87J93YDVn9NlBoaPoGM2fW1jd_ReN-NlNCvvwhR8lwPcWGsekq2BYaAJReTjV1h7LMqBKaeWfmOzoYx_gNgE7chhyzN.png width=400 alt=|400></p><a href=#translation><h2 id=translation><span class=hanchor arialabel=Anchor># </span>Translation</h2></a><p><img src=https://remnote-user-data.s3.amazonaws.com/O27tW1bJ7ufWHowGCPjMfeEmo8S0608R80L5EwPHT1LKPk37ZfgE7IIWRF4BDZgSen_d_dYmb_42edflYmCqH4N0IV5UEA-cFMeiFnGnPdWLNGQTUwLs1usggwKLd7Sd.png width=400 alt=|400></p><p><img src=https://remnote-user-data.s3.amazonaws.com/Iw5e_LhS-eEQ0vUFL2P1QqWS96vI3NPDV5_zjOH-qUXGfntunXPaWY99GE4kXNIiKF5oNgvQyh0vh9328DFVkhCTj80XgelzKOXHulQdQMltR-2ZARjeSnBA6XqhwQoL.png width=400 alt=|400></p><a href=#shear><h2 id=shear><span class=hanchor arialabel=Anchor># </span>Shear</h2></a><p><img src=https://remnote-user-data.s3.amazonaws.com/6o_BDxRdcYDo0ujXj0aj3weUlVdUsuJCrAhbuPjQod1hRyq0TFK7SDn156kfJGtSfOD10nyLyRx0beCO6v9_juTgCHvIhhDSbhzcgJHYZ7Ia3a-nmc1P70VFqymGMwlC.png width=400 alt=|400></p><p><img src=https://remnote-user-data.s3.amazonaws.com/VXQk6r-6gevZ2RdLsYhZ4s8dGn3VR8qcvlGUOizPTPwGdWVx0fUCOVlqQDY1U14Qe2Jhy_ehcIXK7A4ShmY72escOi3YcEcM3_otoIFq5edKDkbpqVqZDFLdlFrWTH1-.png width=400 alt=|400></p><a href=#scaling><h2 id=scaling><span class=hanchor arialabel=Anchor># </span>Scaling</h2></a><p><img src=https://remnote-user-data.s3.amazonaws.com/mMkcdsWQhspsAYfdMtrr429BexwUjFaBcQTura-yPHaYoHL1EyCRqJ7crOE2d4pUEKAY5TLz2m8uVgCCAfCDsepHuIH_YG1ul6RJ3v048VC83wSfoD8Vzs607N2VMhBp.png width=400 alt=|400>
<img src=https://remnote-user-data.s3.amazonaws.com/SOumd9ejjNadlsEedpGefhBIqJneSM6-MzQZpVrh5kyTvpZ4_pe5z4Jqa-x5xtkLWQWUHKfWhj1IVTKdqd0wMstv_etIJcjIg8Sc2Pw4OgJiuYHppYLzXubWmVes-Det.png width=400 alt=|400>
Geometric Transforms change the content of an image by applying a mapping</p><ul><li>To Incorporate more Degrees of Freedom</li></ul><a href=#homogeneous-coordinates><h1 id=homogeneous-coordinates><span class=hanchor arialabel=Anchor># </span>Homogeneous Coordinates</h1></a><p>Coordinates are called homogeneous when they are modelled like this
$$\begin{bmatrix}
wx&rsquo;\\ wy&rsquo;\\ w
\end{bmatrix}$$
$$y&rsquo;=v/w$$
We normalise by w so that the transformed vector is $$\begin{bmatrix}
\cdot & \cdot & 1
\end{bmatrix}$$
$$x&rsquo;=u/w$$
g and h will allow us to model perspective
<img src=https://remnote-user-data.s3.amazonaws.com/T_idr1Ky53aBsKv2qN1rh29Y9Anu3v6HjmmEQARDhlUmDW6n-Zxq5m_U1HIeck-I8hBpvKsork7Mh2NP8GS8-jLJKhkKxdQ2PpcCjxfr2oZJEY-Ey4q102JdEE504GKL.png width=400 alt=|400></p><p>The Planar Homography (Projective Transformation)
<img src=https://remnote-user-data.s3.amazonaws.com/T_idr1Ky53aBsKv2qN1rh29Y9Anu3v6HjmmEQARDhlUmDW6n-Zxq5m_U1HIeck-I8hBpvKsork7Mh2NP8GS8-jLJKhkKxdQ2PpcCjxfr2oZJEY-Ey4q102JdEE504GKL.png width=400 alt=|400>
$$x&rsquo;=u/w$$
$$y&rsquo;=v/w$$
$g$ and $h$ are the keystone distortions
They squish one side of the image to simulate a perspective change
<img src=https://remnote-user-data.s3.amazonaws.com/ZB25yPRaMp214_rEXnE6jF9mwAz5G1LRws1LGsSmC0rmHQB0slpXzvt_b0qlS6_bkpP1B-9HkhmbXqIzkz8f5w9QOY3cRtU_CpwF2pTH3GYvq_iM29XhWQj_1YVRjtSb.png width=400 alt=|400></p><a href=#recovering-a-geometric-mapping><h1 id=recovering-a-geometric-mapping><span class=hanchor arialabel=Anchor># </span>Recovering a Geometric Mapping</h1></a><a href=#simultaneous-equations><h2 id=simultaneous-equations><span class=hanchor arialabel=Anchor># </span>Simultaneous Equations</h2></a><a href=#least-squares><h3 id=least-squares><span class=hanchor arialabel=Anchor># </span>Least Squares</h3></a><p><img src=https://remnote-user-data.s3.amazonaws.com/ng9x_dID0F7wLEYAYDfF4NpeKzlc3DiecM8ZuIQcLq421k589f7oVDqLRhIrxO7AMyCe_cc02HIAm1cwS5RAtgCdg5emUtEUDdwccPW6DMLwQouvLJnnXo0KhXxnQnix.png width=400 alt=|400>
<img src=https://remnote-user-data.s3.amazonaws.com/xQgpVj6qXDEhZtiCzIDfFRrk9giF8s3f5TplVZ8dWXqtwfmK41-Rxik-o5SW0Er0Ska8_sxoBkDTzwLa-2lTv2d3MML1HiTHO_YCVhRhpgnXXC509axfYUyLQCfszzkv.png width=400 alt=|400>
We need to seek the minimum error, or least squares solution
In the presence of noise, and with potentially more matches than required, we have to solve an overdetermined system
It is possible to estimate a transform matrix from a set of point matches by solving a set of simultaneous equations
We need at least 4 point matches to solve a homography or 3 to solve an affine transform</p><a href=#robust-estimation><h2 id=robust-estimation><span class=hanchor arialabel=Anchor># </span>Robust Estimation</h2></a><a href=#ransac---random-sample-consensus><h3 id=ransac---random-sample-consensus><span class=hanchor arialabel=Anchor># </span>RANSAC - RANdom SAmple Consensus</h3></a><a href=#we-assume><h4 id=we-assume><span class=hanchor arialabel=Anchor># </span>We assume</h4></a><ul><li>M data items required to estimate model T</li><li>N data items in total</li></ul><a href=#algorithm><h4 id=algorithm><span class=hanchor arialabel=Anchor># </span>Algorithm</h4></a><ul><li>Repeat steps 1 to 4 n times</li><li>If k is large enough, either accept T<ul><li>Or compute the least-squares estimate using all inliers, and exit with success</li></ul></li><li>Select M data items at random</li><li>Estimate model T</li><li>Fail - no good T fit of data</li><li>Find out how many of the N data items fir T within tolerance tol, call this k<ul><li>The other points are the outliers</li><li>The points that have an absolute residual less than tol are the inliers</li><li>i.e. Compute how many times the absolute residual is less than tol
Need a way to deal with estimating a model (i.e. a transform matrix) in the presence of high amounts of noise (i.e. mis-matches)
Least squares will be sub-optimal and find a very bad solution</li></ul></li></ul><a href=#applications-of-robust-local-matching><h1 id=applications-of-robust-local-matching><span class=hanchor arialabel=Anchor># </span>Applications of Robust Local Matching</h1></a><a href=#3d-reconstruction><h2 id=3d-reconstruction><span class=hanchor arialabel=Anchor># </span>3D Reconstruction</h2></a><p>Possible to estimate depth, and ultimately build a complete 3d scene from sets of point correspondences formed from matching local features</p><a href=#matching-musicsounds><h2 id=matching-musicsounds><span class=hanchor arialabel=Anchor># </span>Matching Music/Sounds</h2></a><a href=#how-shazams-aglorithms-work><h3 id=how-shazams-aglorithms-work><span class=hanchor arialabel=Anchor># </span>How Shazams aglorithms work</h3></a><p>A recording of a piece of music is turned into an image called a spectrogram
Local image features can be extracted, described and matched from the spectrogram images</p><a href=#object-recognition--ar><h2 id=object-recognition--ar><span class=hanchor arialabel=Anchor># </span>Object Recognition & AR</h2></a><a href=#object-recognition><h3 id=object-recognition><span class=hanchor arialabel=Anchor># </span>Object Recognition</h3></a><p>Image of object is matched against scene, and recognised if there is a consistent match</p><a href=#augmented-reality><h3 id=augmented-reality><span class=hanchor arialabel=Anchor># </span>Augmented Reality</h3></a><p>Data can be added to a scene on the basis of a match</p><a href=#problems-with-direct-local-feature-matching><h1 id=problems-with-direct-local-feature-matching><span class=hanchor arialabel=Anchor># </span>Problems with Direct Local Feature Matching</h1></a><a href=#local-feature-matching-is-slow><h2 id=local-feature-matching-is-slow><span class=hanchor arialabel=Anchor># </span>Local feature matching is slow</h2></a><p>Typical image may have ~2000 interest points/sift descriptors
Each sift descriptor is 128 dimensions</p><ul><li>Assuming your matching a query against a database of images&mldr;</li></ul><a href=#optimising><h2 id=optimising><span class=hanchor arialabel=Anchor># </span>Optimising</h2></a><a href=#hashing><h3 id=hashing><span class=hanchor arialabel=Anchor># </span>Hashing</h3></a><p>Locality Sensitive Hashing (LSH) creates hash codes for vectors such that similar vectors have similar hash codes</p><a href=#efficient-nearest-neighbour-search><h3 id=efficient-nearest-neighbour-search><span class=hanchor arialabel=Anchor># </span>Efficient Nearest Neighbour Search</h3></a><a href=#k-d-trees><h4 id=k-d-trees><span class=hanchor arialabel=Anchor># </span>K-D Trees</h4></a><p>K-D Tree Problems</p><ul><li>Doesn&rsquo;t scale well to high dimensions<ul><li>You end up needing to search most of the tree</li></ul></li><li>There are approximate versions, which won&rsquo;t return the exact answer, which do scale
Binary tree structure that partitions the space along axis-aligned hyperplanes</li></ul><a href=#searching><h5 id=searching><span class=hanchor arialabel=Anchor># </span>Searching</h5></a><ul><li>Walk down the tree until a leaf is hit, then brute force search to find the best point in the leaf
<img src=https://remnote-user-data.s3.amazonaws.com/wqzjPYyTj1FT0ayVve_9BdEQDt0AahN3li1V6gr98QINfjbJSI2pkHoSvO2GyQQ3BhEt5rDyGwldrQZRHVY4dPRs-n3q8eshO2dgGzZkihfkW2MKmBKTByxelZDM4oof.png width=400 alt=|400>
<img src=https://remnote-user-data.s3.amazonaws.com/68gnUfNyW2xE3SV9ZmdSMNpdbf7LcKhNiGFPjY5D-MIdlqlQuf8UXMn-IMGBLf5_di6XQa9izD3H_3CLoBRvsBk3VnCPNl65BQeyx8hFL0I6Ho5z0S8tR18d4Cl3yc3C.png width=400 alt=|400>
Then backtrack and see if the next subtree needs checking
<img src=https://remnote-user-data.s3.amazonaws.com/FCC7HUmnpfsh9wg11FLIS27hd27K-s7UU5XtlrgFuI6SamgW3F4s8mWsYiOb0yGVDpWXRMNHL0Lf2QzmLQ0Pxw9C1vRW15U3qQsA6pb4wqdKyuxhBapRo_yZfpfn0VRX.png width=400 alt=|400></li><li>A subtree needs checking if the partition is closer to the query point than the current best found point</li><li>Then repeat the brute force process in each partition you check
<img src=https://remnote-user-data.s3.amazonaws.com/wRxxlhhn_EkMc97cZ2mRBIg-uL84GSGiHcWnaCr-F-8VKhZdSytUAs9x7x6z-lPgj8U18r7OJtYGFP5xncaHaIjUXessKUkYz-oxKUL_TJ3zM3taob2elHqNleIVeQWU.png width=400 alt=|400>
Stop after a certain depth, or when the number of points in a leaf is less than a threshold
Typically take each dimension in turn and split it on the media of the points in the enclosing partition
<img src=https://remnote-user-data.s3.amazonaws.com/R5MoeeRg4pvhfRFE9NyAwvU83PJS4NSayFleq7Faady61upmXilr0BLV0lrNaTn2phNyDeAlw5IFSA6y_uct6jRCdOQaIJ0UZXfgaQcKC3LXNVe40IlbVY0jSVlR2u8w.png width=400 alt=|400>
<img src=https://remnote-user-data.s3.amazonaws.com/Z_5j-0vw0DG3Ps8UYckeqow66lImGA9UkI3pvzF6tlwrpSSa0Tk28G503Gm5eztRcTpJXIKpqgn1SZgu5ysmLfcurnpnV7uhZn8GJQvgYjaB3UECNW8LWy6RF1y48Ry6.png width=400 alt=|400></li></ul><a href=#sketching><h3 id=sketching><span class=hanchor arialabel=Anchor># </span>Sketching</h3></a><p>With the correct LSH function, the Hamming distance between a pair of sketches is proportional to the euclidean distance between the original vectors
Concatenates binary hashes into a bit string
Can compress sift features to 128 bits</p><ul><li>Hamming distance computation is cheap</li></ul></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script async src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://ik1g19.github.io/UoS-Notes/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by Isaac Klugman using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://ik1g19.github.io/UoS-Notes/>Home</a></li><li><a href=https://twitter.com/_jzhao>Twitter</a></li><li><a href=https://github.com/jackyzha0>GitHub</a></li></ul></footer></div></div></body></html>