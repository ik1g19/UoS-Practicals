<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Data Storage Storage Organisation The Memory Hierarchy  Cache  Volatile storage Limited capacity Very expensive Hierarchical Typical capacities and Access times  L2→~10^5 bytes, 5-10 cycles L1→~10^4 bytes, <5 cycles Registers→~10^1 bytes, 1 cycle   Very fast  Tertiary Storage  Very cheap Typical access time→ $10^1-10^2$s Very slow Typical capacity→10^{13}-10^{17} bytes Very large capacity Non-volatile storage  Secondary Storage  Non-volatile storage Typical capacity→10^{11}-10^{12} bytes Typical access time→10^{-3} s (10^6 cycles) Large capacity Slow Cheap  Main Memory  Typical access time→10^{-8} s (20-30 cycles) Fast Affordable Volatile storage Medium capacity Typical capacity→10^9-10^{10} bytes  Secondary Storage Hard Disk Drives Typical Storage medium for databases  Disk Structure  Zone Bit Recording  Tracks closer to the disc edge are longer than those closer to the axis"><meta property="og:title" content="Week 2"><meta property="og:description" content="Data Storage Storage Organisation The Memory Hierarchy  Cache  Volatile storage Limited capacity Very expensive Hierarchical Typical capacities and Access times  L2→~10^5 bytes, 5-10 cycles L1→~10^4 bytes, <5 cycles Registers→~10^1 bytes, 1 cycle   Very fast  Tertiary Storage  Very cheap Typical access time→ $10^1-10^2$s Very slow Typical capacity→10^{13}-10^{17} bytes Very large capacity Non-volatile storage  Secondary Storage  Non-volatile storage Typical capacity→10^{11}-10^{12} bytes Typical access time→10^{-3} s (10^6 cycles) Large capacity Slow Cheap  Main Memory  Typical access time→10^{-8} s (20-30 cycles) Fast Affordable Volatile storage Medium capacity Typical capacity→10^9-10^{10} bytes  Secondary Storage Hard Disk Drives Typical Storage medium for databases  Disk Structure  Zone Bit Recording  Tracks closer to the disc edge are longer than those closer to the axis"><meta property="og:type" content="website"><meta property="og:image" content="https://ik1g19.github.io/UoS-Notes/icon.png"><meta property="og:url" content="https://ik1g19.github.io/UoS-Notes/notes/Advanced-Databases/Week-2/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="Week 2"><meta name=twitter:description content="Data Storage Storage Organisation The Memory Hierarchy  Cache  Volatile storage Limited capacity Very expensive Hierarchical Typical capacities and Access times  L2→~10^5 bytes, 5-10 cycles L1→~10^4 bytes, <5 cycles Registers→~10^1 bytes, 1 cycle   Very fast  Tertiary Storage  Very cheap Typical access time→ $10^1-10^2$s Very slow Typical capacity→10^{13}-10^{17} bytes Very large capacity Non-volatile storage  Secondary Storage  Non-volatile storage Typical capacity→10^{11}-10^{12} bytes Typical access time→10^{-3} s (10^6 cycles) Large capacity Slow Cheap  Main Memory  Typical access time→10^{-8} s (20-30 cycles) Fast Affordable Volatile storage Medium capacity Typical capacity→10^9-10^{10} bytes  Secondary Storage Hard Disk Drives Typical Storage medium for databases  Disk Structure  Zone Bit Recording  Tracks closer to the disc edge are longer than those closer to the axis"><meta name=twitter:image content="https://ik1g19.github.io/UoS-Notes/icon.png"><meta name=twitter:site content="_jzhao"><title>Week 2</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://ik1g19.github.io/UoS-Notes//icon.png><link href=https://ik1g19.github.io/UoS-Notes/styles.80333fa2099c0bee674efa435fde378c.min.css rel=stylesheet><link href=https://ik1g19.github.io/UoS-Notes/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://ik1g19.github.io/UoS-Notes/js/darkmode.fdbb50a651b073e7d85910aebde4469d.min.js></script>
<script src=https://ik1g19.github.io/UoS-Notes/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script async src=https://ik1g19.github.io/UoS-Notes/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://ik1g19.github.io/UoS-Notes/",fetchData=Promise.all([fetch("https://ik1g19.github.io/UoS-Notes/indices/linkIndex.4cd7744b37da745103d2e306cd2cd001.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://ik1g19.github.io/UoS-Notes/indices/contentIndex.a1e306a3e6a8cedcc8275a04564ca752.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://ik1g19.github.io/UoS-Notes",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://ik1g19.github.io/UoS-Notes",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/ik1g19.github.io\/UoS-Notes\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=ik1g19.github.io/UoS-Notes src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://ik1g19.github.io/UoS-Notes/>My UoS Notes</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Week 2</h1><p class=meta>Last updated
Apr 16, 2023
<a href=https://github.com/ik1g19/notes/Advanced%20Databases/Week%202.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#storage-organisation><strong>Storage Organisation</strong></a><ol><li><a href=#the-memory-hierarchy>The Memory Hierarchy</a></li></ol></li><li><a href=#secondary-storage-1><strong>Secondary Storage</strong></a><ol><li><a href=#hard-disk-drives>Hard Disk Drives</a></li><li><a href=#solid-state-drives>Solid State Drives</a></li></ol></li><li><a href=#buffer-management><strong>Buffer Management</strong></a><ol><li><a href=#400httpsremnote-user-datas3amazonawscoms9jk-vxd0mbvqufmvbtbxiubtn5wkfsm7gy-bltps3ngiiiyjmkdgcgn8tenwbaojj1taeoadrdnga0tf9rlnumv7pomt_94fixhuz69almsb3lhgk6ooavjmqueimvxpng><img src=https://remnote-user-data.s3.amazonaws.com/S9jK-vxd0mBVQuFMVbtbxIUbTN5WKfSM7gy-Bltps3nGiIiYjMKdGcgn8TeNwbaoJJ1tAEOaDRDnga0TF9RlnuMv7pomT_94fIXhUz69ALMsb3lHGK6ooavJMqUeiMVx.png alt=|400></a></li><li><a href=#buffer-metadata>Buffer Metadata</a></li><li><a href=#buffer-replacement-strategies>Buffer Replacement Strategies</a></li><li><a href=#single-buffering>Single Buffering</a></li><li><a href=#double-buffering>Double Buffering</a></li></ol></li><li><a href=#the-five-minute-rule>The Five Minute Rule</a><ol><li><a href=#assuming-a-block-is-accessed-every-x-seconds>Assuming a block is accessed every X seconds</a></li><li><a href=#assuming-a-block-is-accessed-every-x-seconds->Assuming a block is accessed every $X$ seconds ↓</a></li><li><a href=#if-cd-is-smaller-than-cm>If CD is smaller than CM</a></li><li><a href=#break-even-point-is-when>Break even point is when</a></li><li><a href=#examples>Examples</a></li></ol></li><li><a href=#disk-organisation><strong>Disk Organisation</strong></a><ol><li><a href=#data-items>Data Items</a></li><li><a href=#records>Records</a></li></ol></li></ol></nav></details></aside><a href=#data-storage><h1 id=data-storage><span class=hanchor arialabel=Anchor># </span>Data Storage</h1></a><a href=#storage-organisation><h2 id=storage-organisation><span class=hanchor arialabel=Anchor># </span><strong>Storage Organisation</strong></h2></a><a href=#the-memory-hierarchy><h3 id=the-memory-hierarchy><span class=hanchor arialabel=Anchor># </span>The Memory Hierarchy</h3></a><h4 id=400httpsremnote-user-datas3amazonawscom790h96pqtwxe87fp-ff2ir63ff4ouzgtgylzesnkcpqtxdsgnknnkixbtms7stwhnm4rl52i_ml7nuyija1zknuk3d9enzgkl4t5wrquq7bpgbbsef6urdyta85nxd8mpng><img src=https://remnote-user-data.s3.amazonaws.com/790H96pqTwXe87FP-fF2IR63fF4ouzgtgyLzesnkCPQtxdSgNknnKIXbtmS7STWhnM4Rl52i_ml7nUYIja1zKNUK3d9enZgKL4t5wrquQ7bPgbbSef6URDyTa85nXd8m.png width=400 alt=|400></h4><a href=#cache><h4 id=cache><span class=hanchor arialabel=Anchor># </span>Cache</h4></a><ul><li>Volatile storage</li><li>Limited capacity</li><li>Very expensive</li><li>Hierarchical</li><li>Typical capacities and Access times<ul><li>L2→~10^5 bytes, 5-10 cycles</li><li>L1→~10^4 bytes, &lt;5 cycles</li><li>Registers→~10^1 bytes, 1 cycle</li></ul></li><li>Very fast</li></ul><a href=#tertiary-storage><h4 id=tertiary-storage><span class=hanchor arialabel=Anchor># </span>Tertiary Storage</h4></a><ul><li>Very cheap</li><li>Typical access time→ $10^1-10^2$s</li><li>Very slow</li><li>Typical capacity→10^{13}-10^{17} bytes</li><li>Very large capacity</li><li>Non-volatile storage</li></ul><a href=#secondary-storage><h4 id=secondary-storage><span class=hanchor arialabel=Anchor># </span>Secondary Storage</h4></a><ul><li>Non-volatile storage</li><li>Typical capacity→10^{11}-10^{12} bytes</li><li>Typical access time→10^{-3} s (10^6 cycles)</li><li>Large capacity</li><li>Slow</li><li>Cheap</li></ul><a href=#main-memory><h4 id=main-memory><span class=hanchor arialabel=Anchor># </span>Main Memory</h4></a><ul><li>Typical access time→10^{-8} s (20-30 cycles)</li><li>Fast</li><li>Affordable</li><li>Volatile storage</li><li>Medium capacity</li><li>Typical capacity→10^9-10^{10} bytes</li></ul><a href=#secondary-storage-1><h2 id=secondary-storage-1><span class=hanchor arialabel=Anchor># </span><strong>Secondary Storage</strong></h2></a><a href=#hard-disk-drives><h3 id=hard-disk-drives><span class=hanchor arialabel=Anchor># </span>Hard Disk Drives</h3></a><a href=#typical-storage-medium-for-databases><h4 id=typical-storage-medium-for-databases><span class=hanchor arialabel=Anchor># </span>Typical Storage medium for databases</h4></a><h4 id=400httpsremnote-user-datas3amazonawscom8h-pm9synhevzcwlgj1nlaen-f046pxi8guzn5q7hwiw9vuca0hddfwys_sowtqogiu_nm0lq3su43xl9fx1r0hx4jwjnik5sguthqziwnfo4vqaj9xmxl6fugogvledpng><img src=https://remnote-user-data.s3.amazonaws.com/8h-pM9sYNhEVZCWLgJ1nlaEN-F046PXi8GUzN5q7hWIW9VUcA0hDDFwyS_SowtQOGIU_Nm0Lq3su43xl9fX1r0hX4JWjnIK5sGUTHqZiWNFO4VQaj9Xmxl6fUGogvleD.png width=400 alt=|400></h4><a href=#disk-structure><h4 id=disk-structure><span class=hanchor arialabel=Anchor># </span>Disk Structure</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/KzwA2Uj2N2HXcQFwrlw937Nxxb-IGwfMDVRltn97EOSUikyJve7l-P2o7gsw3435JTsBah_VzlixRO2nSQuAvVr1MEKj-_eCmXZEh6bcuIRTiNgWXouccqjL25g5GMXr.png width=400 alt=|400></p><a href=#zone-bit-recording><h4 id=zone-bit-recording><span class=hanchor arialabel=Anchor># </span>Zone Bit Recording</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/X60VKbc8Q1TzCRLGqdjHnyM8peG-MMJldCCwgw1PkoxoqMsyvhaI3mbButgr0VP3qsaJb7zsM36-iAyfKCtb9yWq46NoH6etccAtop4jP0wREQ1pRb1whdBXn8CSVbL5.png width=400 alt=|400></p><p>Tracks closer to the disc edge are longer than those closer to the axis</p><p>Bit densities vary in order to ensure a constant number of bits per sector</p><p>Instead, we can vary the number of sectors per track (depending on track location)</p><ul><li>A hybrid of constant linear velocity (CLV) and constant angular velocity (CAV)</li><li>Improves overall storage density</li></ul><a href=#disk-sector-format><h4 id=disk-sector-format><span class=hanchor arialabel=Anchor># </span>Disk Sector Format</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/lXX0vgj3hB9JIr09qJGlLcYdpBMh8hbYmn9_1ZdNVQU1hh6benTJu2zS1l7fwRq7Q1HeEl9nJSXdZH9Ao6AWA24i8Gq3ScZNTOLPBLzJcVaOmCacOnOqBZv0TTiHIOCk.png width=400 alt=|400></p><p>Terms</p><ul><li>Gap↔Separator between sectors</li><li>Sync↔Indicates start of sector</li><li>Address Mark↔Indicates sector&rsquo;s number/location</li><li>ECC↔Error Correcting Code (may be distributed)</li></ul><p>For 4k Advanced Format</p><ul><li>Gap+Sync+Mark = <strong>15</strong> bytes</li><li>Data = <strong>4096</strong> bytes</li><li>ECC = <strong>100</strong> bytes</li><li><strong>2 . 7</strong>% overhead</li></ul><a href=#disk-access-time-reading><h4 id=disk-access-time-reading><span class=hanchor arialabel=Anchor># </span>Disk Access Time: Reading</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/yA1CVmesqLWX__Cc3r6Ve99ZNit3m0G3vsa7z2N2cqPzJY-1BMr8vE2xI8YVy3NSlKduf5_rth--bkqroDV91_aGr5EO6w5EoJBfM8JdVeoH3xhtMx-scT2iwFB1jRYc.png width=400 alt=|400></p><p>Access Time = <strong>Seek Time + Rotational Delay + Transfer Time</strong></p><a href=#seek-time><h4 id=seek-time><span class=hanchor arialabel=Anchor># </span>Seek Time</h4></a><p>Time taken for head assembly to move to a given track</p><p><img src=https://remnote-user-data.s3.amazonaws.com/XkgwIl3aKMvYKxItwJKA8OmErWBFXarYqN9MFKUqn7kgIli6__xpi5HqgAJDFNt4xJcF5ZEpUtvFbf0CH5J6j6S8hi70Utxb6S9D_C6vL0aeNBuV3jE4ZIIEAT-iEJSB.png width=400 alt=|400></p><p>Average Seek Time Range</p><ul><li><strong>4</strong>ms for high end drives</li><li><strong>15</strong>ms for mobile devices</li></ul><a href=#rotational-delay-latency><h4 id=rotational-delay-latency><span class=hanchor arialabel=Anchor># </span>Rotational Delay (Latency)</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/ZfSpiTUBPxDP2fToVu1_HnXofsJRyJhv2DTMB_heZsZqHd5U0gnCRXs8CSNqS32u75juqPmk5D-Efi93v3zrpLTh9I7JUV5sVF_RON5lhcHwRnmoW9uQ-ZBA09m224Oz.png width=400 alt=|400></p><p><img src=https://remnote-user-data.s3.amazonaws.com/Y238Em7A4r-yHiGWatBQh-nVMGZGWIjeE-DdPlx5ivhNsnWB25nehX3O07mJz48F7syTXZKZC6IUvQuimq9q7-qitTs596Vs1GYR9GI_ONZ-2xMN5oz5ExnKaLe3a105.png width=400 alt=|400></p><ul><li>Average delay→time for 0.5 rev</li></ul><a href=#transfer-time><h4 id=transfer-time><span class=hanchor arialabel=Anchor># </span>Transfer Time</h4></a><ul><li>Transfer Time = <strong>Block Size / Transfer Rate</strong></li></ul><a href=#sequential-access><h4 id=sequential-access><span class=hanchor arialabel=Anchor># </span>Sequential Access</h4></a><ul><li>Access Time = <strong>(Block Size / Transfer Rate) + Negligible Costs</strong><ul><li>Negligible Costs<ul><li>Switch to adjacent cylinder occasionally</li><li>Skip inter-block gap</li></ul></li></ul></li></ul><p>Switch track (within same cylinder)</p><ul><li>In general, <strong>sequential I/O is much less expensive than random I/O</strong></li></ul><a href=#disk-access-time-writing><h4 id=disk-access-time-writing><span class=hanchor arialabel=Anchor># </span>Disk Access Time: Writing</h4></a><ul><li>Costs similar to those for reading, unless we wish to verify data<ul><li>Verifying requires that→we read the block we&rsquo;ve just written</li></ul></li><li>Access Time = <strong>Seek Time + Rotational Delay (1/2 rotation) + Transfer Time (for writing) + Rotational Delay (full rotation) + Transfer Time (for verifying)</strong></li></ul><a href=#disk-access-time-modifying><h4 id=disk-access-time-modifying><span class=hanchor arialabel=Anchor># </span>Disk Access Time: Modifying</h4></a><ul><li>Read block</li><li>Write block</li><li>Access Time = Seek Time + Rotation Delay (1/2 rotation) + Transfer Time (for reading) + Rotational Delay (full rotation) + Transfer Time (for writing) + Rotational Delay (full rotation) + Transfer Time (for verifying)</li><li>Verify block (optional)</li><li>Modify in memory</li></ul><a href=#block-addressing><h4 id=block-addressing><span class=hanchor arialabel=Anchor># </span>Block Addressing</h4></a><ul><li>Cylinder-head-sector<ul><li>Physical location of data on disk</li><li>ZBR causes problems (sectors vary by tracks)</li></ul></li><li>Logical Block Addressing</li></ul><a href=#blocks-located-by-integer-index><h6 id=blocks-located-by-integer-index><span class=hanchor arialabel=Anchor># </span>Blocks located by integer index</h6></a><ul><li>Allows remapping of bad blocks</li><li>HDD firmware maps LBA addresses to physical locations on disk</li></ul><a href=#block-size-selection><h4 id=block-size-selection><span class=hanchor arialabel=Anchor># </span>Block Size Selection</h4></a><ul><li>The size of blocks affects I/O efficiency<ul><li>Big blocks <strong>increase</strong> the amount of irrelevant data read<ul><li>If you&rsquo;re trying to read a single record in a block, larger blocks force you to read more data</li></ul></li><li>Big blocks <strong>reduce</strong> the costs of access<ul><li>Fewer seeks (seek time + rotational delay) for the same amount of data</li></ul></li></ul></li></ul><a href=#solid-state-drives><h3 id=solid-state-drives><span class=hanchor arialabel=Anchor># </span>Solid State Drives</h3></a><ul><li>Typically based on <strong>NAND flash</strong> memory</li><li>Typically <strong>smaller</strong> maximum size than HDD</li><li><strong>More</strong> expensive than HDD<ul><li>Getting cheaper over time</li></ul></li><li>Considerably <strong>higher</strong> I/O performance than HDD</li><li><strong>Asymmetric read/write performance (writes are slower)</strong></li><li>Limited number of <strong>program-erase cycles (~100,000)</strong></li></ul><a href=#buffer-management><h2 id=buffer-management><span class=hanchor arialabel=Anchor># </span><strong>Buffer Management</strong></h2></a><h3 id=400httpsremnote-user-datas3amazonawscoms9jk-vxd0mbvqufmvbtbxiubtn5wkfsm7gy-bltps3ngiiiyjmkdgcgn8tenwbaojj1taeoadrdnga0tf9rlnumv7pomt_94fixhuz69almsb3lhgk6ooavjmqueimvxpng><img src=https://remnote-user-data.s3.amazonaws.com/S9jK-vxd0mBVQuFMVbtbxIUbTN5WKfSM7gy-Bltps3nGiIiYjMKdGcgn8TeNwbaoJJ1tAEOaDRDnga0TF9RlnuMv7pomT_94fIXhUz69ALMsb3lHGK6ooavJMqUeiMVx.png width=400 alt=|400></h3><p>Buffer pool organised into <strong>frames</strong></p><ul><li><strong>Size of database block + Metadata</strong></li></ul><p>Far more blocks of secondary storage than space in main memory</p><ul><li>Need to be selective about what&rsquo;s kept in memory</li></ul><a href=#buffer-metadata><h3 id=buffer-metadata><span class=hanchor arialabel=Anchor># </span>Buffer Metadata</h3></a><a href=#each-frame-in-the-buffer-pool-has><h4 id=each-frame-in-the-buffer-pool-has><span class=hanchor arialabel=Anchor># </span>Each frame in the buffer pool has</h4></a><ul><li>A Pin Count<ul><li>Pin Count↔Number of current users of the block in that frame</li></ul></li><li>A Dirty Flag<ul><li>Dirty Flag↔1 if the copy in the buffer has been changed, 0 otherwise</li></ul></li><li>An Access Time<ul><li>Access Time↔Optional - used for [LRU](Advanced Databases/Week 2/Data Storage/Buffer Management/Buffer Replacement Strategies/If there&rsquo;s more than one frame with a pin count of 0/LRU.md) replacement</li></ul></li><li>A Loading Time<ul><li>Loading Time↔Optional - used for [FIFO](Advanced Databases/Week 2/Data Storage/Buffer Management/Buffer Replacement Strategies/If there&rsquo;s more than one frame with a pin count of 0/FIFO.md) replacement</li></ul></li><li>A Clock Flag<ul><li>Clock Flag↔Optional - used for Clock replacement</li></ul></li></ul><a href=#buffer-replacement-strategies><h3 id=buffer-replacement-strategies><span class=hanchor arialabel=Anchor># </span>Buffer Replacement Strategies</h3></a><p>A frame will not be selected for replacement until→its Pin Count is 0
If there&rsquo;s more than one frame with a pin count of 0→use a replacement strategy to choose the frame to be replaced</p><ul><li>Clock↔Cycle through each buffer in turn, if a buffer hasn&rsquo;t been accessed in a full cycle then mark it for replacement (Approximation of LRU))</li><li>FIFO↔(First in First Out) Select the frame with the oldest loading time</li><li>LRU↔(Least Recently Used) Select the frame with the oldest access time</li></ul><a href=#single-buffering><h3 id=single-buffering><span class=hanchor arialabel=Anchor># </span>Single Buffering</h3></a><p>Read B1 ⇒ Buffer
Process data in Buffer
Read B2 ⇒ Buffer
Process data in Buffer&mldr;</p><h4 id=400httpsremnote-user-datas3amazonawscompogbkubhfkryz2zrxtum6pmlilpcjzraoy47xuzeo2zzt_31eilrqztuyssghqh90nkigzrth8hqmmzwwvzvjbtqx-yonfsa43fwr0v0dbtxzfvxuy4mfmgnfgzd7q9ngif><img src=https://remnote-user-data.s3.amazonaws.com/POgbKUbhfKRyz2zRXTUM6PMlilpCJZRaOy47xuZEO2zzt_31eIlRQZTUysSgHQH90nkiGZRth8hqmMZwwvzvjBtqX-yOnFSa43fwr0v0DBtxzfVXUY4mfMgnfGzd7q9N.gif width=400 alt=|400></h4><a href=#single-buffering-cost><h4 id=single-buffering-cost><span class=hanchor arialabel=Anchor># </span>Single Buffering Cost</h4></a><ul><li>Single Buffer Time =** **$n(R+P)$<ul><li>Where<ul><li>$P$→Time to process a block</li><li>R→Time to read a block</li><li>n→Number of blocks</li></ul></li></ul></li></ul><a href=#double-buffering><h3 id=double-buffering><span class=hanchor arialabel=Anchor># </span>Double Buffering</h3></a><a href=#double-buffering-cost><h4 id=double-buffering-cost><span class=hanchor arialabel=Anchor># </span>Double Buffering Cost</h4></a><ul><li>If time to process a block > time to read a block then<ul><li>Double Buffer Time =<strong>R + nP</strong></li></ul></li></ul><a href=#use-a-pair-of-buffers><h4 id=use-a-pair-of-buffers><span class=hanchor arialabel=Anchor># </span>Use a pair of buffers</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/Ti3NB9bf-kbZxr2ZCt0XL0CrXGOMGZEUbvTEqFb3lj6rbmlIAIHqlz2WrOmUwHGN7YVoNfr85TPbaS4MRNpGdPX9UaQTkMQUQkkwBiKUIJ97w4Zyn8HcuUyJVgDgGvtU.gif width=400 alt=|400></p><ul><li>While reading a block and writing into buffer A</li><li>Process block previously read into buffer B</li><li>After block read into A, process A and read next block into B</li></ul><a href=#the-five-minute-rule><h2 id=the-five-minute-rule><span class=hanchor arialabel=Anchor># </span>The Five Minute Rule</h2></a><p>Data referenced every five minutes should be memory resident</p><a href=#assuming-a-block-is-accessed-every-x-seconds><h3 id=assuming-a-block-is-accessed-every-x-seconds><span class=hanchor arialabel=Anchor># </span>Assuming a block is accessed every X seconds</h3></a><p>CD=$\frac{$D}{XI}$</p><ul><li>Where<ul><li>XI→The IOs the unit can do in X seconds</li><li>CD→Cost if we keep that block on disk</li><li>I→Number of IOs that unit can perform per second</li></ul></li></ul><a href=#assuming-a-block-is-accessed-every-x-seconds-><h3 id=assuming-a-block-is-accessed-every-x-seconds-><span class=hanchor arialabel=Anchor># </span>Assuming a block is accessed every $X$ seconds ↓</h3></a><p>$CM=\frac{$M}{P}$</p><ul><li>Where<ul><li>CM→Cost if we keep that block in RAM</li><li>$M→Cost of 1MB of RAM</li><li>$P$→Number of pages in 1MB RAM</li></ul></li></ul><a href=#if-cd-is-smaller-than-cm><h3 id=if-cd-is-smaller-than-cm><span class=hanchor arialabel=Anchor># </span>If CD is smaller than CM</h3></a><p>Otherwise, keep in memory</p><p>Keep block on disk</p><a href=#break-even-point-is-when><h3 id=break-even-point-is-when><span class=hanchor arialabel=Anchor># </span>Break even point is when</h3></a><p>CD = CM</p><a href=#examples><h3 id=examples><span class=hanchor arialabel=Anchor># </span>Examples</h3></a><a href=#using-1997-numbers><h4 id=using-1997-numbers><span class=hanchor arialabel=Anchor># </span>Using 1997 Numbers</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/xQaei4fDAX05jRoLGTf96QTMfiNRmBFnJbGfhoEAr9PvPG1ydl51-aXFyikEf29h0jzkbSETFqpMaOv75BQJ3HQ_afwWsEn3MO6KanxOejxyOwBdorXPr0grxJrveXjK.png width=400 alt=|400></p><a href=#using-2016-numbers><h4 id=using-2016-numbers><span class=hanchor arialabel=Anchor># </span>Using 2016 Numbers</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/o3eLQmCKvwLM5Mt6zNRi-gjgPCenb2n9DcJwq05NX0z-rCfJz_KhxzFUA47374lXPL7b850alyjD2Th445SZTZ1pbzm7LvL1n25EPbWg08rRpCaUYzaeF5xW3X1JVXUI.png width=400 alt=|400></p><a href=#using-2007-numbers><h4 id=using-2007-numbers><span class=hanchor arialabel=Anchor># </span>Using 2007 Numbers</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/zAty2a75O1CdLepl4HE5DzEPutITbTqmNjSkkrvgcHKKbt8Hpe6uwbZnwbBUcOMOsLE2266V2u7CRyL95uBvBJEsjyh3-_yXc34r2XxDGXrpSidsOAA9JssvysxAb9MF.png width=400 alt=|400></p><p><img src=https://remnote-user-data.s3.amazonaws.com/PFm4vN7jILKgGoJcUR9467Ke_gZNJO7PpeIuaYO6X_HD67MP0aIV6xtHFYRyReoCT_aGa2SVsXBszUZv2A5bCG8J2Z36GDbLr3Mp59NsydzwM8cljIw6UJ30zFuVIlgm.png width=400 alt=|400></p><a href=#disk-organisation><h2 id=disk-organisation><span class=hanchor arialabel=Anchor># </span><strong>Disk Organisation</strong></h2></a><a href=#data-items><h3 id=data-items><span class=hanchor arialabel=Anchor># </span>Data Items</h3></a><a href=#representing-times><h4 id=representing-times><span class=hanchor arialabel=Anchor># </span>Representing Times</h4></a><ul><li><strong>Seconds since midnight</strong> (integer)</li><li>ISO8601 times<ul><li>HHMMSSFF (8 characters, to represent fractional seconds)</li><li>HHMMSS (6 characters)</li></ul></li></ul><a href=#representing-characters><h4 id=representing-characters><span class=hanchor arialabel=Anchor># </span>Representing Characters</h4></a><ul><li>Various coding schemes such as<ul><li>utf-8</li><li>ASCII</li></ul></li></ul><a href=#representing-numbers><h4 id=representing-numbers><span class=hanchor arialabel=Anchor># </span>Representing Numbers</h4></a><ul><li>Real Numbers<ul><li>m bits for exponent</li><li>Floating point</li><li>n bits for mantissa</li><li>1 bit sing</li></ul></li><li>(Short) Integer→2 bytes</li></ul><a href=#representing-dates><h4 id=representing-dates><span class=hanchor arialabel=Anchor># </span>Representing Dates</h4></a><ul><li>Days since a given date (integer)<ul><li>1st Jan 1900</li><li>1st Jan 1970 (UNIX epoch)</li></ul></li><li>ISO8601 dates<ul><li>Ordinal dates→YYYYDDD (7 characters)</li><li>Calendar dates→YYYYMMDD (8 characters)</li></ul></li></ul><a href=#representing-booleans><h4 id=representing-booleans><span class=hanchor arialabel=Anchor># </span>Representing Booleans</h4></a><ul><li>1 byte per value<ul><li>False - 00000000</li><li>True - 11111111</li></ul></li></ul><a href=#representing-bit-arrays><h4 id=representing-bit-arrays><span class=hanchor arialabel=Anchor># </span>Representing Bit Arrays</h4></a><p><img src=https://remnote-user-data.s3.amazonaws.com/iSJSlT3dxWIoMpoIk8VYD8DBLD9IOyvMdtefF_-tiLpvQT6Zcbo-xwNQlCChxkllL0aUguvC6aDLxObuAjsKu_11JUCNiw9GETs86M1XtofT5iYcvx5jczDWNSwAcNqh.png width=400 alt=|400></p><a href=#representing-strings><h4 id=representing-strings><span class=hanchor arialabel=Anchor># </span>Representing Strings</h4></a><p>Length given</p><p><img src=https://remnote-user-data.s3.amazonaws.com/juyfvfvI-q7HboT-aHp4L5vpHmSt2pMV23zVu_0jfR99OIrRTlqlBG8XU9_KZyFD-ZX5Sz_1T28q9Vmi4mklN7CSj6GcfFLSB02aZHlBe93YOeyGgADTQG1uwqICY9tM.png width=400 alt=|400>
Fixed length</p><p><img src=https://remnote-user-data.s3.amazonaws.com/bW5e7gl41XzLCi9VKrIGRVmWcKErIayoov_M02pIMGLMthGafQy3KqBLuQEnWroLrAqr1TInAxnAP4comE7vvovPnadpcqe8rJbkwyUEntUISAiwKSsVvZL9RlpPhbDa.png width=400 alt=|400></p><p>Null terminated:</p><p><img src=https://remnote-user-data.s3.amazonaws.com/j3Duq4GS2q-ak6S1QEj9sekyb41Bb1Fx2FR5c1AgcC8qRv4cT0ByC3JD7NbuqwuwKX4wqA1XAFe_34csYdz4WjtsvYi9M_xPIw2U1SM9BqwvHRU_d7mIzsxmBJcnH0eq.png width=400 alt=|400></p><a href=#records><h3 id=records><span class=hanchor arialabel=Anchor># </span>Records</h3></a><a href=#fixed-format-records><h4 id=fixed-format-records><span class=hanchor arialabel=Anchor># </span>Fixed Format Records</h4></a><p>Example
-
<img src=https://remnote-user-data.s3.amazonaws.com/2AJuCsHD_jIsmXxpHP0HLP8she4T2XQQPswtwyTuhCHBEN-LTBcH-GxBsh_rHdoUwHeL2rnmW3Lh2pwN9Cu1_vI_VyvbxP8nbr99nu0gn0rFKLszYMqKeCaBg9Li7uAj.png width=400 alt=|400>
Schema describes the structure of records
- Order in record
- Types of fields
- Number of fields
- Meaning of each field</p><p>Record format that <strong>does</strong> contain a schema</p><p>Fields - Related data items</p><p>Collection of Fields</p><a href=#record-headers><h4 id=record-headers><span class=hanchor arialabel=Anchor># </span>Record Headers</h4></a><ul><li>Data at the beginning of a record that describes the record<ul><li>Such as<ul><li>Record length</li><li>Timestamp</li><li>Record type (points to schema)</li></ul></li></ul></li><li>Intermediate between fixed and variable format</li></ul><a href=#variable-format-records><h4 id=variable-format-records><span class=hanchor arialabel=Anchor># </span>Variable Format Records</h4></a><p>Example
-
<img src=https://remnote-user-data.s3.amazonaws.com/sWjWPbbYRDumAe2rrqbGSU0O51ctPTSC5oXNYtHfUtaaBFjDLTyPYQAoIaWmACTXyNlqQyP2hNbPa0I9ca6e2IkaSEh-gT4-LINWrjjvFl33UKIlrahKTYKNy0Fao07F.png width=400 alt=|400>
May <strong>waste space</strong> compared to fixed format records</p><p>Record format that <strong>does not</strong> contain a schema
- The <strong>record itself</strong> contains the format</p><p>Useful for
- Repeating fields
- Evolving formats
- Spare records</p><a href=#blocks><h4 id=blocks><span class=hanchor arialabel=Anchor># </span>Blocks</h4></a><p><strong>Records</strong> are stored in blocks in memory</p><p>A collection of blocks makeup a <strong>file</strong></p><a href=#block-header><h5 id=block-header><span class=hanchor arialabel=Anchor># </span>Block Header</h5></a><p>Data at the beginning that describes the block</p><p>May contain
- Pointer to free space
- Record directory
- This block ID
- File ID (or RELATION or DB ID)
- Timestamp
- Pointer to other similar blocks
- Type of block</p><a href=#placing-records-in-blocks><h5 id=placing-records-in-blocks><span class=hanchor arialabel=Anchor># </span>Placing Records in Blocks</h5></a><p>Considerations</p><ul><li>Indirection</li><li>Sequencing</li><li>Separating record</li><li>[Spanned Records ](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Spanned Records.md) vs. [Unspanned Records ](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Unspanned Records.md)</li></ul><a href=#separating-records-in-a-block><h5 id=separating-records-in-a-block><span class=hanchor arialabel=Anchor># </span>Separating Records in a Block</h5></a><p>Approaches</p><ul><li>Give record lengths (or offsets)<ul><li>Within each record</li><li>In block header</li></ul></li><li>Use fixed length records - no need to separate<ul><li>Use a special marker to indicate record end</li></ul></li></ul><a href=#spanned-records><h4 id=spanned-records><span class=hanchor arialabel=Anchor># </span>Spanned Records</h4></a><p>Records may be split between blocks</p><p><img src=https://remnote-user-data.s3.amazonaws.com/CEMbeTe62yKKrykKE2au9zwfTJS3oISNy-8wt1iiUcKyVXvwzQzAXzs0TbxUEXpNNCdRuPtpDv1nUnj7a-iUZTdeBADQFh_Db3NxJ2JD3Pa5u4h3DYy24kZuUclun5Oa.png width=400 alt=|400></p><a href=#unspanned-records><h4 id=unspanned-records><span class=hanchor arialabel=Anchor># </span>Unspanned Records</h4></a><p>Each record must fit within a single block</p><p><img src=https://remnote-user-data.s3.amazonaws.com/VjE-0mMcQegvgC1sA-hbkAKlGHDvs4m0CgpVWjq2PG7KTwtS8BSyk5aoMooe3d4Z8vGZGpvV-lBV4Z7KJRcGCOXIPvKtEqLVW6nNrx6kxfJA1HtScu-3g9OzRsfLkj9d.png width=400 alt=|400></p><a href=#spanned-records-advanced-databasesweek-2data-storagedisk-organisationblocksspanned-recordsmd-vs-unspanned-records-advanced-databasesweek-2data-storagedisk-organisationblocksunspanned-recordsmd><h4 id=spanned-records-advanced-databasesweek-2data-storagedisk-organisationblocksspanned-recordsmd-vs-unspanned-records-advanced-databasesweek-2data-storagedisk-organisationblocksunspanned-recordsmd><span class=hanchor arialabel=Anchor># </span>[Spanned Records ](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Spanned Records.md) vs. [Unspanned Records ](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Unspanned Records.md)</h4></a><p><strong>Unspanned records</strong> are much simpler, but may waste space
<strong>Spanned records are essential if record size > block size</strong></p><a href=#sequencing><h4 id=sequencing><span class=hanchor arialabel=Anchor># </span>Sequencing</h4></a><p>Makes it possible to <strong>efficiently read records in order</strong></p><p>Ordering records in file (and block) by some key value</p><a href=#sequencing-options><h5 id=sequencing-options><span class=hanchor arialabel=Anchor># </span>Sequencing Options</h5></a><p>Next record physically contiguous</p><p><img src=https://remnote-user-data.s3.amazonaws.com/abeVc2S3BR_3bcLKVo4EuHhOXa6SxSo4f7vN8bGXvLVp1bmAP98fp8HDqiuUHLY5U7jzBpxDZFpl4RhGlWSa8M-KgSNxeARP3PigVsOqkySQrmetKPkfAk-T_V-mEHcO.png width=400 alt=|400></p><p>Linked records</p><p><img src=https://remnote-user-data.s3.amazonaws.com/rZBK36a1ASNlsSODoNcTnYaT9i6ldEAMtyuYJb-C_pzquXfk_GrvwltiikzSMGzPJqeoubOvWZSKet7t3WfVl-WMfhoTX4Wn_tg60E4tGhDEybAOftd7NE71C-mWdS2m.png width=400 alt=|400></p><a href=#indirection><h4 id=indirection><span class=hanchor arialabel=Anchor># </span>Indirection</h4></a><a href=#indirect-addressing><h5 id=indirect-addressing><span class=hanchor arialabel=Anchor># </span>Indirect Addressing</h5></a><p><img src=https://remnote-user-data.s3.amazonaws.com/1Nw_lVV6oLjtG08_GSD37AFwwSpThpPWWgH8l9ps75O7f5_TuuE9fe8fZZiCorTPSEmu-QJNKlLZ3tcFCnBarHewvzZa5yfD7C8S-YA4JxQ4x1IuyWy7xlo1cv6PQasf.png width=400 alt=|400></p><p>How to refer to records</p><a href=#physical-addressing><h5 id=physical-addressing><span class=hanchor arialabel=Anchor># </span>Physical Addressing</h5></a><p><img src=https://remnote-user-data.s3.amazonaws.com/5h9Q7RTZVpB-DFbkL7-CfC92I7shC22HZNldX62TCQ6iDLK1xI6O3fxx6f-oL_v0qB_dX-TkOa2faMwRL_MsLouZvRmUQ_ikEo0xZNQ_8T6r4pE8Jf0z95CvoUkB3ZAM.png width=400 alt=|400></p><a href=#indirection-in-block><h5 id=indirection-in-block><span class=hanchor arialabel=Anchor># </span>Indirection in Block</h5></a><p>Records can be shifted within block without changing record ID
Access to a given record ID is fast - only a single block access needed
<img src=https://remnote-user-data.s3.amazonaws.com/9DnEcTNJCoJJRueRphu8oH4FnsCy-nSD27IqG_Icsp2izE0bEhob44mS9JRS7iVr8vRpauMeaqL1SLkR2lVOX3CHDz3qxnpOv_Dq5UjWj0HhJYnnBZTW8On-HeLfoVJj.png width=400 alt=|400></p><a href=#address-management><h4 id=address-management><span class=hanchor arialabel=Anchor># </span>Address Management</h4></a><p>Every block and record has two addresses</p><ul><li>A database address (when in secondary storage)</li><li>A memory address (when copied into a buffer)</li></ul><a href=#translation-table><h5 id=translation-table><span class=hanchor arialabel=Anchor># </span>Translation Table</h5></a><p>When in a buffer, using <strong>only memory addresses</strong> is more efficient</p><p>Maps database addresses to memory addresses</p><p><img src=https://remnote-user-data.s3.amazonaws.com/gf0gv7ALODA9wJjuIbeful4N9H-H0DUFuLpbP_u3zygDCsLh3SbGM-kAGLpvs2XAvaaMBFGio3Xwr9XhTxeQ1qmD1tvgar783X2wMbcNL5dzb2RvEr0EpVBPIcAWyDzH.png width=400 alt=|400></p><a href=#pointer-swizzling><h5 id=pointer-swizzling><span class=hanchor arialabel=Anchor># </span>Pointer Swizzling</h5></a><p>General term for techniques used to translate database address space to virtual memory address space</p><p>[Translation Table](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Address Management/Translation Table.md) is used to <strong>convert pointers</strong> (and to record the conversion)</p><p>Swizzling</p><p><img src=https://remnote-user-data.s3.amazonaws.com/lod_q8pNMl62w3u8BkWyh8bgbisvAXEXmfUs0Zb6JJGbHcWK0BK0oxymM1p2Z3K6rP12uYusf7WNEhz92OJHHIP5SDcbH1E1Nf4ELyl7kHiQs5v0UqsK3yDVHvq37P-y.gif width=400 alt=|400></p><a href=#swizzling-strategies><h6 id=swizzling-strategies><span class=hanchor arialabel=Anchor># </span>Swizzling Strategies</h6></a><p>Automatic</p><ul><li>Replace pointers in blocks with new entires</li><li>As soon as block brought into memory, locate all pointers and addresses and enter them into translation table</li></ul><p>No Swizzling ↓</p><ul><li>Use [Translation Table](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Address Management/Translation Table.md) to map pointers on each dereference</li></ul><p>On Demand</p><ul><li>Leave all pointers unswizzled when block is brought into memory</li><li>Swizzle pointers only when dereferenced</li></ul><p>Swizzled pointers typically consist of
- One bit to indicate whether the pointer is a database address or a memory address
- A database or memory pointer, as appropriate</p><a href=#unswizzling><h6 id=unswizzling><span class=hanchor arialabel=Anchor># </span>Unswizzling</h6></a><p>Rewrite memory addresses as database addresses</p><ul><li>Reverse of the swizzling operation</li></ul><p>Done by using the [Translation Table](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Address Management/Translation Table.md) in the reverse direction</p><p>The Unswizzling-Unpinning Relationship</p><ul><li>However, a block may be pinned if there are swizzled pointers that point to that block</li><li>In order to unpin the block (to allow the frame to be reused), we need to unswizzle any pointers to that block</li><li>Blocks in the buffer pool are pinned to indicate that some part of the DBMS is using their contents</li></ul><a href=#insertion-and-deletion><h4 id=insertion-and-deletion><span class=hanchor arialabel=Anchor># </span>Insertion and Deletion</h4></a><a href=#deletion><h5 id=deletion><span class=hanchor arialabel=Anchor># </span>Deletion</h5></a><p>Or mark space as deleted</p><a href=#deletion-marking><h6 id=deletion-marking><span class=hanchor arialabel=Anchor># </span>Deletion Marking</h6></a><p>May need a chain of deleted record (for re-use)</p><p>Need a way to mark deleted records, such as</p><ul><li>Delete field</li><li>In map</li><li>Special characters</li></ul><a href=#deletion-considerations><h6 id=deletion-considerations><span class=hanchor arialabel=Anchor># </span>Deletion Considerations</h6></a><p>How do we deal with dangling pointers?</p><p>Tombstones</p><ul><li>Leave a mark in a map or old location</li><li>Physical IDs<ul><li><img src=https://remnote-user-data.s3.amazonaws.com/-rKO6VQfwywOsnPen3zhIkfkB_OpCox9NIk9Pw-gonVw_LwyyBPX3muDuRMgiFhF2Q3drEZESRbafPUNd5wp4cSmYviHIZMJXClr1HHwAjRtb7c9aDE3WTWSRhxFY8LI.png width=400 alt=|400></li></ul></li><li>Logical IDs<ul><li><img src=https://remnote-user-data.s3.amazonaws.com/sWeunCCmyh7BdBba0gG6Vcur31EDnSItkALcOqq9byfMQapPNNShkslyBgVs6PD-QsDn0kepnXPD8347fNdo57K9MHCGmeaeWT-wYREatl4r7To8OKTOGkBCG4xq4B6u.png width=400 alt=|400></li></ul></li></ul><p>Immediately reclaim space</p><a href=#insertion><h5 id=insertion><span class=hanchor arialabel=Anchor># </span>Insertion</h5></a><p>Records in Sequence</p><ul><li>Not too hard if free space is &ldquo;close by&rdquo;</li><li>Or use overflow</li></ul><p>Records not in Sequence</p><ul><li>Harder when records are variable size</li><li>Insert new record at end of file or in deleted slot</li></ul><p>Insertion Considerations</p><ul><li>How often should we reorganise files</li><li>How much free space to leave<ul><li>In each cylinder?</li><li>In each track?</li><li>In each block?</li></ul></li><li></li></ul></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script async src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://ik1g19.github.io/UoS-Notes/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by Isaac Klugman using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://ik1g19.github.io/UoS-Notes/>Home</a></li><li><a href=https://twitter.com/_jzhao>Twitter</a></li><li><a href=https://github.com/jackyzha0>GitHub</a></li></ul></footer></div></div></body></html>