<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Parallel Databases I/O Bottleneck Access time to secondary storage (hard disks) dominates performance of DBMSes Parallel Databases↔Increase I/O bandwidth by spreading data across a number of disks Have the ability to split processing of data and access to data across multiple processors}} and {{multiple disks Parallel Architectures Monolithic Architecture ↓  Single Processor (P)  Tasks may be interleaved Not true parallelism  Single bank of memory (M)  Used by transactions Buffer pool for staging data to/from disc  Single disc Shared Memory Architecture ↓  Tightly coupled Symmetric Multiprocessor (SMP) Software  Less complex database software Limited scalability Single buffer Single database storage  Shared Disc Architecture ↓  Loosely coupled Distributed memory S=Switch Software  Avoids memory bottleneck Same page may be in more than one buffer at once - can lead to incoherence Needs global locking mechanism Single logical database storage Each processor has its own database buffer  Shared Nothing Architecture ↓  Massively parallel Loosely coupled High speed interconnect (between processors) Software  Each processor owns part of the data Each processor has its own database buffer One page is only in one local buffer}} - no {{buffer incoherence Needs ↓  Distributed deadlock detection Multiphase commit protocol To break SQL requests into multiple sub-requests    Challenges ↓  Partitioning the data Keeping the partitioned data balanced Splitting up queries to get the work done Concurrency control and avoiding distributed deadlock Dealing with node failure  Parallel Query Processing ↓ Dividing up the work  Inter-Query Parallelism ↓ Different queries/transactions execute on different processors Improves throughput Intra-Query Parallelism Intra-Operator (Horizontal) Parallelism ↓  Operators decomposed into different operator instances, which perform the same operation on different subsets of data    Inter-Operator (Vertical) Parallelism ↓  Operations are overlapped Pipeline data from one stage to the next without materialisation  Bushy (Independent) Parallelism ↓  Subtrees in query plan are executed concurrently  Intra-Operator Parallelism Partitioning ↓ Decomposition of operators relies on data being partitioned across the servers that comprise the parallel database Partitions should aim to spread I/O load evenly across servers Range Partitioning ↓     Hash Partitioning ↓     Schema Partitioning ↓     Rebalancing Data ↓     Example Query: SELECT c1, c2 FROM t WHERE c1>5."><meta property="og:title" content="Week 8"><meta property="og:description" content="Parallel Databases I/O Bottleneck Access time to secondary storage (hard disks) dominates performance of DBMSes Parallel Databases↔Increase I/O bandwidth by spreading data across a number of disks Have the ability to split processing of data and access to data across multiple processors}} and {{multiple disks Parallel Architectures Monolithic Architecture ↓  Single Processor (P)  Tasks may be interleaved Not true parallelism  Single bank of memory (M)  Used by transactions Buffer pool for staging data to/from disc  Single disc Shared Memory Architecture ↓  Tightly coupled Symmetric Multiprocessor (SMP) Software  Less complex database software Limited scalability Single buffer Single database storage  Shared Disc Architecture ↓  Loosely coupled Distributed memory S=Switch Software  Avoids memory bottleneck Same page may be in more than one buffer at once - can lead to incoherence Needs global locking mechanism Single logical database storage Each processor has its own database buffer  Shared Nothing Architecture ↓  Massively parallel Loosely coupled High speed interconnect (between processors) Software  Each processor owns part of the data Each processor has its own database buffer One page is only in one local buffer}} - no {{buffer incoherence Needs ↓  Distributed deadlock detection Multiphase commit protocol To break SQL requests into multiple sub-requests    Challenges ↓  Partitioning the data Keeping the partitioned data balanced Splitting up queries to get the work done Concurrency control and avoiding distributed deadlock Dealing with node failure  Parallel Query Processing ↓ Dividing up the work  Inter-Query Parallelism ↓ Different queries/transactions execute on different processors Improves throughput Intra-Query Parallelism Intra-Operator (Horizontal) Parallelism ↓  Operators decomposed into different operator instances, which perform the same operation on different subsets of data    Inter-Operator (Vertical) Parallelism ↓  Operations are overlapped Pipeline data from one stage to the next without materialisation  Bushy (Independent) Parallelism ↓  Subtrees in query plan are executed concurrently  Intra-Operator Parallelism Partitioning ↓ Decomposition of operators relies on data being partitioned across the servers that comprise the parallel database Partitions should aim to spread I/O load evenly across servers Range Partitioning ↓     Hash Partitioning ↓     Schema Partitioning ↓     Rebalancing Data ↓     Example Query: SELECT c1, c2 FROM t WHERE c1>5."><meta property="og:type" content="website"><meta property="og:image" content="https://ik1g19.github.io/UoS-Notes/icon.png"><meta property="og:url" content="https://ik1g19.github.io/UoS-Notes/notes/Advanced-Databases/Week-8/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="Week 8"><meta name=twitter:description content="Parallel Databases I/O Bottleneck Access time to secondary storage (hard disks) dominates performance of DBMSes Parallel Databases↔Increase I/O bandwidth by spreading data across a number of disks Have the ability to split processing of data and access to data across multiple processors}} and {{multiple disks Parallel Architectures Monolithic Architecture ↓  Single Processor (P)  Tasks may be interleaved Not true parallelism  Single bank of memory (M)  Used by transactions Buffer pool for staging data to/from disc  Single disc Shared Memory Architecture ↓  Tightly coupled Symmetric Multiprocessor (SMP) Software  Less complex database software Limited scalability Single buffer Single database storage  Shared Disc Architecture ↓  Loosely coupled Distributed memory S=Switch Software  Avoids memory bottleneck Same page may be in more than one buffer at once - can lead to incoherence Needs global locking mechanism Single logical database storage Each processor has its own database buffer  Shared Nothing Architecture ↓  Massively parallel Loosely coupled High speed interconnect (between processors) Software  Each processor owns part of the data Each processor has its own database buffer One page is only in one local buffer}} - no {{buffer incoherence Needs ↓  Distributed deadlock detection Multiphase commit protocol To break SQL requests into multiple sub-requests    Challenges ↓  Partitioning the data Keeping the partitioned data balanced Splitting up queries to get the work done Concurrency control and avoiding distributed deadlock Dealing with node failure  Parallel Query Processing ↓ Dividing up the work  Inter-Query Parallelism ↓ Different queries/transactions execute on different processors Improves throughput Intra-Query Parallelism Intra-Operator (Horizontal) Parallelism ↓  Operators decomposed into different operator instances, which perform the same operation on different subsets of data    Inter-Operator (Vertical) Parallelism ↓  Operations are overlapped Pipeline data from one stage to the next without materialisation  Bushy (Independent) Parallelism ↓  Subtrees in query plan are executed concurrently  Intra-Operator Parallelism Partitioning ↓ Decomposition of operators relies on data being partitioned across the servers that comprise the parallel database Partitions should aim to spread I/O load evenly across servers Range Partitioning ↓     Hash Partitioning ↓     Schema Partitioning ↓     Rebalancing Data ↓     Example Query: SELECT c1, c2 FROM t WHERE c1>5."><meta name=twitter:image content="https://ik1g19.github.io/UoS-Notes/icon.png"><meta name=twitter:site content="_jzhao"><title>Week 8</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://ik1g19.github.io/UoS-Notes//icon.png><link href=https://ik1g19.github.io/UoS-Notes/styles.80333fa2099c0bee674efa435fde378c.min.css rel=stylesheet><link href=https://ik1g19.github.io/UoS-Notes/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://ik1g19.github.io/UoS-Notes/js/darkmode.fdbb50a651b073e7d85910aebde4469d.min.js></script>
<script src=https://ik1g19.github.io/UoS-Notes/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script async src=https://ik1g19.github.io/UoS-Notes/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://ik1g19.github.io/UoS-Notes/",fetchData=Promise.all([fetch("https://ik1g19.github.io/UoS-Notes/indices/linkIndex.4cd7744b37da745103d2e306cd2cd001.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://ik1g19.github.io/UoS-Notes/indices/contentIndex.a1e306a3e6a8cedcc8275a04564ca752.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://ik1g19.github.io/UoS-Notes",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://ik1g19.github.io/UoS-Notes",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/ik1g19.github.io\/UoS-Notes\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=ik1g19.github.io/UoS-Notes src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://ik1g19.github.io/UoS-Notes/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://ik1g19.github.io/UoS-Notes/>My UoS Notes</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Week 8</h1><p class=meta>Last updated
Apr 11, 2023
<a href=https://github.com/ik1g19/notes/Advanced%20Databases/Week%208.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#io-bottleneck>I/O Bottleneck</a><ol><li><a href=#access-time-to-secondary-storage-hard-disks-dominates-performance-of-dbmses>Access time to <strong>secondary storage (hard disks)</strong> dominates performance of DBMSes</a></li><li><a href=#parallel-databasesincrease-io-bandwidth-by-spreading-data-across-a-number-of-disks>Parallel Databases↔Increase I/O bandwidth by spreading data across a number of disks</a></li></ol></li><li><a href=#parallel-architectures>Parallel Architectures</a><ol><li><a href=#monolithic-architecture->Monolithic Architecture ↓</a></li><li><a href=#shared-memory-architecture->Shared Memory Architecture ↓</a></li><li><a href=#shared-disc-architecture->Shared Disc Architecture ↓</a></li><li><a href=#shared-nothing-architecture->Shared Nothing Architecture ↓</a></li></ol></li><li><a href=#parallel-query-processing->Parallel Query Processing ↓</a><ol><li><a href=#dividing-up-the-work>Dividing up the work</a></li><li><a href=#400httpsremnote-user-datas3amazonawscomagkv--scx2xxjqcazlez6wuvofjt6g48ytznvdx4mybtlaelyoy-leb-slmaq7xjc0rdueuskedme5jbqsfuivgslbeohox56daihcpuyzn3wteckmgu7u5frfkxqyg-png><img src=https://remnote-user-data.s3.amazonaws.com/AGkV--Scx2xXjQcazlEZ6wuvOfjT6g48yTZnvdx4MYbtLaeLyOy-Leb-sLmAQ7XjC0rDUeuSkedmE5jBQSFUiVgSlbEoHOX56daiHcPUYzn3WteckMGu7u5fRFkxqYg-.png alt=|400></a></li><li><a href=#inter-query-parallelism->Inter-Query Parallelism ↓</a></li><li><a href=#intra-query-parallelism>Intra-Query Parallelism</a></li></ol></li><li><a href=#intra-operator-parallelism>Intra-Operator Parallelism</a><ol><li><a href=#partitioning->Partitioning ↓</a></li><li><a href=#example-query-select-c1-c2-from-t-where-c155>Example Query: SELECT c1, c2 FROM t WHERE c1>5.5</a></li></ol></li><li><a href=#inter-operator-parallelism->Inter-Operator Parallelism ↓</a><ol><li><a href=#allows-operators-with-a-producer-consumer-dependency-to-be-executed-concurrently>Allows operators with a producer-consumer dependency to be executed concurrently</a></li><li><a href=#results-produced-by-producer-are-pipelined-directly-to-consumer>Results produced by producer are pipelined directly to consumer</a></li><li><a href=#consumer-can-start-before-producer-has-produced-all-results>Consumer can start before producer has produced all results</a></li><li><a href=#best-suited-to-single-pass-operators>Best suited to single-pass operators</a></li><li><a href=#400httpsremnote-user-datas3amazonawscomphrvbl4veb2a-pthoct16hivalzlonj-ojfd58ay1p1_hfw_nncxihj5drnb7m40med-h8kkyifbyfgxdlq6m0zmjd5bdm0ifzhei87qnpwyzr4l1olboqpxmomrtxb7png><img src=https://remnote-user-data.s3.amazonaws.com/phRVbL4vEB2a-PThOcT16hivaLZLoNJ-OJFd58AY1p1_HFw_NnCXiHJ5dRNB7M40mEd-H8KkYIFByfGXDLq6M0zMJD5bdM0IFzhei87QnPwYzr4l1olBOQpXMOmrTXB7.png alt=|400></a></li><li><a href=#intra-inter-operator-parallelism->Intra-Inter-Operator Parallelism ↓</a></li></ol></li><li><a href=#volcano-architecture>Volcano Architecture</a><ol><li><a href=#exchange-operator>Exchange Operator</a></li></ol></li><li><a href=#bushy-parallelism->Bushy Parallelism ↓</a><ol><li><a href=#execute-subtrees-concurrently>Execute subtrees concurrently</a></li><li><a href=#400httpsremnote-user-datas3amazonawscom5jyuhxop4wtwninvfjuh4thyqpwnsahfvsivnaeavwxuzx7dth-3mpyoxq_kwce8nzq9fxzxty7sztkoykb6agnk56os6gadqvtchdvqasxfbsb-2ztultonqj7j8qnjpng><img src=https://remnote-user-data.s3.amazonaws.com/5jYUHxoP4wtwnInvFJUh4tHYqPwNsahFVsivnaEaVwxUzX7dTH-3mpyoxq_kwCE8nzq9fXzXtY7SztkOYkb6AgNk56oS6gAdQvTchdVQaSxfbsb-2zTUlToNqj7j8qNj.png alt=|400></a></li></ol></li><li><a href=#parallel-query-processing>Parallel Query Processing</a><ol><li><a href=#400httpsremnote-user-datas3amazonawscomejayctrjmfg5tio8lxj7lhj--hsrpxscmsulq-7xbnz5tyipclpgy0etdt-3yq4jctnoydxg2eb8gvz5td1riq4cr41jccwxia3i4aj0utvfhfi17ieowm0pte8m8xsfpng><img src=https://remnote-user-data.s3.amazonaws.com/EjayCtrjmFg5TiO8LXj7LhJ--HsRPxscMSULQ-7XBnz5tYiPClpGY0etdT-3yQ4JctnOYDXg2EB8gVz5TD1rIq4cR41jccwxIa3I4aj0utvfhFi17iEOWM0pTE8M8XsF.png alt=|400></a></li></ol></li><li><a href=#concurrency-control>Concurrency Control</a><ol><li><a href=#concurrency-and-parallelism>Concurrency and Parallelism</a></li><li><a href=#reliability>Reliability</a></li></ol></li></ol><ol><li><a href=#horizontal-fragmentation>Horizontal Fragmentation</a><ol><li><a href=#each-fragment-contains-a-subset-of-the-tuples-of-the-global-relation>Each fragment contains a subset of the tuples of the global relation</a></li><li><a href=#400httpsremnote-user-datas3amazonawscomrh6v1rq-bm5_zpwa2ixnhxouxi2ynozroqzrw1aohdi0z1coiqx2n_e_bnuvzrq-idvuess_aeqyiomr3dfrpwqa3lhqlatmbqqn6ja4bu_75eqvh13gskgk5pl9_8bepng><img src=https://remnote-user-data.s3.amazonaws.com/RH6v1RQ-bm5_ZpWa2IxnhXoUxI2ynOzRoQzRw1aoHDI0Z1cOIqX2N_e_BNUvZRQ-iDVUesS_AeqYiOmr3DFRPwQa3lhqlATmbqqn6ja4bU_75eqvh13gSKGk5pl9_8Be.png alt=|400></a></li></ol></li><li><a href=#vertical-fragmentation>Vertical Fragmentation</a><ol><li><a href=#400httpsremnote-user-datas3amazonawscomukrmhekuxvrwky8a4g9qlashpwvaj4nk8-4hwcanzvaohkgbceq8jnw9o0aw_ojkzbwhetdqjfge_7sw6qyiw1bkyo8clus2jwi7x-t7-t0ew3759o1ab6hn6l9uglofpng><img src=https://remnote-user-data.s3.amazonaws.com/uKrmhEKuXvRwky8a4g9QlASHpwvaJ4Nk8-4HwCANZvAohKgbcEq8jNW9O0AW_oJKzbWheTdqjFGE_7Sw6qyIw1BKYo8cluS2Jwi7x-T7-T0eW3759o1AB6HN6l9UGLOf.png alt=|400></a></li><li><a href=#each-fragment-contains-a-subset-of-the-attributes-of-the-global-relation>Each fragment contains a subset of the attributes of the global relation</a></li></ol></li><li><a href=#reduction-for-horizontal-fragmentation>Reduction for Horizontal Fragmentation</a><ol><li><a href=#400httpsremnote-user-datas3amazonawscomtimwlmcyqm8ofbof0kb-4yrtsce0ezw7cqybifhs3sumqepdvfcbsgsnozflosrfga2535lpgpy5hshxpgxg8ncm1e68fpvdd2azdu2so52bu0tod3193pc6fc4wtfabpng><img src=https://remnote-user-data.s3.amazonaws.com/TImwLmcyqm8OFboF0kB-4YrTSce0ezw7cqYbifhs3SUmqePDVFcbsGsNOzFLoSrFga2535lPgpy5HshxPGxG8ncm1e68FpVdD2AzDU2so52Bu0Tod3193Pc6fc4WTfaB.png alt=|400></a></li></ol></li><li><a href=#horizontal-selection-reduction>Horizontal Selection Reduction</a><ol><li><a href=#400httpsremnote-user-datas3amazonawscomkqcx3ksme6xepgzblfls2v_rcckjig6jmcnrmlpq4zqn8-hnogo9khbh0ee0pkjc4evrotqnzyqxvoahcw-qqdym4uoiqhewnw6baqibqbxpxadsnmu9j53tcst0u83upng><img src=https://remnote-user-data.s3.amazonaws.com/kQcx3KSme6XEPgZBlflS2v_RCCKjIg6JMcnRMLPQ4ZqN8-HNogO9khbH0Ee0PKJC4evroTQnZyQxvoaHcw-qqDYm4uOIQhewNW6baqIBQBXPXADSnmU9j53tCST0U83U.png alt=|400></a></li></ol></li><li><a href=#horizontal-join-reduction>Horizontal Join Reduction</a><ol><li><a href=#400httpsremnote-user-datas3amazonawscomyz7w7pbbiiqwaklxqsr_kv548ytwcslxzncsmfptko2fz890exr7eellmmz2m2lgeq4ikb0k9xaorjxcsote0f0mkf0snf_nvnvmv1sdj8lbpm2d0g_evqym3xawmt4lpng><img src=https://remnote-user-data.s3.amazonaws.com/yz7w7PbBiIqwakLXQSR_Kv548YTWcsLXznCsmfpTkO2fz890exR7eEllMmZ2M2LgEq4ikb0k9xaorJxCsOtE0f0MkF0SNf_nVNVMv1sDj8lbPm2D0G_evqyM3xAwMT4L.png alt=|400></a></li></ol></li><li><a href=#2pc>2PC</a><ol><li><a href=#linear-2pc>Linear 2PC</a></li><li><a href=#centralised-2pc>Centralised 2PC</a></li></ol></li></ol></nav></details></aside><a href=#parallel-databases><h1 id=parallel-databases><span class=hanchor arialabel=Anchor># </span>Parallel Databases</h1></a><a href=#io-bottleneck><h2 id=io-bottleneck><span class=hanchor arialabel=Anchor># </span>I/O Bottleneck</h2></a><a href=#access-time-to-secondary-storage-hard-disks-dominates-performance-of-dbmses><h3 id=access-time-to-secondary-storage-hard-disks-dominates-performance-of-dbmses><span class=hanchor arialabel=Anchor># </span>Access time to <strong>secondary storage (hard disks)</strong> dominates performance of DBMSes</h3></a><a href=#parallel-databasesincrease-io-bandwidth-by-spreading-data-across-a-number-of-disks><h3 id=parallel-databasesincrease-io-bandwidth-by-spreading-data-across-a-number-of-disks><span class=hanchor arialabel=Anchor># </span>Parallel Databases↔Increase I/O bandwidth by spreading data across a number of disks</h3></a><a href=#have-the-ability-to-split-processing-of-data-and-access-to-data-across-multiple-processors-and-multiple-disks><h4 id=have-the-ability-to-split-processing-of-data-and-access-to-data-across-multiple-processors-and-multiple-disks><span class=hanchor arialabel=Anchor># </span>Have the ability to split processing of data and access to data across <strong>multiple processors}} and {{multiple disks</strong></h4></a><a href=#parallel-architectures><h2 id=parallel-architectures><span class=hanchor arialabel=Anchor># </span>Parallel Architectures</h2></a><a href=#monolithic-architecture-><h3 id=monolithic-architecture-><span class=hanchor arialabel=Anchor># </span>Monolithic Architecture ↓</h3></a><h4 id=400httpsremnote-user-datas3amazonawscom9ab8b42rc-rcmoekcb-phbkory6zwxedrj709t-7rmvnt1yfed79atgfuem4rq9l1suyedw1-4mnjtzvi5tynut7aeeha6om5r_f-bq5_rpok6m_yq1lxl_q52pkhjydpng><img src=https://remnote-user-data.s3.amazonaws.com/9ab8b42rC-RcMOeKCb-PHBkorY6ZWXedrj709t-7RMvnT1YFED79atGfUEm4rQ9L1SuyEDW1-4mnjTzVi5Tynut7AEEhA6oM5R_f-BQ5_Rpok6m_Yq1LxL_q52pkhJyd.png width=400 alt=|400></h4><a href=#single-processor-p><h4 id=single-processor-p><span class=hanchor arialabel=Anchor># </span>Single Processor (P)</h4></a><ul><li>Tasks may be interleaved</li><li>Not true parallelism</li></ul><a href=#single-bank-of-memory-m><h4 id=single-bank-of-memory-m><span class=hanchor arialabel=Anchor># </span>Single bank of memory (M)</h4></a><ul><li>Used by transactions</li><li>Buffer pool for staging data to/from disc</li></ul><a href=#single-disc><h4 id=single-disc><span class=hanchor arialabel=Anchor># </span>Single disc</h4></a><a href=#shared-memory-architecture-><h3 id=shared-memory-architecture-><span class=hanchor arialabel=Anchor># </span>Shared Memory Architecture ↓</h3></a><h4 id=400httpsremnote-user-datas3amazonawscomhlb9mir60tkuxpnmidz73m6idn0mej1kzaqfaiqjj_fzlzcixd6duppjurjv0njm4bdgdc2eh90kre0lwikjkvtj1tznq03jrzmp_weliosuereoirppxid4wjfqrb4lpng><img src=https://remnote-user-data.s3.amazonaws.com/hLB9mIr60tkUXpNmIdz73M6IdN0MeJ1KzaQFaiqjJ_fZlzciXd6dUPpjuRjV0njM4bdgdc2eH90KRE0LwIkjKVtj1TznQ03JRZmp_WEliOSuErEOIrpPxID4wjfQRB4l.png width=400 alt=|400></h4><a href=#tightly-coupled><h4 id=tightly-coupled><span class=hanchor arialabel=Anchor># </span>Tightly coupled</h4></a><a href=#symmetric-multiprocessor-smp><h4 id=symmetric-multiprocessor-smp><span class=hanchor arialabel=Anchor># </span>Symmetric Multiprocessor (SMP)</h4></a><a href=#software><h4 id=software><span class=hanchor arialabel=Anchor># </span>Software</h4></a><ul><li><strong>Less</strong> complex database software</li><li><strong>Limited</strong> scalability</li><li><strong>Single</strong> buffer</li><li><strong>Single</strong> database storage</li></ul><a href=#shared-disc-architecture-><h3 id=shared-disc-architecture-><span class=hanchor arialabel=Anchor># </span>Shared Disc Architecture ↓</h3></a><h4 id=400httpsremnote-user-datas3amazonawscomlywk5dbzeewrsbh4sovm_3as1w2x_99listmpe-leritprcdnuid5kq76uchjhd6ed__b8cbsd1hwlrmmag4zbbge-muscaxyp974vdbhcdnolusnfn1dt8wyphjb0pvpng><img src=https://remnote-user-data.s3.amazonaws.com/LywK5DbzeewRSBH4sovm_3aS1w2x_99lIsTMPE-LeritPRcDNuId5KQ76uchJHd6Ed__b8cBSd1HWlrmMAG4zbbge-MuSCAxyp974VdBHcdnOlUSNFN1dt8WYpHJB0pV.png width=400 alt=|400></h4><a href=#loosely-coupled><h4 id=loosely-coupled><span class=hanchor arialabel=Anchor># </span>Loosely coupled</h4></a><a href=#distributed-memory><h4 id=distributed-memory><span class=hanchor arialabel=Anchor># </span>Distributed memory</h4></a><a href=#sswitch><h4 id=sswitch><span class=hanchor arialabel=Anchor># </span>S=Switch</h4></a><a href=#software-1><h4 id=software-1><span class=hanchor arialabel=Anchor># </span>Software</h4></a><ul><li>Avoids <strong>memory bottleneck</strong></li><li>Same page may be in <strong>more than one buffer at once - can lead to incoherence</strong></li><li>Needs <strong>global locking mechanism</strong></li><li><strong>Single logical</strong> database storage</li><li>Each processor has its own <strong>database buffer</strong></li></ul><a href=#shared-nothing-architecture-><h3 id=shared-nothing-architecture-><span class=hanchor arialabel=Anchor># </span>Shared Nothing Architecture ↓</h3></a><h4 id=400httpsremnote-user-datas3amazonawscomnixpvaabllouadmvm6wcvtdbqf3imv4e-yktor2ydmig0avcl3mtt0trxinhnhstqwugrom3mldeqpivr-pmrhg3rtb69fbnctzhbwzjqcmbdxfwvpvyohzeceby4bm7png><img src=https://remnote-user-data.s3.amazonaws.com/NiXpvaaBllOUaDMvM6wcVTdBQf3IMV4e-yktoR2YdMig0aVCl3MtT0trXiNhnHStQWuGROm3MLdEQpIVr-pmRhg3rtB69FBnCTzhBWZjQcMBdXfWvpvyOhzeCeBY4Bm7.png width=400 alt=|400></h4><a href=#massively-parallel><h4 id=massively-parallel><span class=hanchor arialabel=Anchor># </span>Massively parallel</h4></a><a href=#loosely-coupled-1><h4 id=loosely-coupled-1><span class=hanchor arialabel=Anchor># </span>Loosely coupled</h4></a><a href=#high-speed-interconnect-between-processors><h4 id=high-speed-interconnect-between-processors><span class=hanchor arialabel=Anchor># </span>High speed interconnect (between processors)</h4></a><a href=#software-2><h4 id=software-2><span class=hanchor arialabel=Anchor># </span>Software</h4></a><ul><li>Each processor owns part of the data</li><li>Each processor has its own database buffer</li><li>One page is only in <strong>one local buffer}} - no {{buffer incoherence</strong></li><li>Needs ↓<ul><li>Distributed deadlock detection</li><li>Multiphase commit protocol</li><li>To break SQL requests into multiple sub-requests</li></ul></li></ul><a href=#challenges-><h4 id=challenges-><span class=hanchor arialabel=Anchor># </span>Challenges ↓</h4></a><ul><li>Partitioning the data</li><li>Keeping the partitioned data balanced</li><li>Splitting up queries to get the work done</li><li>Concurrency control and avoiding distributed deadlock</li><li>Dealing with node failure</li></ul><a href=#parallel-query-processing-><h2 id=parallel-query-processing-><span class=hanchor arialabel=Anchor># </span>Parallel Query Processing ↓</h2></a><a href=#dividing-up-the-work><h3 id=dividing-up-the-work><span class=hanchor arialabel=Anchor># </span>Dividing up the work</h3></a><h3 id=400httpsremnote-user-datas3amazonawscomagkv--scx2xxjqcazlez6wuvofjt6g48ytznvdx4mybtlaelyoy-leb-slmaq7xjc0rdueuskedme5jbqsfuivgslbeohox56daihcpuyzn3wteckmgu7u5frfkxqyg-png><img src=https://remnote-user-data.s3.amazonaws.com/AGkV--Scx2xXjQcazlEZ6wuvOfjT6g48yTZnvdx4MYbtLaeLyOy-Leb-sLmAQ7XjC0rDUeuSkedmE5jBQSFUiVgSlbEoHOX56daiHcPUYzn3WteckMGu7u5fRFkxqYg-.png width=400 alt=|400></h3><a href=#inter-query-parallelism-><h3 id=inter-query-parallelism-><span class=hanchor arialabel=Anchor># </span>Inter-Query Parallelism ↓</h3></a><a href=#different-queriestransactions-execute-on-different-processors><h4 id=different-queriestransactions-execute-on-different-processors><span class=hanchor arialabel=Anchor># </span>Different queries/transactions execute on different processors</h4></a><a href=#improves-throughput><h4 id=improves-throughput><span class=hanchor arialabel=Anchor># </span>Improves <strong>throughput</strong></h4></a><a href=#intra-query-parallelism><h3 id=intra-query-parallelism><span class=hanchor arialabel=Anchor># </span>Intra-Query Parallelism</h3></a><a href=#intra-operator-horizontal-parallelism-><h4 id=intra-operator-horizontal-parallelism-><span class=hanchor arialabel=Anchor># </span>Intra-Operator (Horizontal) Parallelism ↓</h4></a><ul><li>Operators decomposed into different operator instances, which perform the same operation on different subsets of data</li><li><img src=https://remnote-user-data.s3.amazonaws.com/Hi_RyYAM8TWFeCfAgWLkvJPw5i7VCYR8HEjgsMwhwgeJhw54j-Bz0xRoVJotR699NYzBuR2xYyLijVZqNmL8Xwhn2jTktCS3vI2g56K_MOUopa8Fy3O3LXHWC3qigZPM.png width=400 alt=|400></li></ul><a href=#inter-operator-vertical-parallelism-><h4 id=inter-operator-vertical-parallelism-><span class=hanchor arialabel=Anchor># </span>Inter-Operator (Vertical) Parallelism ↓</h4></a><ul><li>Operations are overlapped</li><li>Pipeline data from one stage to the next without materialisation</li></ul><a href=#bushy-independent-parallelism-><h4 id=bushy-independent-parallelism-><span class=hanchor arialabel=Anchor># </span>Bushy (Independent) Parallelism ↓</h4></a><ul><li>Subtrees in query plan are executed concurrently</li></ul><a href=#intra-operator-parallelism><h2 id=intra-operator-parallelism><span class=hanchor arialabel=Anchor># </span>Intra-Operator Parallelism</h2></a><a href=#partitioning-><h3 id=partitioning-><span class=hanchor arialabel=Anchor># </span>Partitioning ↓</h3></a><a href=#decomposition-of-operators-relies-on-data-being-partitioned-across-the-servers-that-comprise-the-parallel-database><h4 id=decomposition-of-operators-relies-on-data-being-partitioned-across-the-servers-that-comprise-the-parallel-database><span class=hanchor arialabel=Anchor># </span>Decomposition of operators relies on data being partitioned across <strong>the servers that comprise the parallel database</strong></h4></a><a href=#partitions-should-aim-to-spread-io-load-evenly-across-servers><h4 id=partitions-should-aim-to-spread-io-load-evenly-across-servers><span class=hanchor arialabel=Anchor># </span>Partitions should aim to <strong>spread I/O load evenly across servers</strong></h4></a><a href=#range-partitioning-><h4 id=range-partitioning-><span class=hanchor arialabel=Anchor># </span>Range Partitioning ↓</h4></a><ul><li><img src=https://remnote-user-data.s3.amazonaws.com/z-TDze1FggyBtYW7bstU2ed0yiaiI53jTgr6em7Gm1QOGys3B_ue-oU651jWM3fHYWmikoSKvATNP_YwgHtyFz8B9R9HCgkobT_4JV9VxFIS6xLOVsn05OYmtJVVcGej.png width=400 alt=|400></li></ul><a href=#hash-partitioning-><h4 id=hash-partitioning-><span class=hanchor arialabel=Anchor># </span>Hash Partitioning ↓</h4></a><ul><li><img src=https://remnote-user-data.s3.amazonaws.com/it8xYMz__t-NKydAagoR-Fmr3VkwGtNYDDFEYLO8-zZ28nZxOl0IitaO9BLl8E1jl5UyVaHAf64yhxGtwGbuRip7kP-4rdQmI7S7GxCYLuOx-8fRtPKMHviMDqz0VGKl.png width=400 alt=|400></li></ul><a href=#schema-partitioning-><h4 id=schema-partitioning-><span class=hanchor arialabel=Anchor># </span>Schema Partitioning ↓</h4></a><ul><li><img src=https://remnote-user-data.s3.amazonaws.com/wGeNsZ-Mqdj4Rzw84WWNPwaTLKwMRh5boVAeGF32xWq-5xln8F2_MNAIl4HetWtkhHL9o2ZEy5QO3xmzFMTPBEoF7YDDuub-33Or15aqctk2KzJIX8JJ9vsDyQZ4eYop.png width=400 alt=|400></li></ul><a href=#rebalancing-data-><h4 id=rebalancing-data-><span class=hanchor arialabel=Anchor># </span>Rebalancing Data ↓</h4></a><ul><li><img src=https://remnote-user-data.s3.amazonaws.com/n62w-RBleaBKBNmcYfL5xM0AO5JLTrjbJXAgcsnNkQ5Juvr1jOUAVjuefvpFN5hw3fUNZY_ZdIMXpnBfA0uDeekh0iWDgEJeam9g3zPf5xNAxt3ZofBdi48BrIe1obco.png width=400 alt=|400></li></ul><a href=#example-query-select-c1-c2-from-t-where-c155><h3 id=example-query-select-c1-c2-from-t-where-c155><span class=hanchor arialabel=Anchor># </span>Example Query: SELECT c1, c2 FROM t WHERE c1>5.5</h3></a><p>Assuming: 100,000 rows, predicates eliminate 90% of the rows</p><a href=#data-shipping-><h4 id=data-shipping-><span class=hanchor arialabel=Anchor># </span>Data Shipping ↓</h4></a><ul><li><img src=https://remnote-user-data.s3.amazonaws.com/mKBGx81j-l7GO960ZI0C0Sa6VyOozbs27x0RBB_FElDQCYkoBHO8ssyneXamiVI6efswP9sfJIrX6E6P8HT9k1WAUVZ89aaunrJ2wGbmnKyDB9tbl_vxQZMJEYmxgUhN.png width=400 alt=|400></li><li><img src=https://remnote-user-data.s3.amazonaws.com/uZiUh_mrsQ5oAD7AGFkjMRvCYDjnr_TS6Cri5N8i6t1GpUdcE8JTtV70XQGzlQ3gBMrqKzRGhevq7XxX8y8o4Yb0JYVbcBcyLBZ9ls7OuMaaIUxzGruedlomMx2q6VNp.png width=400 alt=|400></li></ul><a href=#query-shipping-><h4 id=query-shipping-><span class=hanchor arialabel=Anchor># </span>Query Shipping ↓</h4></a><ul><li><img src=https://remnote-user-data.s3.amazonaws.com/HxHvD7yHlscSLKmRSizMs8vOTmVQf4s7Vao3GdtL_dzqBYd0cv4cXCk6goZV1XhDuh0PQXw0kHciGyEVOZcO2mdhFOF4EnP6oB5LTyarw78bdr5ytyB_2k9wK-qxYgXR.png width=400 alt=|400></li><li><img src=https://remnote-user-data.s3.amazonaws.com/MQk9tVB8SQ7v41rdL7kkPZPjEtg5W6lqJANTYdS56EOFQ-5DlRzOv8tWuRg3OlACQ3NJH3-U7pGu9P8lc9MwKa187x3_IxwXBgzhwPjVlbW9qSCTR5vLYcLpx7p37xcm.png width=400 alt=|400></li><li>Benefits ↓<ul><li>Network traffic is minimised</li><li>For basic database operators, code developed for serial implementations can be reused</li></ul></li></ul><a href=#inter-operator-parallelism-><h2 id=inter-operator-parallelism-><span class=hanchor arialabel=Anchor># </span>Inter-Operator Parallelism ↓</h2></a><a href=#allows-operators-with-a-producer-consumer-dependency-to-be-executed-concurrently><h3 id=allows-operators-with-a-producer-consumer-dependency-to-be-executed-concurrently><span class=hanchor arialabel=Anchor># </span>Allows operators with a producer-consumer dependency to be executed concurrently</h3></a><a href=#results-produced-by-producer-are-pipelined-directly-to-consumer><h3 id=results-produced-by-producer-are-pipelined-directly-to-consumer><span class=hanchor arialabel=Anchor># </span>Results produced by producer are pipelined directly to consumer</h3></a><a href=#consumer-can-start-before-producer-has-produced-all-results><h3 id=consumer-can-start-before-producer-has-produced-all-results><span class=hanchor arialabel=Anchor># </span>Consumer can start before producer has produced all results</h3></a><a href=#best-suited-to-single-pass-operators><h3 id=best-suited-to-single-pass-operators><span class=hanchor arialabel=Anchor># </span>Best suited to single-pass operators</h3></a><h3 id=400httpsremnote-user-datas3amazonawscomphrvbl4veb2a-pthoct16hivalzlonj-ojfd58ay1p1_hfw_nncxihj5drnb7m40med-h8kkyifbyfgxdlq6m0zmjd5bdm0ifzhei87qnpwyzr4l1olboqpxmomrtxb7png><img src=https://remnote-user-data.s3.amazonaws.com/phRVbL4vEB2a-PThOcT16hivaLZLoNJ-OJFd58AY1p1_HFw_NnCXiHJ5dRNB7M40mEd-H8KkYIFByfGXDLq6M0zMJD5bdM0IFzhei87QnPwYzr4l1olBOQpXMOmrTXB7.png width=400 alt=|400></h3><a href=#intra-inter-operator-parallelism-><h3 id=intra-inter-operator-parallelism-><span class=hanchor arialabel=Anchor># </span>Intra-Inter-Operator Parallelism ↓</h3></a><h4 id=400httpsremnote-user-datas3amazonawscomejtj_p2scbck88isz1km1jw0rkd_pjgwyvv5psytx-newkodrz6xaadp9c-hi3tm9gamrmwoaqa65p6c5tu7mopffwggxrfpecyczb48qf-naochqukeyphdlcs46arhpng><img src=https://remnote-user-data.s3.amazonaws.com/ejtj_P2ScbCK88iSZ1Km1jW0rKd_PJGWYvV5psYtx-NewkODRZ6xaadP9C-Hi3tM9GAmrMWOAQA65p6c5Tu7mOpffWgGxrFPEcyczb48qF-naoChQuKEYphDLCS46arh.png width=400 alt=|400></h4><a href=#volcano-architecture><h2 id=volcano-architecture><span class=hanchor arialabel=Anchor># </span>Volcano Architecture</h2></a><a href=#exchange-operator><h3 id=exchange-operator><span class=hanchor arialabel=Anchor># </span>Exchange Operator</h3></a><a href=#inserted-between-the-steps-of-a-query-to-><h4 id=inserted-between-the-steps-of-a-query-to-><span class=hanchor arialabel=Anchor># </span>Inserted between the steps of a query to ↓</h4></a><ul><li>Pipeline results</li><li>Direct streams of data to the next step(s). redistributing as necessary</li></ul><a href=#example-query><h4 id=example-query><span class=hanchor arialabel=Anchor># </span>Example Query</h4></a><ul><li><img src=https://remnote-user-data.s3.amazonaws.com/3CgLHF3E4K_2lIDbvsBJs4aWALdRotWqw-X0VDUuyFYv5hCJQzIvLVJUK56uNJkJeeomB2eJ3n2u1dY9xR9tY0nCjE4QMfeEnzM8OkmYhMO35vQ9fjuMdoXkrxpScT7c.png width=400 alt=|400></li><li><img src=https://remnote-user-data.s3.amazonaws.com/DrX1op7yfGSVnRl2MsDVQ2k4ZIRjSLp84h_PGkbS3CU1y-klLP8VVcVuhh3dz1Oo7QAGk5Oxrx835q51w3IJllfFo9adbc4B94uF06p3MAGGDyCKgsQYokvloaQVMLxq.png width=400 alt=|400></li><li><img src=https://remnote-user-data.s3.amazonaws.com/rseSFoe5_rpP5a8qy2Xb-fOntbkB9AVMVBpszAipJISpZYWA7gNEnduzWxqmoQawYacM4HcjNfqUcVOF9pXrUZHlq_GYw8HCm7Xzz3_0C-oqBfRDzx1B0BbnVicXsEdu.png width=400 alt=|400></li><li><img src=https://remnote-user-data.s3.amazonaws.com/qyZBh0OlePwrxmKtzKDAUyyywajR7fFKDZWB9U3MLtyCwu8o11wr8wrdXFpYwNLfdwjPU2D955clMbOesdTtOapI5zgDEMaX_jfMtltYrR0-g8BFkKKMVim5_hUxm-xd.png width=400 alt=|400></li><li><img src=https://remnote-user-data.s3.amazonaws.com/9o6EjKyDUBFpyIQsUTwMZjcLGdn8_LeMjcSyZ6XKliAOad1ppzSxKv3IAHTCZHHmEcCNjFaMxC4qjGR2MCPkwY9yXQdBsnE5J985B0V5ODZS0h11CwGKXXR0BZa8ggsM.png width=400 alt=|400></li></ul><a href=#bushy-parallelism-><h2 id=bushy-parallelism-><span class=hanchor arialabel=Anchor># </span>Bushy Parallelism ↓</h2></a><a href=#execute-subtrees-concurrently><h3 id=execute-subtrees-concurrently><span class=hanchor arialabel=Anchor># </span>Execute subtrees concurrently</h3></a><h3 id=400httpsremnote-user-datas3amazonawscom5jyuhxop4wtwninvfjuh4thyqpwnsahfvsivnaeavwxuzx7dth-3mpyoxq_kwce8nzq9fxzxty7sztkoykb6agnk56os6gadqvtchdvqasxfbsb-2ztultonqj7j8qnjpng><img src=https://remnote-user-data.s3.amazonaws.com/5jYUHxoP4wtwnInvFJUh4tHYqPwNsahFVsivnaEaVwxUzX7dTH-3mpyoxq_kwCE8nzq9fXzXtY7SztkOYkb6AgNk56oS6gAdQvTchdVQaSxfbsb-2zTUlToNqj7j8qNj.png width=400 alt=|400></h3><a href=#parallel-query-processing><h2 id=parallel-query-processing><span class=hanchor arialabel=Anchor># </span>Parallel Query Processing</h2></a><h3 id=400httpsremnote-user-datas3amazonawscomejayctrjmfg5tio8lxj7lhj--hsrpxscmsulq-7xbnz5tyipclpgy0etdt-3yq4jctnoydxg2eb8gvz5td1riq4cr41jccwxia3i4aj0utvfhfi17ieowm0pte8m8xsfpng><img src=https://remnote-user-data.s3.amazonaws.com/EjayCtrjmFg5TiO8LXj7LhJ--HsRPxscMSULQ-7XBnz5tYiPClpGY0etdT-3yQ4JctnOYDXg2EB8gVz5TD1rIq4cR41jccwxIa3I4aj0utvfhFi17iEOWM0pTE8M8XsF.png width=400 alt=|400></h3><a href=#enquiryquery-without-join-><h4 id=enquiryquery-without-join-><span class=hanchor arialabel=Anchor># </span>Enquiry/Query without Join↓ ↓</h4></a><p>#####1. Count matching tuples in each partition
#####2. Pass counts to coordinator
#####3. Sum counts and return
#####4. How many customers live in the UK?</p><ul><li><img src=https://remnote-user-data.s3.amazonaws.com/67Bn5jqY_dVUbaqsINrDmJOXmxM5SfKGciugS8bAln3FhqaAvCaPaqfWm3trpNkYVLqNo79wfPVY3Zv9kf4rf5ycoAc3iibSXP1vEZ5gKbINE7XbZaZ3SAeVtR2wh_ZA.png width=400 alt=|400></li></ul><a href=#co-located-join-><h4 id=co-located-join-><span class=hanchor arialabel=Anchor># </span>Co-located Join ↓</h4></a><ul><li>ORDER, CUSTOMER partitioned on CKEY</li><li>Therefore corresponding entries are on the same node
#####1. Join CUSTOMER and ORDER on each partition
#####2. Pass joined relations to coordinator
#####3. Take union and return
#####4. Which customers placed orders in July?</li><li><img src=https://remnote-user-data.s3.amazonaws.com/Di627c9KKUXeUb8uQAM1qfc6R6GfkGAOIfte3QeYtKFqIlGiqFgBDy21NvWh1aMragoBrQ3jx1YoV0rKl0Cg5Xwbj7TjwCys_qOushf0Drwz3Hw6k2PMUV-bU_tXiqa6.png width=400 alt=|400></li></ul><a href=#directed-join-parallel-associative-join-><h4 id=directed-join-parallel-associative-join-><span class=hanchor arialabel=Anchor># </span>Directed Join (Parallel Associative Join) ↓</h4></a><ul><li>ORDER partitioned on OKEY</li><li>CUSTOMER partitioned on CKEY
#####1. Scan ORDER on each partition
#####2. Send tuples to appropriate CUSTOMER node based on ORDER.CKEY
#####3. Join ORDER tuples with each CUSTOMER fragment
#####4. Send joined relations to coordinator
#####5. Take union and return</li><li>Which customers placed orders in July?</li><li><img src=https://remnote-user-data.s3.amazonaws.com/qM8gClzgnh7ed93FFwpj8UUmYyuWt_TSqCJhi_TDmYn5bQM8GUD6qvKJRLKsbsy8zpcQRSjB9JT2KNOSkz8bGNd-KVrdXPeiwhtsRMXk4bOGPByMRqzZWwhf1tG6xng1.png width=400 alt=|400></li></ul><a href=#broadcast-join-parallel-nested-loop-join-><h4 id=broadcast-join-parallel-nested-loop-join-><span class=hanchor arialabel=Anchor># </span>Broadcast Join (Parallel Nested Loop Join) ↓</h4></a><ul><li>SUPPLIER partitioned on SKEY</li><li>CUSTOMER partitioned on CKEY</li><li>Join on CNATION=SNATION
#####1. Scan SUPPLIER on each partition
#####2. Send tuples to all CUSTOMER nodes
#####3. Join SUPPLIER tuples with each CUSTOMER fragment
#####4. Send joined relations to coordinator
#####5. Take union and return
#####6. Which customers and suppliers are in the same country?</li><li><img src=https://remnote-user-data.s3.amazonaws.com/aqNur4HE1l5A0HpGf2wYkFuBFwnTJdU2SAXAPELATO6-aLDZ37gkCse8gSSKx_p6Lepp3KwcdALnLi8M5t5vC7Y557otWlMoAjGDB_9BDl2h5izfgvfaoUAWRuY0Deyc.png width=400 alt=|400></li></ul><a href=#repartitioned-join-parallel-hash-join-><h4 id=repartitioned-join-parallel-hash-join-><span class=hanchor arialabel=Anchor># </span>Repartitioned Join (Parallel Hash Join) ↓</h4></a><ul><li>SUPPLIER partitioned on SKEY</li><li>CUSTOMER partitioned on CKEY</li><li>Join on CNATION=SNATION
#####1. Scan SUPPLIER, CUSTOMER
#####2. Repartition on *NATION and send to appropriate worker for Task 3
#####3. Join SUPPLIER tuples CUSTOMER tuplea
#####4. Send joined relations to coordinator
#####5. Take union and return
#####6. Which customers and suppliers are in the same country?</li><li><img src=https://remnote-user-data.s3.amazonaws.com/qBkQObhtziJpyPzsQ4LZ1M-35tsZrFwSkTLlB_tE7OmNP4Z-dguzQKoYBkVFKOyUVNITYrfL2jvdZLX2hW7He_uAtd17o6rk5DOmbTNRUSQF34gWu5Q3xNLDJLh7WnXz.png width=400 alt=|400></li></ul><a href=#concurrency-control><h2 id=concurrency-control><span class=hanchor arialabel=Anchor># </span>Concurrency Control</h2></a><a href=#concurrency-and-parallelism><h3 id=concurrency-and-parallelism><span class=hanchor arialabel=Anchor># </span>Concurrency and Parallelism</h3></a><a href=#a-single-transaction-may-update-data-in-several-different-places><h4 id=a-single-transaction-may-update-data-in-several-different-places><span class=hanchor arialabel=Anchor># </span>A single transaction may update data in several different places</h4></a><a href=#multiple-transactions-may-be-using-the-same-distributed-tables-simultaneously><h4 id=multiple-transactions-may-be-using-the-same-distributed-tables-simultaneously><span class=hanchor arialabel=Anchor># </span>Multiple transactions may be using the same (distributed) tables simultaneously</h4></a><a href=#one-or-several-nodes-could-fail><h4 id=one-or-several-nodes-could-fail><span class=hanchor arialabel=Anchor># </span>One or several nodes could fail</h4></a><a href=#requires-concurrency-control-and-recovery-across-multiple-nodes-for><h4 id=requires-concurrency-control-and-recovery-across-multiple-nodes-for><span class=hanchor arialabel=Anchor># </span>Requires concurrency control and recovery across multiple nodes for</h4></a><ul><li>Locking and deadlock detection</li><li>Two-phase commit to ensure &lsquo;all or nothing&rsquo;</li></ul><a href=#locking-and-deadlocks><h4 id=locking-and-deadlocks><span class=hanchor arialabel=Anchor># </span>Locking and Deadlocks</h4></a><ul><li>With Shared Nothing architecture, each node is responsible for <strong>locking its own data</strong></li><li>No global locking mechanism</li><li>Resolving Deadlocks ↓<ul><li>Timeout T2, after wait exceeds a certain interval<ul><li>Interval may need random element to avoid both transactions giving up at the same time and trying again</li></ul></li><li>Rollback T2 to let T1 proceed</li><li>Restart T2, which can now complete</li></ul></li><li>Approach used by DB2 ↓<ul><li>Each node maintains a local &lsquo;wait-for&rsquo; graph</li><li>Distributed deadlock detector (DDD) runs at the catalogue node for each database</li><li>Periodically, all nodes send their graphs to the DDD</li><li>DDD records all locks found in wait state</li><li>Transactions becomes a candidate for termination if found in same lock wait state on two successive iterations</li><li></li></ul></li></ul><a href=#reliability><h3 id=reliability><span class=hanchor arialabel=Anchor># </span>Reliability</h3></a><a href=#two-phase-commit-protocol-2pc-is-used-to-ensure-that-atomicity-is-preserved><h4 id=two-phase-commit-protocol-2pc-is-used-to-ensure-that-atomicity-is-preserved><span class=hanchor arialabel=Anchor># </span><strong>Two-phase commit protocol (2PC)</strong> is used to ensure that Atomicity is preserved</h4></a><a href=#two-phase-commit-2pc><h4 id=two-phase-commit-2pc><span class=hanchor arialabel=Anchor># </span>Two-Phase Commit (2PC)</h4></a><ul><li>Coordinator↔Site that manages the global transactions</li><li>Participants↔Separate sites that execute local transactions</li><li>Phase 1: Voting ↓
######1. Coordinator sends &ldquo;prepare T&rdquo; message to all participants
######2. Participants respond with either &ldquo;vote-commit T&rdquo; or &ldquo;vote-abort T&rdquo;
######3. Coordinator waits for participants to respond within a timeout period</li><li>Phase 2: Decision ↓
######1. If all participants return &ldquo;vote-commit T&rdquo; (to commit), send &ldquo;commit T&rdquo; to all participants. Wait for acknowledgements within timeout period
######2. If any participant returns &ldquo;vote-abort T&rdquo;, send &ldquo;abort T&rdquo; to all participants. Wait for acknowledgements within timeout period
######3. When all acknowledgements received, transaction is complete<ul><li>If a site does not acknowledge, resend global decision until it is acknowledged</li></ul></li><li>Normal Operation #Db ↓<ul><li><img src=https://remnote-user-data.s3.amazonaws.com/A9t-mNzkaZTQYdzuUxMrQjb0mcSCfshZbzx6vR4FVdz_H8g4Q7Y_vlVvVVRgzmS4k2Jh7kE8p33GkpOkzQJhQMeAyGuVfyl9ZK8-zjtD2tP5Dd2wzpzfzeIaT-ToK7-B.png width=400 alt=|400></li></ul></li><li>Aborted Transaction ↓<ul><li><img src=https://remnote-user-data.s3.amazonaws.com/uACLnjNc6Z6auEzX0U7jWhjuaiuA0GI3vxncxC20ruYsid4342LhUZbyfCmMpwHAVlIG_ITqT5i_2VJnxQ9yfSBhFg4VaG1vyXuN5TpJA5ZyvQgJ5gsvO07ctzVOzeIY.png width=400 alt=|400></li><li><img src=https://remnote-user-data.s3.amazonaws.com/sw31BoOg9faJZg3JRKc3vqTVKvtMhzuyQYl-KkY-Ijy-2o8CNLIpOBQxhG71xK5ajiZLMsDRhW4rGeAyi15bL0wg3jly7-12fUy71WmbGRvlnX8xWVjcMPdS6u_ZayRw.png width=400 alt=|400></li></ul></li></ul><a href=#distributed-databases><h1 id=distributed-databases><span class=hanchor arialabel=Anchor># </span>Distributed Databases</h1></a><a href=#horizontal-fragmentation><h2 id=horizontal-fragmentation><span class=hanchor arialabel=Anchor># </span>Horizontal Fragmentation</h2></a><a href=#each-fragment-contains-a-subset-of-the-tuples-of-the-global-relation><h3 id=each-fragment-contains-a-subset-of-the-tuples-of-the-global-relation><span class=hanchor arialabel=Anchor># </span>Each fragment contains a subset of the tuples of the global relation</h3></a><h3 id=400httpsremnote-user-datas3amazonawscomrh6v1rq-bm5_zpwa2ixnhxouxi2ynozroqzrw1aohdi0z1coiqx2n_e_bnuvzrq-idvuess_aeqyiomr3dfrpwqa3lhqlatmbqqn6ja4bu_75eqvh13gskgk5pl9_8bepng><img src=https://remnote-user-data.s3.amazonaws.com/RH6v1RQ-bm5_ZpWa2IxnhXoUxI2ynOzRoQzRw1aoHDI0Z1cOIqX2N_e_BNUvZRQ-iDVUesS_AeqYiOmr3DFRPwQa3lhqlATmbqqn6ja4bU_75eqvh13gSKGk5pl9_8Be.png width=400 alt=|400></h3><a href=#vertical-fragmentation><h2 id=vertical-fragmentation><span class=hanchor arialabel=Anchor># </span>Vertical Fragmentation</h2></a><h3 id=400httpsremnote-user-datas3amazonawscomukrmhekuxvrwky8a4g9qlashpwvaj4nk8-4hwcanzvaohkgbceq8jnw9o0aw_ojkzbwhetdqjfge_7sw6qyiw1bkyo8clus2jwi7x-t7-t0ew3759o1ab6hn6l9uglofpng><img src=https://remnote-user-data.s3.amazonaws.com/uKrmhEKuXvRwky8a4g9QlASHpwvaJ4Nk8-4HwCANZvAohKgbcEq8jNW9O0AW_oJKzbWheTdqjFGE_7Sw6qyIw1BKYo8cluS2Jwi7x-T7-T0eW3759o1AB6HN6l9UGLOf.png width=400 alt=|400></h3><a href=#each-fragment-contains-a-subset-of-the-attributes-of-the-global-relation><h3 id=each-fragment-contains-a-subset-of-the-attributes-of-the-global-relation><span class=hanchor arialabel=Anchor># </span>Each fragment contains a subset of the attributes of the global relation</h3></a><a href=#reduction-for-horizontal-fragmentation><h2 id=reduction-for-horizontal-fragmentation><span class=hanchor arialabel=Anchor># </span>Reduction for Horizontal Fragmentation</h2></a><h3 id=400httpsremnote-user-datas3amazonawscomtimwlmcyqm8ofbof0kb-4yrtsce0ezw7cqybifhs3sumqepdvfcbsgsnozflosrfga2535lpgpy5hshxpgxg8ncm1e68fpvdd2azdu2so52bu0tod3193pc6fc4wtfabpng><img src=https://remnote-user-data.s3.amazonaws.com/TImwLmcyqm8OFboF0kB-4YrTSce0ezw7cqYbifhs3SUmqePDVFcbsGsNOzFLoSrFga2535lPgpy5HshxPGxG8ncm1e68FpVdD2AzDU2so52Bu0Tod3193Pc6fc4WTfaB.png width=400 alt=|400></h3><a href=#horizontal-selection-reduction><h2 id=horizontal-selection-reduction><span class=hanchor arialabel=Anchor># </span>Horizontal Selection Reduction</h2></a><h3 id=400httpsremnote-user-datas3amazonawscomkqcx3ksme6xepgzblfls2v_rcckjig6jmcnrmlpq4zqn8-hnogo9khbh0ee0pkjc4evrotqnzyqxvoahcw-qqdym4uoiqhewnw6baqibqbxpxadsnmu9j53tcst0u83upng><img src=https://remnote-user-data.s3.amazonaws.com/kQcx3KSme6XEPgZBlflS2v_RCCKjIg6JMcnRMLPQ4ZqN8-HNogO9khbH0Ee0PKJC4evroTQnZyQxvoaHcw-qqDYm4uOIQhewNW6baqIBQBXPXADSnmU9j53tCST0U83U.png width=400 alt=|400></h3><a href=#horizontal-join-reduction><h2 id=horizontal-join-reduction><span class=hanchor arialabel=Anchor># </span>Horizontal Join Reduction</h2></a><h3 id=400httpsremnote-user-datas3amazonawscomyz7w7pbbiiqwaklxqsr_kv548ytwcslxzncsmfptko2fz890exr7eellmmz2m2lgeq4ikb0k9xaorjxcsote0f0mkf0snf_nvnvmv1sdj8lbpm2d0g_evqym3xawmt4lpng><img src=https://remnote-user-data.s3.amazonaws.com/yz7w7PbBiIqwakLXQSR_Kv548YTWcsLXznCsmfpTkO2fz890exR7eEllMmZ2M2LgEq4ikb0k9xaorJxCsOtE0f0MkF0SNf_nVNVMv1sDj8lbPm2D0G_evqyM3xAwMT4L.png width=400 alt=|400></h3><a href=#2pc><h2 id=2pc><span class=hanchor arialabel=Anchor># </span>2PC</h2></a><a href=#linear-2pc><h3 id=linear-2pc><span class=hanchor arialabel=Anchor># </span>Linear 2PC</h3></a><h4 id=400httpsremnote-user-datas3amazonawscomyaip-rmb2hgumivffee7mgleo0jzkwxqx16f6645pnxozhhnrle-asrlweymhu9x5a0nlwh6qscxwsxddbbdz9wpua5asmvwvfft1dc1nhuu6ejgfjzq2nzkeq1vsaawpng><img src=https://remnote-user-data.s3.amazonaws.com/YAip-RMb2HgumIvFFeE7MGLeO0JzKWxqX16f6645pnxoZhhnrLE-AsRlWEYmhu9X5a0NlWH6qsCXwsxDDbBdz9WpuA5ASMVWVffT1DC1NhuU6EJGfjzQ2nZKEQ1vsAaw.png width=400 alt=|400></h4><a href=#second-phase-from-the-participants-to-the-coordinator><h4 id=second-phase-from-the-participants-to-the-coordinator><span class=hanchor arialabel=Anchor># </span>Second phase from the participants to the coordinator</h4></a><a href=#participants-may-unilaterally-abort><h4 id=participants-may-unilaterally-abort><span class=hanchor arialabel=Anchor># </span>Participants may unilaterally abort</h4></a><a href=#first-phase-from-the-coordinator-to-the-participants><h4 id=first-phase-from-the-coordinator-to-the-participants><span class=hanchor arialabel=Anchor># </span>First phase from the coordinator to the participants</h4></a><a href=#centralised-2pc><h3 id=centralised-2pc><span class=hanchor arialabel=Anchor># </span>Centralised 2PC</h3></a><a href=#communication-only-between-the-coordinator-and-the-participants><h4 id=communication-only-between-the-coordinator-and-the-participants><span class=hanchor arialabel=Anchor># </span>Communication only between the coordinator and the participants</h4></a><h4 id=400httpsremnote-user-datas3amazonawscomvexdfpk3v5l1nnoqazetep5fbnlo1gsgry_fp8xfyfit0r6w5wim_wkqghcblalageha7dnxw5xncbzxssvrulpa14j7btbynwlbdctxd7f5gvhmvfcoeiz9l_37ucbtpng><img src=https://remnote-user-data.s3.amazonaws.com/vEXDfpK3V5L1NNoqazeTeP5fbNLO1gsgRY_FP8xFyfit0r6w5Wim_wkQGhCBlalAGeHa7DNXW5xnCbZxSsVRULPa14j7BtbynwlBDcTxd7F5GVhmvFcoeIz9l_37UCbt.png width=400 alt=|400></h4></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script async src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://ik1g19.github.io/UoS-Notes/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by Isaac Klugman using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://ik1g19.github.io/UoS-Notes/>Home</a></li><li><a href=https://twitter.com/_jzhao>Twitter</a></li><li><a href=https://github.com/jackyzha0>GitHub</a></li></ul></footer></div></div></body></html>