{"/":{"title":"Isaac's UoS Notes","content":"\n# Quick Links\n\n## Year 1\n\n#### Algorithmics\n\n#### Programming 1\n\n#### [[notes/Comp Systems 1/Comp Systems 1|Comp Systems 1]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n#### [[notes/Data Management/Data Management|Data Management]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n#### Professional Development\n\n#### [[notes/Programming 2/Programming 2|Programming II]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n#### [[notes/Foundations of Comp Sci/Foundations of Comp Sci|Foundations of Comp Sci]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n#### Software Modelling and Design\n\n## Year 2\n\n#### [[notes/Distributed Systems and Networks/Distributed Systems and Networks|Distributed Systems and Networks]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n#### Intelligent Systems\n\n#### [[notes/Programming 3/Programming 3|Programming 3]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n#### [[notes/Theory of Computing/Theory of Computing|Theory of Computing]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n#### [[notes/SEG/SEG|Software Engineering Group Project]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n#### Programming Language Concepts\n\n#### [[notes/Interaction Design/Interaction Design|Interaction Design]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n#### [[notes/Principles of Cyber Security/Principles of Cyber Security|Principles of Cyber Security]] \u003cfont color=\"red\"\u003ePaper Notes\u003c/font\u003e\n\n## Year 3\n\n#### [[notes/Advanced Computer Networks/Advanced Computer Networks ToC|Advanced Computer Networks]]\n\n#### Advanced Databases \u003cfont color=\"red\"\u003eFormatting...\u003c/font\u003e\n\n#### [[notes/Computer Vision/Computer Vision ToC|Computer Vision]]\n\n#### Engineering Management and Law\n\n#### Web and Cloud Based Security \u003cfont color=\"red\"\u003eFormatting...\u003c/font\u003e\n\n## Year 4\n\n#### [[notes/Advanced Programming Language Concepts/Advanced Programming Language Concepts ToC|Advanced Programming Langauge Concepts]]\n\n#### [[notes/Algorithmic Game Theory/Algorithmic Game Theory ToC|Algorithmic Game Theory]]\n\n#### [[notes/Biometrics/Biometrics ToC|Biometrics]]\n\n#### [[notes/Intelligent Agents/Intelligent Agents ToC|Intelligent Agents]]\n\n#### [[notes/Software Security/Software Security ToC|Software Security]]","lastmodified":"2023-04-19T18:54:03.871889337Z","tags":[]},"/notes/Advanced-Computer-Networks/Advanced-Computer-Networks-ToC":{"title":"Advanced Computer Networks ToC","content":"\n# **Week 1**\n#### [[notes/Advanced Computer Networks/Week 1/Introduction]]\n#### üì°[[notes/Advanced Computer Networks/Week 1/Radio Fundamentals]]üìñ\n---\n# **Week 2**\n#### [[notes/Advanced Computer Networks/Week 2/IoT Architectures]]\n#### [[notes/Advanced Computer Networks/Week 2/IoT OS]]\n#### üèô[[notes/Advanced Computer Networks/Week 2/IoT]]üì°\n---\n# **Week 3**\n#### üîã[[notes/Advanced Computer Networks/Week 3/Low Power Wide Area Networks]]üì°\n#### [[notes/Advanced Computer Networks/Week 3/MQTT and COAP]]\n---\n# **Week 4**\n#### 6Ô∏è‚É£[[notes/Advanced Computer Networks/Week 4/IPv6 Deployment and Transition]]üì¶\n#### üì°[[notes/Advanced Computer Networks/Week 4/Wireless Sensor Networks]]üå≤üå≥\n---\n# **Week 5**\n#### üìª[[notes/Advanced Computer Networks/Week 5/IEEE 802.15.4 and 6LoWPAN]]\n#### [[notes/Advanced Computer Networks/Week 5/Smart Home IoT]]\n---\n# **Week 6**\n#### üì∂[[notes/Advanced Computer Networks/Week 6/IEEE 802.11_ Wi-Fi]]\n---\n# **Week 7**\n#### 6Ô∏è‚É£[[notes/Advanced Computer Networks/Week 7/IPv6 Deployment and Transition 2]]\n#### üò¥[[notes/Advanced Computer Networks/Week 7/Software Defined Networking]]\n---\n# **Week 9**\n#### üîµ[[notes/Advanced Computer Networks/Week 9/Bluetooth]]ü¶∑\n#### üîí[[notes/Advanced Computer Networks/Week 9/Network Security]]üï∏\n#### üëÄ[[notes/Advanced Computer Networks/Week 9/Network Monitoring]]","lastmodified":"2023-04-19T18:54:03.871889337Z","tags":[]},"/notes/Advanced-Computer-Networks/Papers/2018-2019-Paper":{"title":"2018 2019 Paper","content":"\n# **Paper**\n![[notes/Advanced Computer Networks/Papers/COMP3210-201819-02-COMP3210W1.pdf]]\n# **A1**\n## (a)\nA pollution monitoring sensor system is being designed which can be carried in a backpack or bicycle within a city of 10km diameter. Discuss a networking solution to allow the data to be sent to a server once per day. The sensor data collected is around 6kiB/hour.\nConsider the ongoing costs, power requirements and scalability of the system and draw a diagram.\n### Answer\n- Sensor nodes collect data on inbuilt small non-volatile storage\n- Each sensor node will pass data to one of multiple relay nodes using low power radio\n- In turn, relay nodes then pass data to a base node using long range communication such as Ultra Narrow Band style SigFox\n- Base node can then use sat links to pass data to a server\n- Sensor nodes are small low power devices, in addition to low power radio comms, sensor nodes will require a small power draw and will not need regular maintenance\n- Power can be improved by having sensor nodes hibernate, sensor nodes are woke by relay nodes when a transfer is required\n## (b)\nHow could you design the system so that the data was sent every minute as it was collected? Assume a sample rate of 100 Bytes every minute. \n### Answer\n- LoRaWAN gateways are distributed over the city to cover the diameter\n- Sensor nodes communicate with the gateways over LoRaWAN low power wireless\n- LoRaWAN gateways can be integrated with The Things Network for real time data monitoring\n\n#\n---\n\n# **A2**\n## (a)\nCompare two published sensor networks ‚Äì one which uses LoraWAN and another which uses 6LowPAN. Discuss the advantages/disadvantages of each networking approach. \n### Answer\n- Oxford Flood Network uses LoRaWAN\n\t- Sensor nodes are small low cost ultrasound sensors to detect water surface\n\t- Narrow Band wireless is used to link the sensors to a local communications hub\n\t- Data is aggregated and sent to remote server over TV whitespace\n- Mountain Sensing project used 6LowPAN\n\t- Each node has unique IPv6 address\n\t- Estate systems GETs data from each node using CoAP\n\t- Estate then uses an IPv6 tunnel and sat links to communicate to server\n- Advantages of Oxford Flood Network\n\t- More scalable due to LoRaWAN gateways\n\t- LoRaWAN provides lots of security mechanisms\n- Disadvantages of Oxford Flood Network\n\t- Requires multiple LoRaWAN gateways to be distributed\n\t- Payload limited to 100 bytes\n- Advantages of Mountain Sensing\n\t- Supports IPv6\n\t- Provides good integration with the internet\n\t- Supports mesh networking\n- Disadvantages of Mountain Sensing\n\t- Requires gateway/hub to LANWAN\n\t- Less immunity to interference\n## (b)\nDraw two diagrams representing the two deployments.\n- Oxford Flood Network\n- Mountainsensing\n\t- ![[notes/Advanced Computer Networks/Images/Pasted image 20220817171946.png|400]]\n## (c)\nConsidering one of these two networks, describe an alternative solution for its network.\n### Answer\n- Mountainsensing could leverage lorawan and TTN integration\n- Sensors form clusters around LoRaWAN gateways\n- Sensors send data to gateways through LoRa modulation","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-1/Introduction":{"title":"Introduction","content":"\n- **Shannon Information**\n    - Shannon Entropy ‚Üì \n        - $h(x)=-\\log_2 p(x)$\n            - Where\n                - $p(x)$ - the probability of $x$\n                - $-\\log_2 x$ for $x\u003c1$\n![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/O8YYJ5wHrnJb27SggsdMUT8U2rTut3nYLLJBWNFuJBrupEZRoAHsvCIBGeSVjtDpwPiB2Mni4tUhcBsPnzqm8dH5rvkxPwotMHURBLTFvxB5eWz1vOpJt7QRfN7gJhoY.png) \n    - Information Entropy ‚Üì \n        - The average amount of information transmitted for a series of values\n        - $H(x)=-\\sum\\limits_x p(x)\\log_2 p(x)$ \n        - Example\n            - Consider random variable $x$ which has 8 possible values, each of which equally likely\n            - $H(x)=-8\\times\\frac{1}{8}\\log_2\\frac{1}{8}=3\\text{ bits}$\n            - This makes sense as 3 bits are needed to represent all states\n                - 000,001,010,011,100,101,110,111 \n            - So this data stream only needs 3 bits per sample to represent all the information\n            - Non-Uniform Distributions\n                - ![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/6BdR5cJfPnF2BVyGp-YWAOx-E2dUzI4J0D5KGs0E603xV98wMJHyjANO2vH0-lBM7TbSPf9693mmOj40LcOxqFl91QU4OVIReocy0YbQUdFLqvH4HCRAwHZ_H9PCxi9y.png) \n        - Compact Representations\n            - Non-uniform probabilities allow us to use a more compact representation\n                - Shannon's figure is the {{lower}} bound we can aim for\n                    - Use {{more}} bits for the higher information states\n            - Example\n                - ![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/w6RpP5KOdsOEC6f5JL0XvwVnHdLqAJ2orEp4AMXOwMNHlZ7kg5EWjr72N0e-iw_y_QX56-4besiHqBxEc_LLNYoCCFE2FAI1zlasmAQ4XoCTxJ13_aVl2aErh_YEsmNx.png) \n    - The less likely a value, {{the more information is imparted by revealing its value}} \n        - If we learn two independent facts, we can sum all the $h$ values, since information is additive ‚Üì \n            - $p(x,y)=p(x)p(y)$\n            - $h(x,y)=h(x)+h(y)$\n    - Information theory begun with the publication of Claude Shannon's work\n        - \"A Mathematical Theory of Communication\"\n    - The Degree of Surprise‚ÜîShannon proposed a measure of information that considers a discrete random variable and asks how much information is received when we observe a specific value for this variable\n- \n","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-1/Radio-Fundamentals":{"title":"Radio Fundamentals","content":"\n# **Radio Spectrum**\n- Generally used for broadcasting \n\t- Centre frequency determines characteristics of the channel we're creating\n\t- Using a greater frequency  \n\t\t- Send more data \n\t\t- More easily use the bandwidth\n\t- Using a greater bandwidth  \n\t\t- Greater the width around the centre frequency\n\t\t- Greater data rate achievable\n## **Different frequencies are allocated for different purposes**  \n- IEEE 802.15.4, Bluetooth etc  \n\t- 2 .4GHz \n- WiFi  \n\t- 2 .4, 5 GHz and now 60 GHz\n- ISM license free bands, sub-GHz  \n\t- 433, 868 MHz\n- GSM-900  \n\t- Mobile: 890-915 MHz\n\t- Base: 925-960 MHz\n- GSM-1800  \n\t- Mobile: 1710-1785 MHz\n\t- Base: 1805-1880 MHz\n- 3G  \n\t- Base: 2210-2170 MHz\n\t- Mobile: 1920-1980 MHz\n- 4G  \n\t- 800MHz, 1800, 2.6 GHz\n## **Radio Propagation** \n- Changing voltage in a wire causes radio waves to be emitted\n- These waves are detected by the receiving antenna\n- Some data is expected to be lost\n\n- Link Budget  \n\t- The summary of the gains/losses in a radio system\n- Simplified, the received power is   \n\t- $P_{RX}=P_{TX}+G_{TX}+G_{RX}-\\text{Losses}$\n\t\t- Where\n\t\t- $P_{RX}$ - Received power\n\t\t- $P_{TX}$ - Transmitter output power\n\t\t- $G_{TX}$ - Transmitter antenna gain\n\t\t- $G_{RX}$ - Receiver antenna gain \n## **Modulation**\n- In order to transmit digital information, we need to send a sequence of bits. \n- This is hard to do over a radio link as you can't just change the radio signal on and off repeatedly\n\t- This is hard to do over a radio link as you can't just change the radio signal on and off repeatedly\n\t- Instead, we modulate a carrier frequency\n### Attributes of the carrier frequency that we can modulate  \n#### Amplitude\n- e.g.\n\t- A=0 for 0 and A=1 for 1\n#### Frequency\n- e.g.\n\t- F=500 for 0 and F=1000 for 1\n#### Phase\n- e.g.\n\t- $\\theta$=0 for 0 and $\\theta$=$\\frac{\\pi}{2}$ for 1 \n### Amplitude Shift Keying\n- Used in AM radio\n- Simple, but {{prone to interference}} \n\n### Frequency Shift Keying  \n- Weather Faxing uses FSK modulation\n \n### Phase Shift Keying \n![[notes/Advanced Computer Networks/Images/Pasted image 20220821184050.png|400]]\n### Quadrature Phase Shift Keying\n- Sends multiple bits simultaneously by using multiple phase shifts\n- GPS uses Binary Phase Shift Keying\n\n### Quadrature Amplitude Modulation\n- Amplitude modulate two carrier frequencies with 90¬∞ (quadrature) phase shift\n\t- Combines different modulation schemes\n#### Advantages   \n- Packs more bits in\n#### Disadvantages   \n- Becomes more sensitive to noise as you increase its complexity\n---\n\n - QAM64 is used in US cable TV\n\n### Lora Modulation  \n- Sends sweeps of frequencies\n#### Advantages   \n- Robust\n- Good for long range\n#### Disadvantages   \n- Slow \n#### LORA Factors\n- The max bitrate in Semtech's LORA depends on the \"spreading factor\"\n\t- There is a lower {{spreading factor}} for a higher {{data rate}} \n- The spreading factor also affects the {{sensitivity}} and {{range}} \n\n## **Applications of Modulation Schemes** \n### Bluetooth  \n- GMSK - Minimum possible frequency shift and a Gaussian filter\n- DQPSK - Differential encoding uses data to change rather than set the phase\n### WiFi  \n- [BPSK](../../Binary Phase Shift Keying.md) and [QPSK](../Week 1/Radio Fundamentalsüì°üìñ/Modulation/Quadrature Phase Shift Keying.md) \n- 16 and 64 QAM \n### GSM  \n- [GMSK](../Week 1/Radio Fundamentalsüì°üìñ/Modulation/Applications of Modulation Schemes/Bluetooth/GMSK.md) \n### Universal Mobile Telecommunications System (UMTS)  \n- [QPSK](../../Quadrature Phase Shift Keying.md) \n### LORA  \n- Low power LoRaWAN\n\n## **Multiple Access**\n- How can multiple devices use the same bands?\n### Frequency Division Multiple Access \n- Divide frequency band into channels\n- Assign each user a different channel\n\t- Uplink and downlink may be on different channels\n- Used in analogue radio systems\n- Bandwidth is wasted whenever a user is offline \n\n### Time Division Multiple Access\n- Divide access to the frequency band into a number of distinct time slots \n- Used by [GSM](../Week 1/Radio Fundamentalsüì°üìñ/Modulation/Applications of Modulation Schemes/GSM.md)   \n- Requires time synchronisation\n\t- Difficult with mobile transceivers \n\t\t- Base station informs mobiles of delay required depending on distance\n\t\t- Single slot available for registering with base station\n####  Dynamic TDMA\n- Users with different requirements may be allocated multiple time slots\n- Used in Bluetooth\n\n### Code Division Multiple Access\n- User has access to the whole bandwidth for the entire duration\n- Different CDMA codes are used to distinguish between different users\n-  _**Used by 3G/UMTS**_   \n\t- Chip rate much higher than bit rate (256 chips/bit)\n\t- bandwidth only used when actually sending\n","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-2/IoT":{"title":"IoT","content":"\n# **The Internet of Things** \n- Ubiquitous computing with a focus on objects\n- Computing being distributed into the environment and physical objects\n\n# **IoT Challenges**\n##  _**Standardisation**_  \n- Fragmented implementations between associations, standard bodies and governments\n\n##  _**Big Data**_   \n- IoT devices generate a lot of data\n- How to choose which data to keep\n- Balance of storing data vs analysing data and discarding\n- How does this affect data centers and server technology\n\n##  _**Data Security**_   \n- Certification and regulation needed for technology, especially when health related\n- Consumers need to be convinced their data is safe from misuse or theft\n- IoT devices are generally unattended, easy to physically attack and easy to eavesdrop on\n- Limited energy/computing capabilities for encryption\n\n##  _**Connectivity**_  \n- Security\n\t- How to encrypt traffic\n\t- How to ensure ports aren't vulnerable\n- Power\n\t- IoT devices need to last as long as possible on as little battery as possible\n- Reliability\n\t- What happens if there is no WiFi, LPWAN or cellular coverage\n\n# **Communication Choices**  \n- WiFi\n- Bluetooth\n- Zigbee\n- 6LowPAN over 802.15.4\n- Sigfox\n- NB-IoT\n- LoRaWAN\n \n# **Architecture of Embedded IoT** \n##  _**Hardware**_ \n- Sensors\n- Actuators\n- Cameras\n- Motors\n- Power Supplies\n \n##  _**Embedded Software**_ \n- Bare to Metal\n- Operating Systems\n- Drivers\n \n##  _**Coms and Networks**_ \n- Point-point\n- Mesh\n- Range\n- Bandwidth\n- Power use\n \n##  _**Cloud or Server**_ \n- Messaging\n- Web services\n- Linking\n- Data\n- Analytics\n \n##  _**Applications**_  \n- Web\n- Android/iOS\n- User Experience\n\n# **WiFi**\n#### Advantages\n- Integrate with home networks easily\n- Bandwidth and security \n \n#### Disadvantages\n- Higher power \n \n# **Bluetooth**\n#### Advantages\n- Available on phones/tablets/laptops \n- On some existing devices like speakers etc\n \n#### Disadvantage\n- Short range\n \n# **Zigbee**\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818185648.png|300]]\n- Protocol over 802.15.4 layer at 2.4GHz/868/915\n- Payload up to 104 bytes \n- Uses mesh networking  \n####  Advantages\n- Scalable mesh networking\n- Long battery life\n#### Disadvantages\n- Short range\n- Payload sizes are 104 bytes, low transmission \n\n# **6LowPAN over 802.15.4**\n#### Advantages     \n- Supports IPv6\n- Range 10-100m\n- Excellent integration with the internet \n- Gains IPv6 characteristics\n- Mesh networking\n- Can use 2.4GHz or 868/900MHz bands\n \n#### Disadvantages\n- Needs a gateway/hub to LANWAN\n- Less immunity to interference than WiFi\n\n# **Narrow Band-IoT**\n- Cellular \n- 700MHz, 800MHz, 900MHz\n- 200 kbps approx\n- Promises wide coverage\n \n# **Sigfox**    \n- Ultra Narrow Band cellular\n- 868/915Mhz\n- Low Power, Less than 25mW\n- 100 bits per second i.e. slow \n- Range ~3-30km \n- Limited messaging per day\n- Data package provided by operator\n- Up to 140 messages per day\n- Payload is only 12 bytes \n- Can transmit 4 messages of 8 bytes to the device each day\n\n# **LoRaWAN**\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818190412.png|300]]\n- Wide area low power network using gateways\n- Gateways link together\n#### Advantages\n- Lots of security mechanisms \n- SS chirp modulation very robust\n\n#### Disadvantages\n- Up to 50 kbps, uses ISM 868/915MHz bands\n- Payload limited to 100 bytes \n \n# **Global System for Mobile Communications**\n- Standard to describe the protocols for digital cellular networks used by mobile devices\n#### Advantages\n- Existing architecture deployed over the world\n- Maintenance is easier due to large number of network engineers at affordable costs\n#### Disadvantages\n- Existing GSM architecture is patented and requires a license\n- Interference due to FTDMA\n \n# **Handling Data** \n## **The Things Network**\n- Trying to pull together IoT devices to allow intercommunication and IFTT type rules running locally\n- To maintain privacy, data and decision making should operate locally within the home\n- Mainly for LoRaWAN \n\n## **MQTT**  \n- IBM/cars lightweight communication protocol for IoT devices\n- Publish/subscribe\n- Tend to use a message broker like mosquitto\n- \"Topics\" published to broker which others can publish/subscribe\n \n## **xively.com**  \n- Data storage and visualisation\n \n## **HyperCat**  \n- A hypermedia catalogue format designed for exposing information about IoT assets on the web \n \n## **IBM Bluemix**  \n- Cloud platform\n- MQTT upload from devices\n- Gains lots of analytics from IBM cloud \n","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-2/IoT-Architectures":{"title":"IoT Architectures","content":"\n- **Typical IoT Hardware Elements** ‚Üì \n    - ![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/hTjx4asMLJ-pbRPi28aXYw1Bw9tGtE2FC51D3_jX6S04neo--4Fs5gnPTf8SLh19A23sMHush0Vw23zoYgPftc2oD78OHmEGaqrY94Dn8h7Abw5tSPdIeNMCo9rwetHL.png) \n    - PSU\n    - MCU\n    - Coms\n    - Power Source\n    - I/O\n    - Storage\n    - Sensors\n    - Actuators\n    - Switched Mode Regulator\n    - Battery\n    - Radio Transceiver\n    - Flash\n- **Hardware Architecture** ‚Üì \n    - A lot depends on which MCU family is chosen\n    - [System on Chip](../Week 2/IoT Architectures/Hardware Architecture/System on Chip is commonly used/System on Chip.md) is commonly used\n        - System on Chip‚ÜîHas a microcontroller on board and a radio\n    - ESP8266 based systems include WiFi and Bluetooth\n- **Internet Connected Things**\n    - Many systems need a gateway ‚Üì \n        - Communications hub, border-router or gateways link low power hardware to the outside world\n        - Gateway is often more powerful Linux-based hardware\n        - Things may not use IP\n            - e.g. [LoRaWAN](../../LoRaWAN.md), BTIe \n- **Basic Software Elements** ‚Üì \n    - OS/Drivers ‚Üì \n        - Operating System or Bare-Metal\n        - Hardware Abstraction Layer\n        - Networking\n        - Security/Encryption\n        - I/O interfaces\n        - Sensor drivers\n        - Timers, RTC functions\n        - Power supply functions\n    - Objects ‚Üì \n        - Object behaviour code\n        - Coms/Network Stack\n        - Data Storage\n        - Power Management\n    - Fog/Edge ‚Üì \n        - Data processing and/or Decision making in the node, border/edge node or Cloud\n        - Edge node can be the border to the  main internet and provide data services\n        - Cache is common to reduce traffic to the objects\n    - Network ‚Üì \n        - Internet/GSM/communications network\n        - Can be IP based\n        - Security mechanisms\n    - Cloud ‚Üì \n        - User interface\n        - Data storage\n        - Data processing/analytics\n        - Access mechanisms\n- Networks ‚Üì \n    - WiFi/Ethernet\n    - Low Power Wide Area Networks\n    - Low Power IPv6 Networks\n    - Stars\n    - Meshes\n- Data Protocols ‚Üì \n    - Describes the data and mechanisms\n        - e.g. RESTfull\n    - Systems need to use a data protocol regardless of the type of network \n","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-2/IoT-OS":{"title":"IoT OS","content":"\n# **Reasons to use an OS**\n- Device independence\n- Services\n\t- Timers\n\t- Threads\n- An OS provides drivers, networking and HAL \n\t- HAL‚ÜîHardware Abstraction Layer\n- ! \n# **Example OS'**\n- Zephyr \n- Riot-OS\n- Mbed\n- OpenWSN\n- tinyOS (old)\n- Contiki ‚áí Contiki-NG\n- FreeRTOS\n- LiteOS\n- Arduino\n- Linux (Ubuntu Core)\n- The Cloud (various Linux flavours)\n# **Zephyr**\n- Open source  \n- Supports many boards\n- Bluetooth\n- Low energy\n- WiFi\n- 6LowPAN over 802.15.4    \n- CoAP\n- IPv4 and IPv6 \n- Ethernet\n- USB\n- CAN\n- Thread\n# **Mbed**\n- For ARM-based systems\n- Has an optional RTOS\n- Apache 2.0 open source \n# **Riot-OS**\n- Medium sized open source project\n- Low memory footprint\n\t- ~3kB RAM #3kB Flash\n- Internet standards\n- C or C++\n- Can develop on Linux to start with\n- Pre-emptive multi-threading\n- Deterministic scheduling\n- Low latency interrupts\n- Supports \u003e100 boards\n- RIOT Structure\n\t- ! \n# **Hello World**\n- TinyOS\n\t- ! \n- Contiki\n\t- ! \n- RIOT\n\t- ! \n# **Contiki-NG**\n- Original Contiki was in use before RIOT\n- Contiki-NG inherits lots of code/capabilities\n- Runs on fewer boards than RIOT\n\t- ARM and MSP430 mainly\n- Has a 6LoWPAN-CoAP stack\n# **Ubuntu Core**\n- More secure and reliable\n\t- By being minimal and transactional\n\t- Small\n- Uses Snaps rather than debian packages\n\t- Snaps‚ÜîSigned sandboxed packages\n- Used in commercial devices\n\t- Screenly\n\t- Nextcloud\n\t- Car subsystems\n","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-3/Low-Power-Wide-Area-Networks":{"title":"Low Power Wide Area Networks","content":"\n# **Where does LPWAN sit?**\n![[notes/Advanced Computer Networks/Images/Pasted image 20220817175509.png|500]]\n# **LoRa** \n### LoRa Modulation\n- ISM 868/915MHz frequency\n- Proprietary PHY layer (Semtech)\n- Low data rate, simple low level links\n\t1. 3-50 kbit/s data rates\n\n### Characteristics of LoRa\n- Main gains of LoRa are Spread Spectrum and Chirp design \n#### Spread Spectrum and Chirp Design\n- High immunity to interference\n- Long range due to high sensitivity\n- Doppler resistant\n\t- Good for fast moving things\n- Multipath resistant\n\t- Better in urban environments with lots of reflecting surfaces\n- Scalability\n\t- To lots of nodes transmitting on the same frequency\n\n### LoRaWAN Architecture\n![](https://remnote-user-data.s3.amazonaws.com/IktF8GGRSMcmYk43sB6QXPtHfDR_-Ia6f9SS7sVfaqLlHs7P7CDlS-8E9L1qia_Ku_4UhZu1sEd5iKDBf6AaitxrAFavCMySXcdhY0G4sTCtPp7qQ1ORF3oJmS-LViuw.png) \n\n### LoRaWAN Enabled Devices\n- Vehicle detector\n- Water meter\n- CO$_2$\n- Pressure\n \n### Frequencies\n- EU 863-870MHz\n- USA 902-928MHz\n- China 779-787 and 470-510MHz\n- Channels and Restrictions \n\t- In the EU, LoRaWAN typically utilises the 868MHz band\n\t- This band has restrictions limiting the amount of bandwidth which can be taken up by a single application\n\t- The most prevalent implemented solution is a duty cycle limitation\n\t\t- Longer packet = Less frequent\n\t\t\t- e.g.\n\t\t\t\t- 10 byte packet every 30 seconds\n\t\t\t\t- 250 byte packet every 10 minutes\n\t\t\t- A variable data rate means variable power consumption\n\n### IDs\n- Devices use a 64 bit DevEUI identifier\n- And an Application ID - AppEUI\n- When joining a device also gets a dynamic 32 bit DevAddr\n\n### Frame Counter\n- Network and device reject counters that are lower than expected\n- Helps to prevent replay attacks\n\n### LoRaWAN and The Things Network \n![](https://remnote-user-data.s3.amazonaws.com/r-Oc8J3eWREvYrd2HBDEhf_qv2UZkKa4Za_Fo59ukSuHDVjOwFt2h6i5qkBpTYWpow5SKfJA1fqrGpoCVUBOVF6vuhL5Gmn2Zes5CTSCwMhTq8IxLb3G0AyNDNMOtQbt.png) \n\n### Classes of Device\n#### Class A\n- Bidirectional\n- Opens two receive windows after an uplink\n \n#### Class b\n- Time synchronised received windows for downlink messages\n- Gateway sends beacons\n\n#### class c\n- Keeps receive windows open unless transmitting\n- Low latency but high power use\n\n### Typical LoRa Transceievers\n- UART\n- SPI\n\n### Weightless\n- Operates in ISM band (868MHz) and TV white space\n- Intended for long range M2M communication\n\t- 5km range\n\t- Aims for 10 year battery life\n\t- $2 chip\n\n### Nano Sat Comms\n- Nano satellites are cheap to deploy and are an emerging possible LPWAN channel\n- $5/month for global coverage\n- 750 packets/device/month\n- 200 bytes/packet\n","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-3/MQTT-and-COAP":{"title":"MQTT and COAP","content":"\n# **MQTT**\n    - By IBM in 90s\n    - ! \n    - Designed to be smaller packets and less overhead than HTTP\n    - Messages are published to a broker\n    - Clients subscribe to data streams\n    - MQTT topics are hierarchical \n    - Example JSON message over MQTT\n        - ! \n\n# **Constrained Application Protocol**\n**Efficient in low power IoT systems  **\n## **RESTful - Makes interoperability with the web simple**\n## **Features** \n\t- More modern lightweight design than MQTT\n\t- Prefers UDP \n\t- Binary format for protocol\n\t- DTLS security option\n\t- Block transfers\n\t- Resource discovery\n\t- Push notification\n\t- Cache model\n\t- Multicast support\n\n## **CoAP Header**\n\t- ! \n\t\t- V‚ÜíVersion\n\t\t- T‚ÜíType\n\t\t- Tkl‚ÜíToken length\n\t\t- Code‚ÜíMethod (1-10) e.g. GET, or response code (40-255) like HTTP\n\t\t- ID‚ÜíHelps match messages\n\t\t- Token‚ÜíUsed to match responses\n\t\t- Option‚ÜíCan mean payload is a URL string\n\t\t- Payload‚ÜíCan be anything\n## ****\n## ** _**Options Header**_   **\n\t- ! \n\t- Defines the content type\n## ****\n## ** _**Request Examples**_  **\n\t- ! \n\t- Note response can ACK and contain the payload\n## ****\n## ** _**Confirmable Bit Deals with Packet Loss**_  **\n\t- ! \n\t- Client wanted an ACK so resends a last request\n\t- Note use of message ID to keep track of responses\n## ****\n## ** _**Slow Responses**_  **\n\t- ! \n\t- So ACK can be given immediately, then the payload later\n## ****\n## ** _**CoAP Proxy/Cache**_  **\n\t- ! \n\t- Allows nodes to sleep and the proxy can reply with cached values\n## ****\n## ** _**Observation**_  **\n\t- ! \n\t- Nodes can push updated values\n## ****\n## ** _**Block Transfers**_  **\n\t- ! \n\t- Larger data blocks can be sent in chunks and re-built at the client\n\t- Don't forget this is UDP so it is fast but packets can be lost\n## ****\n## ****Resource Discovery** **\n\t- GET .well-known/core  \n\t\t- Provides a CoRE  description of the resources on the node\n\t\t- ! \n\t-  _**CoRE**_  \n\t\t- (Link Format) is a standard for defining resources\n\t\t- So IoT objects can be added and their resources discovered automatically\n\t\t- For example, nodes can POST their CoRE data to a resource discovery and can update it with a PUT or DELETE\n## ****\n## ****Multicast**  **\n\t- !\n\t- Can multicast queries to multiple devices\n## ****\n## ** _**Using CoAP**_  **\n\t- Coapthon3  \n\t\t- Python library\n\t\t- Lets you run a server\n\t\t- And send messages with a client example\n\t- LibCoap  \n\t\t- C library\n\t\t- Has a command line coap-client that's useful\n## ****\n## ** _**Tradfri**_  **\n\t- Can test CoAP with IKEA Tradfri devices\n","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-4/IPv6-Deployment-and-Transition":{"title":"IPv6 Deployment and Transition","content":"\n# **Carrier-Grade NAT**  \n![[notes/Advanced Computer Networks/Images/Pasted image 20220818191613.png|300]]\n- ISP subnet becomes a large private network\n- Home routers are assigned private IPs\n- Amount of required public addresses is reduced as well as cost\n- Does not actually solve IPv4 exhaustion\n\n# **Motivation for IPv6**  \n- IPv4 exhaustion\n- Direct addressability\n\t- End-to-end global addressing as intended\n\t- No more NAT\n- Less complex networks\n \n# **What is needed for IPv6 Deployment**  \n- IPv6 address space\n- IPv6 routing\n- IPv6 firewalling\n- DNS that serves IPv6\n- IPv6 address allocation mechanism\n \n# **DHCPv6**    \n- Provides a managed way to allocate IPv6 addresses\n\t- And other information (search domain, tftp server)\n- Prefix delegation makes automated sub-allocation of IPv6 address space possible\n\n##  _**DHCPv6 Interaction**_  \n- Client sends a SOLICIT over multicast\n- Server responds with an ADVERTISEment of an address directly to the client\n- Client sends a REQUEST for the advertised address over multicast\n- Server sends a REPLY confirming the address allocation\n \n##  _**DUIDs**_   \n- Used to identify a host to the DHCPv6 server\n\t- In IPv4, this was traditionally the MAC address\n- What about for\n\t- Dual-stack systems - Different IDs for IPv4 and IPv6\n\t- Dual-boot systems - Different DUIDs\n\t- OS reinstall - New DUID\n\n# **Dual Stack Deployment**    \n- Running both IPv4 and IPv6 protocols on the same equipment\n- Devices have both IPv4 and IPv6 addresses\n- Need to secure (e.g. firewall) both protocols\n##  _**Applications in Dual Stack Environments**_     \n- DNS returns IPv6 and IPv4 records\n- Applications \"choose\" when to use IPv4 or IPv6 \n\t- Current preference is IPv6 if available\n- Applications need to support IPv6 \n \n##  _**Disadvantages**_     \n- Essentially have two networks running in tandem \n- Potentially more issues to troubleshoot\n- Double the IP configuration\n- Overhead for DHCP, firewall, etc\n- More hardware usage\n- Doesn't actually free up IPv4 address space \n \n# **IPv6 Deployment Strategy** \n- Develop comprehensive address plan\n- Is it possible to do an initial IPv6 deployment at the same time as a network upgrade\n\t- Reduced cost\n##  _**Optimal deployment order**_   \n- Start with IPv6 from ISP to your firewall\n- Roll out some test nets\n- IPv6 enable public-facing services\n- IPv6 enable client devices\n \n# **Case Study: Imperial College**  \n- Have IPv6 support almost everywhere\n##  _**Slow Process**_   \n- 2003 - Started experimenting\n- 2006 - Routers IPv6 enabled\n- 2010 - Deployment to clients started\n- 2011 - Server and service deployments\n- 2013 - WiFi IPv6 enabled\n- 2018 - Guest network IPv6 enabled\n \n##  _**Deployment Decisions**_   \n- Dual-stack\n\t- No case for IPv6 only at the time\n\t- Looking at IPv6-only going forward\n- SLAAC rather than DHCPv6\n\t- DHCPv6 was not well supported when started\n- Parity\n\t- Same network, same paths, same upstream\n- Whole network\n\t- Same network provision everywhere\n \n##  _**Deployment Drivers**_   \n- eScience/HEP/CERN are moving to IPv6\n\t- Encouraged other HE institutions to deploy IPv6\n- Imperial were going to run out of IPv4\n- Do right and early for a low cost\n- Preparing for surprise research requirements\n- Didn't want to be last to implement\n \n# **Case Study: Microsoft IT**  \n- Had dual-stack in labs since 2011\n- Push in retrofit in 2016 to put IPv6 everywhere\n- Looking to move to IPv6 only but keep hitting roadblocks in IPv6 support\n","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-4/Wireless-Sensor-Networks":{"title":"Wireless Sensor Networks","content":"\n# **Wireless Sensor Networks**  \n- Autonomous networks of low-power wireless sensors\n## **Examples**  \n### Berkeley \u0026 Intel bird nest monitoring\n\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818192228.png|300]]\n\n- Via small sensor nodes\n\n### Volcano monitoring\n\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818192405.png|300]]\n\n- Cheap, small sensors used by Harvard in Equador\n\n### Agriculture\n\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818192530.png|300]]\n\n### Geo-sensors for monitoring forests\n\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818192625.png|300]]\n\n### Argo Floats\n\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818192714.png|300]]\n\n- Communicate data via satellite\n- Typical lifetime is 150 cycles/4-5 years \n \n# **Power-Aware Routing**    \n- WSNs spread routing around to prevent overloading one node\n- Other considerations \n\t- TX vs RX power use\n\t- Start-up time from sleep/off (typically ms)\n\t- Media Access Control (MAC) in dense nets\n\t- \"Overhearing\" wastes power\n\t- Single point of failure with one base station/sink\n \n# **Listen-Sleep Media Access Protocols** \n## **Typical MAC Protocol**\n\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818192851.png|400]]\n\n- May need synchronisation\n- Can sometimes use a low-power preamble listen\n \n# **Multi-hop Routing** \n\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818193516.png|400]]\n\n- Power required to transmit in a single hop \n\t- $E_{\\text{single-hop}}(k,d)=kE_{elec}+k(nd)^2E_{amp}$ \n- Power required to transmit in  **n**  short hops \n\t- $E_{\\text{multi-hop}}=n(kE_{elec}+kd^2E_{amp})+(n-1)kE_{elec}$\n\t-  **n**  transmits and  **n-1**  receives\n- Basic principle is {{large amount of power to do massive range}} vs {{everyone suffering power drain to pass packets on}}     \n \n# **Low-Energy Adaptive Clustering Hierarchy (LEACH)** \n\n![[notes/Advanced Computer Networks/Images/Pasted image 20220818193557.png|400]]\n\n- Sometimes single-hop will be better than multi-hop and vice versa\n- We have only considered total energy\n- Form clusters of sensors around local temporary cluster-heads\n \n# **Environmental Sensor Networks**\n\n- Comprises an array of sensor nodes and a communications system which allows their data to reach a server\n\n## **Properties** \n\n- Enable data that would previously be impossible to collect to be gathered\n- Send data regularly without human intervention\n- Typically wireless\n- Battery powered\n\n### May have \n- Solar\n- Wind generation\n- Other energy harvesting\n\n#### Kirk Stuff\n- Glacsweb Probes\n\t- 173 MHz radio transceiver\n\t- Senors\n\t\t- Temp\n\t\t- Pressure\n\t\t- Strain\n\t\t- Conductivity\n\t\t- Accelerometer\n\t- GWpacket and protocols\n- IoT and Standards\n\t- Emerging standards mean IP can be used everywhere\n\t\t- Application\n\t\t\t- CoAP - Data\n\t\t\t- UDP - Transport\n\t\t\t- RPL - Routing\n\t\t\t- 6LowPAN - Network\n\t\t\t- IEEE 802.15.4 - Data Link\n\t\t\t- 868 MHz - Physical Layer \n- ![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/Q21pTQitJ36F2YtKrEWkTfJ9Z7TPAXnOO8qjUZ2wfAN4AgzGVDwJdvJ9f53Wo6XGlO9OVBOeD4MLJHRommWA1LF24hahkWVv3ikJ1ApUWzgipVA28SAEGZHq_pIWW6p5.png) \n\t- Code in the estate GETs the data from each node\n\t- In the previous version nodes POSTed their data\n- Communication\n\t- Always on\n\t- Gateway tries to pull every hour LMAO\n\t- Each node has a global IPv6address\n\t- Can be pinged to check if connected\n\t- ![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/7kkS9DkhWyDDhXbSa8f6HHPKr_lRprRD2tu2_AOTfSdfKr3aFp826HTZCQ9DNwtNPvxtb7o4n6VAwIKgtsJi8Q6FuhGzVyLI4TjrdxYzp3sEnuB_XvsyNwyE4bXqGLw3.png) \n- CoAP\n\t- Like a binary HTTP/web-protocol\n\t- Uses UDP packets - less network traffic\n\t- Low power\n\t- Nodes can reply to URI requests\n\t\t- ![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/XnH69LRhZC1DemAi_B9uFLRcs3LnqQMXKozLESpj-Mun_fNGHwPgErnMRzzFfPtroDoHVQYDgqSMNnXWL2VnR2aauNWYZ-ze7Ck2LlhNlT52gJGtVe4audwjoKb1f2n0.png)\n\t- Can be used to discover what nodes can do\n\t\t- ![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/TbjZFTvyAv7EENbMKgn-Em4y3gzqGk0wJeIaC4uxrbl-RPK-NpZ4tQYCpoRta_lnJvgtj06OY1_ztkJ5YWUCfTFPIaM96NFoxFRLnDE6lBAaiz9hdnqcm3jckHQP2NPI.png) \n- Gateway/Border Router\n\t- Mini ITX running Ubuntu\n\t- Nodes connected over USB\n\t- Estate's satellite ISP\n\t- SIXXS Iv6 tunnel\n \n# **Published Sensor Networks** \n## **Oxford Flood Network**\n- LoRaWAN\n- Integrates with The Things Network\n- Uses small, low-cost ultrasound sensors to detect water surface\n- NB wireless is used to link the sensors to a local communications hub\n- Data is aggregated and sent over TV white space\n\n## **Calderdale Flood Project**\n- Nodes communicate with LoRaWAN gateways over LP wireless \n- Gateways forward packets over UDP to a message broker \n- Data is then stored in a DB\n\n## **Mountainsensing**\n- 6LoWPAN\n- Each node has unique IPv6 address\n- Estate system GETs data from each sensor node using Constrained Application Protocol\n- Estate uses IPv6 tunnel and sat links to communicate to server\n\n## **Fresh Water Real-Time Monitoring** \n- Sensor nodes installed randomly\n- Sensor devices connected to Coordinator Device using multi-hop data transfer\n- Data then sent to remote data base server through commercial GSM provider networks","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-5/IEEE-802.15.4-and-6LoWPAN":{"title":"IEEE 802.15.4 and 6LoWPAN","content":"\n# **IEE 802.15.4** \n- Standard that covers physical specifications (PHY) and MAC for LR-WPANs\n- Sits in the Network Access layer of the TCP/IP model \n- Layer 1 and Layer 2 of the OSI 7-layer model\n## **Applications** \n- Wireless Sensor Networks / Environmental Sensor Networks\n- Industrial communications and control\n- Home automation\n- Health monitoring\n- Smart metering\n- Asset \u0026 inventory tracking\n- Intelligent agriculture\n\n## **Alternatives and Performance** \n#### Application\n- 802.15.4 - Monitoring and Control \n- Bluetooth - Device Connectivity \n- GPRS/3G - Wide-area Voice and Data\n- 802.11 (WiFi) - High-speed internet    \n#### Battery Life\n- 802.15.4 - Years \n- Bluetooth - Weeks\n- GPRS/3G - Days\n- 802.11 (WiFi) - Hours    \n#### Bandwidth\n- 802.15.4 - '\u003c' 250 Kbps\n- Bluetooth - '\u003c' 24 Mbps\n- GPRS/3G - '\u003c' 100 Mbps\n- 802.11 (WiFi) - '\u003c' 1300 Mbps     \n#### Range\n- 802.15.4 - '\u003c' 100m\n- Bluetooth - 1 - 100m\n- GPRS/3G - Kilometres\n- 802.11 (WiFi) - '\u003c' 100m    \n#### Advantages \n- 802.15.4 - Low power, low cost \n- Bluetooth - Ubiquity, convenience\n- GPRS/3G - Range, existing infrastructure\n- 802.11 (WiFi) - Speed, ubiquity    \n## **Device Types** \n- PAN Coordinator - The network's overall controller   \n- Coordinator - Provides synchronisation services to other devices\n###  Full Function Device\n- Can function as a PAN Coordinator or Coordinator\n- Can associate with multiple other devices at once\n\n###  Reduced Function Device\n- Cannot function as a PAN Coordinator or Coordinator\n- For very simple applications\n\t- e.g. Light switch or PIR sensor\n- Can only associate with one FFD at a time\n\n## **Network Topologies** \n### Star Topology    \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819175005.png|300]]\n- All communications are to/from the PAN Coordinator\n#### Benefits\n- Home automation\n- PC peripherals\n- Games\n- Personal healthcare\n\n### Peer-to-Peer\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819175053.png|300]]\n- All devices in range of each other can communicate directly\n- Basis of Mesh networking\n- Allows more complex network formations \n#### benefits  \n- Industrial control/monitoring\n- WSNs\n\n## **Addressing**\n- Each device has a universal 64-bit address\n\t- Can also have a short 16-bit address\n\t\t- Only valid within the PAN \n\t\t- Allocated by the PAN co-ordinator at association\n\n## **Frame Structure**  \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819175530.png|300]]\n- Low complexity \n- SHR and PHR are PHY dependant\n### PPDU (PHY Protocol Data Unit)\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819175612.png|300]]\n#### Preamble\n- Length is PHY dependent\n\t- O-QPSK modulation uses an 8-symbol, 4-byte preamble\n\t- BPSK modulation uses a 32-symbol, 4-byte preamble\n\t- ASK modulation uses a 2-symbol, 5-byte preamble\n---\n- SFD - Start of Frame Delimiter\n- Len - 7-bit frame length\n- PSDU - PHY Service Data Unit\n\n### PSDU (PHY Service Data Unit)\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819175749.png|500]]\n- General MAC frame format is used for data transmission\n- ACK frame contains  \n\t- Frame control\n\t- Sequence number\n\t- CRC \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819175815.png|200]]\n\n###  Compared to Ethernet\n#### 802.15.4 Header\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819175918.png|200]]\n- Data Frame - 25 bytes + Preamble\n\t- When using PAN ID compression and 64 bit addresses\n- ACK Frame - 7 bytes + preamble\n#### Ethernet Header  \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819175957.png|300]]\n- 19 bytes + Preamble\n\n## **Example Devices/Deployment** \n- Smart lightbulbs\n- Zolertia Z1\n- Mountain Sensing\n \n## **Higher Layers** \n### Zigbee\n- Specifies Internet layer and Application layer\n- Facilitates Mesh networking and Tree (multi-hop) networking\n \n### WirelessHART  \n- Wireless Highway Addressable Remote Transducer Protocol\n- Intended for industrial wireless sensing applications \n- Mesh architecture  \n\t- Self-organising\n\t- Self-healing\n\t- Time-synchronised\n- Specifies everything above the Network Access Layer\n \n### 6LoWPAN\n- IPv6 over Low power Wireless Personal Area Networks \n- Alternative to IPv4/IPv6 at the Internet layer of the TCP/IP model\n- Layer 3 of the OSI 7-layer model\n- Allows IPv6 packets to be sent over 802.15.4 networks \n- Extrapolates IPv6 address from 802.15.4 address if possible\n- Smallest possible header is significantly smaller than full IPv6 header\n\t- 6LoWPAN is 2 bytes and full IPv6 is 40 bytes\n\n## **Decoding** \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180147.png|350]]]]\n- Need to decode the Frame Control to know the header format\n### Frame Control\n- 61 DC is the Frame Control\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180241.png|350]]\n- It tells us this packet\n\t- Is a data frame\n\t- Requires an ACK\n\t- Uses PAN ID compression\n\t- Is an 802.15.4 frame\n\t- Uses 64-bit source and destination addressing\n- From this we know it has a 21 byte 802.15.4 header \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180316.png|350]]\n- Destination address is c1 0c 00 00 00 00 0f ee\n- Source address is c1 0c 00 00 00 00 10 05\n### 6LoWPAN Decoding\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180344.png|350]]\n- 41 tells us that an uncompressed IPv6 header follows\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180359.png|350]]\n### Host-to-Host\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180438.png|350]]\n- The IPv6 header told us that a UDP header followed \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180509.png|250]]\n### The Payload\n- 70 bytes of header for 8 bytes of payload\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180540.png|350]]\n### The Reply\n- Same 802.15.4 header, with addresses reversed\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180607.png]]\n- 6LoWPAN header is compressed to two bytes\n\t- First 3 bits of dispatch indicate IPHC header\n\t- Last 5 bits are usurped for encoding information about compression\n- 30 bytes of header for 28 bytes of payload\n\n## **RPL**  \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819180652.png|500]]\n- Routing Protocol for Low-Power and Lossy Networks\n- Works out routing over Mesh networks\n- Allows for multi-hop networks\n- Create tree-like topologies\n\t- Destination-oriented directed Acyclic Graphs (DODAGs)\n- Each node is assigned a distance-dependant rank\n- Uses ICMPv6 for control messages","lastmodified":"2023-04-19T18:54:03.991889344Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-5/Smart-Home-IoT":{"title":"Smart Home IoT","content":"\n- Interconnected Smart Home IoT Devices\n    - Zigbee maintains a low-power self-{{forming}}, self-{{healing}} {{mesh}} network\n    - When a Zigbee device is online, it starts to connect with other Zigbee devices for building a network of related devices\n- Smart Home Technology Trends\n    - Manufacturers of smart home IoT devices need to ensure their products and services will work on different platforms\n    - Smart home technology becomes smarter due to technologies such as machine learning, computer vision and natural language processing\n    - In-home healthcare becoming smarter offers potential to reduce stress put on traditional healthcare channels\n- Threats and Countermeasures\n    - Man-in-the-middle‚ÜîAn attacker breaches, interrupts or spoofs communications between two systems\n    - Data and Identity Theft‚ÜîData generated by unprotected smart appliances provide attackers with personal information that can be exploited\n    - Device Hijacking‚ÜîThe attacker hijacks and assumes control of a device\n    - Distributed Denial of Service (DDoS)‚ÜîControl multiple IoT devices to initiate excessive communication traffic to a target network node, temporarily or indefinitely disrupting services of a host connected to the internet\n    - Permanent Denial of Service (PDoS)‚ÜîDamaging the device such that it would require replacement of reinstallation of hardware\n- Dynamic Electricity Pricing ‚Üì \n    - Set high prices at peak energy hours to discourage the energy usage there for energy load balancing\n    - ![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/kOh0JlZfDdsamSjVrpTH_UThDXtfdxWFjQTfXrFtvZ5ud7Jf5tnR4enib6HifxMbsHLBcYIWW-P24IQ51ch8rcc3Ffp44lhEPclmGlz4_n5Ia4HTyA4a-5xgag2GyXOJ.png) \n- Energy Scheduling for a Smart Home\n    - Decisions ‚Üì \n        - When to launch a home IoT appliance\n        - At what power level\n        - For how long\n        - Utilize renewable energy\n        - Subject to scheduling constraints\n    - Targets ‚Üì \n        - Reduce user bill\n        - Reduce Peak-to-Average ratio of grid energy usage\n        - Maximize renewable energy usage\n    - The Smart Home IoT scheduler computes scheduling solutions for the future, meaning it requires the future pricing\n        - Pricing Models\n            - ![](local://C:/Users/isaac/remnote/remnote-615c4b5e9f997400356d29fa/files/lLz_WRyUWZTGsUz1RV88pL6ykzh8w0EF1jE4fQlNDL6yjNYLunFjVvVSxhVGPvNcO8vuhGq8Nm9wuK04L_gsgPdhGjkc34F5sToC8UuxIF6et3X0COAYNSJqPct3fDlm.png) \n                - Guideline Pricing‚ÜîUtility publishes it one day ahead to guide customers to schedule their appliances\n                - Realtime Pricing‚ÜîUtility uses it to bill customers\n            - Handling Multiple Users ‚Üì \n                - Dynamic pricing\n                - Game theory\n","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-6/IEEE-802.11_-Wi-Fi":{"title":"IEEE 802.11_ Wi-Fi","content":"\n# **IEE 802.11**   \n- Set of standards that cover physical specifications (PHY) and MAC for Wireless Local Area Networks (WLANs)\n- Intended to be a replacement for wired Ethernet \n- Sits in the Network Access layer of the TCP/IP model\n## **History**\n#### 802.11a \n- 1999\n- 1.4Mb/s at 5.4GHz \n- [[#OFDM]]\n#### 802.11b \n- 1999\n- 11Mb/s at 2.4GHz\n- [[#DSSS]]\n#### 802.11g \n- 2003\n- 54Mb/s at 2.4GHz\n- [[#OFDM]]\n#### 802.11n \n- 2009\n- 600Mb/s at 5GHz\n- [[#MIMO]], [[#OFDM]]\n#### 802.11ac \n- 2013\n- 1733Mb/s at 5GHz\n- [[#Mu-MIMO]], [[#OFDM]]\n#### 802.11ax \n- 2021\n- 2402Mb/s at 5GHz\n- [[#Mu-MIMO]], [[#OFDMA]]\n- High efficiency wireless\n- Improved efficiency in dense environments, e.g. lots of people streaming\n### How has Wi-Fi Improved\n- Better modulation and spectrum usage\n\t- DSSS to OFDM\n- Wider channels\n- Better spatial performance\n- Better digital modulation \n\t- From , Quadrature Phase Shift Keying and 16/64 Quadrature Amplitude Modulation (802.11g)\n\t- To 256-QAM (802.11ac) and 1024-QAM (802.11ax)\n## **DSSS** \n- **D**irect **S**equence **S**pread **S**pectrum\n- Send a wide wave continuously - may lose some of it\n- Spread across the frequency domain\n- Redundant bits of data (chips) added to the representation of 0's and 1's\n\t- Spreading ratio‚ÜîRatio of chips to data\n\t\t- More chips means more immune to interference \n- 1 to 2 Mbps\n### HR-DSSS  \n- High-Rate Direct Sequence Spread Spectrum\n- Allowed 5.5 and 11 Mbps \n## **FDM**  \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819181453.png|400]]\n- Frequency Division Multiplexing\n- Multiple transmitters transmit over multiple frequencies simultaneously\n- Guard bans are used between each frequency to avoid signal overlap \n## **OFDM** \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819181532.png|300]]\n- Orthogonal Frequency Division Multiplexing\n- Data transmitted in parallel on multiple carriers \n- Carriers can be densely packed, saving bandwidth\n- Adding Orthogonalisms \n- Sub-carriers are orthogonal to each other\n\t- The peak of one subcarrier coincides with with the null of an adjacent subcarrier\n## **Comparing DSSS and OFDM**\n#### DSSS \n- Uses the entire allocated frequency\n- Lower in throughput\n#### OFDM    \n- Sends the signal using multiple frequencies\n- Allows for a higher data rate\n#### OFDM is better\n- Which is why 802.11a and 802.11g were faster than 802.11b\n## **OFDMA**  \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819181715.png|350]]\n- OFDM with Multiple Access\n- Allows us to send traffic to multiple clients per stream \n- Not every packet of data being sent or received will consume the entire available bandwidth \n- Separating slices of time and sub-channels between users\n- Increased efficiency for short data frames\n## **Beamforming**  \n- Focus RF towards a client\n- Targets medium range \n- Introduce in 802.11n \n#### Process  \n- Announcement\n- NDP\n\t- Null Data Packet\n- Measurements returned\n- Beamforming\n## **MIMO** \n- Multiple-Input and Multiple-Output\n- Single pair of devices can send/receive multiple data streams with different coding \n#### Mu-MIMO \n- Multi-user MIMO\n- Parallelises for multiple clients in the spatial domain \n# **Wi-Fi**\n- Wi-Fi lacks mechanisms to mitigate interference\n## **Multiple Access**\n### Ethernet  \n#### CSMA/CD  \n- Carrier Sense Multiple Access/Collision Detection\n- If a collision occurs, detect it, terminate it, retransmit\n- Much less of a concern in switched networks\n### Wi-Fi  \n#### CSMA/CA  \n- Carrier Sense Multiple Access/Collision Avoidance\n- Reduce the possibility of collisions in the first place\n- Make sure the channel is clear before sending a packet\n- Or wait and try again\n## **2.4 GHz**  \n- Crowded space\n- Three non-overlapping 22 MHz channels (802.11b)\n- Two 40MHz channels (802.11n)\n## **5 GHz**  \n- More bandwidth\n- Has worse penetration than 2.4 GHz\n## **DFS**  \n- Dynamic Frequency Selection\n- Avoids interference with radar by listening for radar activity and avoiding occupied channels\n- Adds cost and complexity\n- Slows down initial boot on relevant channels\n- Susceptible to false triggers that boot users off channels\n## **802.11ad**  \n- Operates on 60 GHz\n- Useful for very local networking\n- Wireless displays\n## **802.11ay**  \n- Development on 802.11ad\n- Operates on 60 GHz \n## **Target Wake Time**\n- Wi-Fi is not battery friendly\n- In the old method (802.11b)    \n\t- Clients sleep between AP beacons\n- In the new method (from 802.11ah)   \n\t- Client and AP negotiate when a client can access the spectrum\n\t- Clients can sleep more\n# **Tags**\nFILE TAGS: 802.11_WiFi","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-7/IPv6-Deployment-and-Transition-2":{"title":"IPv6 Deployment and Transition 2","content":"\n# **Tunnelling**    \n- The encapsulation of IPv6 packets in IPv4 packets between two destinations\n\n## **6in4**    \n![[notes/Advanced Computer Networks/Images/Pasted image 20220817184232.png|300]]\n![[notes/Advanced Computer Networks/Images/Pasted image 20220817184249.png|300]]\n- IPv6 packet with a IPv4 header in front\n- Can be difficult to forward   \n\n## **Teredo**    \n- Encapsulates IPv6 in IPv4 UDP packets\n- Operates without cooperation of the local network \n- Can only provide a single IPv6 address per tunnel endpoint\n- Uses servers and relays\n### Servers    \n- Set up the connection\n- Detects NAT configuration \n- Helps establish a connection between a Teredo client \u0026 relay \n- Is what the client talks to to keep the connection alive \n### Relays    \n![[notes/Advanced Computer Networks/Images/Pasted image 20220817184524.png|500]]\n- Forward traffic between IPv6 hosts and the Teredo client\n1. ICMPv6 Echo Client \u003e Destination Server\n2. Server forwards ICMPv6 echo to destination\n3. Destination replies to nearest Teredo relay\n4. Relay sends Teredo 'bubble' to Server\n5. Server forwards Teredo bubble to client\n6. Client sends bubble back to Relay (thus establishing a connection to the relay)\n7. Relay forwards ICMP reply to Client\n8. Client can then start communicating with Destination via Relay\n\n## **VPNs**    \n- Can be configured to tunnel IPv4 and IPv6 using TCP or UDP \n\t- IPv6 over an IPv4 network\n\t- IPv4 over an IPv6 network\n- Encryption overhead \n\n## **NAT64**    \n- IPv4 addresses embedded in a specific IPv6 prefix\n- Last 32-bits taken as the IPv4 address\n- 152.78.118.51 becomes 64:ff9b: :152.78.118.51 \n- NAT64 gateway translates packets with the prefix to IPv4 \n- Limits connections to a client-server model using UDP, TCP and ICMP \n \n## **DNS64**    \n- DNS server synthesises a AAAA (IPv6) record for a domain that only has A (IPv4) records\n- Combine with NAT64 for a whole solution   \n \n## **NAT64/DNS64** \n![[notes/Advanced Computer Networks/Images/Pasted image 20220817184645.png|400]]   \n\n## **464XLAT**    \n- Limited IPv4 connectivity across an IPv6-only network \n![[notes/Advanced Computer Networks/Images/Pasted image 20220817184745.png|400]]\n- Uses two translators\n### **C**ustomer-side Trans**lat**or (**CLAT**)    \n- Converts IPv4 to IPv6 \n- Stateless\n### **P**rovider-side Trans**lat**or (**PLAT**)    \n- Converts IPv6 to IPv4 \n- Stateful\n\n## **Dual-Stack Lite (DS-Lite)**    \n![[notes/Advanced Computer Networks/Images/Pasted image 20220817185050.png]]\n- Allows service providers to migrate to an IPv6 access network without changing IPv4 end-user software\n- IPv4 tunnelled and transmitted over an IPv6 tunnel\n- Tunnelled IPv6 is decapsulated and undergoes private-public IPv4 translations by NAT\n- Encapsulation can run directly on a client device \n- Common deployment is to run DS-Lite to the **C**ustomer-**P**remises **E**quipment router","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-7/Software-Defined-Networking":{"title":"Software Defined Networking","content":"\n# **Software Defined Network** \n- A network in which the control plane is physically separate from the data plane \n ## **Control Plane**\n ![[notes/Advanced Computer Networks/Images/Pasted image 20220817181238.png|300]]\n- Computes the paths that the packets will follow\n- Laymans Terms - Determines how and where packets are forwarded (needs non-local information, not fast)\n \n### The Two Abstractions\n- Figure out the network topology\n- Configure forwarding states for the switches\n \n## **Management Plane**\n![[notes/Advanced Computer Networks/Images/Pasted image 20220817181414.png|300]]\n- Group of applications that provides functions to implement network control and operation logic \n- Sets the weights in the node graph\n\n## **Data Plane**\n- Processing and delivery of packets with local forwarding state\n- Switch router looks at the packet header and the forwarding state and makes the forwarding decision\n### Abstraction Layers   \n#### Application Layer  \n- Application and mnemonic names\n#### Transport Layer  \n- Reliable (or unreliable) transport\n#### Network Layer  \n- Best-effort global packet delivery\n#### Link Layer  \n- Best-effort local packet delivery\n#### Physical Layer  \n- Physical transfer of bits\n \n##  _**SDN Motivation**_     \n- Introduces abstractions/modularity to control plane\n- Makes the network open and programmable \n \n##  _**Control Plane Abstractions**_  \n- SDN introduces two control plane abstractions \n\t- Figure out the network topology\n\t- Configure forwarding states for the switches\n\n## **Network Virtualisation**\n- Introduce new abstraction and new SDN layer\n![[notes/Advanced Computer Networks/Images/Pasted image 20220817181711.png|300]]\n### Abstraction\n- Virtual Topology - Allows operator to express requirements and policies   \n### Layer\n- Network Hypervisor\n\t- Implements the Virtual Topology\n\t- Decouples the control program from the physical network\n\n##  _**Does SDN simplify the network?**_     \n- Does not eliminate complexity \n-  Hypervisors are still complicated code \n\n##  _**What SDN achieves**_     \n- Simplifies interface for control program\n- Pushes complexity into reusable code\n \n## **Planes, Layers and Architecture** \n![[notes/Advanced Computer Networks/Images/Pasted image 20220817182633.png|500]]\n### Management Plane\n1. \u003cmark class=\"pink\"\u003eNetwork applications\u003c/mark\u003e\n### Control Plane \n2. \u003cmark class=\"green\"\u003eNorthbound API (e.g. Java)\u003c/mark\u003e\n3. \u003cmark class=\"green\"\u003eNetwork OS\u003c/mark\u003e\n4. \u003cmark class=\"green\"\u003eNetwork Hypervisor\u003c/mark\u003e\n### Data Plane    \n5. \u003cmark class=\"blue\"\u003eSouthbound API (e.g. OpenFlow)\u003c/mark\u003e \n6. \u003cmark class=\"blue\"\u003eInfrastructure\u003c/mark\u003e\n\n## **OpenFlow Basics**    \n- Matches arbitrary bits in headers\n- Performs action depending on the contents of header \n\t- Forward to port(s), drop, send to controller\n\t- Overwrite header with mask\n\t- Forward at specific bit-rate\n\n## **Virtualisation for Multi-Tenant Datacenter**    \n- Want to allow each tenant to specify virtual topology \n- Which defines their individual policies and requirements \n- Hypervisor takes individual tenant virtual topologies \n- Computes configurations to implement all simultaneously  \n\n## **SDN in Smart Grid Resilience**    \n- Establish dynamic routes from a control centre to grid devices - reduces time window in which attacker can inject malicious commands\n- Used to reset switches or recompute routing if compromised switches are detected\n###  Security Risks\n- Compromised SDN controller could issue malicious SDN control messages to undermine network performance\n\n# **Intent Based Networking (IBN)**\n- Emerging technology\n- Administrators send a request to tell network what outcome they want (intent), but do not need to code and execute individual tasks manually\n- Provide IBN system high level business policies and network will be automatically configured to implement them\n- IBN = SDN + AI\n\n# **SDN**\n![[notes/Advanced Computer Networks/PPTXs/SDN.pdf]]","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-9/Bluetooth":{"title":"Bluetooth","content":"\n# **Personal Area Networks**  \n- Short-range\n- Body area networks\n- Personal devices\n# **2.4GHz Spectrum Band** \n- Globally unlicensed part of the spectrum\n- Interference needs to be appropriately handled\n- Aims to maximise bandwidth and minimise RF interference while operating at a very low power\n# **Bluetooth**\n## **Bluetooth 1.0**  \n- Open specification\n\t- Publicly available\n\t- Royalty free\n- 2.4GHz  \n- Support multiple devices\n- Low data rates and low duty cycles\n\t- \u003c 1Mbit/s\n- Low power\n\t- Intended for battery powered devices\n## **Bluetooth Radio**\n- Divides 2.4GHz radio in 79 channels\n\t- 1MHz per channel\n- Uses Phase Shift Keying Modulation \n## **Frequency Hopping** \n- Transmissions frequently hop between channels to reduce interference\n- Communication divided into slots\n- Only one channel is working per time slot\n- Each slot uses a random channel\n- Reduced RF interference\n\t- Power is spread across the entire frequency band\n## **Adaptive Frequency Hopping** \n- Reduces interference with WiFi competing for the same band\n## **Piconets and Scatternets**  \n- One master may connect up to 7 slaves\n- No slave can communicate directly with another slave\n- Master determines frequency hopping pattern\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819191522.png|300]]\n#### Piconet  \n- Network of multiple wireless devices connected using Bluetooth technology\n#### Scatternet  \n- Network of multiple Piconets using Bluetooth \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819191538.png|300]]\n## **Packets**\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819191616.png|300]]\n- Access Code - Which master or active slave should receive this package \n### Time Division Multiple Access \n![[notes/Advanced Computer Networks/Images/Pasted image 20220819191651.png|300]]\n### Multi-Slot Packets\n![[notes/Advanced Computer Networks/Images/Pasted image 20220819191717.png|300]]\n## **Frame Types**\n- Bluetooth supports different frame types depending on the application\n### Synchronous Connection Oriented\n- Real time data\n- Fixed slot in each direction\n- Slots are reserved\n- Not retransmitted\n####  Throughput\n- 240 bits of data\n- For single slave and master pair, each getting 800 slots/second and using an 80 bit payload, this is 64kbps\n- Sufficient for digital voice communication\n### Asynchronous Connectionless Link\n- Packet switched data\n- Error correction using Hamming code\n- Retransmission of failed frames\n#### Throughput\n- In slots not used for SCO links on a per-slot basis to any slave\n\t- 433.9 kbps\n# **Bluetooh LE**  \n- Designed for low energy devices (not voice)\n- All slaves put in sleep mode unless a connection is initiated\n# **Tags**\nFILE TAGS: Bluetooth","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-9/Network-Monitoring":{"title":"Network Monitoring","content":"\n# **Network Monitoring**\nMetrics to monitor to indicate a security breach  \n - Traffic metadata\n - Traffic payloads\n - ARP/NDP tables\n - Routes\n - Switch port utilisation\n - Firewall logs\n - DNS entries and queries\n## **Network Flow Monitoring**\nA way to collect [[#Metadata]] about traffic for analysis\n### Metadata\n - IP source and destination\n - Protocol(s) and port\n - Packets count and data total\n### Effectiveness\nNetwork flow monitoring can help spot anomalies with appropriate tools\n - Build a profile of good/bad traffic\n - Spot out-of-profile or known-bad traffic\nHelpful after an attack for finding other compromised systems\nCan also be useful for network capacity monitoring\n### NetFlow\n![[notes/Advanced Computer Networks/Images/Pasted image 20220826205621.png|300]]\nThree-component system\n#### Flow exporter \nA device that records network flow it sees and forwards data to a flow collector\n#### Flow collector  \nStores and pre-processes data sourced from one or more [[#Flow exporter|flow exporters]]\n#### analysis  \nPerforms analysis and visulisation of flow data stored in a flow collector\n## **Packet Capture**  \nCapture all network traffic and payload data for analysis\nProvides more insight but  \n- Takes up a lot of space\n- Processing can take a lot of resources\n- Potential privacy issues\nAbundance of tools for implementation\n## **Monitor Location**\n### Edge Monitoring  \nMisses local problems\n![[notes/Advanced Computer Networks/Images/Pasted image 20220826210030.png|300]]\n### Local Monitoring  \nGenerates a lot more data\n![[notes/Advanced Computer Networks/Images/Pasted image 20220826210046.png|300]]\n## **Sniffing**\nTo sniff packets, you need to see them\n- In packet switched networks, packets are only sent to relevant hosts\n- So we monitor traffic with **Switch Mirror Ports** and **Network Taps**\n## **ARP/NDP Tables**\nA client access port should have one, or a small number of, MAC/EUI-64 address(es) associated with it\n### Signs of Issues\n- You _suddenly_ get a lot of MAC/EUI-64 addresses appearing on a single port\n- You _suddenly_ get a lot of MAC/EUI-64 addresses appearing on a multiple ports\n- You have _important_ MAC/EUI-64 addresses appearing where they aren't meant to be\n## **Automated Monitoring Tools**\nManually looking through logs and dumps is tedious and error prone\n- LibreNMS\n- Zabbix\n- Prometheus\n- AKiPS\n- PRTG\n- Solarwinds\n# **Intrusion Detection**\n## **I**ntrusion **D**etection **S**ystem  \nAutomatically monitors a network for malicious activity or policy violations\nAutomatic notifcation/alerting of potential problems\n### How [[#I ntrusion D etection S ystem|IDS]] work\nMatch traffic and packets against rules\n- Signature database\n\t- Known exploits, SQL injection strings etc.\n- Reputation/blacklists\n- Protocol anomalies\n- Traffic anomalies\n#### challenges  \n- False positives\n\t- Identifying legitimate behaviour as an attack\n- False negatives\n\t- Failing to identify an attack\n# **Intrusion Prevention**\nTakes [[#I ntrusion D etection S ystem|IDS]] a step further\nAutomatically responds to detected problems\n- Block problem traffic\n- Block suspected user accounts\n- Segregate compromised hosts\n- Trigger an incident response process\n- Increase level of network monitoring\n# **[[#I ntrusion D etection S ystem|IDS]]/[[#Intrusion Prevention|IDP]] Tools**\n- Snort\n- Suricatta\n- Zeek\n# **Benefits of an [[#I ntrusion D etection S ystem|IDS]]/[[#Intrusion Prevention|IDP]]**  \n- Automatically detect (and potentially prevent) attacks not stopped by other measures\n- Log information, allow auditing\n\t- Record information about specific events\n- Identify problems with security policies\n- Document existing threats\n- Deter violations\n- Produce reports\n# **Limitations of an [[#I ntrusion D etection S ystem|IDS]]/[[#Intrusion Prevention|IDP]]**  \n- Configuration and maintenace\n- Performance issues\n- False positive/false negative balance\n- Ineffective against newly published attacks\n- Less effective against targeted attacks\n- Can't be relied on\n\t- Can't compensate for holes in security\n# **Darknets and Honeypots**\n## **Darknets**\nUsing unused IP address space to monitor for unexpected network activity\n## **Honeypots**\nSpecific decoy systems set up to allow an attack to observe and respond\n- Divert attacker from the critical systems\n- Collect information about the attacker and their methods\n- Encourage the attacker to stay long enough to document/respond\n## **Trap and Trace**\nHoneypot and an alarm\n# **Slides**\n![[notes/Advanced Computer Networks/PPTXs/comp3210-Network-Monitoring-2022.pdf]]\n# **Tags**\nFILE TAGS: NetworkMonitoring","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Computer-Networks/Week-9/Network-Security":{"title":"Network Security","content":"\n# **Network Attacks** \n## **Lockheed Martin's Cyber Kill Chain Model**    \n- 7 stages in a cyber attack\n- Not always the best tool as has steps that occur outside of your control \n\t- Models such as Mandiant Cyber Attack Life Cycle focus on steps you can detect and prevent\n### 1. Initial Compromise\n- Aim - Execute malicious code on one or more of the target systems \n\n### 2. Initial Reconnaissance\n- Scope out the target to identify   \n\t- IP addresses\n\t- Open ports\n\t- Services\n\t- Applications\n\t- Versions\n\t- Vulnerabilities\n- Difficult to detect and protect against as {{it can blend in with normal traffic}}  \n#### Reconnaissance Methods    \n##### Port and Network scanning\n##### Banner grabbing\n##### Signature recognition\n##### DNS brute forcing  \n- Go looking for common subdomains to discover hosts/services \n- Can also use reverse DNS to find services\n##### Dumpster diving  \n- Organisations used to dispose a lot of sensitive information in normal waste\n- Some corporate waste is still valuable in modern days, such as old IT equipment\n##### Social engineering  \n- Exploiting the human link\n##### Man in the middle  \n- Intercepting communications between two entities\n##### Google \u0026 Shodan\n\n### 3. Establish Foothold\n- Aim - Gain some level of access/control over a target network/system \n\n### 4. Internal Recon\n- Aim - Gain a more thorough understanding of the targets network and systems\n\n### 5. Escalate Privileges\n- Aim - Gain more control and access through increased privileges \n\n### 6. Move Laterally\n- Aim - Gain more access to more systems \n\n### 7. Maintain Presence\n- Aim - Establish persistent access \n\n### 8. Complete Mission\n- Aim - Achieve overall goal \n\n# **Defending Against Attack**    \n## **Cycle** \n- Assessment\n- Protection\n- Detection\n- Response\n \n## **Security Policies** \n- Identifies the rules and procedures for people and systems accessing a network and sets out the responsibilities of those managing the network\n- Should be  \n\t- Organisation specific\n\t- Practical \u0026 enforceable\n\t- Regularly updated\n\n## **User Education** \n- Train users to recognise threats\n\t- Phishing\n\t- Fake website\n\t- Potentially malicious downloads\n\n## **On Going Maintenance** \n- Anything that connects to your network should be kept up to date\n \n## **Regular Auditing** \n- Ensure policy exceptions are still required\n- Is software/firmware acctually being updated\n- Are users up to date with training\n- Check network regularly\n \n## **Don't Ignore Internal Threats**  \n- Limit access to what is necessary\n- Consider First Hop Security\n- First Hop Security  \n\t- Defence against local/internal attacks \n\t- Dealing with rogue responses (rogue DNS, DHCP, ARP, RA)\n\t- Key: Don't pass on un-trusted responses\n\n## **Making use of Reputation** \n- IP/Domain reputation can help improve security\n- Block or alert on access to DNS queries for  \n\t- IP addresses known for malware, botnets, spammers\n\t- Dodgy URLs, files, extensions, MIME types\n- Consider {{geographic IP}} restrictions \n","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Advanced-Databases-ToC":{"title":"Advanced Databases ToC","content":"#### [[Week 1]]\n\n#### [[Week 2]]\n\n#### [[Week 3]]\n\n#### [[Week 4]]\n\n#### [[Week 5]]\n\n#### [[Week 6]]\n\n#### [[Week 7]]\n\n#### [[Week 8]]\n\n#### [[Week 9]]","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Week-1":{"title":"Week 1","content":"\n# Introduction\n\n## **What is a Database?** \n\n- Represents some aspect of the real world\n- A logically coherent collection of data with some inherent meaning\n- Designed, built and populated with data for a specific purpose\n- Has an intended group of users, and some preconceived applications in which these users are interested\n\n## Database System vs. DBMS\n \n ![|400](https://remnote-user-data.s3.amazonaws.com/udoGFcr7CEHlYnKWD2CTq7w7-KE0bOYMe3656h5GCU9WCz2WEulOLdBI2QRBxYbiJfS5jODVu3kdJWKB44iAWClGz8CHS_OQIW-rHsiaGIj3ovfyM6sQRVcu5AvLLK6m.png) \n## **DBMS allows the user to**\n\nDefine the database\n- Specifying the data types, structures and constraints for the data to be stored\n\nConstruct the database\n- Store the data on some storage medium that is controlled by the DBMS\n\nManipulate the database\n- Querying to retrieve specific data, updating to reflect changes in the model of the real world, and generating reports from the data\n\n## **What should the DBMS do?**\n\n- Support sharing by multiple users\n- Allow complex relationships between objects to be represented\n- Permit multiple views of the data\n- Control or eliminate redundancy\n- Be self-describing/contain its own catalogue for metadata\n- Facilitate backup and recovery\n- Support data abstraction\n- Promote **program-data independence**\n- Control concurrent access to data\n- Store data\n- Restrict unauthorised access\n- Offer various interfaces for data retrieval and manipulation\n- Support sharing and integration of data between multiple applications\n- Enforce integrity constraints on the data\n\n# DBMS Architecture\n\n## **DDL vs DML**\n\n### DDL\n\nData Definition Language\n\nUsed for\n- Manipulating database schema\n- Creating tables, indices\n\n### DML\n\nData Manipulation Language\n\nUsed for\n- Updating table contents\n- Queries\n\n## **DBMS Interfaces**\n\nCasual Users\n- Interactive Query\n \n ![|400](https://remnote-user-data.s3.amazonaws.com/dpWR5UIsVlO8oXEj5DSsldkKvcyBvP3LP-zQvcOf45R4beLgVAA3030RfHff9ugBINA5lURbJJ2rjbsnnQ9yyq3xLpsT2tlct2OAJ0IVi4uHsPG3nwJ47-QAgtAHNPv4.png) \nApplications Programmers\n- Application Programs\n\nDatabase Administrators\n\t- DDL Statements\n\t- Privileged Commands\n\n## **DBMS Components**\n\n![|400](https://remnote-user-data.s3.amazonaws.com/n5HzvEh9tRysPSiLkRcjU-GzlHxOs8k9Idp4PGmzkRVQ43BiA176g0MhzZbUWvojdLUhatM4u_OPdmDH2H1zBjj2krWq3oUUqJF6MG3UedjpnwIs-9tHHhbLmRfHJDQj.png) \n\n## **System Catalogue**   \n\nSystem Catalogue - Contains metadata about stored data and schemas\n\n![|400](https://remnote-user-data.s3.amazonaws.com/L0IRqNjJK9g1fhWfErNLuaXLWtnO9_C8aOTtDFO-oaAwv-Aghw_ZIfNxvURKgjNq5JRr-KFub-I-LPGEmDegosgjwQhGXXVzCtiprdqzq-LHdC_qZi-xS62eUe75SYzv.png)  \n\nContains metadata about stored data and schemas \n\nSuch as\n- Names and sizes of files\n- Names and data types of data items\n- Statistical information \n- Mappings between schemas\n- Constraints\n- Storage details of files\n\n## **DDL Compiler**   \n\nProcesses schema definitions \n\nStores schema descriptions in the system catalogue \n\n![|400](https://remnote-user-data.s3.amazonaws.com/fwXLop3n0taWUWPGHoCK7kofVIV_zRmBir83FQdWeefxMiBKGvy45X09vM2uWZd170mfhdLxbVBgByvxye3VO1mPQt8J2bYPDZDlHLdGfa_IowT_4BMPy_hezgaPXx93.png)  \n\n## **Query Compiler**   \n\nParses and validates queries \n\nCompiles queries to internal form (query plan) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/DlLMUoRIuUNkllwE6YRC88cWpaM4WvOvaFbcFa6bCKsNeEYpgWDZ63Tjik2rduFDsesddDsDl1TDryC4CAWSmkjZTKsQppAPycVDajw3lNOMRQ8zp0eGc-SDmJbbsnKC.png)  \n\nPasses compiled queries to query optimiser \n\n## **Query Optimiser**   \n\nGenerates executable code \n\nEliminates redundancies \n\n![|400](https://remnote-user-data.s3.amazonaws.com/fCVV9LQbt8orOUHGisu9xejYScetOd6l3oRxg5XB-i_lNkMwM_Cu0v6qYY6vCwkPRchT4a3g2LoR4FsAD1ZQL5D_qW5vamh8bF4Jdhd683OOwEq3V7yV8kDGvcZ0ZUjh.png)  \n\nConsults System Catalogue for statistical and other information \n\nQuery Optimiser\n\nIdentifies appropriate algorithms and indexes used to implement operations \n\nRearranges and reorders operations within query plan \n\n## **Precompiler**\n\nExtracts DML commands from application programs and sends them to the DML Compiler\n\n![|400](https://remnote-user-data.s3.amazonaws.com/8n0hko3npMXoFtjDH9XPRPQBcxKKJx5qUjjdSw9dXVS9SAU3df2AEu2XX4s903WhUI4nwGEsYcuOBbDGKNyZOKaPl9BXZCHqFAIf50jOJupZL5pb9mFhNfwXWsaik9pD.png)  \n\n## **DML Compiler**   \n\n![|400](https://remnote-user-data.s3.amazonaws.com/3SxZzLkJdsKXgn8-LnVvcUav8cFd4nkygpCno65i6SddJiTd5cytolqUpUj-zbTCYGa7UEyQ_5x1Mgr1FyPNXNKhDn1OFlF_0TKUPgAN1--alTrpiDM2ihHE6c8QyeBk.png)  \n\nCompiles DML into executable code that can be sent to the Runtime Database Processor\n\n## **Runtime Database Processor**   \n\n![|400](https://remnote-user-data.s3.amazonaws.com/sJlXklQsNdGWwkDuHw9t4bPglsMi_21OnOn1w82pmx_rGORkSElmft0FT8vN9meKh4cXyEeLqnF8A0mROB08s1mm8guVfiEbsFNNBmASYvJbRijrAH4KSAWoRtcVPIIT.png)  \n\nExecutes query plans from the Query Optimiser\n\nAccesses database through Stored Data Manager\n\nExecutes privileged commands \n\n## **Stored Data Manager**   \n\n![|400](https://remnote-user-data.s3.amazonaws.com/Ef-czN30434zqzqfT_8UrOF-NFtSB0FmiqbsA7bD_R2GEgFaUHTKqM881iZFOauvA1YZVaJg4AO4klfdlz9Ne07LAGPB1xHoDavopkBLVu_Gp7G6eTy6pdoR8Xyh4xfc.png)  \n\nControls access to information on disc, using basic operating system services \n\nManages shared buffer pool (available main memory used for transferring data to and from disc)\n\n## **Other Component Modules**\n\nLoading Utility - Loads files into DB\n\nBackup Utility - Dumps DB to secondary storage (usually tape)\n\nRecovery Utility - Deals with failure using backup information\n\nFile Reorganisation Utility - Improves performance\n\nPerformance Monitoring - Provides statistics for DBA to decide whether to reorganise\n\n# Data Types\n\n## **Temporal Data**\n\n### Characteristics of Time\n\n#### Time structure\n\n- Directed acyclic graph\n- Branching time\n- Linear\n- Periodic/cyclic\n\n#### Boundedness of Time\n\n- Time origin exists\n- Unbounded\n- Bounded at both ends\n\n## **Time Density**\n\n### Dense\n\nTimeline is isomorphic to the **rational numbers** \n- Rational numbers have a partial order\n\nBetween each pair of chronons is a **infinite** number of other chronons \n\n### Continuous\n\nTimeline is isomorphic to the **real numbers** \n- Real numbers have a total order\n\nBetween each pair of chronons is a **infinite** number of other chronons\n\n### Discrete\nBetween each pair of chronons is a **finite** number of other chronons\n\nTimeline is isomorphic to the **integers** \n- Integers have a total order\n\nTimeline is composed of fixed periods called **chronons** \n\n## **Storing Times in a Database**\n\nVarious times may be associated with an event that appears in a database\n\nPotential times\n- *Valid Time* of a fact‚ÜîWhen the fact becomes true in reality\n- Bitemporal‚ÜîBoth *Valid Time* and *Transaction Time*\n- *Transaction* Time of a fact‚ÜîWhen the fact is current in the database, and can be retrieved\n\n## **SQL Extensions**\n\nTSQL includes\n- Retrieval of timestamps\n- Retrieval of temporally ordered information\n- Using the TIME-SLICE clause to specify a time domain\n- A `WHEN` clause\n- Using the `GROUP BY` clause for modified aggregate functions\n\nThe TSQL `WHEN` Clause\n- Format of the `SELECT ... WHEN` statement\n```SQL\nSELECT { select-list }\nFROM { list of relations }\nWHERE { where-clause }\nWHEN { temporal clause }\n```\n\nTemporal comparison operators\n- FOLLOWS/PRECDES\n- EQUIVALENT\n- OVERLAPS\n- BEFORE/AFTER\n- ADJACENT\n- DURING\n\n## **Spatial Data**\n\n### Characteristics\n- Data volumes may be very large\n- Data objects may be highly complex\n- Access is likely to be through specialised graphical front ends; operator skills are key\n- Query processing will (probably) not be performed using SQL\n- Performance is not easy to achieve\n- Data may be held in real time\n\n### Applications\n- Computer Aided Design (CAD)\n- Computer generated graphics\n- Geographic Information Systems (GIS)\n\n### Operations include\n- Overlap\n- Containment\n- Length\n- Centre\n- Intersect\n\n### Data types include\n- Points\n- Vectors\n- Regions\n\t- Quadrangles\n\t- Boxes\n\t- Polynomial surfaces\n\n## **Multimedia Data**\n\n### Image Databases\n\nMainstream DB vendors now adding\n- Support for BLOBs\n- Access using QBIC\n- QBIC‚ÜîQuery by Image Content\n\nAn image database needs to provide support for\n- Image analysis and pattern recognition\n- Spatial reasoning and image information retrieval\n- Image structuring and understanding\n\n### Image Data\n\nBLOBs - Binary Large Objects\n\nImages are classified as BLOBs\n\n### Video Data\n\nMost **consuming** format\n- Frames typically played back at 24-30 fps\n- Each frame can consume over a megabyte\n- Images stored as a sequence of frames \n\nTo integrate video and audio, interleaved file structure incorporate time sequencing of audio/video playback\n- Microsoft AVI\n- Apple Quicktime\n\n### Textual Data\nText data is essentially unstructured, an index of some kind needs to be built\n- Or automatically by building a inverted list of every significant word in the database\n- By a human operator\n\nXML (and predecessor SGML) allow a programmer to create portable documents that contain structured data\n\nCould be\n- Already in machine-readable form\n- Or read using OCR techniques\n\nCLOBs - Character Large Objects\nCLOBs are now commonly supported by vendors\n- Provision of text search and retrieval facilities\n- Able to store and handle text documents in addition to standard data\n\nMarkup languages give some structure to a document\n\n### Audio Data\nMIDI\nConsist of a sequence of instructions\n- Note_On\n- Note_Off\n- Increase_Volume\n\n- More compact than digitised audio\n- Interpreted by a synthesiser\n- MIDI‚ÜîMusical Instrument Digital Interface\n\nDigitised Sound\n- Consumes large amounts of storage\n- Stored in various formats such as WAV or MP3\n- Compression techniques normally used","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Week-2":{"title":"Week 2","content":"\n# Data Storage\n\n## **Storage Organisation**\n\n### The Memory Hierarchy\n\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/790H96pqTwXe87FP-fF2IR63fF4ouzgtgyLzesnkCPQtxdSgNknnKIXbtmS7STWhnM4Rl52i_ml7nUYIja1zKNUK3d9enZgKL4t5wrquQ7bPgbbSef6URDyTa85nXd8m.png) \n#### Cache\n- Volatile storage\n- Limited capacity\n- Very expensive\n- Hierarchical\n- Typical capacities and Access times\n\t- L2‚Üí~10^5 bytes, 5-10 cycles\n\t- L1‚Üí~10^4 bytes, \u003c5 cycles\n\t- Registers‚Üí~10^1 bytes, 1 cycle\n- Very fast\n\n#### Tertiary Storage\n- Very cheap\n- Typical access time‚Üí $10^1-10^2$s\n- Very slow\n- Typical capacity‚Üí10^{13}-10^{17} bytes\n- Very large capacity\n- Non-volatile storage\n\n#### Secondary Storage\n- Non-volatile storage\n- Typical capacity‚Üí10^{11}-10^{12} bytes\n- Typical access time‚Üí10^{-3} s (10^6 cycles) \n- Large capacity\n- Slow\n- Cheap\n\n#### Main Memory\n- Typical access time‚Üí10^{-8} s (20-30 cycles) \n- Fast\n- Affordable\n- Volatile storage\n- Medium capacity\n- Typical capacity‚Üí10^9-10^{10} bytes\n\n## **Secondary Storage**\n\n### Hard Disk Drives\n\n#### Typical Storage medium for databases\n\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/8h-pM9sYNhEVZCWLgJ1nlaEN-F046PXi8GUzN5q7hWIW9VUcA0hDDFwyS_SowtQOGIU_Nm0Lq3su43xl9fX1r0hX4JWjnIK5sGUTHqZiWNFO4VQaj9Xmxl6fUGogvleD.png) \n#### Disk Structure\n\n![|400](https://remnote-user-data.s3.amazonaws.com/KzwA2Uj2N2HXcQFwrlw937Nxxb-IGwfMDVRltn97EOSUikyJve7l-P2o7gsw3435JTsBah_VzlixRO2nSQuAvVr1MEKj-_eCmXZEh6bcuIRTiNgWXouccqjL25g5GMXr.png)\n\n#### Zone Bit Recording\n\n![|400](https://remnote-user-data.s3.amazonaws.com/X60VKbc8Q1TzCRLGqdjHnyM8peG-MMJldCCwgw1PkoxoqMsyvhaI3mbButgr0VP3qsaJb7zsM36-iAyfKCtb9yWq46NoH6etccAtop4jP0wREQ1pRb1whdBXn8CSVbL5.png) \n\nTracks closer to the disc edge are longer than those closer to the axis\n\nBit densities vary in order to ensure a constant number of bits per sector\n\nInstead, we can vary the number of sectors per track (depending on track location)\n- A hybrid of constant linear velocity (CLV) and constant angular velocity (CAV)\n- Improves overall storage density\n\n#### Disk Sector Format\n\n![|400](https://remnote-user-data.s3.amazonaws.com/lXX0vgj3hB9JIr09qJGlLcYdpBMh8hbYmn9_1ZdNVQU1hh6benTJu2zS1l7fwRq7Q1HeEl9nJSXdZH9Ao6AWA24i8Gq3ScZNTOLPBLzJcVaOmCacOnOqBZv0TTiHIOCk.png)\n\nTerms\n- Gap‚ÜîSeparator between sectors\n- Sync‚ÜîIndicates start of sector\n- Address Mark‚ÜîIndicates sector's number/location\n- ECC‚ÜîError Correcting Code (may be distributed)\n\nFor 4k Advanced Format\n- Gap+Sync+Mark = **15** bytes\n- Data = **4096** bytes\n- ECC = **100** bytes\n- **2 . 7**% overhead \n\n#### Disk Access Time: Reading\n\n![|400](https://remnote-user-data.s3.amazonaws.com/yA1CVmesqLWX__Cc3r6Ve99ZNit3m0G3vsa7z2N2cqPzJY-1BMr8vE2xI8YVy3NSlKduf5_rth--bkqroDV91_aGr5EO6w5EoJBfM8JdVeoH3xhtMx-scT2iwFB1jRYc.png) \n\nAccess Time = **Seek Time + Rotational Delay + Transfer Time** \n\n#### Seek Time\nTime taken for head assembly to move to a given track\n\n![|400](https://remnote-user-data.s3.amazonaws.com/XkgwIl3aKMvYKxItwJKA8OmErWBFXarYqN9MFKUqn7kgIli6__xpi5HqgAJDFNt4xJcF5ZEpUtvFbf0CH5J6j6S8hi70Utxb6S9D_C6vL0aeNBuV3jE4ZIIEAT-iEJSB.png) \n\nAverage Seek Time Range\n- **4**ms for high end drives\n- **15**ms for mobile devices\n\n#### Rotational Delay (Latency)\n\n![|400](https://remnote-user-data.s3.amazonaws.com/ZfSpiTUBPxDP2fToVu1_HnXofsJRyJhv2DTMB_heZsZqHd5U0gnCRXs8CSNqS32u75juqPmk5D-Efi93v3zrpLTh9I7JUV5sVF_RON5lhcHwRnmoW9uQ-ZBA09m224Oz.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/Y238Em7A4r-yHiGWatBQh-nVMGZGWIjeE-DdPlx5ivhNsnWB25nehX3O07mJz48F7syTXZKZC6IUvQuimq9q7-qitTs596Vs1GYR9GI_ONZ-2xMN5oz5ExnKaLe3a105.png) \n\n- Average delay‚Üítime for 0.5 rev\n\n#### Transfer Time\n- Transfer Time = **Block Size / Transfer Rate** \n\n#### Sequential Access\n- Access Time = **(Block Size / Transfer Rate) + Negligible Costs** \n\t- Negligible Costs\n\t\t- Switch to adjacent cylinder occasionally\n\t\t- Skip inter-block gap\n\nSwitch track (within same cylinder)\n- In general, **sequential I/O is much less expensive than random I/O**\n\n#### Disk Access Time: Writing\n- Costs similar to those for reading, unless we wish to verify data\n\t- Verifying requires that‚Üíwe read the block we've just written\n- Access Time = **Seek Time + Rotational Delay (1/2 rotation) + Transfer Time (for writing) + Rotational Delay (full rotation) + Transfer Time (for verifying)** \n\n#### Disk Access Time: Modifying\n- Read block\n- Write block\n- Access Time = Seek Time + Rotation Delay (1/2 rotation) + Transfer Time (for reading) + Rotational Delay (full rotation) + Transfer Time (for writing) + Rotational Delay (full rotation) + Transfer Time (for verifying)\n- Verify block (optional)\n- Modify in memory\n\n#### Block Addressing\n- Cylinder-head-sector\n\t- Physical location of data on disk\n\t- ZBR causes problems (sectors vary by tracks)\n- Logical Block Addressing\n\n###### Blocks located by integer index\n- Allows remapping of bad blocks\n- HDD firmware maps LBA addresses to physical locations on disk\n\n#### Block Size Selection\n- The size of blocks affects I/O efficiency\n\t- Big blocks **increase** the amount of irrelevant data read\n\t\t- If you're trying to read a single record in a block, larger blocks force you to read more data\n\t- Big blocks **reduce** the costs of access\n\t\t- Fewer seeks (seek time + rotational delay) for the same amount of data\n\n### Solid State Drives\n- Typically based on **NAND flash** memory\n- Typically **smaller** maximum size than HDD\n- **More** expensive than HDD\n\t- Getting cheaper over time\n- Considerably **higher** I/O performance than HDD\n- **Asymmetric read/write performance (writes are slower)**\n- Limited number of **program-erase cycles (~100,000)**\n\n## **Buffer Management**\n\n### ![|400](https://remnote-user-data.s3.amazonaws.com/S9jK-vxd0mBVQuFMVbtbxIUbTN5WKfSM7gy-Bltps3nGiIiYjMKdGcgn8TeNwbaoJJ1tAEOaDRDnga0TF9RlnuMv7pomT_94fIXhUz69ALMsb3lHGK6ooavJMqUeiMVx.png) \nBuffer pool organised into **frames** \n- **Size of database block + Metadata** \n\nFar more blocks of secondary storage than space in main memory\n- Need to be selective about what's kept in memory\n\n### Buffer Metadata\n\n#### Each frame in the buffer pool has\n- A Pin Count\n\t- Pin Count‚ÜîNumber of current users of the block in that frame\n- A Dirty Flag\n\t- Dirty Flag‚Üî1 if the copy in the buffer has been changed, 0 otherwise\n- An Access Time\n\t- Access Time‚ÜîOptional - used for [LRU](Advanced Databases/Week 2/Data Storage/Buffer Management/Buffer Replacement Strategies/If there's more than one frame with a pin count of 0/LRU.md) replacement\n- A Loading Time\n\t- Loading Time‚ÜîOptional - used for [FIFO](Advanced Databases/Week 2/Data Storage/Buffer Management/Buffer Replacement Strategies/If there's more than one frame with a pin count of 0/FIFO.md) replacement\n- A Clock Flag\n\t- Clock Flag‚ÜîOptional - used for Clock replacement\n\n### Buffer Replacement Strategies\nA frame will not be selected for replacement until‚Üíits Pin Count is 0\nIf there's more than one frame with a pin count of 0‚Üíuse a replacement strategy to choose the frame to be replaced\n- Clock‚ÜîCycle through each buffer in turn, if a buffer hasn't been accessed in a full cycle then mark it for replacement (Approximation of LRU))\n- FIFO‚Üî(First in First Out) Select the frame with the oldest loading time\n- LRU‚Üî(Least Recently Used) Select the frame with the oldest access time\n\n### Single Buffering\nRead B1 ‚áí  Buffer\nProcess data in Buffer\nRead B2 ‚áí Buffer\nProcess data in Buffer...\n\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/POgbKUbhfKRyz2zRXTUM6PMlilpCJZRaOy47xuZEO2zzt_31eIlRQZTUysSgHQH90nkiGZRth8hqmMZwwvzvjBtqX-yOnFSa43fwr0v0DBtxzfVXUY4mfMgnfGzd7q9N.gif) \n#### Single Buffering Cost\n- Single Buffer Time =** **$n(R+P)$ \n\t- Where\n\t\t- $P$‚ÜíTime to process a block\n\t\t- R‚ÜíTime to read a block\n\t\t- n‚ÜíNumber of blocks\n\n### Double Buffering\n\n#### Double Buffering Cost\n- If time to process a block \u003e time to read a block then\n\t- Double Buffer Time =**R + nP** \n\n#### Use a pair of buffers\n\n![|400](https://remnote-user-data.s3.amazonaws.com/Ti3NB9bf-kbZxr2ZCt0XL0CrXGOMGZEUbvTEqFb3lj6rbmlIAIHqlz2WrOmUwHGN7YVoNfr85TPbaS4MRNpGdPX9UaQTkMQUQkkwBiKUIJ97w4Zyn8HcuUyJVgDgGvtU.gif) \n\n- While reading a block and writing into buffer A\n- Process block previously read into buffer B\n- After block read into A, process A and read next block into B\n\n## The Five Minute Rule\n\nData referenced every five minutes should be memory resident\n\n### Assuming a block is accessed every X seconds \nCD=$\\frac{\\$D}{XI}$\n- Where\n\t- XI‚ÜíThe IOs the unit can do in X seconds\n\t- CD‚ÜíCost if we keep that block on disk\n\t- I‚ÜíNumber of IOs that unit can perform per second\n\n### Assuming a block is accessed every $X$ seconds ‚Üì \n$CM=\\frac{\\$M}{P}$\n- Where\n\t- CM‚ÜíCost if we keep that block in RAM\n\t- \\$M‚ÜíCost of 1MB of RAM\n\t- $P$‚ÜíNumber of pages in 1MB RAM \n\n### If CD is smaller than CM\nOtherwise, keep in memory\n\nKeep block on disk\n\n### Break even point is when\nCD = CM\n\n### Examples\n\n#### Using 1997 Numbers\n\n![|400](https://remnote-user-data.s3.amazonaws.com/xQaei4fDAX05jRoLGTf96QTMfiNRmBFnJbGfhoEAr9PvPG1ydl51-aXFyikEf29h0jzkbSETFqpMaOv75BQJ3HQ_afwWsEn3MO6KanxOejxyOwBdorXPr0grxJrveXjK.png) \n\n#### Using 2016 Numbers\n\n![|400](https://remnote-user-data.s3.amazonaws.com/o3eLQmCKvwLM5Mt6zNRi-gjgPCenb2n9DcJwq05NX0z-rCfJz_KhxzFUA47374lXPL7b850alyjD2Th445SZTZ1pbzm7LvL1n25EPbWg08rRpCaUYzaeF5xW3X1JVXUI.png) \n\n#### Using 2007 Numbers\n\n![|400](https://remnote-user-data.s3.amazonaws.com/zAty2a75O1CdLepl4HE5DzEPutITbTqmNjSkkrvgcHKKbt8Hpe6uwbZnwbBUcOMOsLE2266V2u7CRyL95uBvBJEsjyh3-_yXc34r2XxDGXrpSidsOAA9JssvysxAb9MF.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/PFm4vN7jILKgGoJcUR9467Ke_gZNJO7PpeIuaYO6X_HD67MP0aIV6xtHFYRyReoCT_aGa2SVsXBszUZv2A5bCG8J2Z36GDbLr3Mp59NsydzwM8cljIw6UJ30zFuVIlgm.png) \n\n## **Disk Organisation**\n\n### Data Items\n\n#### Representing Times\n- **Seconds since midnight** (integer) \n- ISO8601 times\n\t- HHMMSSFF (8 characters, to represent fractional seconds)\n\t- HHMMSS (6 characters)\n\n#### Representing Characters\n- Various coding schemes such as\n\t- utf-8\n\t- ASCII\n\n#### Representing Numbers\n- Real Numbers\n\t- m bits for exponent\n\t- Floating point\n\t- n bits for mantissa\n\t- 1 bit sing\n- (Short) Integer‚Üí2 bytes\n\n#### Representing Dates\n- Days since a given date (integer)\n\t- 1st Jan 1900\n\t- 1st Jan 1970 (UNIX epoch)\n- ISO8601 dates\n\t- Ordinal dates‚ÜíYYYYDDD (7 characters)\n\t- Calendar dates‚ÜíYYYYMMDD (8 characters)\n\n#### Representing Booleans\n- 1 byte per value\n\t- False - 00000000\n\t- True - 11111111\n\n#### Representing Bit Arrays\n\n![|400](https://remnote-user-data.s3.amazonaws.com/iSJSlT3dxWIoMpoIk8VYD8DBLD9IOyvMdtefF_-tiLpvQT6Zcbo-xwNQlCChxkllL0aUguvC6aDLxObuAjsKu_11JUCNiw9GETs86M1XtofT5iYcvx5jczDWNSwAcNqh.png) \n\n#### Representing Strings\nLength given\n\n![|400](https://remnote-user-data.s3.amazonaws.com/juyfvfvI-q7HboT-aHp4L5vpHmSt2pMV23zVu_0jfR99OIrRTlqlBG8XU9_KZyFD-ZX5Sz_1T28q9Vmi4mklN7CSj6GcfFLSB02aZHlBe93YOeyGgADTQG1uwqICY9tM.png) \nFixed length\n\n![|400](https://remnote-user-data.s3.amazonaws.com/bW5e7gl41XzLCi9VKrIGRVmWcKErIayoov_M02pIMGLMthGafQy3KqBLuQEnWroLrAqr1TInAxnAP4comE7vvovPnadpcqe8rJbkwyUEntUISAiwKSsVvZL9RlpPhbDa.png) \n\nNull terminated:\n\n![|400](https://remnote-user-data.s3.amazonaws.com/j3Duq4GS2q-ak6S1QEj9sekyb41Bb1Fx2FR5c1AgcC8qRv4cT0ByC3JD7NbuqwuwKX4wqA1XAFe_34csYdz4WjtsvYi9M_xPIw2U1SM9BqwvHRU_d7mIzsxmBJcnH0eq.png) \n\n### Records\n\n#### Fixed Format Records\nExample\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/2AJuCsHD_jIsmXxpHP0HLP8she4T2XQQPswtwyTuhCHBEN-LTBcH-GxBsh_rHdoUwHeL2rnmW3Lh2pwN9Cu1_vI_VyvbxP8nbr99nu0gn0rFKLszYMqKeCaBg9Li7uAj.png) \nSchema describes the structure of records\n\t- Order in record\n\t- Types of fields\n\t- Number of fields\n\t- Meaning of each field\n\nRecord format that **does** contain a schema \n\nFields - Related data items \n\nCollection of Fields\n\n#### Record Headers\n- Data at the beginning of a record that describes the record\n\t- Such as\n\t\t- Record length\n\t\t- Timestamp\n\t\t- Record type (points to schema)\n- Intermediate between fixed and variable format\n\n#### Variable Format Records\nExample\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/sWjWPbbYRDumAe2rrqbGSU0O51ctPTSC5oXNYtHfUtaaBFjDLTyPYQAoIaWmACTXyNlqQyP2hNbPa0I9ca6e2IkaSEh-gT4-LINWrjjvFl33UKIlrahKTYKNy0Fao07F.png) \nMay **waste space** compared to fixed format records\n\nRecord format that **does not** contain a schema\n\t- The **record itself** contains the format\n\nUseful for\n\t- Repeating fields\n\t- Evolving formats\n\t- Spare records\n\n#### Blocks\n**Records** are stored in blocks in memory\n\nA collection of blocks makeup a **file** \n\n##### Block Header\nData at the beginning that describes the block\n\nMay contain\n\t- Pointer to free space\n\t- Record directory\n\t- This block ID\n\t- File ID (or RELATION or DB ID) \n\t- Timestamp\n\t- Pointer to other similar blocks\n\t- Type of block\n\n##### Placing Records in Blocks\nConsiderations\n- Indirection\n- Sequencing\n- Separating record\n- [Spanned Records ](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Spanned Records.md) vs. [Unspanned Records ](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Unspanned Records.md) \n\n##### Separating Records in a Block\nApproaches\n- Give record lengths (or offsets)\n\t- Within each record\n\t- In block header\n- Use fixed length records - no need to separate\n\t- Use a special marker to indicate record end\n\n#### Spanned Records \nRecords may be split between blocks  \n\n![|400](https://remnote-user-data.s3.amazonaws.com/CEMbeTe62yKKrykKE2au9zwfTJS3oISNy-8wt1iiUcKyVXvwzQzAXzs0TbxUEXpNNCdRuPtpDv1nUnj7a-iUZTdeBADQFh_Db3NxJ2JD3Pa5u4h3DYy24kZuUclun5Oa.png)  \n\n#### Unspanned Records \nEach record must fit within a single block \n\n![|400](https://remnote-user-data.s3.amazonaws.com/VjE-0mMcQegvgC1sA-hbkAKlGHDvs4m0CgpVWjq2PG7KTwtS8BSyk5aoMooe3d4Z8vGZGpvV-lBV4Z7KJRcGCOXIPvKtEqLVW6nNrx6kxfJA1HtScu-3g9OzRsfLkj9d.png)  \n\n#### [Spanned Records ](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Spanned Records.md) vs. [Unspanned Records ](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Unspanned Records.md) \n**Unspanned records** are much simpler, but may waste space\n**Spanned records are essential if record size \u003e block size** \n\n#### Sequencing\nMakes it possible to **efficiently read records in order** \n\nOrdering records in file (and block) by some key value\n\n##### Sequencing Options\nNext record physically contiguous\n\n![|400](https://remnote-user-data.s3.amazonaws.com/abeVc2S3BR_3bcLKVo4EuHhOXa6SxSo4f7vN8bGXvLVp1bmAP98fp8HDqiuUHLY5U7jzBpxDZFpl4RhGlWSa8M-KgSNxeARP3PigVsOqkySQrmetKPkfAk-T_V-mEHcO.png) \n\nLinked records\n\n![|400](https://remnote-user-data.s3.amazonaws.com/rZBK36a1ASNlsSODoNcTnYaT9i6ldEAMtyuYJb-C_pzquXfk_GrvwltiikzSMGzPJqeoubOvWZSKet7t3WfVl-WMfhoTX4Wn_tg60E4tGhDEybAOftd7NE71C-mWdS2m.png) \n\n#### Indirection\n\n##### Indirect Addressing\n\n![|400](https://remnote-user-data.s3.amazonaws.com/1Nw_lVV6oLjtG08_GSD37AFwwSpThpPWWgH8l9ps75O7f5_TuuE9fe8fZZiCorTPSEmu-QJNKlLZ3tcFCnBarHewvzZa5yfD7C8S-YA4JxQ4x1IuyWy7xlo1cv6PQasf.png) \n\nHow to refer to records\n\n##### Physical Addressing\n\n![|400](https://remnote-user-data.s3.amazonaws.com/5h9Q7RTZVpB-DFbkL7-CfC92I7shC22HZNldX62TCQ6iDLK1xI6O3fxx6f-oL_v0qB_dX-TkOa2faMwRL_MsLouZvRmUQ_ikEo0xZNQ_8T6r4pE8Jf0z95CvoUkB3ZAM.png) \n\n##### Indirection in Block\nRecords can be shifted within block without changing record ID\nAccess to a given record ID is fast - only a single block access needed\n![|400](https://remnote-user-data.s3.amazonaws.com/9DnEcTNJCoJJRueRphu8oH4FnsCy-nSD27IqG_Icsp2izE0bEhob44mS9JRS7iVr8vRpauMeaqL1SLkR2lVOX3CHDz3qxnpOv_Dq5UjWj0HhJYnnBZTW8On-HeLfoVJj.png) \n\n#### Address Management\nEvery block and record has two addresses\n- A database address (when in secondary storage)\n- A memory address (when copied into a buffer)\n\n##### Translation Table\nWhen in a buffer, using **only memory addresses** is more efficient \n\nMaps database addresses to memory addresses\n\n![|400](https://remnote-user-data.s3.amazonaws.com/gf0gv7ALODA9wJjuIbeful4N9H-H0DUFuLpbP_u3zygDCsLh3SbGM-kAGLpvs2XAvaaMBFGio3Xwr9XhTxeQ1qmD1tvgar783X2wMbcNL5dzb2RvEr0EpVBPIcAWyDzH.png) \n\n##### Pointer Swizzling\nGeneral term for techniques used to translate database address space to virtual memory address space\n\n[Translation Table](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Address Management/Translation Table.md) is used to **convert pointers** (and to record the conversion)\n\nSwizzling\n\n![|400](https://remnote-user-data.s3.amazonaws.com/lod_q8pNMl62w3u8BkWyh8bgbisvAXEXmfUs0Zb6JJGbHcWK0BK0oxymM1p2Z3K6rP12uYusf7WNEhz92OJHHIP5SDcbH1E1Nf4ELyl7kHiQs5v0UqsK3yDVHvq37P-y.gif) \n\n###### Swizzling Strategies\nAutomatic\n- Replace pointers in blocks with new entires\n- As soon as block brought into memory, locate all pointers and addresses and enter them into translation table\n\nNo Swizzling ‚Üì \n- Use [Translation Table](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Address Management/Translation Table.md) to map pointers on each dereference\n\nOn Demand\n- Leave all pointers unswizzled when block is brought into memory\n- Swizzle pointers only when dereferenced\n\nSwizzled pointers typically consist of\n\t- One bit to indicate whether the pointer is a database address or a memory address\n\t- A database or memory pointer, as appropriate\n\n###### Unswizzling\nRewrite memory addresses as database addresses\n- Reverse of the swizzling operation\n\nDone by using the [Translation Table](Advanced Databases/Week 2/Data Storage/Disk Organisation/Blocks/Address Management/Translation Table.md) in the reverse direction\n\nThe Unswizzling-Unpinning Relationship\n- However, a block may be pinned if there are swizzled pointers that point to that block\n- In order to unpin the block (to allow the frame to be reused), we need to unswizzle any pointers to that block\n- Blocks in the buffer pool are pinned to indicate that some part of the DBMS is using their contents\n\n#### Insertion and Deletion\n\n##### Deletion\nOr mark space as deleted\n\n###### Deletion Marking\nMay need a chain of deleted record (for re-use)\n\nNeed a way to mark deleted records, such as\n- Delete field\n- In map\n- Special characters\n\n###### Deletion Considerations\nHow do we deal with dangling pointers?\n\nTombstones\n- Leave a mark in a map or old location\n- Physical IDs\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/-rKO6VQfwywOsnPen3zhIkfkB_OpCox9NIk9Pw-gonVw_LwyyBPX3muDuRMgiFhF2Q3drEZESRbafPUNd5wp4cSmYviHIZMJXClr1HHwAjRtb7c9aDE3WTWSRhxFY8LI.png) \n- Logical IDs\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/sWeunCCmyh7BdBba0gG6Vcur31EDnSItkALcOqq9byfMQapPNNShkslyBgVs6PD-QsDn0kepnXPD8347fNdo57K9MHCGmeaeWT-wYREatl4r7To8OKTOGkBCG4xq4B6u.png) \n\nImmediately reclaim space\n\n##### Insertion\nRecords in Sequence\n- Not too hard if free space is \"close by\"\n- Or use overflow\n\nRecords not in Sequence\n- Harder when records are variable size\n- Insert new record at end of file or in deleted slot\n\nInsertion Considerations\n- How often should we reorganise files\n- How much free space to leave\n\t- In each cylinder?\n\t- In each track?\n\t- In each block?\n- ","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Week-3":{"title":"Week 3","content":"\n# Access Structures\n\n## Index Basics\n\nRelations are stored in **files** \n\nFiles are stored as collections of **blocks** \n\nHow do we find tuples that match some criteria?\n- Indexes\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/cYW1kNWAQxVEQQwTHZFdWCqHEXmnVjzVWCOuG0Jy6OJglOxlvKQdsUBRVE6aGRQabrDKWG-daxQd91MAThs0puHd_JIJMSzQ6fglbXIwTWLVXLo_tJH0zDFCr3kk1l0L.png) \n\n### Indexing Trade Offs\nMaintaining an index costs time\n- When entries are added to the relation, index must be updated \n- Index must be maintained to make good use of resources\n\nThe trade off is between\n- Speed of updating the database\n- Rapid access when retrieving data\n\n### Sequential Files\nCommon to leave free space in each block to allow for later insertions \n\nTuples are then distributed among blocks in that order\n\nTuples of a relation are sorted by their primary key\n\nBlocks contain records that correspond to **tuples in the relation** \n\n## Dense Index\n\n![|400](https://remnote-user-data.s3.amazonaws.com/zYCAkNBpVTntFOyoDyr9C7gXs1wiCVDYRJMirTS7gwuF94wrvsmKOYpB2C1ba9HHMicV-jaSptiQGtpsdrsmGhRZx5Jq0y2NcoTf0FIWOWSdrcR28riVP_1ZDIAepPba.png)\n\nSequence of blocks holding only keys and pointers to records \n\nOne key/pointer pair for every record in data file \n\nBlocks of index are in the same order as those of the data file\n\nKey-pointer pair much smaller than record\n\nFewer blocks than data file, fewer disk accesses\n\nKeys are sorted, so can use **binary search** \n\nCan keep in **main memory** if small enough (no disk accesses)\n\n## Sparse Index\n\n![|400](https://remnote-user-data.s3.amazonaws.com/vyMN1X9rVvXRtG1I0StMbq1bp4XI5cC-PYwgSFZnBTSHAkCC6F4k8NzlHii515Kl_aWf_NfqISovHq7-oVwrlGlZ4zD24x5RJp855RTbGFIYyT-tlnZ6blo7XXY2zHAh.png)  \n\nOne key/pointer pair for every block in data file \n\nCan only be used if data file is sorted by search key\n\nUses less space than dense index\n\nPotentially takes longer to find key than dense index\n\n## Multi-level Index\n\nCan create a third level index, but in general prefer B-trees\n\nUse sparse index over the first index\n- Can't be a dense index (would use the same number of blocks as the index being indexed)\n\nIndex file may cover many blocks\n\nMay still need many disk accesses\n\n![|400](https://remnote-user-data.s3.amazonaws.com/iMC8Uu_btJxJLLojyRnyuW-w3eWLPolasrF_rZuxnPzF5wfQ5vcusvIMUta-FYgAGzw4Xkq8qRtgNYFZP2GdsZh608Rwwa5N2CBQUn2ViUatr7xwy9DUxMLh0FeLlQO2.png) \n\n## Notes on Pointers\nIf the file is contiguous, then we can omit pointers\n- Compute offset from block size and key position\n\t- e.g. Assuming 1 kB per block and a pointer to block with key k1, to get block with key k3, use offset of (3-1)\\*1 = 2kB\n\nBlock pointers (as used in sparse indexes) can be smaller than record pointers (used in dense indexes)\n- Physical record pointers consist of a block pointer and an offset\n\n## Sparse vs. Dense Tradeoff\nSparse\n- Less index space per record, can keep more of index in memory\n- Better for insertions\n\nDense\n- Needed for secondary indexes\n- Can tell if a record exists without accessing file\n\n## Duplicate Keys\n### Dense Index Approach #1\n\n![|400](https://remnote-user-data.s3.amazonaws.com/CZr4obxuvRzNexHDOuop8C_OG9jj1nsukqxiOetsUtV0QTH1uHmBneeFSRi_o7o7DX48ptr1tqRD1XL9jw9YGxUAEubOe_nGE76vG-fJG1yoS-lDBukmabOcAaYc3d_4.png) \n\nThere is an entry in the index for every record\n\n### Dense Index Approach #2\n\n![|400](https://remnote-user-data.s3.amazonaws.com/pdf_ibWK8nAuOHCoAr-QmKnLUodU10Ds-q8_vHjACZplZuR9A5lgaf8d_aiSdhWTf0Y_Fo7YXyZuDvOchZ3rygxD_CpmeE3XHgLXpt8a9sdMUTBKSYSqNrIquAfgZ4fN.png) \n\nThere is an entry in the index for the first of each distinct record\n\nRequires a smaller index \n\n### Spare Index Approach #1 ‚Üì \n\n![|400](https://remnote-user-data.s3.amazonaws.com/Ny5Pya7gQPJ2LTOPdPosgQmjKvHxztbdF4SPsKjG6Q_Xsvpw8selqcSKLygnCAZ0qz6UqRXBkNcktir7ljhvsSD1C9Nmhg_kpXRdRmBSnnTfgqn0FxPNOPmqqb19owvW.png) \n\nCan miss records\n\n### Sparse Index Approach #2 ‚Üì \n\n![|400](https://remnote-user-data.s3.amazonaws.com/cfhBxWfdwUNbZpBUvppALgqxqHFjZfWhEbAdr5Ciq0uVwRqzW1OrR2sI0dVtVsmS8jqsRXix34jvQvj5MqZzBq1lZdHu1b4L33LbZAm62pLdZUIWhop3Zq2XV8yENHfN.png) \n\nIndex contains first new key from each block\n\nCan exclude sequences of blocks with repeated keys by only pointing to the first instance of each value\n\n![|400](https://remnote-user-data.s3.amazonaws.com/410-QQIsdio3Tl-h1YO_NA9WvLeeJ7CWW-yH7_Zd4igENz4nOrO-ySKCccCKUtGLJkGl8R52vc04ajmysimqWQmt7QirZvUNqQj-7AGkfsi5g3UrG6xI_oYXuCPgOBRh.png) \n\n## Deletion from Sparse Index\n\n![|400](https://remnote-user-data.s3.amazonaws.com/BQoAn9WzVP0ylkx6_HDKisT973kn6UkZ_7ymAbklI5XcnHSj__AHUNXmDrmHb_0tuykXMZrAxpi44anDHsbTlw1OibcAUJQm42oJdZhMYjkKWXjUag8mKQatLe7jOKZC.gif) \n\n## Deletion from Dense Index\n\n![|400](https://remnote-user-data.s3.amazonaws.com/Dt6jEi74BEh_rC5QEqnqw_GBtQfQaYFf1U8SiNpg9he0lL5bC9FNQmYDMV3RQJWS4_ZZYdiv4_w9IXO2NkLl4c2y3kxttZ4XuwW3cTRy4r4jpqxZj9jQaYXR1SVsx3Zq.gif) \n\n## Insertion into Sparse Index\n\n![|400](https://remnote-user-data.s3.amazonaws.com/ur_P26efRp_A3kSRoA_PB68LhEKESRT3VK9e_fcNuagigZApT0LHRSvMZd7UbMtgumiuTUktJ2gbcaBc9ojVPfMtb_izqQ2Z_lgT7eVn_X7nFKlpzAbHeOujrNTs1Is6.gif) \n\n## Secondary Indexes\n\nUnlike a primary index, does not determine placement of records in data file\n\nLocation (order) of records may have been decided by a primary index on another field\n\nSecondary indexes are always **dense** \n\nPointers are record pointers, not block pointers\n\n![|400](https://remnote-user-data.s3.amazonaws.com/7fvFkd7bqP2kRuB-QN45yQ9iM0cz_Cb3vF4BMtxMxo5K1n0NxQFc4wvDxos8R0rQHlwElsx69jTwrE6xCukkkVsHg_pHk-rc-xYFZpHvT0mRLJOypoTU-nZRX9hJpW1G.png) \n\nSecondary indexes need to cope with duplicate values in the data file\n\n#### Solution #1 - Repeated Entries\n\n![|400](https://remnote-user-data.s3.amazonaws.com/PQ2tF1maoeB1srnOdTeFQjwrY3qLOWhxJODY5_NJGLE2wrl-Hj0C9LNHmtEtZURn6lMwzGAH89dNIDlKfNASaBTgP4xySEG5BLVhbw9BwPkh-xLc7OnDrBHYstAdyN4a.png) \n\nProblems\n- Excess disk space\n- Excess search time\n\n#### Solution #2 - Drop Repeated Keys\n![|400](https://remnote-user-data.s3.amazonaws.com/Cu18PnlCeaVB14UYo8Mm8g9-mEQph8J4Jm-jJxrlekY73iAjd66bS2u_EJ59bTT7uCftIjcY7-tIyLvshCdRICddSQxoqEn0Q4KAId-yvhy375zTImpAfienNVc5D8TK.png) \nProblems\n- Variable size records in index\n\n#### Solution #3 - Chain Records with Same Key\n\n![|400](https://remnote-user-data.s3.amazonaws.com/28z9G8O2vqQ3U-h1KPSoVmN9h_tuI7hTQDEdjejlGA4lebq9ScNLrHtvmIhvAZeU8EB8t9HRZ5cxBFeOiJuzRsOjgJRtqkJcwbyGkgEuoFCJuyZWMSX9b2Px4VR2CBak.png) \nProblems\n- Need to add fields to records\n- Need to follow chain\n\n#### Solution #4 - Indirection via Buckets of Pointers\n\n![|400](https://remnote-user-data.s3.amazonaws.com/1K-LLDMC7Wtocr-Wdm3h9CnSPtndVcAQxUwm1kzoQCFzy-sYc-67bEpzrbzRYhlu-WLPoqXADjVmzxioMSnLHMEI5Ee3q_DByYPvufhD4o-s4RUw6tD9ineX_Aegu74u.png) \n\nAdvantages\n- Don't need to examine the data file\n- If we have multiple secondary indexes on a relation, we can calculate conjunctions by taking intersections of buckets\n\n## Conventional Indexes\n\n### Advantages\n- Simple\n- Index is sequential file and good for scans\n\n### Disadvantages\n- And/Or lose sequentiality and balance\n- Inserts expensive\n\n## B+ Trees\n\nMost widely used tree-structured indexes\n\n### B+ Tree Deletion\n\nCoalescing is often not implemented as it is considered too hard and not worth it\n\n#### Case 4 - Case 2 - Coalesce with Sibling or Case 3 - Re-Distribute Keys at non-leaf\n\n![|400](https://remnote-user-data.s3.amazonaws.com/xvN6TU-ckTqnCMlxf4AJiXVz1azTk01W90lmC2TXyDjE5NkYNqACykqCMjVb9o475yCwsW2br9L_dkjcXeIzJMLh_mS-VDY6L9d2bqzkJDuQeIvYrb6PXf7vSnhVP0zE.gif) \n\n#### Case 2 - Coalesce with Sibling \n\n![|400](https://remnote-user-data.s3.amazonaws.com/3V3TSslNJnY1ppbED9GxFxzNojSDOuoiujOpemQi8A7bwds-W-yr4_3_QPUYqgt3ROKzK7oPwKwT2BMmlm23etUEe1-hxFgKZrx4oV7TdZkKinPQJT1U4FmkGg6ttfit.gif) \n\n#### Case 1 - Simple Case\n\n#### Case 3 - Re-Distribute Keys\n\n### B+ Tree Arithmetic\n\nUsing:\n- b - **Block size** (bytes)\n- k  - **Key length** (bytes)\n- r  - **Record length** (bytes)\n- p  - **Block pointer**\n- u  - **Initial node occupancy**, to allow for expansion\n\nA leaf node in a primary index can accommodate **lp** records \n- Where  __lp__  = $\\lfloor \\frac{(b-p)}{r} \\rfloor$\n\nFor a secondary index:\n- A leaf node initially points at **ls \\* u** records \n- A non-leaf node initially points to **i \\* u** blocks \n- 2 levels of non-leaf nodes initially point to **(ls\\*u)(i\\*u)^2** records \n- 1 level of non-leaf nodes initially points to **(ls \\* u)(i \\* u)** records \n\nFor a primary index:\n- 1 level of non-leaf nodes initially points to **(lp \\* u)(i \\* u)** records  \n- A non-leaf node initially points to **i \\* u** blocks  \n- Each leaf initially contains **lp \\* u** records  \n- 2 levels of non-leaf nodes initially point to\n\t- **(lp\\*u)(i\\*u)^2**records  \n\t- **(i\\*u)^2** blocks  \n\nA leaf node in a secondary index can accommodate **ls** records\n- Where  __ls__  =$\\lfloor \\frac{(b-p)}{(k+p)} \\rfloor$\n\nA non-leaf node could accommodate __i__ entries \n- Where  __i__  =$\\lfloor \\frac{(b-p)}{(k+p)} \\rfloor$\n\n### Balanced multi-way tree\nYields consistent performance\n\nSacrifices sequentiality\n\n### B+ Tree Insertion\n#### Case 4 - New root\n\n![|400](https://remnote-user-data.s3.amazonaws.com/bopR3ZbRsUsFuDJZHhvmCZhXuu4PKEkCUp6vEF7ZpJqt9zFpdAtpY_96acCJMAiD-hYBDX_nVkyy9sOYe611gqB6zVcOYe83d7PDrHyfV1C07H1SWHXzI7PSpphGYl8U.gif) \n\n#### Case 3 - Non-leaf overflow \n\n![|400](https://remnote-user-data.s3.amazonaws.com/EbOAYd5hrfazHvaiBLqgMuK9YegfgjuYtD37rE0fMSsU_W7Jc0IO7070d3J6sLgppv8IkpeHHWJjm_Xv3ZUKt9EFewBRGn5_XLS1m5duyYQUPMl2XJYx0MII9uVbD3dw.gif) \n\n#### Case 2 - Leaf overflow \n\n![|400](https://remnote-user-data.s3.amazonaws.com/pzNQjnKemY1MTuLqj75RYaFO8BjfwxnPiIWpjD0fTU3o7BEomeNK0XenfwxxG5rTYcTx8wTxtm6lMUI--kW4F_O7IKTPNMP8st39EnfW4ycgAVD_ixHpJzpkbLjyDZpH.gif) \n\n#### Case 1 - Space available in leaf \n\n![|400](https://remnote-user-data.s3.amazonaws.com/qPNUcpiD6LB9Tlh2NQGlUexkdEOBr6qT6xA4yWu0ODj6fCEXU3jo7SpxvJIn_j3JaWm5ZVrXdZNpkLQuGuyfcdpXAEQtcbn4e7FL65LFQ0ISWQOAOZjwpoZqRG_mOYPg.gif) \n\n### B+ Trees vs Static Indexed Sequential Files\n#### DBA does not know\n- How full to load pages of new index\n- When to reorganise\n\n#### B+ Trees\n- Concurrency control is harder\n- Consume more space\n- Blocks are not contiguous\n- Fewer disk accesses for static indexes, even allowing for reorganisation\n\n### B+ Trees Rules \nAll leaves same distance from root (balanced trees)\n\nNumber of pointers/keys for B+tree of order n \n\n![|400](https://remnote-user-data.s3.amazonaws.com/72WR9yGaPb7ZCGwW_88BzfyQpgC4zs0uFU_dgaTxKuEaEg6kGVSBOwduy9M8vm-6ekrIeHrMIWUamN7jM1gZpJL8WPuvKRPBtnRKNMUhLjxEevpm30nbbhYW4lZgJDit.png) \n\nPointers in leaves point to records except for \"sequence pointer\"\n\n![|400](https://remnote-user-data.s3.amazonaws.com/zjPOG8tSZir_oufj3UnJcK-OyTuX-QeeEgbLc_K118DF8j3ALoIjZ2qyUvi0zy6Mr2itbsvWiGX3U5EeK8AGgZhKo_poSTerjXonhhi24e4qpwTLcMUa9FlqoYvy7ljR.png) \n\n#### Leaf Nodes\n- If the index is a primary index\n\t- Leaf nodes are records containing data, stored in the order of the primary key\n\t- The index provides an alternative to a sequential scan\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/O4OCg6X-pe902HoLDFdZAx9XBy7qaBIvk_Fmr50XZlP5Qir0xJGfqfOzRBFIhQ6dAQUl7z63ft6oFwblfem3SIrY4R57-BcCnspKw_ToZc0dK237xT3-GeC2O6HJHMJL.png)\n\n- If the index is a secondary index ‚Üì \n\t- Leaf nodes contain pointers to the data records\n\t- Data can be accessed in the sequence of the secondary key\n\t- A secondary index can point to any sort of data file, for example one created by hashing\n\n#### Non-leaf Nodes\n- Root node typically kept in memory\n\t- Entrance point to index - used as frequently as any other node\n\t- Some nodes from second level may also be kept in memory\n\n![|400](https://remnote-user-data.s3.amazonaws.com/AJxyzFaEUqmdgEHCwQfjfHImDsy1OPKPFswzZ73BSOpkkLd1hW2Is9_sEcwSYY4eSAtme3CBQIB5XdjZXVo3LIDIDKeE74kszhjEA8x08myRnMuMWo-ALd_QXHsjspka.png) \n\n#### Node Size\n- Each node is of fixed size and contains\n\t- **n** keys \n\t- **n + 1** pointers\n\n#### Minimum Nodes\n- Don't want nodes to be too empty (efficient use of space)\n\t- Leaf -$\\lfloor (n+1)/2\\rfloor$ pointers \n\t- Non-leaf - $\\lceil \\frac{(n+1)}{2}\\rceil$ pointers \n\nMinimum Nodes Example (n=3):\n\n![|400](https://remnote-user-data.s3.amazonaws.com/Vng7pQgZNi4X7ve88IjpGwf2PwLJ4wQw9FXKuVxsVMZX_8COQ6rAsPG-d26p7mxfZ1YbOlB9kK94rl8X5-4SbEfwItvEvbAZa_d4xM26Koz8zxbDcTgT1SO4WbCB6eRf.png) \n## Hashing\n### Main memory hash table\nValue is used to select a **bucket from a bucket array** \n\nBucket array contains **linked lists of records** \n\nHash function  **h()**  takes a key and computes an integer value \n\n### Secondary storage hash table\nStores **many more** records than a main memory hash table\n\nBucket array consists of **disk blocks** \n\n### Hashing Approach #1\n\n![|400](https://remnote-user-data.s3.amazonaws.com/4wXNx3b1ju-tfHGFYshIVHGkhooeyV-zDS37t6m43b42fAWh9lfx2WcN2dD4-kf6OpCWVwS8MvRDZXo_OT1TWbskQ4qeg-AzFB3NTcLzjo_k3dwnAHhOL29MCSzKP6Xi.png) \n\nHas function calculate block pointer directly, or as offset from first block\n\nRequires bucket blocks to be in fixed, consecutive locations\n\n### Hashing Approach #2\n\n![|400](https://remnote-user-data.s3.amazonaws.com/HINHg3DgUSR0fBYIfnF55qVUKsK68kbuDFHqYlZh3y-ZBmBNYiRmHgMS2cSHIlB_IaVC6Buwdr4uFoHB0qIqaKhI1Azdbs-M-NlShPqlKymNCkv82tvZGNfHoLaNjKUP.png) \n\nHash function calculates offset in array of block pointers\n\nUsed for 'secondary' search keys\n\n### Good Hash Functions\nGood hash functions have **the same expected number of keys** per bucket \n\nKeys are kept sorted in buckets if **CPU time is critical and inserts/deletes are relatively infrequent** \n\n### Hashing Example\n\n![|400](https://remnote-user-data.s3.amazonaws.com/ApwBHDVzoxIc_Ki7CmKh0naJZOOboSw_d4QLKQyQoig_33Pmdrc3YWvvVjmlAtJrdTl2NfX2gVwG3lGTIHpWZdkXGbL-SON7mthozQZirk9MWGqbCNsdImK3sE0SFmOH.gif) \n\n### Rule of Thumb\nSpace utilisation should be between **50% and 80**%\n\nUtilisation = **#keys used / total \\#keys that fit** \n\nIf \u003c **50**%, wasting space\n\nIf \u003e **80**%, overflows significant\n\n### Dynamic Hashing\n\nUsed to cope with **growth** \n\n#### Linear Hashing\n\n![|400](https://remnote-user-data.s3.amazonaws.com/_-7kAl3vP7fRQRSWax7tUf71oBj81M48u0mUCotr0hOdEx6mN5ZtKo9gqukANGyZS456Iq9s8-OV0aCQmcQRE7bmSNBSkWif4mpuE6Af9WxkrEDEd68My7oJH6zAAQQP.png) \n\nCombination of two ideas\n- Use  **i**   least significant bits of hash\n- Hash file grows incrementally and linearly\n\t- Unlike extensible hash file, which periodically doubles\n\n##### Example\n\n![|400](https://remnote-user-data.s3.amazonaws.com/xw7Rgs09zfRditPwz_YYui4M6kN0VHoD98mstiGSxnk6PXbWOzxcJNhem7PfZt3ZldKDuUgN34oFp03xKAEGxx2Qc4t7jSSUwHzEnxSiWsrLTecTE6qpHwRzBcG2b7qv.gif) \n\nLookup Rule\n- m is the greatest suffix associated with any bucket \n  \nWhen to expand file?\n- If U \u003e threshold, then increase  **m**  ( and potentially  **i** ) \n- Utilisation (U) = \\#used slots / total \\#slots\n\n##### Disadvantages\n- Can still have overflow chains\n\n##### Advantages\n- Can handle growing files with less wasted space and no full reorganizations\n- No indirection like extensible hashing\n\n#### Extensible Hashing\n##### Disadvantages\n- Directory doubles in size\n\t- Suddenly increases in disk accesses\n- Indirection\n\t- Not bad if **directory in memory** \n\n##### Deletion\n- No merging of blocks\n- (Reverse insert procedure)\n- Merge blocks and cut directory if possible\n\n##### Combination of two ideas\n- Use  i of  b  bits output by hash function, where  __i__  grows over time\n\n![|400](https://remnote-user-data.s3.amazonaws.com/2iUHZ8KQIZqKYQDNxf1pU18dKKRS_n_ozRfuYyWjMesvMYAzMmsFplGhti_ch4KGPxE8KUl01-h4MYlp2t61cbL4tQ8-wbu2J2KoCWbBX0z_HkRfuSm1j5k4T8D_ja6s.png) \n\n- Use a directory\n\n![|400](https://remnote-user-data.s3.amazonaws.com/LW5_MB2V7F0z4sAqpmt0bKL_g5FBQxc5hmnHnDDFH3Z2yaJ-jikbKHcw7HqCUpOt9dhn-TJ5XWc-t21989zgKnDzNjwG4Zju5G_njJrW5PXhyOeOaqbm_yDjVTsZ4CY6.png) \n\n##### Example\n\n![|400](https://remnote-user-data.s3.amazonaws.com/e-CYk338s-1BRAfed33AuKTjUw9ZpKK-9e_9TVg6fE1xFM9tFsnrqGOq6oV4I28qBt8zz_nphFi43VFDdjiiWYBXj8lopRC8UKwm82kH_4DMpHRtge4zpAl_vxyccF4g.gif) \n\n##### Overflow Chains\nChaining overflow blocks when many records have duplicate keys\n\n![|400](https://remnote-user-data.s3.amazonaws.com/ozZ7oQlSM33IiUDlmE9mSB5AizlS6ehgc0J4SThWC4HF2dpyROCTqfvlDHmcKyc-kAgRT1wW5Zrk9lmTEGDrhnAy-yaXiY9hGlbq-eZBqMt53acT3a3HXDGnI16Qx44F.png) \n\n##### Advantages\n- Can handle growing files with less wasted space and no full reorganizations\n\n## Indexing vs Hashing\nHashing is good for **probes** given a key\n\nIndexing (including B-Trees) is good for **range searches** \n\n# Multidimensional Access Structures\n\n## One dimensional indexes\nAssume a single search key\n\nRequire a single linear order for keys (B-trees)\n\nRequire that the key be completely known for any lookup (hash tables)\n\n## Applications of Multidimensional Access Structures\n### Geographic Information Systems\nNearest-neighbour queries\n\nRange queries\n\nPartial match queries\n\n## Grid Files\n\n![|400](https://remnote-user-data.s3.amazonaws.com/u6HUicGE4avUkuvbY39MR2ybgTZWVZJg7ZqITl4SpaPvMjt_RIILAjMYSTtKXT5rTZMvkPi57fHjymQnVhA0bVQjGEs801YTnlzLeuiWDap_MkB4c9bTi-w9KyBB-sI6.png) \n\nEach region is associated with a pointer to a bucket of record pointers\n\nPartition multidimensional space with a grid\n\nFixed number of regions\n- Overflow buckets used to increase bucket size as necessary\n\nGrid lines partition space into **stripes** \n\nIntersection of **stripes from different dimensions define regions** \n\n**Attribute values** for a record determine the region and therefore the bucket\n\n### Advantages\n- Good for multiple-key search\n- Supports partial-match, range and nearest-neighbour queries\n\n### Disadvantages\n- Space, management overhead\n- Need partitioning ranges that evenly split keys\n\n## Partitioned Hash\n\n![|400](https://remnote-user-data.s3.amazonaws.com/hETPqr9jSI0dYbjEMQpdBa7qi14BnM0MjB0gNa9pvm7lAfOMkGOf03ejDQtSrY6UIIFX4U5w_hfGVwOEwGRv9OEhjc-UxaRe9ym5qbCQDMr4uynwTRwiqTKjRxngSES-.png) \n\nHash function takes a list of attribute values as arguments\n\nBits of hash value divided between attributes\n\nEffectively a hash function per attribute\n\n### Examples\n\n![|400](https://remnote-user-data.s3.amazonaws.com/CYdJfkY8zvhZy5vfi9bHtkNtt0xhQpvk15MOGru6EZl3lZTfPAikDf5Dd2RpyBasGSiq66iAlXeE2RnjXCbeSLyiYaTXBFootUar8hpDbb7xVmnB_XUYVtlA4kaPwz-n.gif) \n\n### Advantages\n- Good hash function will evenly distribute records between buckets\n- Supports partial-match queries\n\n### Disadvantages\n- No good for nearest-neighbour or range queries\n\n## KD-Trees\nMultidimensional binary search tree\n\nEach node splits the k-dimensional space along a hyperplane\n\nNodes contain\n- An attribute value pair\n- A pair of pointers\n\nAll nodes at the same level discriminate for the same attribute \n\nLevels rotate between attributes of all dimensions\n\n### Example\n\n![|400](https://remnote-user-data.s3.amazonaws.com/aE8McSblNWRnwwZlzre9ZiVN2vAE1Rp-FEzIHr-9bWJod37l4pqsvEovEC-dzbKLnzmAZsMayqm11liUbj4fXmGPQGxxNqsUpbiBXlZHPxjE6Fu_y48xch7r9v5hDR_t.png) \n\n### Partial Match Queries\nIf we know the value of the attribute, we can choose which branch to explore\n\nIf we don't know the value of the attribute, we must explore all branches\n\n### Adapting KD-Trees to Secondary Storage\nThe average path length from root to leaf is $\\log_2n$\n\nDisk accesses should be kept as few as possible\n- Approaches\n\t- Group nodes in blocks\n\t- Multiway nodes (split values into n ranges)\n\n## Quad-Trees\n### Region Quad-Tree\nEach partition divides the space into four equal area sub-regions\n- ne, nw, se, sw\n\nSplit regions if they contain more records than will fit into a block\n\n![|400](https://remnote-user-data.s3.amazonaws.com/w8jhHMP4o-Kt70TsTEuwNihaHQNiij8y6P8eQfgvQGxCD0RijuUUIlGSuCY21_xMTnYObFRn_Ft6Hr3ks6zef1jD30jSIQQstxQouGKJyk7R_HzxJP70UleiQjp1298d.png) \n\nOperations similar to those for [KD-Trees](Advanced Databases/Week 3/Multidimensional Access Structures/KD-Trees.md) \n\n### Point Quad-Tree\n\n![|400](https://remnote-user-data.s3.amazonaws.com/DMVOht21glVHEwWAJlPt3X15ZBcfR04mBZ_jRa-JTYH9FYugoAT2dZusXd7G_K2gfk_seTei9UBmbvjZ8CgMRq06vfpn1ffQH9us3xJ3QLcMjHSfZxmunn0DRWd-nTDv.png) \n\nPartitions are not equal area\n- Split lines centred on data points\n- ne/nw/se/sw sub-regions\n\nOtherwise equivalent to [Region Quad-Tree](Advanced Databases/Week 3/Multidimensional Access Structures/Quad-Trees/Region Quad-Tree.md)\n\n## R-Trees\n\n![|400](https://remnote-user-data.s3.amazonaws.com/ksGJOH2ILYBpYAXDY2HL26Y54Le6IFdzzOOCaKOXV-DtQli3nhehfnPgqmKctJsiWr2eW-gdFXVBdN73utiqFEnFuTGzIQdpU-u_AiX3uMImcaDUzEyhGq1UNIUrfyNd.png) \n\nUsed to represent data that consists of k-dimensional data regions\n\nInternal nodes of tree represent regions that contain data regions\n\nRegions typically defined as top-right, bottom-left coordinates\n\n## UB-Trees\n### Z-Region Partition\n\n![|400](https://remnote-user-data.s3.amazonaws.com/hfNsK3Of2Diu85RbGEo1cU_IGpXet7CLUAxq_sV_NjHVBNFZ4wSfFu0VenUyYJ89gCgUEGBmmli1zqDZw9BYY5cWs9lm3UNZzCGR-tpKD54yPgDBWennuolBSjfEu9ds.png) \n\nZ-Regions‚ÜíZ-curve partitioned into contiguous regions\n- May not be contiguous regions in the multidimensional space\n\nA leaf node contains pointers to records whose attribute value locate them within the associated Z-region\n\n[Z-Regions](Advanced Databases/Week 3/Multidimensional Access Structures/UB-Trees/Z-Region Partition/Z-Regions.md) mapped to leaf nodes of a B+tree\n\n### When Querying\nWhen querying, identify regions of n-dimensional space (e.g. segments of 1-dimensional line) that intersect with query rectangle\n\nPartition ranges and index using a B+Tree\n\n![|400](https://remnote-user-data.s3.amazonaws.com/DXgCfCOIJLh0TlyECsOOs4f2LDrunS-EO_yxHuzDAjQCOJvum_egZ3F5qEZJ8gPFNa0ZvcRqn7ekRuyPKgF60IphnC_YqNDtsbIzlTtmQ4gsvIUfmPGTomIRSUd60EWX.png) \n\nMap n-dimensional space onto a 1-dimensional line using a fractal space-filling curve\n\n### Z-Index\n- $y=y_1y_2$\n- $x=x_1x_2$\n\nOrder of points on Z-curve given by bit-interleaving the positions on the axes\n- $\\text{z-index}=y_1x_1y_2x_2$\n\n![|400](https://remnote-user-data.s3.amazonaws.com/lbP-ccpPQbl3BimO4DlYvsUwPFtBQWn39im4TL95uJ3iN31BTFG93cFBoM3_d9y9YMNYwNvwpccuPrwPEpoc_B1GsXeb1_2NYIaVIbjD5OpntYKzyJ8PLMu1gRuxX59E.png) \n\nMap domain of each attribute onto n-bit integer\n\n### Querying UB-Trees\nAlgorithm identifies [Z-Regions](Advanced Databases/Week 3/Multidimensional Access Structures/UB-Trees/Z-Region Partition/Z-Regions.md) that intersect with the query rectangle\n\n![|400](https://remnote-user-data.s3.amazonaws.com/itTv9ewkQ8OmhwVcSrT-tr-dKQoZAxtM0zX79-r28RyA_tu0NU6xndlLWXui8P3bXYzerqJqhCzGeBDOU4iS16AI9x_U2eh1dC28yRR3jIJu1fBR_O8o1Ud80wmLIk88.png) \n\nMultidimensional range query can be considered as a k-dimensional rectangle\n\n## Bitmap Indexes\nCollection of bit-vectors used to index an attribute\n- One bit-vector for each unique attribute value\n- One bit for each record\n\n### Advantages\n- Efficient answering of partial-match queries\n\n### Compression\nBit-vectors are typically sparse, with few 1 bits\n- Run-length encoding of bit-vectors to reduce stored size\n- Large amount of wasted space\n\nBitwise operations must be applied to original bit-vectors\n- Can decode RLE bit-vectors one run at a time\n\n### Querying index involves combining bit-vectors with bitwise operations (\u0026, |)\nA 1 in the  **i**th position indicates that record  **i**  is a match\n\n#### Example\n\n![|400](https://remnote-user-data.s3.amazonaws.com/SBogJweGUk5AXLquy6X0UFbpfd0eezf0XsEoPAI-lEebG91W0KvlV20wJPi5xfpdPavKS_q9FBZIf9h7GPKpfiKHvfNM4dFQdjUGXqaR3C1AW6cMFJEkBucj3gPRxA2T.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/VO6bnYuA4bsh5aMdtSqIiaUeUNdDcJ1OnRnzbMM9sBgAI_2unkkuD_JbuzALDvS676IPmtDEumkTW-boiOLNmBLYm8U32ALa-VAXoDYo-ez7NTn1nsdHq4iIZUW-qqYq.png) \n\n### Disadvantages\n- Requires fixed record numbers\n- Changes to data file require changes to bitmap index","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Week-4":{"title":"Week 4","content":"\n# Relational Algebra\n## Relations are represented as a subset of a **cartesian product of sets** \n### ![|400](https://remnote-user-data.s3.amazonaws.com/JMjPbR21ZsOBpqK9C2kRI8ZPZtaz1hRhAoMkvRMZ4--F8QpoXdH18OBYTA1JLNyX5hQ9WoQ17N__Af9vImtYNmumfknsZKKrkJ7Qu2ULjr2YaEOrIP9XQcJafLJ9xb2S.png) \n## Basic Notation\n### K-Tuple‚ÜîAn ordered sequence of **k** objects (need not be distinct)\n### |D_1\\times D_2\\times ... \\times D_k| =** }}{{|D_1|\\times |D_2|\\times ...\\times |D_k|}}{{ ** \n### K-ary Relation‚ÜîA subset of a cartesian product of **k** sets i.e. $R\\subseteq D_1\\times D_2\\times ...\\times D_k$ \n#### **k** is called the **arity}} or {{degree** of the relation\n#### D_i is the domain \"allowed\" values for elements in the **i**th position of a tuple \n## Tuples and Attributes\n### R\\subseteq D_1\\times D_2\\times ...\\times D_k is a set of k-tuples and can be seen as a table with **k** columns\n### Example Relation\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/fMhwYjrBl3DXjdRbjORgdn3Tr1Hl7pLS_UFmox70aYdvnxyfh_GQ3GR2NWP-IUkEsp4KshhJHCNlvqpPnU-_n8V0nzYYE17a6pMavHBV3eU7nE8uNisce6MkcRrc2wNi.png) \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/5UMMcqcjBAne7Fm8pHIkVv423zwMHgRcAVKOFS5Q6tIcTu8WnIX2lB4VlwonTCXiEGMhp9GXTyoofKArm55QpFZlM2eP8eSv7cO55ZZuX7fYb_e37kTmp9csg9ivw7l8.png) \n### In the relational data model, we want to have names for the columns; called the **attributes** of the relation \n### ![|400](https://remnote-user-data.s3.amazonaws.com/RDzZXVVpsMQIEKg5zz8oLL2hAFA3ygZ1H-WRcNp_0IeCE1_NPooea5c6tRkbvrx9R_zS-Unxkau5Zjdf7_vPtGKyOgUMHzfr8cm20cVTlMzu5Q56Os8XBL1z4LE9hATH.png) \n### In the **i**th column only values from D_i are allowed\n## Properties of Relations\n### A relation $R(A_1,...A_k)$ has the following properties\n#### Each row represents a [K-Tuple](Advanced Databases/Week 4/Relational Algebra/Basic Notation/K-Tuple.md)** of R**\n#### The values of an attribute are all from **the same domain** \n#### Each attribute of each tuple in a relation contains **a single atomic value** \n#### The ordering of rows is **immaterial** \n- Relations are just sets\n#### All rows are **distinct** \n- Relations are just sets\n#### Named perspective\n- The significance of each column is conveyed by the name we give it\n- The ordering of the attributes is not significant\n#### Unnamed perspective\n- The ordering of attributes is significant (we can access columns by their positions)\n## Relation Schemas and Relational Database Schemas\n### A k-ary relation schema $R(A_1,A_2,...,A_k)$ is ‚Üì \n#### A relation name e.g. $R$\n#### Its attributes\n- An ordered sequence (A_1,A_2,...,A_k) of **k** attributes (unnamed perspective)\n- Or a set of attribute name (named perspective)\n### A k-ary relation schema is **a template** for some k-ary relation\n### In a DBMS implementation, the schema gives a **more** precise definition of the types i.e. attribute domain\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/xLvnxXY4P6j5BFthYfE_XrSAauk6swslot8nT8g2VPXm4NXBe_fFOvtzMHU-wHqtN_Y2v_o_I7aUvSxuzheD27IwyAUiYloX7GtWRuvCwpKdLHMUuzL7NDf_DwM4Km6l.png) \n### An instance of a relation schema is a relation **conforming to the schema** \n### A relational database schema is **a set of relation schemas }}{{R_i(A_1,A_2,...,A_{k_i})}}{{  ** \n### A relational database instance, or a database of a relational schema is **a set of relations }}{{R_i}}{{ }}each of which is an instance of {{the relation schema }}{{R_i}}{{ ** \n## Relational Intension vs Extensions\n### Intension\n#### Relation schema\n#### Relational database schema\n### Extension\n#### Relational database instance (i.e. database)\n#### Instance of a relation schema\n## Relational Algebra Operators\n### Projection\n#### Example\n- ![|400](https://remnote-user-data.s3.amazonaws.com/lfQvKlpKAXikJAUOlMNg9mfwB_9b2ZDauWUyq4SXnshioGcGCekTqdcKpq306GNKLXLu1OnisUamWGzlXCsfKs1Ox-anSw07JUeXl-y8zWrLGQ7SsEUBihHlZ3YFqwOM.png) \n- ![|400](https://remnote-user-data.s3.amazonaws.com/W3kKQTjfRBFg2X1yM22WQaduhiYSgp6vsfLvYYlA6Wb6zBRKYXQjmD5rrMo54_Jc7vz72owT-bm3r3pUvhjwWA51QNpmW0ucLrvgmdsq3tp7T5tLRbM6BMf5zG8Q06Ws.png)\n- Or, using positions\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/ydPb3jVigvdzWxO_zLKBDQpeRFqvkYrGV2zCBgvkfafrbkAir32naAU_X_ycBejN0dxl59b2f7U2-vQ_4XasrQVhi1UT3Mz-NepnjzGhkdpB3eM3NUiH4iep3SfJlHjN.png) \n#### Projection is a **unary}} operation of the form{{ }}{{\\pi_{\u003c\\text{attribute list}\u003e}(\u003c\\text{relation name}\u003e)}}{{ ** \n- When projection is applied to **R** \n\t- The remaining columns may be re-arranged according to the order in the  __attribute list__  \n\t- Any duplicate rows are also eliminated\n\t- It removes all columns whose attributes do not appear in the  __attribute list__  \n### A relational algebra expression is **a string obtained from relation schemas using relational algebra operators**\n### Renaming\n#### \\rho _{A/B}(S) is a relation with schema identical to **S** but the attribute name A_i has been replaced by B_i\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/IMSaNZOeW4vdJVwikuQBSfU3k4Pft2b4y_-8EDfwNSmXZAjdXLSgmNv6bmHZ9mlvgNAY14L8WXdmGBjKy9vNQxFCU_6vwkK9Bt317j8ewG76yCjQZsSNptjeZNbtXB0n.png) \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/h7kQJLB-q4zZRycaFs2Lhxvh-b2mp4Oxa_8Q7Xnw3cHO2iaE_TNUGwcRLhQjxCGdTjlkqWsbpWWuLHqbvwNfizxk8VRSBDhsaJdPrGoItFBxxpuPKYsonN3CFKH2T0dH.png) \n#### Rename multiple attributes using ',' in the subscript\n- ![|400](https://remnote-user-data.s3.amazonaws.com/0778Z_9gA8BuIMo-oqr9IbHLwFCexVInnay1yq6rDxbRV9smksxk4Tv9vHwfGRaaS4NYgf0xKwy2gmi3VqHvciRaqbqH2lFO6neNbuGBz7ER0yi_xkgrIeVsN5qRc8LM.png) \n### Decomposing Complex Operations\n#### We name intermediate expressions using the assignment operator \\leftarrow\n- ![|400](https://remnote-user-data.s3.amazonaws.com/ZiQnqkYOoht1z8WTl0SUbCWKYWpL7fnwaQ1mWCmjAoZzrE3OR2gwEW5HcF9cMiCBbKyAIjML0bHIfghDDPm4-fBYZTfBzWKBT61p7tVC5sHbEvdVrneOfdSsJTo8438c.png) \n#### We can combine relational algebra operations to build more complex expressions\n### Rules for Group 1 Operators\n#### Cartesian Product\n- R\\times S \\neq S\\times R\n- R\\times (S\\times T)=(R\\times S)\\times T\n- R\\times (S\\text{ }\\cup\\text{ }T)=(R\\times S)\\text{ }\\cup\\text{ }(R\\times T) (distributivity law)\n#### Union\n- R\\text{ }\\cup\\text{ }S=S\\text{ }\\cup\\text{ }R‚ÜíCommutativity law (order is unimportant)\n- R\\text{ }\\cup\\text{ }(S\\text{ }\\cup\\text{ }T)=(R\\text{ }\\cup\\text{ }S)\\text{ }\\cup\\text{ }T‚ÜíAssociativity law (can drop parentheses) \n#### Difference\n- R-S\\neq S-R\n### Selection\n#### Algebraic Laws for Selection\n- \\sigma_{\\theta_1}(\\sigma_{\\theta_2}(R))=\\sigma_{\\theta_2}(\\sigma_{\\theta_1}(R))\n- \\sigma_{\\theta_1}(\\sigma_{\\theta_2}(R))=\\sigma_{\\theta_1 \\land \\theta_2}(R)\n- \\sigma_\\theta(R\\times S)=\\sigma_\\theta(R)\\times S if \\theta mentions only attributes of **R** \n#### Selection is a unary operation of the form \\sigma_{\\theta}(R)\n- Returns the subset of **R** consisting of **all rows that satisfy }}{{\\theta}}{{ ** \n- Where **R** is a relation and \\theta is a **condition or predicate** \n#### Example\n- ![|400](https://remnote-user-data.s3.amazonaws.com/7yKco-g-NiZC-b3QFnkF9Y2V1kPP7-AjHdAacwV14uemDgt05IWqv00gDleWk_IcloBI9ZOhPDzOU2WJH775zx3SbX03JkHpjBrSeSDU2t6SC_PtRG48lSD7G8PY765B.png) \n### Derived Relational Algebra Operations\n#### Intersection\n- R\\wedge S=R-(R-S)=S-(s-R)\n#### Equijoin and Natural\n- Natural Join‚ÜîAn equijoin over all the common attributes of the joined relations\n\t- One occurrence of each common attribute is removed from the resulting relation\n###### Example\n![|400](https://remnote-user-data.s3.amazonaws.com/7L4RHAbgI0c2kjF5tOq8Gar7kqv38LkLhsLme9mLWWZmUkqgOqsJRXFe6NBRBcdcO5QrIDzPRVgLiHutUxCG_cJPXKKJEF3SmKJ9bG9JJmcCWjcprV04oOmxGfoz-jU9.png) \n\t- Let A_1,...,A_k be the common attributes of two relation schemas **R** and **S**\nThe natural join of **R** and **S**is\n\t\t- $R\\bowtie S=\\pi_{\\text{\u003clist\u003e}}(\\sigma_{R.A_1=S.A_1\\wedge ... \\wedge R.A_k=S.A_k}(R \\times S))$\n\t\t- Where `\u003clist\u003e` contains all attributes of $R\\times S$, except for $S.A_1,...,S.A_k$ (duplicate columns are eliminated)\n- Equijoin‚ÜîA theta join in which the only predicate operator used is equality (=)\n#### Outer Join\n- Right Outer Join\n\t- R\\text{ }‚üñ\\text{ }S\\equiv‚ÜíS\\cup*\\text{ }(R\\bowtie S)  \n- Full Outer Join\n\t- Example\n\t\t- ![|400](https://remnote-user-data.s3.amazonaws.com/0dem-V4-pRCgCQKC33R-uTsSjSJRHHpNoWHQKkSo1Np-gGU19U4_Z_EmHkBqzak_7OBaIkcl-W18Od84Pp3goAwgQbbdkOn6YtdcCY2YNmhcKy3bo534GRjlDUUnlpTT.png) \n\t- R\\text{ }‚üó\\text{ }S\\equiv‚ÜíR\\text{ }\\cup*\\text{ }S\\cup*\\text{ }(R\\bowtie S)\n- Semijoin (R\\text{ }‚ñ∑_F\\text{ }S)\n\t- Contains all the tuples of **R** which are in the join of **R** and **S** with predicate **F**\n\t- R\\text{ }‚ñ∑_F\\text{ }S\\equiv‚Üí\\pi_A(R\\bowtie_FS)\n\t- Example\n\t\t- ![|400](https://remnote-user-data.s3.amazonaws.com/MfSBD-GF9Fbb21_5hu38vflykz0BNF_XeJYxyrGEFc4z6fZkbmkp19Kg2YNvMWQDQ8LknKtbRSZz7fpHLeAH4PIfagux-bPn8l_1STKoHvH_EtjD0jhPA4M_UqH3eT3o.png) \n- Left Outer Join (R\\text{ }‚üï\\text{ }S)\n\t- A natural join which also includes tuples from **R** which do not have corresponding tuples in **S**\n\t- Derives from\n\t\t- Where\n\t\t\t- {\u003cnull, ... , null\u003e} is a relation on attributes in **S** but not in **R**, that contains a single tuple\n\t\t\t- r_1,r_2,...,r_n are the attributes in **R**\n\t\t- R \\bowtie S\\text{ }\\cup\\text{ }((R-\\pi_{r_1,r_2,...,r_n}(R\\bowtie S))\\times\\{\\text{\u003cnull, ... , null\u003e}\\})\n\t\t- or  R \\cup*(R\\bowtie S) \n\t- Missing values are set to null\n\t- Example\n\t\t- ![|400](https://remnote-user-data.s3.amazonaws.com/f8kv4M3bqtP9mRNQGJMStFLR3RBoz5Fc-CdyXBUliUf5GdY7C53RjuyVcTUl3TO1jCfLP9hSRPrk_Kme9VjxYn4i8dcGrxqM1CyR-w105NJkHAY6XGj_BMykPwVqtWmT.png) \n#### \\Theta-Join\n- Example\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/CjltQrOP8etUjEOWaKGD2iEJyQGaF0aYA9agOIyo-aB7ghQ6w9b-cMVVmvf6YQ41VLU1g1C28AY25QfkMnGRNUEhHSWT9COyi4Hr-s8dRvMSJVvASBJ0X0Wd4klBftE8.png)\n- Shorthand notation is \\bowtie \n- A special query of the form \\sigma_{\\Theta}(R\\times S) \n- When we combine relations\n- R\\bowtie_{F}S\\equiv \\sigma_{F}(R\\times S)\n#### Some operations can be derived by other relational algebra operations\n### Union\n#### In another variant the attributes have to have the same name, we rename the attributes of **S** using the renaming operator\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/FZug77or6TSuxxq3RnWT3YYTxt5WxMsBca50b9AuoM45AJe64MF9nKyGzcGMG22CX9yq0SnSaA3wfBFUI2cP2RgYDbRRwDuWDDUIIlJbRZp3IBswqU-PyzcbZLNd3S0-.png) \n#### Both arguments to the union must be relations of the same arity\n#### For R \\text{ }\\cup \\text{ }S , returns relations in **R** or **S**\n#### In one variant the attributes of **R** and **S** don't have to have the same name\n- We give the attributes of the result new names\n- ![|400](https://remnote-user-data.s3.amazonaws.com/qSFBbxwreL-EP3114ozrBZzhQRBX6gEjM8muntLnNWGEMTXh0kG7I5nniyoLoF_Ttj1SopMKF3fzVjs82OonhKV7XVz9ijiGzRQJFWgr33HE3FBOILoGPzpiroFxdrE1.png) \n### Set-Theoretic Operations\n#### Difference\n- In SQL, both union and difference require the same datatype\n- Both arguments must have the same arity\n- ![|400](https://remnote-user-data.s3.amazonaws.com/Y5Ewxz9n7Wsp1DcuhhWdwXd9NZKWCg--GjmIrydvzw9uAiKB5wm6trgUWlW3je0SpXPvEFWLGl3mGyYvNbFXIGCDdoI-8MIm0vjbzvZ5d7OsX6BVa_h5sKZHT6F23-MX.png) \n- For R-S, returns relations that are in **R** but not in **S** \n#### Cartesian Product\n- ![|400](https://remnote-user-data.s3.amazonaws.com/nrZP7jIdCJSgvrJEoAPOXM8sFH4nzw2vPer4Aso6SZY9svZD7LBA-stQdrITTvRwL5zJ-ZseyL40OU6Whzdf_YCwSzDFQPxWu4syOKqSVjP-FLPSKEgt5UVf_n6mk6Qd.png) \n## Relational Transformations\n### Conjunctive selections cascade into individual selections\n#### \\sigma_{p\\wedge q\\wedge r}(R)=\\sigma_p(\\sigma_q(\\sigma_r(R)))\n### Selection is commutative ‚Üì \n#### $\\sigma_p(\\sigma_q(R))=\\sigma_q(\\sigma_p(R))$\n### Only the last in a sequence of projections is required ‚Üì \n#### $\\pi_L\\pi_M...\\pi_N(R)=\\pi_L(R)$\n### Selection and projection are commutative (if the predicate only involves attributes in the projection list)\n#### \\pi_{A_1,...,A_m}(\\sigma_p(R))=\\sigma_p(\\pi_{A_1,...,A_m}(R))\n### Cartesian product and theta join are commutative when using the named perspective\n#### R\\times S=S\\times R\n#### R\\bowtie_pS=S\\bowtie_pR\n### Selection distributes over theta join, if the predicate only involves attributes being joined\n#### \\sigma_p(R\\times S)=\\sigma_p(S)\\times\\sigma_p(R)\n#### \\sigma_p(R\\bowtie_rS)=\\sigma_p(S)\\bowtie_r\\sigma_p(R)\n### Projection distributes over theta join (if projection list can be divided into attributes of the relations being joined, and join condition only uses attributes from the projection list) ‚Üì \n#### $\\pi_{L_1\\cup L_2}(R\\bowtie_r S)=\\pi_{L_1}(R)\\bowtie_r\\pi_{L_2}(S)$\n#### $\\pi_{L_1\\cup L_2}(R\\bowtie_r S)=\\pi_{L_1\\cup L_2}(\\pi_{L_1\\cup M_1}(R)\\bowtie_r \\pi_{L_2\\cup M_2}(S))$\n### Set union and intersection are commutative ‚Üì \n#### $R\\cup S=S\\cup R$\n#### $R\\wedge S=S\\wedge R$\n### Selection distributes over set operations\n#### \\sigma_p(R\\cup S)=\\sigma_p(R)\\cup\\sigma_p(S)\n#### \\sigma_p(R\\wedge S)=\\sigma_p(R)\\wedge \\sigma_p(S)\n#### \\sigma_p(R-S)=\\sigma_p(R)-\\sigma_p(S)\n### Projection distributes over set union ‚Üì \n#### $\\pi_L(R\\cup S)=\\pi_L(R)\\cup\\pi_L(S)$\n### Associativity of theta join and cartesian product\n#### (R\\times S)\\times T=R\\times(S\\times T)\n#### (R\\bowtie S)\\bowtie T=R \\bowtie(S\\bowtie T)\n### Associativity of set union and intersection\n#### (R\\cup S)\\cup T=R \\cup(S\\cup T)  \n#### (R\\wedge S)\\wedge T=R \\wedge(S\\wedge T) \n## Relational Algebra and SQL\n```sql\nSELECT Ri1.A1, ..., Rim.Am\nFROM R1, ..., Rk\nWHERE Œò\n```\n\n#### R_1, ..., R_k are **distinct relation names (no repetitions) ** \n#### Each $R_{ij}.A_j$ is‚Üían attribute of $R_{ij}$ $(1\\leq ij \\leq k)$ \n#### \\Theta is a **condition**\n### ^^SQL^^ vs ^^Relational Algebra^^ \n#### ^^WHERE^^‚Üî^^Selection^^ \\sigma \n#### ^^SELECT^^‚Üî^^Projection^^ \\pi \n#### ^^FROM^^‚Üî^^Cartesian Product^^ \n- Example\n- ![|400](https://remnote-user-data.s3.amazonaws.com/trn1JfC2tJlfE797MPZMiUH0D4CRzrJCKfZVepgDhvRhitoDXKSrgn-MCkK3ZY_Z5KEwQQ6NkoUHqHTEulaQC7rxqtrKxuFXi07hYAsh-fHZkW_vNRtPrG1rF6BZtnU9.png) \n### Aliases in SQL\n#### SQL allows for the renaming of attribute names in the SELECT list\n- ![|400](https://remnote-user-data.s3.amazonaws.com/BfskpXGouPoMKfixR5uvKahcS6N46TYQ7SQ90kOTFMqDuj_O8_XB6gjqMbjJaBSR9PHgNTefSlwUZmzmzGVx_XakGxQJUYtRUyABuPxL95xdtIpnM2GzKM6yUjjT78uW.png)\n#### SQL does not support referencing columns by position number\n#### Aliases allow us to **give multiple names to a relation** \n#### SQL supports an aliasing mechanism\n#### Aliases are created in the FROM list\n-  \n#### The new names can be referenced in the SELECT list and in the WHERE clause\n### Sets vs Multisets\n#### Duplicates are not eliminated in SQL due to efficiency and necessity\n- **DISTINCT** is used to eliminate duplicates\n#### Operations on Multisets (Bags)\n- If **R** is a ^^multiset^^, then \\pi_X(R) is a ^^**multiset**^^ \n- Cartesian Product (If t\\in R and t'\\in S)\n\t- \\mu(tt',R\\times S)=\\mu(t,R)\\text{ }\\mu(t',S)\n##### Union R \\cup S\n\t- \\mu(t,R\\cup S)=\\mu(t,R)+\\mu(t,s)\n- Difference R-S\n\t- \\mu(t,R-S)=max\\{\\mu(t,R)-\\mu(t,S),0\\}\n- If **R** is a ^^set^^, then \\sigma_{\\Theta}(R) is a ^^**set**^^ \n- If **R** is a ^^multiset^^, then \\sigma_{\\Theta}(R) is a ^^**set**^^ \n- If **R** is a ^^set^^, then \\pi_X(R) is a ^^**multiset**^^ \n- Intersection R\\wedge S\n\t- \\mu(t,R\\wedge S)=min\\{\\mu(t,R),\\mu(t,S)\\}\n#### Multiset/Bag Semantics in SQL\n- Relational algebra expressions take **relations}} as arguments and return {{relations** as values\n\t- All duplicates are eliminated in relational algebra\n- SQL (SELECT, FROM, WHERE) does not eliminate duplicates unless explicitly requested\n\t- Takes **multisets}} as arguments and returns {{multisets** as values\n\t- May return a multiset, even if the arguments are sets\n#### The multiplicity \\mu(x,B) of an element **x** in a multiset **B** is **the number of occurrences of that element in the multiset** \n#### Set‚ÜîA collection of distinct objects\n#### Multiset/Bag‚ÜîA collection of not necessarily distinct objects\n### SQL is relationally complete\n#### Relationally Complete‚ÜîCan express all relational algebra queries\n#### Cartesian Product ‚Üì \n- ```sql\nSELECT DISTINCT\n``` \n#### Projection ‚Üì \n- ```sql\nFROM\n``` \n#### Selection\n-  \n- Union R \\cup S\n-  \n#### Difference R - S\n-  \n#### UNION and EXCEPT eliminate duplicates (set semantics)\n#### UNION ALL and EXCEPT ALL do not eliminate duplicates (multiset semantics)","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Week-5":{"title":"Week 5","content":"\n# Query Processing\n## Query Processing Chain\n### ![|400](https://remnote-user-data.s3.amazonaws.com/greXqWglitCl9cxMWxhhsjEdFRduBHg7SBXmzWe6R9AQx8l54iOTtXfEDsemtwCBlHoBVTl6vpBBSqXQTfW25JT_nx-M6sk4-FnxdVvA76SnkHxRMA3EWgZOlNtvUQyP.png) \n#### Query optimisation takes place over **Selection of Logical Query Plan}} and {{Selection of Physical Query Plan** \n### ![|400](https://remnote-user-data.s3.amazonaws.com/UcY7MesZn89gjaKM9CxD2LDOU1rWNLTdDl7EiVp7FKzMAqWAcLWBGOwf3yR1NfuT8j4iPBWnIF_91SSqLnie-4iLhMzWrVGLEmv43zGwBA7lCQ5_1IZ4OPfK3o37K9BN.png) \n## Query Plans\n### Logical Query Plan\n#### Operators taken from relational algebra\n#### Abstract\n#### Algebraic representation of query\n### Physical Query Plan ‚Üì \n#### Algorithms selected for each operator in plan\n#### Execution order specified for operators\n## Optimisation\n### Need to start optimisation from **a **[Canonical Form](Advanced Databases/Week 5/Query Processing/Query Optimisation/Optimising Query Trees/Tree Structures and Canonical Form/Canonical Form.md) \n### Optimisation Example\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/gPmhaBVcvOkXcyJpgnK5Nt-nhOaYTxdR1DL8c-0WtzfEGikjSj-Lc2AdsNKWVQIGx-9v-tfaaDPqwnDgePAL8oaFDCera9oQ9ykeOlJqWPFdcRAsV30Zs4puH_kenX6c.png) \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/trNIrPxSEDigQqbXGVNge8v9NmpVgzWJLgmvzBDeidHSGvm9ehZf9EUxzEBC4h39VN44e8cVFbWJateg-rfzC3kAOPagOvG_E7VdudqlSlczQH-ioIgdNvo0vzd06lWm.png) \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/up2XD_VYt5OQCnICFeYeu3InFfyq_G2aIlXujf8XgAKlb7BzTg7lXx05wgXMxtKG8J20T52ADsPiwa98CVhwxmb8IE4_BKuibfNgHew0CzJ6yIUbO9l5wAK34RikghIX.png) \n## Cost Estimation\n### At this stage, no commitment to a particular physical plan\n### Estimate the \"cost\" of each operator in terms of the size relations on which it operates\n### Choose a logical query plan that minimises the size of the intermediate relations\n### Assumes that the system catalogue stores statistics about each relation\n### Statistics\n#### **T(R)**‚ÜíNumber of tuples in relation **R** (cardinality of **R**)\n#### **V(R,A)**‚ÜíNumber of distinct values for attribute **A** in relation **R** \n### Scan\n#### Operation of reading all tuples of a relation\n#### **T(scan(R)) =**‚Üí**T(R)**\n##### For all **A** in **R**, **V(scan(R),A) = **‚Üí**V(R,A)**\n### Product\n#### $T(R\\times S)=$‚Üí$T(R)T(S)$\n- For all **A** in **R**, V(R\\times S,A)=‚ÜíV(R,A)\n- For all **B** in **S**, V(R\\times S, B)=‚ÜíV(S,B)\n### Projection\n#### $T(\\pi_A(R))=$‚Üí$T(R)$\n- For all **A** in **R** and \\pi_A(R), V(\\pi_A(R),A)=‚ÜíV(R,A)\n#### Assumes projection does not remove duplicate tuples\n- So value counts remain the same\n### Selection\n#### Selection Case 1 (attr=val)\n- $T(\\sigma_{A=c}(R))=$‚Üí$\\frac{T(R)}{V(R,A)}$\n- V(\\sigma_{A=c}(R),A)=‚Üí1\n- Assumes all values of **A** appear with equal frequency\n#### Selection Case 2 (attr=attr)\n- $T(\\sigma_{A=B}(R))=$‚Üí$\\frac{T(R)}{max(V(R,A),V(R,B))}$\n- V(\\sigma_{A=B}(R),A)=\n\t- V(\\sigma_{A=B}(R),B)=min(V(R,A),V(R,B)) \n- Assumes all values of **A** appear with equal frequency\n- Assumes all values of **B **appear with equal frequency \n#### Further Selection\n- Inequality\n\t- If we know the range of values in **A** and their distribution\n\t\t- As a first approximation, T(\\sigma_{A\\neq c}(R))=‚ÜíT(R)\n\t- Typical inequality written to match less half of a relation\n\t\t- As a rule of thumb, T(\\sigma_{A\u003cc}(R))=‚Üí\\frac{T(R)}{3}\n###### Alternatively\n\t\t- T(\\sigma_{A\\neq c}(R))=\\frac{T(R)(V(R,A)-1)}{V(R,A)}\n\t- Selection with inequalities and not equals require a more nuanced approach\n### Conjunction and Disjunction\n#### $T(\\sigma_{A=c1 \\wedge B=c2}(R))=$‚Üí$\\frac{T(R)}{V(R,A)V(R,B)}$\n#### $T(\\sigma_{A=c1 \\cup B=c2}(R))=$‚Üí$\\frac{T(R)}{V(R,A)}+\\frac{T(R)}{V(R,B)}$ \n- Alternatively\n- ![|400](https://remnote-user-data.s3.amazonaws.com/oJDlw1MNI6okxSPq1DwbUG7lH9TH-oYifJfYWCQBrRp0lI3_Zj-u6kRw56nlZhsAXSABjvrr8hbU8N13p3ljyt9DIBbyfjePU8HR-ROokOH5wvivHQaqpU5nTJY2H8hj.png) \n### Join\n#### $T(R\\bowtie_{A=B}S)=$‚Üí$\\frac{T(R)T(S)}{max(V(R,A),V(S,B))}$\n#### V(R\\bowtie_{A=B}S,A)=\n- V(R\\bowtie_{A=B}S,B)=min(V(R,A),V(S,B)) \n### Further Join\n#### If there are multiple pairs of join attributes\n- $T(R\\bowtie_{R1=S1\\wedge R2=S2}S)=$ ‚Üì \n\t- $\\frac{T(R)T(S)}{max(V(R,R_1),V(S,S_1))max(V(R,R_2),V(S,S_2))}$ \n### Further Statistics\n#### Distinct values assumes that each attribute value appears with equal frequency\n- Gives inaccurate estimates for joins and selects\n- Potentially unrealistic\n#### Other approaches based on histograms\n- Equal Width‚ÜîDivide the attribute domain into equal parts, give tuple counts for each\n- Equal Height‚ÜîSort tuples by attribute, divide into equal0sized sets of tuples and give maximum value for each set\n- Most-Frequented Values‚ÜîGive tuple counts for top-n most frequent values\n#### Histograms Example\n- ![|400](https://remnote-user-data.s3.amazonaws.com/2Osos0EGFZ4dfDMdQUJnFHH9O9dv9KIy3w_15SVcii_z4bXcBsaiQF1JoHi-9iegBRBP39xxhtj7HwWE4uBqgLZ0MoSUuT8AOJYS--3MViJI7tKMxygpADmKBsaWEfaV.png) \n## Query Optimisation\n### Heuristic Approach ‚Üì \n#### Start with canonical form\n#### Move \\sigma operators down the tree\n####1. Reorder subtrees to put most restrictive $\\sigma$ first\n#### Combine \\times and \\sigma to create \\bowtie \n#### Move \\pi operators down the tree \n### Optimising Query Trees\n#### Reorder Joins\n- Reorder subtrees to put the most relations (fewest tuples) first\n- Adopt a greedy approach\n- ![|400](https://remnote-user-data.s3.amazonaws.com/kTjVOAOiZkqHLNjE5xopkKo95jcpXtB7o-nzSp_pXKpuSMhsTCX_IOeL6HiarFx7EwpMuRdT6M5vogzVHl2wXsBbkTcpWRIUvqO760fP4HP59zZZsdgzVn6mlIQMq7jr.png) \n- ![|400](https://remnote-user-data.s3.amazonaws.com/bVJxlX93896M4mnczvNqCF_iGjJ7YgCcYvIWVMZtWCGHgnpZl7O0FPePwmMfflKYrzzFDevHU1iHKB7ntP5Uf7O53183LfGLB06B-wu35LYvtOy-Nel8wPhi5UDKVaAt.png) \n#### Tree Structures and Canonical Form\n- Useful to only consider left-deep trees\n\t- Left deep trees work well with common join algorithms\n\t\t- Index\n\t\t- Nested-loop\n\t\t- One-pass\n\t- Fewer possible left-deep trees than possible bushy trees\n\t\t- Smaller search space when investigating join orderings\n- Canonical Form\n\t- A conjunctive selection above the products and\n\t- A projection (of the output attributes) above the selection\n\t- A left-deep tree of products with\n#### Result is Optimised Logical Query Plan\n- ![|400](https://remnote-user-data.s3.amazonaws.com/fjGlNE3fKrFkM2XgN9PQbDME9_CWa8mLGfQOVIhJH6QFo6tQrAQ67Xn4GJeVNOSxupn_OEM1ACVqlwt7lPgy_qIK9Uuum3sjMR4cKwFT8ogZ5kKC9zUD68lNR0pBzTrV.png) \n#### Move \\pi Down\n- ![|400](https://remnote-user-data.s3.amazonaws.com/yz1JXQu6LPxkORfM7BPow1DqVg1ZBiFIelj7OFR_uwMvllfi7y8yvNdOJhn-XstdApMFtraVtmQlnlStPwEgQVC2NL7xYFirn-e4cGD0t1PwIgFsToDJlGlYi9YrdLIV.png) \n- If intermediate relations are to be kept in buffers, reducing the degree or arity of those relations allows us to use fewer buffer frames\n#### Move \\sigma Down\n- ![|400](https://remnote-user-data.s3.amazonaws.com/0KOI5r65fTymwbQEafWZiMAXnFgK1o9kxMQ_md-F4doR9VbSUfHfesxYl9JTAkIr4gkATBk6v4idL0_opNZgS6ROd3wuam53hAN9AsrneOZ6cMA6u-S0cPiLNda0-x-B.png) \n- A selection of the form \\sigma_{attr=val} can be pushed down to just above the relation that contains **attr**\n- A selection of the form \\sigma_{attr1=attr2} can be pushed down to the product above the subtree containing the relations that contain **attr1** and **attr2** \n#### Start from Canonical Form\n- ![|400](https://remnote-user-data.s3.amazonaws.com/M0Laa3OBgkX1Jr5mtEY1MthO6KBEhNJX3Ko0XIUu3KUiTw1tbC12KrbJ-R0_ctAi4Gs5AKR1RddfDuCEj_phujY1XyEsw0DBVxSQTN-2PiyQxe3r0YdGt7nk5lYj-iR7.png) \n#### Create Joins\n- ![|400](https://remnote-user-data.s3.amazonaws.com/nsunRB0nJ9v1zT14csNx5A7MSjyUdhvck58vcmvTF7elo8HDX0eBKQ8xMq8Mszdv-GU2zoMxMjR0PCuaN7TebaKmafez4OWUxsa2W7WDfqAIQBm2KIA2tc1V6JZom6W-.png) \n- Combine \\times with a \\sigma immediately above to form \\bowtie\n- Uses the relational transformation \\sigma_a(R\\times S)\\equiv R\\bowtie_a S\n##### Join is more efficient than product followed by selection\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/H-F5MIffk0TNkDliXKoYpljsU4v6PCQ45FXoxymUoYTT4BvgmfLxoUeZ2VAapgJt_qZ5D8FeclEqrEY3pNv7WKesXu7IP-jNFzKjdeGZMtYMJmdWMXEfDRY5A0ttTfC5.png) \n## Physical-Plan Operators\n### Algorithm that implements one of the basic relational operations that are used in query plans\n### Computation Model\n#### Need to choose good physical-plan operators\n- Key measure of cost is the number of disk accesses\n- Estimate the \"cost\" of each operator\n### Cost Parameters\n#### **M**‚ÜíMain memory available for buffers (counted in blocks)\n#### **S(R)**‚ÜíSize of a tuple of relation **R**\n#### **B(R)**‚ÜíBlocks used to store relation **R**\n#### **T(R)**‚ÜíNumber of tuples in relation **R** (cardinality of **R**)\n#### **V(R,a)**‚ÜíNumber of distinct values for attribute **a** in relation **R** \n### Clustered File\n#### Tuples from different relations that can be joined (on particular attribute values) stored in blocks together\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/C1cC7w1lr_YXebx4uAp4kkX8D1oFITo3vtPeWl8a2OCwhmNrlkIwkIYFXZ6RDHdW27usFrkv2OxNzEmvymjJafB_R0YEyAgeVfK4ayVqPuIkCNl7Npv6tzUYSproE2oK.png) \n### Clustered Relation\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/fLrXE5uutCE3Dxlcwm1X9-t5MmQHiCsNcBBysgyBxKEZVGHjwdY7MseUiTCtD6vVey5A554Gqr4c20-0CYbTh0s9X2NfsXW08ZYZEFT9HGCsudajGhGScSGsle07Qs46.png) \n#### Tuples from relation are stored together in blocks, but not necessarily sorted\n### Clustering Index\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/oPInVTKpSpZaLHZ31wgy9PYEeGJSuZofAQY0YNjsVNbZUFOyOeCUlxdHc0OU4AjFVWlmNAEhGUOgdC-3oYKXXiKPIIS3A5a_A3ipKoB8NmUCtBio4ux472YIC2Kcmg-v.png) \n#### Index that allows tuples to be read in an order that corresponds to physical order\n## Scanning\n### Index Scan\n#### Retrieve blocks for **R**\n#### Read only those tuples of a relation **R** that satisfy some predicate\n#### An index exists on some attribute of **R**\n#### I/O Cost\n- If not clustered‚Üí**T(R)** disk accesses \n- If clustered‚ÜíB(R)+B(I_R) disk accesses\n\t- B(R)\u003e\u003eB(I_R), so treat as only B(R)\n#### Use index to find all blocks holding **R**\n### Table Scan\n#### I/O Cost\n- If **R** is not clustered‚Üí**T(R)** disk accesses \n- If **R** is clustered‚Üí**B(R)** disk accesses\n#### All blocks known to the system\n#### Tuples arranged in blocks\n#### Possible to get blocks one at a time\n#### Read all of the tuples of a relation **R** \n## One-Pass Algorithms ‚Üì \n### Read data from disk only once\n### Typically require that at least one argument fits in main memory\n### Unary (Tuple at a Time)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/Rj4Wv4shHf1n8FVo94Jbv2xu3YwA0LtFu8op3RcgMhN1YEW1a-j4fZyai0qgazO6n-S7nU8dp9jblh5MJEM7XBUgALSoMvvsx2J2Ik-Yk0sw-E7zoK_5gZRF7Y0E4Uv7.png) \n- For each block of **R**  \n\t- Perform operation (select, project) on each tuple in block\n\t- Copy block to input buffer\n\t- Move selected/projected tuples to output buffer\n#### Cost\n- Requires ****M‚â•1**** \n- If operator is a select that compares an attribute to a constant and index exists for attributes used in select, ****\u003c \u003cB(R)**** disk accesses \n- Generally ****B(R)**}} or {{**T(R)**** disk accesses depending on clustering\n### Unary (Full Relation)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/4U3htTPnZPI7dmDJX3mSnZgRG6v0vwYM13yNvTvONoE34yKN0FEzRdfdcpnzxmF-xKRJ0SAl0SakX4TKxGni-KjnVCc_wP7KljJmTG33AM1ch2A5lRndnCLEX_DH2udR.png) \n- For each block of **R** \n\t- Update accumulator\n\t- Copy block to input buffer\n\t- Move tuples to output buffer\n#### Duplicate Elimination\n##### Cost is ****B(R)**** disk accesses\n- Requires** }}{{M\\geq B(\\delta(R))+1}}{{ **blocks of main memory \n\t- **1** block for input buffer\n\t- **M-1** blocks for accumulator\n- Accumulator implemented as in-memory data structure (tree, hash)\n- For each block of **R**\n\t- ‚Äí‚ÄíIf tuple is not in accumulator\n\t- For each tuple in block\n\t- ‚Äí‚Äí‚Äí‚ÄíCopy to accumulator\n\t- Copy block to input buffer\n\t- ‚Äí‚Äí‚Äí‚ÄíCopy to output buffer\n- If fewer than** }}{{B(\\delta(R))}}{{ **blocks available, thrashing likely \n#### Grouping\n- Grouping operators\n\t- min\n\t- sum\n\t- avg\n\t- count\n\t- max\n- Output only when‚Üíall blocks of **R** have been consumed \n- Cost is ****B(R)**** disk accesses \n- Accumulator contains per-group values\n### Binary (Full Relation)\n#### In general cost is **B(R) + B(S)**\n- **R**, **S** are operand relations\n#### Requirement for one pass operation‚Üí\\min(B(R), B(S))\\leq M-1\n- Join\n- Two relations, **R(X,Y)** and **S(Y,Z)**, **B(S)\u003cB(R)**\n\t- Uses main memory search structure keyed on **Y**\n\t\t-  \n## Nested-Loop Joins\n### Assuming we're joining relations **R**,** S** on attribute **C** ‚Üì \n#### ```python\nfor each tuple r in R\n#for each tuple s in S\n##if r.C = s.C then output r,s pair\n### Factors that affect cost\n#### Do indexes exist? \n#### Are tuples of relation stored physically together? (clustered)\n#### Are relations sorted by join attribute?\n### Example\n#### Consider a join between relations R_1, R_2 on attribute C\n- T(R_2)=5,000\n- T(R_1)=10,000\n- M=101\\text{ blocks}\n- S(R_1)=S(R_2)=1/10\\text{ block}\n#### Attempt #1: Tuple-based Nested Loop Join\n- Relations not contiguous (not clustered)\n\t- One disk access per tuple\n- Cost for each tuple in R_1 = cost to read tuple + cost to read R_2\n- Total Cost = T(R_1)*(1+T(R_2))=50,010,000 \\text{ disk accesses}\n#### Attempt #2: Block-base Nested Loop Join\n##### Changes\n\t- Read all of inner relation R_2 (using 1 block) + join\n\t- Use all available main memory (**M=101**)\n\t- Read outer relation R_1 in chunks of 100 blocks\n- Cost to read one 100-block chunk of R_1 = 100*\\frac{1}{S(R_1)}=1,000\\text{ disk accesses}\n- Cost to process each chunk =1000+T(R_2)=6,000\n- Total Cost =\\frac{T(R_1)}{1,000}*6,000=60,000 \\text{ disk accesses}\n#### Attempt #3: Join Reordering\n##### Changes\n\t- Reverse the join order\n\t\t- R_1 becomes the inner relation\n\t\t- R_2 becomes the outer relation\n- Cost to read one 100-block chunk of R_2=100*\\frac{1}{S(R_2)}=1,000\\text{ disk accesses}\n- Cost to process each chunk = 1,000+T(R_1)=11,000\n- Total Cost =\\frac{T(R_2)}{1,000}*11,000=55,000\\text{ disk accesses}\n#### Attempt 4: Contiguous Relations\n- Changes\n\t- The tuples in each relation are contiguous (i.e. clustered)\n- B(R_1)=1,000\n- Cost to read one 100-block chunk of R_2=100\\text{ disk accesses}\n- B(R_2)=500\n- Cost to process each chunk =100+B(R_1)=1,100\n- Total Cost =\\frac{B(R_2)}{100}*1,100=5,500\\text{ disk accesses}\n#### Attempt #5: Merge Join\n- Changes\n\t- Both relations are contiguous and sorted by **C** (the join attribute)\n- Total Cost =B(R_1)+B(R_2)=1,500\\text{ disk accesses} \n- ![|400](https://remnote-user-data.s3.amazonaws.com/RM0LboPUn1cnSHG7w0vt8ZBp1NRb5fyOowshRdCE__ywTCdu5rNtq8rLmcqC4c25yLMCXnnKVsI0gdDm4lfOeM0eC7DLxADN_RJNGXphfzikLWY9Yz15dqceuEQOw8fU.png) \n## Two-Pass Algorithms\n### Improving on last example\n#### What if R_1 and R_2 aren't sorted by **C**\n### Merge Sort\n#### Read all chunks + merge + write out\n- Cost\n- Sort cost R_2 = 2,000\\text{ disk accesses}\n- Each tuple is read, written, read, written\n- Sort cost R_1 = 4,000\\text{ disk accesses}\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/52Ghi-prBmg3W9asNmyqfSYMZVcy1gczGVgQ7yfs9glbaVF2mD3VN-PnNI_bWragBzUKe2XFGWoMXAXEAhwBejvNjRd8SVcVLRAWWdqxm47iK11UKrvCoqAGQUKSYdPn.png) \n#### For each 100 block chunk of **R**\n- Write to disk\n- ![|400](https://remnote-user-data.s3.amazonaws.com/amI7b2acz9Pf-g3iEZEJpG-tWt03L9wEoZIbfYIjPsiGi6lepkfm5Tizev9ZAob3CFgpiGRaAoVHmoawtIuOtB5dsGsp24MflbPc8EeBEGFJDlHMDNJj2jbQl3PlXmZW.png) \n- Sort in memory\n- Read chunk\n### Attempt #6: Merge Join with Sort\n#### If R_1,R_2 contiguous, but unordered\n- Total Cost = sort cost + join cost = 7,500\\text{ disk accesses}\n- Nested loop cost = 5,500 disk accesses\n- So merge join does not necessarily pay off\n#### If R_1=10,000 blocks, contiguous\n#### R_2=5,000 blocks, not-ordered\n##### Merge join cost = 75,000 disk accesses\n- Nested loop cost = 505,000 disk accesses\n- So in this case merge join is better\n### Attempt #7: Improved Merge Join\n- Changes\n- Do the entire files need to be sorted?\n- ![|400](https://remnote-user-data.s3.amazonaws.com/H-4htbu_YHdmc9NBB_SzCtnAiHfoBqk69h_tVu83hp9njiGDBWyfYJ5ABRPpjkNYNG9wTQ8bYg71PHlKSL8Hd8a2UKu2UHsA5TKzHhpVN0_BqE8GKYBt0xBD9aqtIxC1.png) \n#### Read R_1 and write R_1 into runs\n#### Read R_2 and write R_2 into runs\n- Merge join\n#### Total Cost = 2,000 + 1,000 + 1,500 = 4,500 disk accesses\n### Two Pass Algorithms using Hashing\n#### Hash-Join\n- Read R_2 and write into buckets\n- The tuples in R_1 and R_2 are both hashed using the same hashing function on the join attributes\n- Join R_1,R_2\n- Total Cost = 3*(B(R_1)+B(R_2))=4,500\\text{ disk accesses} \n- Read R_1 and write into buckets\n#### Partition relation into **M-1** buckets\n#### In general\n- Hash tuple to bucket\n- When bucket is full, move to disk and reinitialise bucket\n- Read relation a tuple at a time\n## Indexed Based Algorithms\n### Attempt #8: Index Join\n- Changes\n- Assume R_2.C index exists; 2 levels\n- Assume R_1 contiguous, unordered\n- Assume R_2.C index fits in memory\n- What if we have an index on the join attribute\n#### Cost = Reads: 500 disk accesses\n#### For each R_1 tuple\n- If match, read R_2 tuple: 1 disk access\n- Probe index - free\n-","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Week-6":{"title":"Week 6","content":"\n# Transactions and Concurrency\n## Concurrency\n### In a multi-user DBMS, many users may use the system concurrently\n### Stored data items may be accessed concurrently by user programs\n### Transaction‚ÜîA logical unit of work that changes the contents of a database\n## Serial vs Serialisable\n### Serial Transactions‚ÜîTransactions running one at a time, with no overlap\n### Serialisable Transactions‚ÜîTransactions behaving as if they were serial, but may be executed concurrently\n### Transactions should be **serialisable** \n## Atomicity\n### System failure partway through a transaction may leave the database in an inconsistent state\n### Atomic Transactions‚ÜîOperations within the transaction are either all executed successfully or not executed at all\n## Transaction Problems\n### Basic Database Access Operations\n#### read(X)‚ÜíReads a database item $X_d$ into a program variable $X_T$ in transaction $T$\n#### write(X)‚ÜíWrites the value of program variable $X_T$ in transaction $T$ into the database item $X_d$\n### The Lost Update Problem  #Db ‚Üì \n#### Two transactions have operations interleaved so that some DB items are incorrect\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/0xJ0zQWiYuTxK70k057DPCr_45QcjNdOEHOK5R_HVvJ8VkEmbq9bxTzRW4YTIMYdLgUJkn_o1eYE5ilv56DPHk3vyb3zgOnQMgHfq_A8KjqzzdsmCuR08vTbtdbBbDVR.png)\n### The Temporary Update (Dirty Read) Problem  #Db ‚Üì \n#### One transaction updates a DB item and then fails, item is accessed before reverting to its original value\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/_xj32PT1u5jVbu4CDC1RC9QVE4aaXSErqGjYD2q2_iE75arAN4Q5uR3Q3Z-YM8Ncv3ChYFk1ZI0Id8MYYLqaxdFNYfozXre8zcHKjr5VY3gN58rz6trm1YKAgdUPBIhq.png) \n### The Incorrect Summary Problem ‚Üì \n#### One transaction calculates an aggregate summary function on multiple records while other transactions update records\n#### Aggregate function may read some values before they are updated, and some after\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/pcPGl8nxHrpxhriYHkj7sVZcYJFfjd6pDjg_UaKb4EvL9QYnlAOt-0d5AXO1jImylX0iWlsOq2nOHdhV9mwULpzWO5VTlkrmJq0mj_1azbjdISjVdJZjI36ISpc4Z_CM.png) \n### The Unrepeatable Read Problem  #Db ‚Üì \n#### One transaction reads an item twice, while another changes the item between the two reads\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/AFU1LfahEdOPB7x7eBfK1E9HXu3Gxf8rcKGlqlijDPadsbfW8BpAgTpt6bQXe2ipFiyGShdUFx71K-BvYOesejm87STeUIz2y2uCCSZwvB2NvMVwzTTV7gAUnXtcwHKR.png)\n## Transaction Processing\n### When a transaction is submitted for execution, the system must ensure that ‚Üì \n#### All operations in the transaction are completed successfully, with effect recorded permanently in the database, or\n#### There is no effect on the database or other transactions\n### Transactions may be **read-only}} or {{update** \n## Transaction Life Cycle ‚Üì \n### ![|400](https://remnote-user-data.s3.amazonaws.com/mBsOI0E1BMu1PPnYJ9kz8221N6ydydaSSJBOZ9zZnj70WzHFZ6LRnsyCSmWgRdc3Q_t9JJurGL9s0fXUeX-nxG0YmS1V2x5B4oO0gTKktgdi_LamsrVUTBc1PlQfFeml.png)\n## ACID\n### ACID Properties\n#### Atomicity‚ÜîA transaction is either performed completely or not at all  #Db\n#### Consistency‚ÜîCorrect transaction execution must take the database from one consistent state to another  #Db\n#### Isolation‚ÜîA transaction should not make updates externally visible (to other transactions) until committed  #Db\n#### Durability‚ÜîOnce database is changed and committed, changes should not be lost because of failure  #Db\n### Schedules\n#### A schedule **S** of **n** transactions is **an ordering of the operations of the transactions}}, subject to {{the constraint that for each transaction }}{{**T**}}{{ that participates in }}{{**S**}}, the operations in **T** must {{appear in the same order in }}{{**S**}}{{ that they do in }}{{**T**** \n#### Two operations in a schedule are conflicting if ‚Üì \n##### They belong to different transactions and\n- They access the same data item and\n- At least one of the operations is a write()\n#### Serial and Serialisable\n- A schedule is serial if ‚Üì \n\t- For each transaction **T** in the schedule, all operations in **T** are executed consecutively (no interleaving)\n- A schedule **S** of **n** transactions is serialisable if ‚Üì \n\t- It is equivalent to some serial schedule of the same **n** transactions \n#### Schedule Equivalence\n- Two schedules are result equivalent if **they produce the same final state on the database** \n- Two schedules are conflict equivalent if **the order of any two conflicting operations is the same in both schedules** \n#### Non-Serial and Non-Serialisable Schedule\n- ![|400](https://remnote-user-data.s3.amazonaws.com/qN4OQunO6Jih9YMpd4TCNE-mfbtGQOEj5uftKQR_jGrbldRtVJlzY7eUNDkA1SsQ7rkjVwEgS4u02GfKroyC8P73SHuOXZ1rGtNrcxNcLaRhUbYD9M4DSQpFMt9lapr-.png) \n#### Non-Serial but Serialisable Schedule\n- ![|400](https://remnote-user-data.s3.amazonaws.com/WaAFPrF-sqkYr8h3VNaugDfllkb7_mmgvxihq7xjB1d6LWbX4N0kXGPUy-h6N_LgEVHB7Qp88dGFAysMvvrLJJgtwHwhRHXEWslOi8OQ_J27zxfIUiMPJ8yVffX7C7_R.png) \n## Locking\n### Locks are used to synchronise access by concurrent transactions to a database\n### Modes\n#### Shared‚ÜíFor reading  #Db\n#### Exclusive‚ÜíFor writing  #Db\n### Lock Operations\n#### lock-shared(X)‚ÜîAttempt to acquire a shared lock on X\n#### lock-exclusive(X)‚ÜîAttempt to acquire an exclusive lock on X\n#### unlock(X)‚ÜîRelinquish all locks on X\n### Lock Outcome  #Db ‚Üì \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/SvTjpr85orvCQwLoDnMDurcUE-En2x_Prhpif98imVo9gOy1vIWSfY1-LN9YmpltaZZEsp9GbR2p9DyivkJFvyPKIuvmoTmZg8qoFqoeQ3AcrBrxnq1XPSCoEPD3FswO.png)  \n#### The result of an attempt to obtain a lock is either ‚Üì \n- Grant lock (able to access the item)\n- Wait for lock to be granted (not yet able to access item)\n- Abort\n### Locking Rules\n#### Must issue ****lock-shared(X)**}} or {{**lock-exclusive(X)**** before a **read(X)** operation\n#### Must issue **lock-exclusive(X)** before a ****write(X)**** operation\n#### Must issue **unlock(X)** after all ****read(X)**}} and {{**write(X)**** operations are completed\n#### Cannot issue **lock-shared(X)** if **already holding a lock on }}{{**X****  \n#### Cannot issue **lock-exclusive(X)** if **already holding a lock on }}{{**X****  \n#### Cannot issue **unlock(X)** unless **holding a lock on }}{{**X**** \n### Lock Conversion\n#### Rules may be relaxed in order to allow lock conversion\n- A **lock-shared(X)** may **be upgraded to a }}{{**lock-exclusive(X)**** \n- A **lock-exclusive(X)** may **be downgraded to a }}{{**lock-shared(X)****\n### Locking, by itself, isn't enough for **non-serial** schedules\n## Two-Phase Locking (2PL)\n### Extra rules for handling locks ‚Üì \n#### All locking operations precede the first unlock operation in a transaction\n#### Locks are only released after a transaction commits or aborts\n### Two Phases\n#### Guarantees serializable transactions\n#### Growing Phase  #Db ‚Üì \n- Obtain locks \n- Access data items\n#### Shrinking Phase  #Db ‚Üì \n- Release locks\n## Deadlock  #Db ‚Üì \n### When two or more transactions are waiting for each other to release a lock on an item\n### ![|400](https://remnote-user-data.s3.amazonaws.com/FBCAi_uI6NbuXKo5JekgFD8cM0muFwLiO5Zcz2ZRQFQ8UxSDwBe8BFa8LQDS3gWg16xBF2lCx7vNsdsVgAuzFuUGmgxRdLbfAE2wIAuspXbbFi4Bxk9P2lOgY9tkjFgG.png)  \n### Conditions for deadlock to occur ‚Üì \n#### Concurrency‚ÜíTwo processes claim exclusive control of one resource\n#### Hold‚ÜíOne process continues to hold exclusively controlled resources until its need is satisfied\n#### Wait‚ÜíProcesses wait in queues for additional resources while holding resources already allocated\n#### Mutual dependency\n### Dealing with Deadlock\n#### Deadlock Prevention ‚Üì \n- Every transaction locks all items it needs in advance, if an item cannot be obtained , no items are locked\n- Transactions updating the same resources are not allowed to execute concurrently\n#### Deadlock Detection\n- Wait-for graph\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/rzhWKROsrr_L7POjqyVWPyTgJ7vv8lDYr9_v_tOYViPmqhQux8f0pIbwjXZoOAFv-qBMxVNUE2wP-1QgJntOOhM6LNQkiFV6HuoLHlf6Fnt4hR5e9kS8HixBBL1HKmIF.png) \n\t\t- Representation of **interactions between transactions**   #Db\n\t\t- Directed graph containing ‚Üì \n\t\t\t- A vertex for each transaction that is currently executing\n\t\t\t- An edge from T1 to T2 if T1 is waiting to lock an item that is currently locked by T2\n\t\t- Deadlock exists iff **the Wait-For Graph contains a cycle**   #Db\n- Timeouts ‚Üì \n\t- If a transaction waits for a resource for longer than a given period (the timeout), the system assumes that the transaction is deadlocked and aborts it\n## Granularity and Concurrency\n### Coarser granularity gives **lower** degree of concurrency\n### Finer granularity gives **higher** overhead\n## Timestamps ‚Üì \n### Alternative to locks\n### Timestamps are **unique identifiers for transactions** \n### TS(T)‚ÜíTransaction start time\n### Each resource **X** has ‚Üì \n#### A read timestamp ([read-TS(X)](Advanced Databases/Week 6/Transactions and Concurrency/Timestamps/Each resource X has/A read timestamp (read-TS(X))/read-TS(X).md)) \n- **read-TS(X)**‚ÜîSet to the most recent timestamp of the most recent read transaction that accessed resource **X** \n#### A write timestamp ([write-TS(X)](Advanced Databases/Week 6/Transactions and Concurrency/Timestamps/Each resource X has/A write timestamp (write-TS(X))/write-TS(X).md))\n- **write-TS(X)**‚ÜîSet to the most recent timestamp of the most recent write transaction that accessed resource **X** \n### Timestamp Ordering\n#### Transactions are ordered based on their **timestamps** \n#### For each resource accessed by conflicting operations, the order in which the resource is accessed must not violate the serialisability order\n### Basic Timestamp Ordering ‚Üì \n#### **TS(T)** is compared with [read-TS(X)](Advanced Databases/Week 6/Transactions and Concurrency/Timestamps/Each resource X has/A read timestamp (read-TS(X))/read-TS(X).md) and [write-TS(X)](Advanced Databases/Week 6/Transactions and Concurrency/Timestamps/Each resource X has/A write timestamp (write-TS(X))/write-TS(X).md) ‚Üì \n- Has this item been read or written before transaction **T** has had an opportunity to read/write?\n- Ensure that timestamp ordering is not violated\n#### If timestamp ordering is violated, **transaction is aborted and resubmitted with a new timestamp**\n#### **write(X)** ‚Üì \n- ```bash\nif TS(T) \u003e= read-TS(X) and TS(T) \u003e= write-TS(X)\nthen\n#execute write(X)\n#set write-TS(X) to TS(T)\nelse\n#abort and rollback T\n``` \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/fLeHkAUBkoe3Qk8YXQyL2ptla3XAb1XC12Zgn62kZJQ0G0WXFhE-zdHUHKuTVLktm3xvNcvSnVKgZDi65V1VZ6p-J5IkaZp-or6NM1tCWBF2hbfkLg5fScgqOCop-kvf.gif) \n#### **read(X)** ‚Üì \n- ```bash\nif TS(T) \u003e= write-TS(X)\nthen\n#execute read(X)\n#set read-TS(X) to max(TS(T), read-TS(X))\nelse\n#abort and rollback T\n``` \n#### Dirty Read  ‚Üì \n- Transaction updates a DB item and then fails\n- Item is accessed before reverting to original value\n- ![|400](https://remnote-user-data.s3.amazonaws.com/Iwnqtiyt2It7ckKadfG1_vUr_ygMSFTjkoQipxtibtcyfaPWSdm5omJluAOKU2e82sxxJiNuf2LmMBGnxc7c1MBr9YG88nDp73DBl3SiJ8bXa7iQ2jWVTnOe9kZagPDx.png)  \n\t- We can address dirty reads by adding a commit bit **commit(X)** that indicates whether the most recent transaction to write to **X** has been committed\n\t- **read(X)** for Dirty Read\n\t\t- ```bash\nif TS(T) \u003e= write-TS(X)\nthen\n#if commit(X) is true\n#then\n##execute read(X)\n##set read-TS(X) to max(TS(T), read-TS(X))\n#else\n##delay execution until commit(X) is true\nelse\n#abort and rollback T\n```\n\t- **write(X)** for Dirty Read\n\t\t- ```bash\nif TS(T) \u003e= read-TS(X) and TS(T) \u003e= write-TS(X)\nthen\n#execute write(X)\n#set commit(X) to false\n#set write-TS(X) to TS(T)\nelse\n#abort and rollback T\n``` \n### Thomas' Write Rule ‚Üì \n#### Modification of Basic Timestamp Ordering that rejects fewer write operations\n#### Weakens the checks for **write(X)** so that obsolete write  operations are ignored\n#### Does not enforce serialisability\n#### Write Rule ‚Üì \n- ```bash\nif TS(T) \u003e= read-TS(X) and TS(T) \u003e= write-TS(X)\nthen\n#execute write(X)\n#set commit(X) to false\n#set write-TS(X) to TS(T)\nelse if TS(T) \u003e= read-TS(X) and TS(T) \u003c write-TS(X)\n#if commit(X) is true\n##ignore write(X)\n#else\n##delay execution until commit(X) is true\nelse\n#abort and rollback T\n### Timestamp Ordering\n#### Transactions are ordered based \n## Advanced Transactions\n### Flat Transactions ‚Üì \n#### Basic building block\n#### Only one level of control by the application\n#### All-or-nothing (Commit or abort)\n#### Simplest type\n### Long Duration Transactions ‚Üì \n#### More susceptible to failure (and rollback not acceptable)\n#### May lock and access many data items (increases chance of deadlock)\n### Savepoints ‚Üì \n#### An identifiable point in a flat transaction representing a partially consistent state which can be used as an internal restart point for the transaction\n#### Used for **deadlock handling** \n#### Savepoints may be persistent ‚Üì \n- Following a system crash, restart active transactions from their most recent savepoints\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/5t9sONgpIItjtzfoqkAo8Uc20egEmWQ1YLXrWoBxwMzDQPXxc_NjXmYFWhTAwEB70sgKZCC_LxkbyBd6b1-Va_DdzAVeRnHVHIdlHInUxap-yLteThKAYQnNxz965jTm.png) \n### Chained Transactions ‚Üì \n#### Transactions broken into sub-transactions which are executed serially\n#### On chaining to the next sub-transaction ‚Üì \n- Commit results\n- Keep (some) locks\n#### Cannot **rollback to previous sub-transaction** \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/2sxIZElIW72NMqIIPWzYGe9vXoT2OcagYOpSF1EkZK1HBdMJyPj_01-Zq4WbxQ2-tOHbZidEqRoxXUPgy9Fd904TCuJ1ehNbKZleHR7B_jUBwb-T7Af2UlDaEJjP56-h.png) \n### Savepoints vs Chained Transactions\n#### Both allow **substructure to be imposed on a long-running application program**\n- Database context is preserved\n- Cursors are kept\n#### Commit vs Savepoint\n- Chained‚ÜíRollback only to previous 'savepoint'\n- Savepoints‚ÜíCan rollback to arbitrary savepoint\n#### Locks\n- **Chained transactions** free unwanted locks\n#### Work Lost\n- **Savepoints}} more flexible than {{flat transactions**, as long as the system does crash\n#### Restart\n- **Chained transactions** can restart from most recent commit, as long as no processing context hidden in local programming variables\n#### Both organise **work into a sequence of actions** \n### Nested Transactions ‚Üì \n#### Transaction forms a hierarchy of sub-transactions\n#### Sub-transactions may abort without **aborting their parent transaction** \n#### Rules for Nested Transactions\n- Commit Rule ‚Üì \n\t- The commit of a sub-transaction makes the results accessible only to the parent\n\t- The final commit happens only when all ancestors finally commit\n- Rollback Rule ‚Üì \n\t- If any [sub]transaction rolls back, all of its sub-transactions roll back\n- Visibility Rule ‚Üì \n\t- Changes made by a sub-transaction are visible to its parent\n\t- Objects held by a parent can be made accessible to sub-transactions\n\t- Changes made by a sub-transaction are not visible to its siblings\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/qQQidx5WRfK2jBGnWi5UjdhsjDF7bLZIIBIcspXJFTnV3_jEkApREXxkmPdB5ZnBE4RjnSJ-ORSj6GNYsRPLGjODOwEzc-dbkhGwJWj7OT1Z4V8nkhB4U2eTL-f4tqml.png) \n#### Observations\n- Sub-transactions are not fully equivalent to flat transactions\n\t- Atomic\n\t- Consistency preserving\n\t- Isolated\n\t- Not durable, because of the commit rule\n- Nesting and program modularisation complement each other\n\t- Well designed module has clean interface and no global variables\n\t- If it touches the database, the database is a large global variable\n\t- If the module is protected as a sub-transaction, then database changes are kept clean to\n- Nested transactions permit intra-transaction parallelism\n### Emulating Nesting with Savepoints\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/sgKPLJekYxK2zj9Ojhv-6NoaLnJhdC6WPIB-847OHlLt9VTFL7ox3znWesys9WoJw0q32GIFPlPJKCe-yf5Qze1rM6aeB71wTeUftvpMjZ9T70XqG1nGyqpKDiH2iJke.png) \n#### Observations\n- Using savepoints is **more}} flexible than nested transactions for internal recovery as {{you can roll back further** \n- True nested transactions are needed in order to run sub-transactions in parallel\n\t- Emulating with savepoints need 'sub-transactions' to be run in strict sequence\n- True nested transactions can pass locks selectively\n\t- More flexible than savepoints\n### Sagas ‚Üì \n#### A collection of actions (flat transactions) that form a long duration transaction\n#### Execution based around notion of compensating transactions ‚Üì \n- Inverse of actions that allow them to be selectively rolled back\n- Used to recover from partial execution\n#### Sagas specified as a **digraph**  ‚Üì \n- Nodes are either actions or the terminal nodes abort and complete\n- One node is designated the start\n- Paths in graph represent **sequences of actions** \n\t- Paths leading to abort are **sequences of actions that cause the overall transaction to be rolled back** \n\t- Paths leading to complete are **successful sequences that make persistent changes to the database** \n#### Saga Execution ‚Üì \n- Each action $A$ has a compensating transaction $A^{-1}$\n- Assume if $A$ is an action and $\\alpha$ is a sequence of legal actions, then $A\\alpha A^{-1}\\equiv \\alpha$\n- If execution of a saga leads to abort, roll back the saga by executing the compensating transactions\n# Logging and Recovery\n- \n## input(X)\n### Copy the disk block containing database item  __**X**__  into a buffer frame\n### ![|400](https://remnote-user-data.s3.amazonaws.com/AZPY0sr8q70o4hQsJyqmiuNn6_Luv3W2JHxX76g376vK9fZFu-h_kd1awYw9cE1tJZ9ZoDDHeTt23iZ9YR4UrgQb1EXJvQtbHQcMB6uuBmU_bRKzo7FDUK4HelORU9cu.png) \n## read(X) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/9lAEPqNLuo-6yxVxvfpdEo4osp2V_pwuBQTqsZa8BkaBeQ0_5ft5BrZlclZDlySqUyZUh-A_JJG-4WYogrSowSOSPBsHgX57cy45j4iEmYfdR8-6JF3cCvFURdU80AAF.png) \n### Read a database item  __**X**__  into a local variable\n### If the block containing  __**X**__  is not already in a buffer frame, first  __**input(X)**__  \n## write(X) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/zvpPVfPKmJOfMZtdblUfL-7s2wXNNJr3-V8aYd9KBK38bHF9wmrk4Bvfl_LvmGN2_Yf7w5Kl21paqbAB7J9dMo3Efh-8yO6jx3I_R6XVo4kXwyN_1rpAZsALtw-awiOD.png) \n### Write the value of local variable into database item  __**X**__  in a buffer frame \n## output(X)\n### ![|400](https://remnote-user-data.s3.amazonaws.com/5d2YKHPGwMhS3jAaKwJH5_upcM9aSIoraGNorisPJwiWEAIIY_LaHthc45g1nacBj6akwP7YA2i1fif0NUgBtBpKBQFkLvmD4UP80qQyeoRmb6IUhsZj7hJrlaIO01jQ.png) \n### Copy the block containing  __**X**__  from buffer frame to disk \n## Logging\n### Persistent record of changes made during a transaction \n### Log manager uses **append-only** files to record events\n### Log Records\n####  __**\u003c start T \u003e **__ ‚ÜíTransaction **T** __** **__ has started execution\n####  __**\u003c abort T \u003e**__ ‚ÜíTransaction **T** could not complete successfully, no changes made by **T** will be copied to disk \n####  __**\u003c commit T \u003e**__ ‚ÜíTransaction **T** has completed successfully and will make no further changes to database items\n### Undo Logging\n#### Repair a database following a system crash by undoing the effects of transactions that were incomplete at the time of the crash\n#### Introduces a new record type to record changes\n-  __**\u003c T, X, old \u003e**__ ‚ÜíTransaction **T** has changed database item **X** from its old value  \n#### Rules \n- U1: If transaction **T** modifies database item **X**, then a log record of the form  __**\u003c T, X, old \u003e**__  must be written to disk before the new value of **X** is output to disk\n- U2: If a transaction **T** commits, then its  __**\u003c commit T \u003e**__  log record must be written to disk only after all database items changed by **T** have been output to disk  \n#### Example\n- ![|400](https://remnote-user-data.s3.amazonaws.com/tSAFD2QgnQQW6TGtdyep-bRiN6ysl0gR-hZHoYffKMdD96uYD3setsV1lolag1lMVYAp91x2Uv5VBZLPzbNRdxlwF-47Ar2__uOjpP9ZpcK-ztAEuFL1BWYjrmesZeNg.png)\n- X_m is value in memory buffer\n- X_d is value in disc \n#### Recovery with Undo Logging \n-  \n#### With Checkpointing\n- Introduce a periodic checkpoint in the log\n\t- Only need to search backwards through the log to the most recent checkpoint\n\t- Before the checkpoint, all transactions have **committed or aborted** \n- Disadvantage of this approach‚ÜíMust scan the entire log\n- New log record type\n\t-  __**\u003c ckpt \u003e**__ ‚ÜíThe database has been checkpointed\n- Process ‚Üì \n######1. Stop accepting new transactions\n######2. Wait until all active transactions commit/abort and write  __**\u003c commit T \u003e / \u003c abort T \u003e**__  to the log\n######3. Flush log\n######4. Write  __**\u003c ckpt \u003e**__  to log\n######5. Flush log\n######6. Resume accepting transactions\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/M1KttrN-QJr-1T5Vs6kLxVXpT5ekXu-drXceiF5KIm_pZF2YDd2e_XlxINcUk-vw819tSjueWx4AnuFTgXM796t_eB9AjhTfkdcjthh42feobXY5hdYhkO_Zo2cZct-u.gif) \n- Nonquiescent Checkpointing\n\t- Need to stop transaction processing while checkpointing\n\t\t- Allow new transactions to enter the system during **the checkpoint** \n\t\t- System may appear to **stall** \n\t- New log record types\n\t\t-  __**\u003c start ckpt (**__ T_1 __**...**__ T_n __**) \u003e  **__ ‚ÜíCheckpoint starts T_1 ... T_n are active transactions that have not yet committed \n\t\t-  __**\u003c end ckpt \u003e**__ ‚ÜíCheckpoint ends\n\t- Process  #Db ‚Üì \n#######1. Write  __**\u003c start ckpt (**__ $T_1$ __**...**__ $T_n$ __**) \u003e**__  to log and flush log\n#######2. Wait until $T_1$...$T_n$ have all committed or aborted\n#######3. Write  __**\u003c end ckpt \u003e **__ to log and flush log \n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/rbhPcMibLM5hqdxR028mWmYiwqah_WXLkCFbFdxWDdH1ySzykJiUpzsB4Q6yzuPQASjimcjnr3ngLtk0dwbCwAJYd819ufaXoDp2EiXGp9FfuTAKK_ev0Jg3Ul2LGmRT.png) \n- Recovery with Checkpointed Undo Logging\n\t- Two cases for recovery depending on latest checkpoint log record\n\t\t-  __**\u003c end ckpt \u003e**__  appears latest \n\t\t\t- ![|400](https://remnote-user-data.s3.amazonaws.com/JkL1RusysYRMCumVqdGChlgvzXp-GU9PPYIGW5Nr3aDqwuhOxOiAqN2CVSgo82TSdsJ6nOBpsJ5aTwJo2NJ1PVmsbrhi_M5EsZksjgsktt6PItvjr1B8rM88INl4M-J2.png) \n\t\t\t- All incomplete transactions began after the previous  __**\u003c start ckpt (...) \u003e**__ \n\t\t\t- Disregard the log before the previous  __**\u003c start ckpt (...) \u003e**__ \n\t\t-  __**\u003c start ckpt (  **__ T_1...T_n   __**) \u003e **__ appears latest \n\t\t\t- Disregard the log before the start of the earliest incomplete transaction\n\t\t\t- System crash occurred during checkpoint\n\t\t\t- Incomplete transactions are those encountered after the  __**\u003c start ckpt (...) \u003e**__  and those of T_1...T_n that were not committed before the crash\n\t\t\t- ![|400](https://remnote-user-data.s3.amazonaws.com/yfP933fBuewfhDWciSUka2qicExou_n0k3bWFMsUgk4PuJgn3TOu9-9j0PmmZlEBceGNePwMcbBibzJjl61_B7XNr8pIaCMW93zQemBeDH7eYjX30iNx2R7LFCaBQ4-X.png) \n### Redo Logging\n#### Write  __**\u003c commit T \u003e**__  log record to disk before changed values are written to disk\n#### Issues with Undo Logging \n- If a transaction  __**T**__  commits, then its  __**\u003c commit T \u003e **__ log record must be written to disk only after all database items changed by  __**T**__  have been written to disk\n- Potentially causes more disk i/o operations\n#### Example\n- ![|400](https://remnote-user-data.s3.amazonaws.com/6T2yqOOpbuxOxcmHvNQA4KwwHFzox1DFwPr6mWqxlxn7nglPR6X3Cw7BqqR0lS8bgyPHsGKcXVnwVE5kfP1lJHaYQ4ddKchNX_tOLCVPkf4hkLYC1ZSoVH5zllXjF1MP.png) \n#### Recovery with Redo Logging \n- ![|400](https://remnote-user-data.s3.amazonaws.com/fs7clV_MO74AHricv-qGsBEDIh8oYPFkQlD1B-w_cweGv_pmbj75u0uj0qMWqGKw1b-q_olDZvNmDOtBAVLT8v2pjULU-iLlPEVefonRoKA5hM4XFxhSSaPto7UWb3mQ.png) \n-  \n#### (Non-quiescent) Checkpointing with Redo Logging \n- Recovery with Checkpointed Redo Logging\n\t- Two cases for recovery depending on latest checkpoint log record\n\t\t-  __**\u003c end ckpt \u003e **__ appears latest __** **__   \n\t\t\t- ![|400](https://remnote-user-data.s3.amazonaws.com/V3H8bnSxCjPlKB5zt1gPeEuvgl14t2u6gI1vp_U1T_YvVFjxjlds_PjULiTLqoECZruvVUAaAUWSElSL9elhC3cI71da_lpQsMC3V9h-Osrb8p05KKgKfMPJi8A20pCD.png) \n\t\t\t- Ignore every value written by transactions that committed before the corresponding  __**\u003c start ckpt () \u003e**__  has been written to disk\n\t\t\t- Any transaction named in the checkpoint start, or which has started since, may have changes that have not been written to disk (even if the transaction has committed)\n\t\t-  __**\u003c start ckpt (**__ T_1...T_n __**) \u003e**__#\n\t\t\t- Can't tell whether committed transactions to this checkpoint had their changes written to disk\n\t\t\t- Search back to the previous  __**\u003c end ckpt \u003e**__ , find its corresponding  __**\u003c start ckpt () \u003e**__  and treat as [\u003c end ckpt \u003e appears latest   ](Advanced Databases/Week 6/Logging and Recovery/Logging/Redo Logging/(Non-quiescent) Checkpointing with Redo Logging/Recovery with Checkpointed Redo Logging/Two cases for recovery depending on latest checkpoint log record/_ end ckpt _ appears latest.md) \n\t\t\t- ![|400](https://remnote-user-data.s3.amazonaws.com/gp1GVzxUqwGPUEjGvRctvKao1pYxk7KovkN7Es_iV2aX6P-nmehnFdqG1KYQG1fP0P0chb2oN7gXK3fnFW3HOKjZ-jlFbAGLQ0Osg7MuDMut_zFZCgwnZhZlj5md3r_6.png) \n- ![|400](https://remnote-user-data.s3.amazonaws.com/TlpVrAi0FZXVbWfLBJUrx3E3GK2KXfymqlbGzh8NjP3pGHe-whpndT9NmK4V0d3qDFnJrzdcWHPRYsTzGQsQk3vxVdi9bhrS0WSeMo1LXIozwKHqF8lZiS-6oZimOzNa.png) \n- Write to disk all database items that have been written to buffers but not yet to disk, by transactions that have already committed\n- Write log record  __**\u003c end ckpt \u003e**__  and flush log\n- Write log record  __**\u003c start ckpt (**__ T_1...T_n  __**) \u003e**__ , where T_1...T_n are uncommitted, and flush log\n#### Redo Logging Rule \n- R1: Before modifying a database item  __**X**__  on disk, all log records related to the modification (  __**\u003c T, X, new \u003e**__ ,  __**\u003c commit T  \u003e**__  ) must be written to disk\n#### Ignore incomplete transactions, repeat changes made by committed transactions \n#### If no  __**\u003c commit T \u003e**__  record has been written, no changes by  __**T**__  have been written to disk\n#### New record type to record changes\n-  __**\u003c T, X, new  \u003e**__ ‚ÜíTransaction  __**T**__  has changed database item  __**X**__  to a new value  \n### Undo/Redo Logging\n#### Undo/Redo Logging Rules\n- UR2: A  __**\u003c commit T \u003e**__  record must be flushed to disk as soon as it is written to log \n- UR1: Before transaction  __**T**__  modifies any database item  __**X**__  on disk, the update record  __**\u003c T, X, old, new \u003e**__  must be written to disk\n#### Recovery with Undo/Redo Logging‚Üí\n- Redo all committed transactions from oldest to newest\n- Undo all incomplete transactions from newest to oldest\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/lww3Xo0vgHMOvNhQhGqk4GRjCFChtWWksQJBAb6-KKeK0ug4kQxDvrQ9NcSGYAEHm_tg7Jl6geI2tgs608GlNZyKoR9JRdkELVjDwew6N3msiOu48StibNRgB2lrFz6J.png) \n#### Checkpointing with Undo/Redo Logging‚Üí\n- Write  __**\u003c end ckpt \u003e**__  to log and flush log \n- Write to disk all dirty buffers (i.e. those with one or more changed database items, not just those from committed transactions)\n- Write  __**\u003c start ckpt (**__ T_1...T_n __**) \u003e**__  to log and flush log\n#### Introduces a new record type to record changes\n-  __**\u003c T, X, old, new \u003e**__ ‚ÜíTransaction  __**T**__  has changed database item  __**X**__  from an old value to a new value\n#### Aims to address issues with both undo and redo logging\n- Undo logging may increase **number of disk i/o operations** \n- Redo logging requires that **all modified blocks be kept in buffers until the transaction commits and the logs flushed** ","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Week-7":{"title":"Week 7","content":"\n# Languages, Problems and Complexity in Databases\n## Boolean Queries\n### Query evaluation reduces to BQE\n### \\pi_\\emptyset(E)=\\{\u003c\u003e\\} if **true** \n### True of False queries\n### \\pi_\\emptyset(E)=\\emptyset if **false** \n### Queries are usually large\n#### BQE focuses on the **hardness** of the query irrespective of the query size\n## Computational Complexity Classes\n### Groups decidable problems\n### Each computational complexity class consists of **all problems that can be solved in a computational model under certain restrictions on the resources used to solve the problem** \n### Examples of computational models\n#### Turing Machine TM (deterministic Turing Machine)\n#### Non-deterministic Turing Machine NTM\n### Examples of resources\n#### Amount of space (memory) needed to solve the problem\n#### Amount of time needed to solve the problem\n### Basic Computational Complexity Classes\n#### Logspace (L)‚ÜîAll decision problems solvable by a TM using extra memory bounded by a logarithmic amount in the input size\n#### NLogspace (NL)‚ÜîAll decision problems solvable by a NTM using extra memory bounded by a logarithmic amount in the input size\n#### P (PTime)‚ÜîAll decision problems solvable by a TM in time bounded by some polynomial in the input size\n#### NP‚ÜîAll decision problems solvable by a NTM in time bounded by some polynomial in the input size\n#### PSpace‚ÜîAll decision problems solvable by a TM using memory bounded by a polynomial in the input size\n### Complexity\n#### It is known that **LOGSPACE}} \\subset {{PSPACE** \n#### **LOGSPACE }}\\subseteq {{NLOGSPACE }}{{\\subseteq}}{{ P }}\\subseteq {{NP}} \\subseteq {{PSPACE** \n## Problems in Databases\n### Theorem QOT(RA) \\equiv _L**BQE(RA)** \n#### \\equiv _L means logspace-equivalent \n### BQE(L)\n#### Input\n- A database  __**D**__ \n- A boolean query  __**Q**__  in  __**L**__ \n#### Question‚ÜíQ(D)\\neq \\emptyset (i.e. does  __**D**__  satisfy  __**Q**__ )\n### QOT(L)\n#### Input\n- A tuple of constants  __**t**__ \n- A database  __**D**__ \n- A query  __**Q**__  in  __**L**__ \n#### Question‚Üít\\in Q(D)\n## Complexity in Databases\n### Combined Complexity‚ÜîBoth  __**D**__  and  __**Q**__  are part of the input\n#### Theorem, for L\\in \\{RA,...\\}\n-  __**BQE(L)**__  is **PSPACE-complete** \n### Query Complexity‚ÜîFixed  __**D**__ , input  __**Q**__ \n#### Theorem, for L\\in \\{RA,...\\}  \n-  __**BQE[D](L)**__  is **PSPACE-complete**, for a fixed database  __**D**__  \n### Data Complexity‚ÜîInput  __**D**__ , fixed  __**Q**__  \n#### Theorem, for L\\in \\{RA,...\\}  \n-  __**BQE[Q](L)**__  is in **LOGSPACE**, for a fixed query Q\\in L \n## Problems in Databases\n### Important problems for optimisation purposes\n####  __**SAT(L)**__ \n- Input‚ÜíA query Q\\in L\n- Question‚ÜíIs there a (finite) database  __**D**__  such that Q(D)\\neq \\emptyset ?\n\t- If the answer is no, then **the input query }}{{ __**Q**__ }}{{ makes no sense** \n\t- Query evaluation becomes **trivial - the answer is always no** \n####  __**EQUIV(L)**__ \n- Input‚ÜíTwo queries Q_1\\in L and Q_2\\in L\n- Question‚ÜíQ_1(D)=Q_2(D) for every (finite) database  __**D**__ ? (Q_1 \\equiv Q_2) \n\t- But we have to be sure that** }}{{Q_1(D)=Q_2(D)}}{{ for every database }}{{ __**D**__ }}{{ ** \n\t- **Replace** a query Q_1 with a query Q_2 that is easier to evaluate  \n####  __**CONT(L)**__ \n- Input‚ÜíTwo queries Q_1\\in L and Q_2\\in L\n- Question‚ÜíQ_1(D)\\subseteq Q_2(D) for every (finite) database  __**D**__ ? (Q_1\\subseteq Q_2) \n\t- **Approximate** a query Q_2 with a query Q_1 that is easier to evaluate\n\t- But we have to be sure that** }}{{Q_1(D)\\subseteq Q_2(D)}}{{ for every database }}{{ __**D**__ }}{{ ** \n## Solutions to Database Problems\n### In RA\n#### Satisfiability, equivalence and containment are **undecidable** #\n- Perfect query optimisation is impossible\n#### Evaluation is **decidable (and highly tractable)** in data complexity\n### Conjunctive Queries‚ÜîSublanguage of RA for which satisfiability, equivalence and containment are decidable\n#### Simple **SELECT-FROM-WHERE** SQL queries\n- Only AND and equality in the WHERE clause\n# Conjunctive Queries\n# Containment and Minimisation","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Week-8":{"title":"Week 8","content":"\n# Parallel Databases\n## I/O Bottleneck\n### Access time to **secondary storage (hard disks)** dominates performance of DBMSes\n### Parallel Databases‚ÜîIncrease I/O bandwidth by spreading data across a number of disks\n#### Have the ability to split processing of data and access to data across **multiple processors}} and {{multiple disks** \n## Parallel Architectures\n### Monolithic Architecture ‚Üì \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/9ab8b42rC-RcMOeKCb-PHBkorY6ZWXedrj709t-7RMvnT1YFED79atGfUEm4rQ9L1SuyEDW1-4mnjTzVi5Tynut7AEEhA6oM5R_f-BQ5_Rpok6m_Yq1LxL_q52pkhJyd.png) \n#### Single Processor (P)\n- Tasks may be interleaved\n- Not true parallelism\n#### Single bank of memory (M)\n- Used by transactions\n- Buffer pool for staging data to/from disc\n#### Single disc\n### Shared Memory Architecture ‚Üì \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/hLB9mIr60tkUXpNmIdz73M6IdN0MeJ1KzaQFaiqjJ_fZlzciXd6dUPpjuRjV0njM4bdgdc2eH90KRE0LwIkjKVtj1TznQ03JRZmp_WEliOSuErEOIrpPxID4wjfQRB4l.png) \n#### Tightly coupled\n#### Symmetric Multiprocessor (SMP)\n#### Software\n- **Less** complex database software\n- **Limited** scalability\n- **Single** buffer\n- **Single** database storage\n### Shared Disc Architecture ‚Üì \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/LywK5DbzeewRSBH4sovm_3aS1w2x_99lIsTMPE-LeritPRcDNuId5KQ76uchJHd6Ed__b8cBSd1HWlrmMAG4zbbge-MuSCAxyp974VdBHcdnOlUSNFN1dt8WYpHJB0pV.png)\n#### Loosely coupled\n#### Distributed memory\n#### S=Switch\n#### Software\n- Avoids **memory bottleneck** \n- Same page may be in **more than one buffer at once - can lead to incoherence** \n- Needs **global locking mechanism** \n- **Single logical** database storage\n- Each processor has its own **database buffer** \n### Shared Nothing Architecture ‚Üì \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/NiXpvaaBllOUaDMvM6wcVTdBQf3IMV4e-yktoR2YdMig0aVCl3MtT0trXiNhnHStQWuGROm3MLdEQpIVr-pmRhg3rtB69FBnCTzhBWZjQcMBdXfWvpvyOhzeCeBY4Bm7.png) \n#### Massively parallel\n#### Loosely coupled\n#### High speed interconnect (between processors)\n#### Software\n- Each processor owns part of the data\n- Each processor has its own database buffer\n- One page is only in **one local buffer}} - no {{buffer incoherence** \n- Needs ‚Üì \n\t- Distributed deadlock detection\n\t- Multiphase commit protocol\n\t- To break SQL requests into multiple sub-requests\n#### Challenges ‚Üì \n- Partitioning the data\n- Keeping the partitioned data balanced\n- Splitting up queries to get the work done\n- Concurrency control and avoiding distributed deadlock\n- Dealing with node failure\n## Parallel Query Processing ‚Üì \n### Dividing up the work\n### ![|400](https://remnote-user-data.s3.amazonaws.com/AGkV--Scx2xXjQcazlEZ6wuvOfjT6g48yTZnvdx4MYbtLaeLyOy-Leb-sLmAQ7XjC0rDUeuSkedmE5jBQSFUiVgSlbEoHOX56daiHcPUYzn3WteckMGu7u5fRFkxqYg-.png) \n### Inter-Query Parallelism ‚Üì \n#### Different queries/transactions execute on different processors \n#### Improves **throughput** \n### Intra-Query Parallelism\n#### Intra-Operator (Horizontal) Parallelism ‚Üì \n- Operators decomposed into different operator instances, which perform the same operation on different subsets of data\n- ![|400](https://remnote-user-data.s3.amazonaws.com/Hi_RyYAM8TWFeCfAgWLkvJPw5i7VCYR8HEjgsMwhwgeJhw54j-Bz0xRoVJotR699NYzBuR2xYyLijVZqNmL8Xwhn2jTktCS3vI2g56K_MOUopa8Fy3O3LXHWC3qigZPM.png) \n#### Inter-Operator (Vertical) Parallelism ‚Üì \n- Operations are overlapped\n- Pipeline data from one stage to the next without materialisation\n#### Bushy (Independent) Parallelism ‚Üì \n- Subtrees in query plan are executed concurrently\n## Intra-Operator Parallelism\n### Partitioning ‚Üì \n#### Decomposition of operators relies on data being partitioned across **the servers that comprise the parallel database**\n#### Partitions should aim to **spread I/O load evenly across servers** \n#### Range Partitioning ‚Üì \n- ![|400](https://remnote-user-data.s3.amazonaws.com/z-TDze1FggyBtYW7bstU2ed0yiaiI53jTgr6em7Gm1QOGys3B_ue-oU651jWM3fHYWmikoSKvATNP_YwgHtyFz8B9R9HCgkobT_4JV9VxFIS6xLOVsn05OYmtJVVcGej.png)  \n#### Hash Partitioning ‚Üì \n- ![|400](https://remnote-user-data.s3.amazonaws.com/it8xYMz__t-NKydAagoR-Fmr3VkwGtNYDDFEYLO8-zZ28nZxOl0IitaO9BLl8E1jl5UyVaHAf64yhxGtwGbuRip7kP-4rdQmI7S7GxCYLuOx-8fRtPKMHviMDqz0VGKl.png)  \n#### Schema Partitioning ‚Üì \n- ![|400](https://remnote-user-data.s3.amazonaws.com/wGeNsZ-Mqdj4Rzw84WWNPwaTLKwMRh5boVAeGF32xWq-5xln8F2_MNAIl4HetWtkhHL9o2ZEy5QO3xmzFMTPBEoF7YDDuub-33Or15aqctk2KzJIX8JJ9vsDyQZ4eYop.png)  \n#### Rebalancing Data ‚Üì \n- ![|400](https://remnote-user-data.s3.amazonaws.com/n62w-RBleaBKBNmcYfL5xM0AO5JLTrjbJXAgcsnNkQ5Juvr1jOUAVjuefvpFN5hw3fUNZY_ZdIMXpnBfA0uDeekh0iWDgEJeam9g3zPf5xNAxt3ZofBdi48BrIe1obco.png) \n### Example Query: SELECT c1, c2 FROM t WHERE c1\u003e5.5\nAssuming: 100,000 rows, predicates eliminate 90% of the rows\n#### Data Shipping ‚Üì \n- ![|400](https://remnote-user-data.s3.amazonaws.com/mKBGx81j-l7GO960ZI0C0Sa6VyOozbs27x0RBB_FElDQCYkoBHO8ssyneXamiVI6efswP9sfJIrX6E6P8HT9k1WAUVZ89aaunrJ2wGbmnKyDB9tbl_vxQZMJEYmxgUhN.png) \n- ![|400](https://remnote-user-data.s3.amazonaws.com/uZiUh_mrsQ5oAD7AGFkjMRvCYDjnr_TS6Cri5N8i6t1GpUdcE8JTtV70XQGzlQ3gBMrqKzRGhevq7XxX8y8o4Yb0JYVbcBcyLBZ9ls7OuMaaIUxzGruedlomMx2q6VNp.png) \n#### Query Shipping ‚Üì \n- ![|400](https://remnote-user-data.s3.amazonaws.com/HxHvD7yHlscSLKmRSizMs8vOTmVQf4s7Vao3GdtL_dzqBYd0cv4cXCk6goZV1XhDuh0PQXw0kHciGyEVOZcO2mdhFOF4EnP6oB5LTyarw78bdr5ytyB_2k9wK-qxYgXR.png) \n- ![|400](https://remnote-user-data.s3.amazonaws.com/MQk9tVB8SQ7v41rdL7kkPZPjEtg5W6lqJANTYdS56EOFQ-5DlRzOv8tWuRg3OlACQ3NJH3-U7pGu9P8lc9MwKa187x3_IxwXBgzhwPjVlbW9qSCTR5vLYcLpx7p37xcm.png) \n- Benefits ‚Üì \n\t- Network traffic is minimised\n\t- For basic database operators, code developed for serial implementations can be reused\n## Inter-Operator Parallelism ‚Üì \n### Allows operators with a producer-consumer dependency to be executed concurrently\n### Results produced by producer are pipelined directly to consumer\n### Consumer can start before producer has produced all results\n### Best suited to single-pass operators\n### ![|400](https://remnote-user-data.s3.amazonaws.com/phRVbL4vEB2a-PThOcT16hivaLZLoNJ-OJFd58AY1p1_HFw_NnCXiHJ5dRNB7M40mEd-H8KkYIFByfGXDLq6M0zMJD5bdM0IFzhei87QnPwYzr4l1olBOQpXMOmrTXB7.png) \n### Intra-Inter-Operator Parallelism ‚Üì \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/ejtj_P2ScbCK88iSZ1Km1jW0rKd_PJGWYvV5psYtx-NewkODRZ6xaadP9C-Hi3tM9GAmrMWOAQA65p6c5Tu7mOpffWgGxrFPEcyczb48qF-naoChQuKEYphDLCS46arh.png) \n## Volcano Architecture\n### Exchange Operator\n#### Inserted between the steps of a query to ‚Üì \n- Pipeline results\n- Direct streams of data to the next step(s). redistributing as necessary\n#### Example Query\n- ![|400](https://remnote-user-data.s3.amazonaws.com/3CgLHF3E4K_2lIDbvsBJs4aWALdRotWqw-X0VDUuyFYv5hCJQzIvLVJUK56uNJkJeeomB2eJ3n2u1dY9xR9tY0nCjE4QMfeEnzM8OkmYhMO35vQ9fjuMdoXkrxpScT7c.png) \n- ![|400](https://remnote-user-data.s3.amazonaws.com/DrX1op7yfGSVnRl2MsDVQ2k4ZIRjSLp84h_PGkbS3CU1y-klLP8VVcVuhh3dz1Oo7QAGk5Oxrx835q51w3IJllfFo9adbc4B94uF06p3MAGGDyCKgsQYokvloaQVMLxq.png) \n- ![|400](https://remnote-user-data.s3.amazonaws.com/rseSFoe5_rpP5a8qy2Xb-fOntbkB9AVMVBpszAipJISpZYWA7gNEnduzWxqmoQawYacM4HcjNfqUcVOF9pXrUZHlq_GYw8HCm7Xzz3_0C-oqBfRDzx1B0BbnVicXsEdu.png) \n- ![|400](https://remnote-user-data.s3.amazonaws.com/qyZBh0OlePwrxmKtzKDAUyyywajR7fFKDZWB9U3MLtyCwu8o11wr8wrdXFpYwNLfdwjPU2D955clMbOesdTtOapI5zgDEMaX_jfMtltYrR0-g8BFkKKMVim5_hUxm-xd.png) \n- ![|400](https://remnote-user-data.s3.amazonaws.com/9o6EjKyDUBFpyIQsUTwMZjcLGdn8_LeMjcSyZ6XKliAOad1ppzSxKv3IAHTCZHHmEcCNjFaMxC4qjGR2MCPkwY9yXQdBsnE5J985B0V5ODZS0h11CwGKXXR0BZa8ggsM.png) \n## Bushy Parallelism ‚Üì \n### Execute subtrees concurrently\n### ![|400](https://remnote-user-data.s3.amazonaws.com/5jYUHxoP4wtwnInvFJUh4tHYqPwNsahFVsivnaEaVwxUzX7dTH-3mpyoxq_kwCE8nzq9fXzXtY7SztkOYkb6AgNk56oS6gAdQvTchdVQaSxfbsb-2zTUlToNqj7j8qNj.png) \n## Parallel Query Processing\n### ![|400](https://remnote-user-data.s3.amazonaws.com/EjayCtrjmFg5TiO8LXj7LhJ--HsRPxscMSULQ-7XBnz5tYiPClpGY0etdT-3yQ4JctnOYDXg2EB8gVz5TD1rIq4cR41jccwxIa3I4aj0utvfhFi17iEOWM0pTE8M8XsF.png) \n#### Enquiry/Query without Join‚Üì ‚Üì \n#####1. Count matching tuples in each partition\n#####2. Pass counts to coordinator\n#####3. Sum counts and return\n#####4. How many customers live in the UK? \n- ![|400](https://remnote-user-data.s3.amazonaws.com/67Bn5jqY_dVUbaqsINrDmJOXmxM5SfKGciugS8bAln3FhqaAvCaPaqfWm3trpNkYVLqNo79wfPVY3Zv9kf4rf5ycoAc3iibSXP1vEZ5gKbINE7XbZaZ3SAeVtR2wh_ZA.png) \n#### Co-located Join ‚Üì \n- ORDER, CUSTOMER partitioned on CKEY\n- Therefore corresponding entries are on the same node\n#####1. Join CUSTOMER and ORDER on each partition\n#####2. Pass joined relations to coordinator\n#####3. Take union and return\n#####4. Which customers placed orders in July?\n- ![|400](https://remnote-user-data.s3.amazonaws.com/Di627c9KKUXeUb8uQAM1qfc6R6GfkGAOIfte3QeYtKFqIlGiqFgBDy21NvWh1aMragoBrQ3jx1YoV0rKl0Cg5Xwbj7TjwCys_qOushf0Drwz3Hw6k2PMUV-bU_tXiqa6.png) \n#### Directed Join (Parallel Associative Join) ‚Üì \n- ORDER partitioned on OKEY\n- CUSTOMER partitioned on CKEY\n#####1. Scan ORDER on each partition\n#####2. Send tuples to appropriate CUSTOMER node based on ORDER.CKEY\n#####3. Join ORDER tuples with each CUSTOMER fragment\n#####4. Send joined relations to coordinator\n#####5. Take union and return\n- Which customers placed orders in July?\n- ![|400](https://remnote-user-data.s3.amazonaws.com/qM8gClzgnh7ed93FFwpj8UUmYyuWt_TSqCJhi_TDmYn5bQM8GUD6qvKJRLKsbsy8zpcQRSjB9JT2KNOSkz8bGNd-KVrdXPeiwhtsRMXk4bOGPByMRqzZWwhf1tG6xng1.png) \n#### Broadcast Join (Parallel Nested Loop Join) ‚Üì \n- SUPPLIER partitioned on SKEY\n- CUSTOMER partitioned on CKEY\n- Join on CNATION=SNATION\n#####1. Scan SUPPLIER on each partition\n#####2. Send tuples to all CUSTOMER nodes\n#####3. Join SUPPLIER tuples with each CUSTOMER fragment\n#####4. Send joined relations to coordinator\n#####5. Take union and return\n#####6. Which customers and suppliers are in the same country?\n- ![|400](https://remnote-user-data.s3.amazonaws.com/aqNur4HE1l5A0HpGf2wYkFuBFwnTJdU2SAXAPELATO6-aLDZ37gkCse8gSSKx_p6Lepp3KwcdALnLi8M5t5vC7Y557otWlMoAjGDB_9BDl2h5izfgvfaoUAWRuY0Deyc.png) \n#### Repartitioned Join (Parallel Hash Join) ‚Üì \n- SUPPLIER partitioned on SKEY\n- CUSTOMER partitioned on CKEY\n- Join on CNATION=SNATION\n#####1. Scan SUPPLIER, CUSTOMER\n#####2. Repartition on *NATION and send to appropriate worker for Task 3\n#####3. Join SUPPLIER tuples CUSTOMER tuplea\n#####4. Send joined relations to coordinator\n#####5. Take union and return\n#####6. Which customers and suppliers are in the same country?\n- ![|400](https://remnote-user-data.s3.amazonaws.com/qBkQObhtziJpyPzsQ4LZ1M-35tsZrFwSkTLlB_tE7OmNP4Z-dguzQKoYBkVFKOyUVNITYrfL2jvdZLX2hW7He_uAtd17o6rk5DOmbTNRUSQF34gWu5Q3xNLDJLh7WnXz.png) \n## Concurrency Control\n### Concurrency and Parallelism\n#### A single transaction may update data in several different places\n#### Multiple transactions may be using the same (distributed) tables simultaneously\n#### One or several nodes could fail\n#### Requires concurrency control and recovery across multiple nodes for\n- Locking and deadlock detection\n- Two-phase commit to ensure 'all or nothing'\n#### Locking and Deadlocks\n- With Shared Nothing architecture, each node is responsible for **locking its own data** \n- No global locking mechanism\n- Resolving Deadlocks ‚Üì \n\t- Timeout T2, after wait exceeds a certain interval\n\t\t- Interval may need random element to avoid both transactions giving up at the same time and trying again\n\t- Rollback T2 to let T1 proceed\n\t- Restart T2, which can now complete\n- Approach used by DB2 ‚Üì \n\t- Each node maintains a local 'wait-for' graph\n\t- Distributed deadlock detector (DDD) runs at the catalogue node for each database\n\t- Periodically, all nodes send their graphs to the DDD\n\t- DDD records all locks found in wait state\n\t- Transactions becomes a candidate for termination if found in same lock wait state on two successive iterations\n\t- \n### Reliability\n#### **Two-phase commit protocol (2PC)** is used to ensure that Atomicity is preserved \n#### Two-Phase Commit (2PC)\n- Coordinator‚ÜîSite that manages the global transactions\n- Participants‚ÜîSeparate sites that execute local transactions\n- Phase 1: Voting ‚Üì \n######1. Coordinator sends \"prepare T\" message to all participants\n######2. Participants respond with either \"vote-commit T\" or \"vote-abort T\"\n######3. Coordinator waits for participants to respond within a timeout period\n- Phase 2: Decision ‚Üì \n######1. If all participants return \"vote-commit T\" (to commit), send \"commit T\" to all participants. Wait for acknowledgements within timeout period\n######2. If any participant returns \"vote-abort T\", send \"abort T\" to all participants. Wait for acknowledgements within timeout period\n######3. When all acknowledgements received, transaction is complete\n\t- If a site does not acknowledge, resend global decision until it is acknowledged\n- Normal Operation  #Db ‚Üì \n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/A9t-mNzkaZTQYdzuUxMrQjb0mcSCfshZbzx6vR4FVdz_H8g4Q7Y_vlVvVVRgzmS4k2Jh7kE8p33GkpOkzQJhQMeAyGuVfyl9ZK8-zjtD2tP5Dd2wzpzfzeIaT-ToK7-B.png) \n- Aborted Transaction ‚Üì \n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/uACLnjNc6Z6auEzX0U7jWhjuaiuA0GI3vxncxC20ruYsid4342LhUZbyfCmMpwHAVlIG_ITqT5i_2VJnxQ9yfSBhFg4VaG1vyXuN5TpJA5ZyvQgJ5gsvO07ctzVOzeIY.png)\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/sw31BoOg9faJZg3JRKc3vqTVKvtMhzuyQYl-KkY-Ijy-2o8CNLIpOBQxhG71xK5ajiZLMsDRhW4rGeAyi15bL0wg3jly7-12fUy71WmbGRvlnX8xWVjcMPdS6u_ZayRw.png) \n# Distributed Databases\n## Horizontal Fragmentation\n### Each fragment contains a subset of the tuples of the global relation\n### ![|400](https://remnote-user-data.s3.amazonaws.com/RH6v1RQ-bm5_ZpWa2IxnhXoUxI2ynOzRoQzRw1aoHDI0Z1cOIqX2N_e_BNUvZRQ-iDVUesS_AeqYiOmr3DFRPwQa3lhqlATmbqqn6ja4bU_75eqvh13gSKGk5pl9_8Be.png) \n## Vertical Fragmentation\n### ![|400](https://remnote-user-data.s3.amazonaws.com/uKrmhEKuXvRwky8a4g9QlASHpwvaJ4Nk8-4HwCANZvAohKgbcEq8jNW9O0AW_oJKzbWheTdqjFGE_7Sw6qyIw1BKYo8cluS2Jwi7x-T7-T0eW3759o1AB6HN6l9UGLOf.png) \n### Each fragment contains a subset of the attributes of the global relation \n## Reduction for Horizontal Fragmentation \n### ![|400](https://remnote-user-data.s3.amazonaws.com/TImwLmcyqm8OFboF0kB-4YrTSce0ezw7cqYbifhs3SUmqePDVFcbsGsNOzFLoSrFga2535lPgpy5HshxPGxG8ncm1e68FpVdD2AzDU2so52Bu0Tod3193Pc6fc4WTfaB.png) \n## Horizontal Selection Reduction \n### ![|400](https://remnote-user-data.s3.amazonaws.com/kQcx3KSme6XEPgZBlflS2v_RCCKjIg6JMcnRMLPQ4ZqN8-HNogO9khbH0Ee0PKJC4evroTQnZyQxvoaHcw-qqDYm4uOIQhewNW6baqIBQBXPXADSnmU9j53tCST0U83U.png) \n## Horizontal Join Reduction \n### ![|400](https://remnote-user-data.s3.amazonaws.com/yz7w7PbBiIqwakLXQSR_Kv548YTWcsLXznCsmfpTkO2fz890exR7eEllMmZ2M2LgEq4ikb0k9xaorJxCsOtE0f0MkF0SNf_nVNVMv1sDj8lbPm2D0G_evqyM3xAwMT4L.png) \n## 2PC \n### Linear 2PC \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/YAip-RMb2HgumIvFFeE7MGLeO0JzKWxqX16f6645pnxoZhhnrLE-AsRlWEYmhu9X5a0NlWH6qsCXwsxDDbBdz9WpuA5ASMVWVffT1DC1NhuU6EJGfjzQ2nZKEQ1vsAaw.png) \n#### Second phase from the participants to the coordinator\n#### Participants may unilaterally abort\n#### First phase from the coordinator to the participants\n### Centralised 2PC \n#### Communication only between the coordinator and the participants\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/vEXDfpK3V5L1NNoqazeTeP5fbNLO1gsgRY_FP8xFyfit0r6w5Wim_wkQGhCBlalAGeHa7DNXW5xnCbZxSsVRULPa14j7BtbynwlBDcTxd7F5GVhmvFcoeIz9l_37UCbt.png)","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Databases/Week-9":{"title":"Week 9","content":"\n# Information Retrieval\n## Term Selection Techniques  #Db ‚Üì \n### Tokenisation  #Db ‚Üì \n#### Identify distinct words\n#### e.g. Separate on whitespace, discard punctuation, fold cas\n### Stop Word Removal\n#### Identify high frequency stop words\n#### Sort terms by collection frequency\n#### Use stop list to discard words during indexing\n#### Construct a stop list\n### Noun Grouping\n#### Identify groups of adjacent nouns to index as terms\n### Stemming \n#### and when generating query terms from query\n#### Use stemming algorithm to remove affixes from terms before indexing\n### Manual Indexing\n#### Identification of indexing terms by a subject expert\n## Vector Model\n### Binary Vector Model \n#### 1 or 0 if term is present in document\n### Vector Model Similarity \n#### Determined using the dot product\n### Term Weighting\n#### Inverse Document Frequency\n- \\log_2\\frac{\\text{total number of documents in collection}}{\\text{number of documents that contain the word that we're interested in}}  \n#### Term Frequency\n- \\frac{\\text{number of occurrences of word in document}}{\\text{total number of words in document}}   \n#### Term Weighting\n- TF * IDF\n### Rocchio Method  #Db ‚Üì \n#### Query refinement through relevance feedback\n#### Ask user to tag relevant/non-relevant\n#### Push towards relevant vectors, away from no-relevant\n#### \\text{newquery}=(1*query)+(0.75*\\text{average of relevant vectors})-(0.25*\\text{average of non-relevant vectors}) \n## Evaluation\n### Precision and Recall\n#### Precision #Db ‚Üì \n- What fraction of the returned results are relevant to the information need? \n- $P(\\text{relevant}|\\text{retrieved})$ \n#### Recall\n- P(\\text{retrieved}|\\text{relevant}) \n- What fraction of the relevant documents in the collection were returned by the system? ","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Advanced-Programming-Language-Concepts-ToC":{"title":"Advanced Programming Language Concepts ToC","content":"\n# **Week 1**\n#### [[Linear Typing]]\n\n# **Week 2**\n#### [[Ownership]]\n\n# **Week 3**\n#### [[Gradual Typing]]\n\n# **Week 4**\n#### [[Dependent Types]]\n\n# **Week 5**\n#### [[Lenses]]\n\n# **Week 6**\n#### [[Hygienic Macros]]\n#### [[Introduction to Metaprogramming]]\n#### [[Simple Macros]]\n\n# **Week 7**\n#### [[Template Metaprogramming]]","lastmodified":"2023-04-19T18:54:03.995889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Week-1/Linear-Typing":{"title":"Linear Typing","content":"\n# Propositional Logic\nA **Tautology** is a formula which evaluates to true for any values of its propositional variables\ne.g.\n\t$A\\wedge B \\to A$\n\t$A\\to A\\vee B$\n\t$A\\to (B \\to A)$\n\t$A\\vee \\neg A$\n\t$(A\\to B)\\wedge (\\neg A\\to B)\\to B$\nA **Sequent** is an expression of the form $\\phi_1,\\dots,\\phi_n\\vdash \\psi$ \nFor a sequent to be valid, it must evaluate to true for any potential assignment of variables that will make the formula on the left side of $\\vdash$ evaluate to true\nAn **Inferefence Rule** is an expression of the form $\\dfrac{\\alpha_1\\;\\;\\dots\\;\\;\\alpha_n}{\\beta}$, where $\\alpha_1,\\dots\\alpha_n$ are sequents\nThe inference rule is valid if sequent $\\beta$ is valid every time the sequents $\\alpha_1,\\dots\\alpha_n$ are valid\n#### Logical Inference Rules\n$$\n\\dfrac{}{A\\vdash A}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash A\\;\\;\\;\\;\\; A,\\Delta\\vdash B}{\\Gamma,\\Delta\\vdash B}\n$$\n```start-multi-column  \nID: Table  \nnumber of columns: 2  \nBorder: off\nShadow: off\n```\n$$\n\\dfrac{\\Gamma,A\\vdash C}{\\Gamma,A\\wedge B\\vdash C}\n$$\n\n$$\n\\dfrac{\\Gamma,B\\vdash C}{\\Gamma,A\\wedge B\\vdash C}\n$$\n\n$$\n\\dfrac{\\Gamma,A\\vdash C\\;\\;\\;\\;\\Delta, B\\vdash C}\n{\\Gamma,\\Delta,A\\vee B\\vdash C}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash A\\;\\;\\;\\;\\Delta,B \\vdash C}\n{\\Gamma,\\Delta,A\\to B\\vdash C}\n$$\n\n--- end-column ---\n\n$$\n\\dfrac{\\Gamma\\vdash A}{\\Gamma\\vdash A\\vee B}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash B}{\\Gamma\\vdash A\\vee B}\n$$   \n\n$$\n\\dfrac{\\Gamma\\vdash A\\;\\;\\;\\;\\Delta\\vdash B}\n{\\Gamma,\\Delta\\vdash A\\wedge B}\n$$    \n \n$$\n\\dfrac{\\Gamma,A\\vdash B}\n{\\Gamma\\vdash A\\to B}\n$$\n\n=== end-multi-column\n#### Structural Inference Rules\n$$\n\\dfrac{\\Gamma\\vdash B}\n{\\Gamma,A\\vdash B} \\hspace{10mm}(\\text{Weakening})\n$$ \n$$\n\\dfrac{\\Gamma,A,A\\vdash B}\n{\\Gamma,A\\vdash B} \\hspace{10mm}(\\text{Contraction})\n$$\n\n$$\n\\dfrac{\\Gamma,A,B\\vdash C}\n{\\Gamma,B,A\\vdash C} \\hspace{10mm}(\\text{Permutation})\n$$ \n# Type Theory\n\n## Basic Type Constructors\n\n### Cartesian Product\n$T_1 \\times T_2 =\\{(x,y)\\;|\\; x\\in T_1, y\\in T_2\\}$\n### Disjoint Union\n$T_1 \\sqcup T_2 =\\{(x,1)\\;|\\; x\\in T_1\\}\\cup \\{(y,2)\\;|\\; y\\in T_2\\}$\n### Function Type\n$T_1 \\to T_2$ is the set of all (computable) functions from type $T_1$ to type $T_2$\n\n## Curry-Howard Isomorphism\n\n\u003e[!Tip]\n\u003eThe Curry-Howard isomorphism is a way of looking at mathematical proofs and computer programs in a similar way. It says that a mathematical proof can be thought of as a way of solving a problem, just like a computer program. And just like a computer program, a proof has a clear structure and steps to follow. So, the ideas behind a proof can be translated into a computer program and vice versa.\n\n$$\n\\dfrac{\\Gamma\\vdash exp_1\\:A\\;\\;\\;\\;\\Delta\\vdash exp_2\\:B}\n{\\Gamma\\vdash (exp_1,exp_2)\\:A\\times B}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash A\\;\\;\\;\\;\\Delta\\vdash B}\n{\\Gamma\\vdash A\\wedge B}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash exp\\:A}\n{\\Gamma\\vdash (exp,1)\\:A\\sqcup B}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash A}\n{\\Gamma\\vdash A\\vee B}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash exp\\:B}\n{\\Gamma\\vdash (exp,2)\\:A\\sqcup B}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash B}\n{\\Gamma\\vdash A\\vee B}\n$$\n\n$$\n\\dfrac{\\Gamma, x:A\\vdash exp\\:B}\n{\\Gamma\\vdash (\\lambda x. exp)\\:A\\to B}\n\\hspace{10mm}\n\\dfrac{\\Gamma, A\\vdash B}\n{\\Gamma\\vdash A\\to B}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash f\\:A\\to B\n\\;\\;\\;\\;\\;\\;\n\\Gamma\\vdash exp\\:A\n}\n{\\Gamma\\vdash f(exp)\\:B}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash A\\to B\n\\;\\;\\;\\;\\;\\;\n\\Gamma\\vdash A\n}\n{\\Gamma\\vdash B}\n$$ ---\n$$\n\\dfrac{\\Gamma\\vdash exp\\:B}\n{\\Gamma,x\\:A\\vdash exp\\:B}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash B}\n{\\Gamma,A\\vdash B} \n$$ \n$$\n\\dfrac{\\Gamma,x\\:A\\vdash exp\\:B}\n{\\Gamma,x\\:A,x\\:A\\vdash exp\\:B}\n\\hspace{10mm}\n\\dfrac{\\Gamma,A,A\\vdash B}\n{\\Gamma,A\\vdash B} \n$$\n\n$$\n\\dfrac{\\Gamma,x\\:A,y\\:B\\vdash exp\\:C}\n{\\Gamma,y\\:B,x\\:A\\vdash exp\\:C}\n\\hspace{10mm}\n\\dfrac{\\Gamma,A,B\\vdash C}\n{\\Gamma,B,A\\vdash C} \n$$ \n## Type Interpretation of Propositional Logic\n\nUsing any function from $A$ to $B$ and any function from $B$ to $C$ one can construct a function from $A$ to $C$\n$$\nA\\to B, B\\to C \\vdash A\\to C\n$$\n\nUsing any function from $A$ to $B$ and any function from $A$ to $C$ one can construct a function from $A$ to $B\\times C$\n$$\nA\\to B, A\\to C \\vdash A\\to B\\wedge C\n$$\n## Negation\n\n$\\neg\\phi$ is logically equivalent to $\\phi\\to \\bot$\n$\\bot$ is interpreted as empty type $Void$\n\n# Resource Logics\n\n## Resource Formulae and Sequents\n\n$R_1\\wedge R_2$ are two resources \n\n$R_1\\vee R_2$ one of two resources\n\n$R_1\\to R_2$ is a disposable one-time device for converting a unit of resource $R_1$ into a single unit of resource $R_2$\n\n$\\bot$ is an impossible resource, an element of $\\varnothing$\n\n$R_1,\\dots,R_n\\vdash S$ means that using resources $R_1,\\dots,R_n$ one can make resource $S$\n\n## Affine vs. Linear Logic\n\nIn **affine logic**, some resources can be left unused (wasted)\n\nIn **linear logic**, all resources must be used (accounted for)\n\n# Linear Types\n\n**Linear type** systems have exchange only, so every variable must  \nbe used exactly once.\n**Affine type** systems have exchange and weakening, so every  \nvariable can be used at most once.  \n**Relevant type** systems have exchange and contraction, so every  \nvariable must be used at least once.  \n**Ordered type** systems don‚Äôt use any of the three structural rules,  \nso you have to use every variable exactly once in the order of  \ncreation","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Week-2/Ownership":{"title":"Ownership","content":"Only one variable ‚Äúowns‚Äù data at any given moment in time\nYou can see, but you cannot change something that you don‚Äôt own\n\n```RUST\nfn main() {  \n\tlet a = 27;  \n\tlet mut b = a;  \n\tb = b - 7;  \n\tprintln!(\"a={}, b={}\", a, b);  \n}\n```\n\n**Output**:\n`a=27, b=20`\n\n# Clone\n\n```RUST\nfn main() {  \n\tlet mut a = String::from(\"Hello\");  \n\tlet mut b = a.clone();  \n\ta.push('!');  \n\tb.push('?');  \n\tprintln!(\"a={}, b={}\", a, b);  \n}\n```\n\n**Output**:\n`a=Hello!, b=Hello?`\n\n# Borrow\n\n```RUST\nfn main() {  \n\tlet a = String::from(\"Hello\");  \n\tlet b = \u0026a;  \n\tlet c = \u0026b;  \n\tprintln!(\"a={}, b={}, c={}\", a, b, c);  \n}\n```\n\n**Output**:\n`a=Hello, b=Hello, c=Hello`\n\n## When being Borrowed from, You Retain the Rights to Change\n\n```RUST\nfn main() {  \n\tlet mut a = String::from(\"Hello\");  \n\tlet b = \u0026a;  \n\tprintln!(\"a={}, b={}\", a, b);  \n\ta.push('!');  \n\tprintln!(\"a={}\", a);  \n}\n```\n\n**Output**:\n`a=Hello b=Hello a=Hello!`\n\n## Borrower does not have the Right to Change\n\n```RUST\nfn main() {  \n\tlet a = String::from(\"Hello\");  \n\tlet b = \u0026a;  \n\tprintln!(\"a={}, b={}\", a, b);  \n\tb.push('!');  \n}\n```\n\nResults in an **error**\n\n# Mutable Borrow\n\n```RUST\nfn main() {  \n\tlet a = String::from(\"Hello\");  \n\tlet b = \u0026a;  \n\tprintln!(\"a={}, b={}\", a, b);  \n\tb.push('!');  \n}\n```\n\n**Output**:\n`b=Hello! a=Hello!`\n\n# Dereferencing Primitive Types\n\n```RUST\nfn square_by_ref(n: \u0026mut i32){\n    *n = *n * *n;\n}\nfn main(){\n    let mut n: i32 = 12;\n    square_by_ref(\u0026mut n);\n    println!(\"n={}\",n);\n}\n```\n\n**Output**:\n`n=144`\n\n","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Week-3/Gradual-Typing":{"title":"Gradual Typing","content":"# Typing\n\n**Static Typing** - Correctness of typing is checked at compile time\n**Dynamic Typing** - Correctness of typing is checked at runtime\n**Gradual Typing** - Combines both Static and Dynamic typing\n\n# Typescript\n\nTypeScript is JavaScript with gradual typing\n\n# Generic Functions\n\n```Typescript\nfunction identity\u003cX\u003e(arg: X): X {\n  return arg;\n}\n```\n\n# Generic Types\n\n```Typescript\ntype A\u003cT\u003e = (x: T) =\u003e T;\nconst  f: A\u003cnumber\u003e = function (y: number){\n  return y + 7;\n}\nconst  g: A\u003cstring\u003e = function (y: string){\n  return y + '!';\n}\nconsole.log(f(5));\nconsole.log(g(\"Hello World\"));\n```\n\n**Output**:\n`[LOG]: 12 [LOG]: \"Hello World!\" `\n\n# Union Type\n\n```Typescript\ntype A = boolean | number; \n\nfunction f(x: number): A{\n    return 55;\n}\nfunction g(x: boolean): A{\n    return !x;\n}\n\nconsole.log(f(5));\nconsole.log(g(true));\n```\n\n**Output**:\n`[LOG]: 55 [LOG]: false `","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Week-4/Dependent-Types":{"title":"Dependent Types","content":"# Dependent Types\n\n## Typing Rules\n\n$$\\dfrac{\\Gamma\\vdash exp_1\\:A\\;\\;\\;\\;\\Delta\\vdash exp_2\\:B}\n{\\Gamma\\vdash (exp_1,exp_2)\\:A\\times B}$$\n\n$$\n\\dfrac{\\Gamma\\vdash exp\\:A}\n{\\Gamma\\vdash (exp,1)\\:A\\sqcup B}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash exp\\:B}\n{\\Gamma\\vdash (exp,2)\\: A\\sqcup B}\n$$\n\n$$\n\\dfrac{\\Gamma, x:A\\vdash exp\\:B}\n{\\Gamma\\vdash (\\lambda x. exp)\\:A\\to B}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash f\\:A\\to B\n\\;\\;\\;\\;\\;\\;\n\\Gamma\\vdash exp\\:A\n}\n{\\Gamma\\vdash f(exp)\\:B}\n$$ \n## Dependent Product Type\n\n$$prod(A,x.B)$$\n\nWhere $x.B$ is a **type function** with argument $x$. It takes an element of type $A$ and returns a type\n\n## Dependent Product Type Rule\n\n$$\n\\dfrac{\\Gamma\\vdash exp_1\\:A\\;\\;\\;\\;\\Gamma\\vdash exp_2\\:B}\n{\\Gamma\\vdash (exp_1,exp_2)\\:A\\times B}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash exp_1\\:A\\;\\;\\;\\;\\Gamma\\vdash exp_2\\:B[exp_1/x]}\n{\\Gamma\\vdash (exp_1,exp_2)\\:prod(A, x.B)}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash France\\:Country\\;\\;\\;\\;\\;\\;\\Gamma\\vdash Paris\\:Cities[France/x]}\n{\\Gamma\\vdash (France,Paris)\\:prod(Country,x.Cities)}\n$$\n\n## Second Dependent Product Type Rule\n\n$$\n\\dfrac{\\Gamma\\vdash p\\:A\\times B\\;\\;\\;\\;\\Gamma, x:A \\vdash exp\\:C}\n{\\Gamma\\vdash exp[pr_1(p)/x]\\:C}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash p\\:prod(A,y.B)\\;\\;\\;\\;\\Gamma,x\\:A\\vdash exp:C}\n{\\Gamma\\vdash exp[pr_1(p)/x]\\:C}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash p\\:prod(Country,x.Cities)\\;\\;\\;\\;\\;\\;\\Gamma, x:Country\\vdash population\\:Integer}\n{\\Gamma\\vdash population[pr_1(p)/x]\\:Integer}\n$$\n\n## Third Dependent Product Type Rule\n\n$$\n\\dfrac{\\Gamma\\vdash p\\:A\\times B\\;\\;\\;\\;\\Gamma, z:B \\vdash exp\\:C}\n{\\Gamma\\vdash exp[pr_2(p)/z]\\:C}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash p\\:prod(A,y.B)\\;\\;\\;\\;\\Gamma,x\\:A, z:B[x/y]\\vdash exp:C}\n{\\Gamma\\vdash exp[pr_1(p)/x,pr_2(p)/z]\\:C}\n$$\n\n$$\n\\hspace{-5mm}\n\\dfrac{\\Gamma\\vdash p\\:prod(Country,x.Cities)\\;\\;\\;\\;\\;\\;\\Gamma, u:Country,z:Cities[u/x]\\vdash isCapital\\:Bool}\n{\\Gamma\\vdash isCapital[pr_1(p)/u,pr_2(p)/z]\\:Integer}\n$$\n\n## Typing Rules\n\n$$\n\\dfrac{\\Gamma, x:A\\vdash exp\\:B}\n{\\Gamma\\vdash (\\lambda x. exp)\\:A\\to B}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash f\\:A\\to B\n\\;\\;\\;\\;\\;\\;\n\\Gamma\\vdash exp\\:A\n}\n{\\Gamma\\vdash f(exp)\\:B}\n$$ \n\n$$\n\\dfrac{\\Gamma, x:A\\vdash exp\\:B[x/y]}\n{\\Gamma\\vdash (\\lambda x. exp)\\:fun(A;y.B)}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash f\\:fun(A;y.B)\n\\;\\;\\;\\;\\;\\;\n\\Gamma\\vdash exp\\:A\n}\n{\\Gamma\\vdash f(exp)\\:B[exp/y]}\n$$ \n# First Order Logic\n\n## Formulae with Quantifiers\n\n1. $\\forall x.\\;A$ means that statement $A$ is true for **each** value of $x$\n2. $\\exists x.\\;A$ means that statement $A$ is true for **at least** one value of $x$\n\n# First Order Sequents\n\n## Sequent\n\nA sequent is an expression of the form $\\phi_1,\\dots,\\phi_n\\vdash \\psi$, where\n$\\phi_1,\\dots,\\phi_n,\\psi$ are formulae. A sequent is **valid** if formula $\\psi$ is true under any interpretation of formulae under which all of the formulae  $\\phi_1,\\dots,\\phi_n$ are true. Examples of valid sequents:\n1. $\\forall x\\forall y.\\; A\\vdash \\forall y\\forall x.\\; A$\n2. $\\forall x.\\; A, \\forall x.\\;B \\vdash \\forall x.\\; (A\\wedge B)$\n3. $\\forall x.\\; A\\vdash A[y/x]$\n\n## Inference Rules for Quantifiers\n\n$$\n\\dfrac{\\Gamma\\vdash A[exp/x]}\n{\\Gamma\\vdash \\exists x.\\; A}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash \\exists x.\\;B\\;\\;\\;\\;\\Gamma, B\\vdash C\\;\\;\\;\\;\\; \\text{$x$ does not occur in $\\Gamma$ and $C$}}\n{\\Gamma\\vdash C}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash \\forall x.\\,A}\n{\\Gamma\\vdash A[exp/x]}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash A\\;\\;\\;\\;\\; \\text{$x$ does not occur in $\\Gamma$}}\n{\\Gamma\\vdash \\forall x.\\,A}\n$$\n\n# Restricted Quantifiers\n\n## Domain Specification\n\n$\\forall x: A. B$ means that $B$ is true for all $x\\in A$\n\n$\\exists x: A. B$ means that $B$ is true for at least one $x\\in A$\n\nSome standard domains:\n- $\\mathbb{Z}$ all integer numbers\n- $\\mathbb{N}$ all natural numbers (include 0)\n- $\\mathbb{Q}$ all rational numbers\n- $\\mathbb{R}$ all real numbers\n\n## Inference Rules\n\n$$\n\\dfrac{\\Gamma\\vdash exp_1\\:A\\;\\;\\;\\;\\Gamma\\vdash B[exp_1/x]}\n{\\Gamma\\vdash \\exists x\\:A.\\; B}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash \\exists y\\:A.\\;B\\;\\;\\;\\;\\Gamma,x\\:A\\vdash C}\n{\\Gamma\\vdash C}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash \\exists y:A.\\;B\\;\\;\\;\\;\\Gamma,x\\:A, B[x/y]\\vdash C}\n{\\Gamma\\vdash C}\n$$\n\n$$\n\\dfrac{\\Gamma, x\\:A\\vdash B[x/y]}\n{\\Gamma\\vdash \\forall y\\:A.\\;B}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash \\forall y\\:A.\\;B\n\\;\\;\\;\\;\\;\\;\n\\Gamma\\vdash exp\\:A\n}\n{\\Gamma\\vdash B[exp/y]}\n$$\n\n# Back to Types\n\n## Dependent Product Type Rule\n\n$$\n\\dfrac{\\Gamma\\vdash exp_1\\:A\\;\\;\\;\\;\\Gamma\\vdash exp_2\\:B[exp_1/x]}\n{\\Gamma\\vdash (exp_1,exp_2)\\:prod(A, x.B)}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash exp_1\\:A\\;\\;\\;\\;\\Gamma\\vdash B[exp_1/x]}\n{\\Gamma\\vdash \\exists x\\:A.\\; B}\n$$\n\n## Second Dependent Product Type Rule\n\n$$\n\\dfrac{\\Gamma\\vdash p\\:A\\times B\\;\\;\\;\\;\\Gamma, x:A \\vdash exp\\:C}\n{\\Gamma\\vdash exp[pr_1(p)/x]\\:C}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash \\exists y\\:A.\\;B\\;\\;\\;\\;\\Gamma,x\\:A\\vdash C}\n{\\Gamma\\vdash C}\n$$\n\n## Third Dependent Product Type Rule\n\n$$\n\\dfrac{\\Gamma\\vdash p\\:prod(A,y.B)\\;\\;\\;\\;\\Gamma,x\\:A, z:B[x/y]\\vdash exp:C}\n{\\Gamma\\vdash exp[pr_1(p)/x,pr_2(p)/z]\\:C}\n$$\n\n$$\n\\dfrac{\\Gamma\\vdash \\exists y:A.\\;B\\;\\;\\;\\;\\Gamma,x\\:A, B[x/y]\\vdash C}\n{\\Gamma\\vdash C}\n$$\n\n## Dependent Function Type Rules\n\n$$\n\\dfrac{\\Gamma, x\\:A\\vdash exp\\:B[x/y]}\n{\\Gamma\\vdash (\\lambda x. exp)\\:fun(A;y.B)}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash f\\:fun(A;y.B)\n\\;\\;\\;\\;\\;\\;\n\\Gamma\\vdash exp\\:A\n}\n{\\Gamma\\vdash f(exp)\\:B[exp/y]}\n$$\n\n$$\n\\dfrac{\\Gamma, x\\:A\\vdash B[x/y]}\n{\\Gamma\\vdash \\forall y\\:A.\\;B}\n\\hspace{10mm}\n\\dfrac{\\Gamma\\vdash \\forall y\\:A.\\;B\n\\;\\;\\;\\;\\;\\;\n\\Gamma\\vdash exp\\:A\n}\n{\\Gamma\\vdash B[exp/y]}\n$$\n\n","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Week-5/Lenses":{"title":"Lenses","content":"","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Week-6/Hygienic-Macros":{"title":"Hygienic Macros","content":"# Problems with C Style Macros\n\nMost of the problems stem from the way that a macro usage hides the code it maps to at the call site\nThe problems also stem from the fact that these are lexical macros that allow names to be mapped to arbitrary token streams\nWhat might look like reasonable code may not even be grammatically correct, never mind behaviourally correct\n\n## Misnesting\n\nOne can build macros where the macro call is expanded partially from the macro call and partially from its arguments\n- This is generally considered bad but could be used as a form of macro \"callback\" feature\n\n```C\n#define twice(x) (2*(x))  \n#define call_with_1(x) x(1)  \ncall_with_1 (twice)\n```\n\n\u003e[!Tip]\n\u003eExpands to `twice(1)`\n\u003eExpands to `(2*(1))`\n\nBecause macro definitions do not have to have balanced parentheses, scope can begin within the body of a macro and end outside of the macro call\n\n```C\n#define strange(file) fprintf (file, \"%s %d\",  \nstrange(stderr) p, 35)\n```\n\n\u003e[!Tip]\n\u003eExpands to `fprintf (file, \"%s %d, p, 35)`\n\n## Operator Precedence Changes\n\nSuppose we define a function-like macro that converts degrees to radians\n\n```C\n#define PI 3.142  \n#define DEGTORAD(X) X*PI / 180\n```\n\n`rad = DEGTORAD(angleA - angleB)` exapnds to `rad = angleA - angleB *3.142 / 180`\nBut * binds more tightly than - so although the macro usage looks okay, the operators in the arguments to the macro call can interact with the macro body to give unintended results\n\n### Double Bagged Macros\n\nTo avoid these two kinds of operator precedence problems with macros we should always put parentheses both around macro argument usages **and** around the entire macro body\n\nNow `DEGTORAD(angleA - angleB)` expands to `( (angleA - angleB) *3.142 / 180 )`\n\n## Swallowed Semicolons\n\nSuppose we define a function-like macro that assigns pairs of values\n```C\n#define ASSIGNPAIR(X,Y,V,W) X = (V) ; Y = (W)\n```\n\nSuppose we use this macro in a conditional statement\n```C\nif (x \u003c y) ASSIGNPAIR(a,b,x,y); else ASSIGNPAIR(a,b,y,x);\n```\n\nThis expands to `if (x \u003c y) a = (x) ; b = (y) else a = (y) ; b = (x);`\nThe semicolon terminates the if statement\n\nTo avoid this we need to protect statement bodies by using a new block scope\n```C\n#define ASSIGNPAIR(X,Y,V,W) do { X = (V) ; Y = (W) } while (0)\n```\n\n## Duplicated Side-Effects\n\n```C\n#define MIN(X,Y) (((X)\u003c(Y))?(X):(Y))\n```\n\nSuppose\n```C\nMIN(++x,y)\n```\n\nThis expands to\n```C\n(((++x)\u003c(y))?(++x):(y))\n```\n\nAlthough the macro call only contains one use of `++x` the expansion has two\n\nTo avoid this we need to define temporary variables\n```C\n#define MIN(X,Y) ( { typeOf(X) _X = X ; \\\n\t\t\t\t\t typeOf(Y) _Y = Y ; \\\n\t\t\t\t\t (((_X)\u003c(_Y))?(_X):(_Y))\n```\n\n## Variable Capture\n\nSuppose\n```C\n#define SWAP(T,X,Y) do {T tmp = X ; X = Y ; Y = tmp; } while (0)\n\nint tmp = 0; int foo = 1 ; SWAP(int,tmp,foo) ;\n```\n\nThis expands to\n```C\nint tmp = 0; int foo=1; do {int tmp = tmp ; tmp = foo; foo = tmp; } while (0);\n```\n`tmp` is used while undefined\nThe name `tmp` is passed as an argument is captured by the macro local name\n\nCan decrease likelihood of this by obfuscating any macro local variables\n```C\n#define SWAP(T,X,Y) do {T __tmpSWAP__ = X ; X = Y ; Y = __tmpSWAP__; } while (0)\n```\n\n# Macro Hygiene\n\nWe say that a macro system is hygienic if its expansions cannot cause collisions with the arguments or calling context.\nThere are three kinds of macro hygiene:\n- **Syntactic Hygiene** guarantees structural integrity of the expanded code - can be implemented by substituting syntax trees of macro bodies are in to syntax trees of the calling context.\n- **Variable Hygiene** guarantees referential integrity of the expanded code - no capture of identifiers. Can be implemented by controlled renaming of variables.\n- **Type Hygiene** guarantees type integrity, i.e. the type of expanded macro calls is consistent with the type expected in the calling context. This is difficult to implement and not commonly seen.\n\n# Syntactic Hygiene\n\nMacro expansion inserts trees\n![[notes/Advanced Programming Language Concepts/Images/Pasted image 20230330162939.png|500]]\n\nMacro processor needs to be language-aware:\n- must parse macro bodies\n- must check syntactic categories\n- requires tighter integration with compiler, less general\n\n# Variable Hygiene\n\nTo guarantee variable hygiene the macro expansion algorithm should distinguish the calling context from the macro body context\nBy systematically renaming variables by tagging them with contextual information then even when variables are passed in to a capturing body they will be distinct\n\n![[notes/Advanced Programming Language Concepts/Images/Pasted image 20230330163107.png|600]]\n\nThe two tmp variable names would be named differently as they come from different contexts\n\n# Languages with Hygienic Macros\n\nThe LISP programming language was an early adopter of hygienic macros (syntactic and variable)\nThis system was further refined and implemented in the Scheme language.\nThe macro system there is based around describing syntactic patterns to match along with syntactic trees to rewrite them with.\nThis idea inspired the (mostly) hygienic macro system in Rust - to be discussed in the next session.\nOther languages with hygienic macros include;\n- Dylan, Elixir, Nim, Haxe, Julia, Raku (Perl 6)\n\n","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Week-6/Introduction-to-Metaprogramming":{"title":"Introduction to Metaprogramming","content":"# Limitations of Library Re-use\n\nThese re-use methods have limitations\n- Encapsulation can prevent optimisation\n- Can make (static) error checking difficult - error reporting may not suit the software domain\n- Library Scaling can be a problem (the Python Standard Library contains over 200 modules!)\n\n## Causes of Limitations\n\nPoor abstractions - not domain specific to the problem\nComponents bound to core Functionality\n- What about secondary concepts e.g. persistence, security, distribution?\n\nHost language restrictions - Java libraries are called using Java syntax\n- Sometimes domain specific notation is better e.g. query languages, regexes, mathematical operators\n\n# Metaprogramming\n\n**Idea** - Write programs to write routine code\n- Model programs themselves as data objects and write programs to manipulate these data objects\n\nThis is already common practice\n- Compilers, interpreters, pre-processors, lexer/parser generators, CASE tools, GUI builders \n- But is often invisible to the mainstream programmer\n\n## Common Approaches to Metaprogramming\n\n#### Direct  \n- Use string manipulation to write code directly  \n- Low overhead to use but difficult to program with and very fragile\n\n```Bash\n/bin/sh\n# metaprogram\necho ' # ! / bin/sh' \u003e program\nfor i in $ (seq 992)\ndo\n\techo \"echo $1\" \u003e\u003e program\ndone\nchmod +x program\n```\n\n#### Reflection\n- e.g. Java API. Unwieldy to learn and use - representation far from the source code representation\n\n```Java\nClass obj = foo. getC1ass();\nMethod [] methods = obj.getDec1aredMethods();\nfor (Method m : methods) {\n\tSystem. out. print (\"Method Name: \" + m.getName() );\n\tint modifier = m.getModifiers();\n\tSystem.out.print (\"Modifier :\" + Modifier.toString(modifier) );\n\tSystem.out.print (\"Return Types :\" + m. getReturnType() );\n\tSystem.out.println(\"\");\n}\n```\n\n#### Metaclasses\n- Every class has type of the metaclass type\n- In e.g. Python metaclasses are modifiable! By overriding\n\n```Python\nclass AttributeInitType(type):  \n\tdef __call__(self, *args, **kwargs):  \n\t\t\"\"\"Create a new instance.\"\"\"  \n\t\t\n\t\t# First, create the object in the normal default way.  \n\t\tobj = type.__call__(self, *args)  \n\t\t\n\t\t# Additionally, set attributes on the new object.  \n\t\tfor name, value in kwargs.items():  \n\t\t\tsetattr(obj, name, value)  \n\t\t\t\n\t\t# Return the new object.  \n\t\treturn obj\n```\n\n```Python\nclass Car(object, metaclass=AttributeInitType):  \n\t@property  \n\tdef description(self) -\u003e str:  \n\t\t\"\"\"Return a description of this car.\"\"\"  \n\t\treturn \" \".join(str(value) for value in self.__dict__.values())\n```\n\n```Python\nnew_car =  \nCar(make='Toyota',  \n\tmodel='Prius',  \n\tyear=2005,  \n\tcolor='Green',  \n\tengine='Hybrid'  \n)\n```\n\n#### Macro-based\n- Named fragments of code used within code\n\n#### Template-based\n- Generic code that can be instantiated to have different behaviour based on the instantiation\n\n#### Quote-based\n- Transformations to move smoothly between parsed and unparsed source code\n\n\n","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Week-6/Simple-Macros":{"title":"Simple Macros","content":"# Text-based Macros\n\nThe earliest form of macros appeared in macro assembly languages where a name could be given to a common pattern of assembler instructions\n\nThis idea made its way in to the C programming language - enhanced with parameters  \n- The task of textually replacing (expanding) macros became the responsibility of the C pre-processor - often separated from the main compiler code\n- C style macros subsequently made their way in to C++\n\n## Object-like Macros\n\nThe easiest form of macro definition in C is the object-like macro  \n- Typically used to name constants\n\n- Use \\#define to create a macro name and simply use the macro name in the main code\n- Macro usages are expanded by the pre-processor to be textual replaced with their definition\n- Multiline macro definitions use \\\\ as a line separator\n- Macro definitions are scanned sequentially within the code and only defined in program order\n- The \\#undef directive removes a macro definition at that program point\n- Macro usages are repeatedly expanded until no further usages are found\n\n```C\n#define BUFFER_SIZE 1024  \n//...  \nfoo = (char *) malloc (BUFFER_SIZE);  \n//...\n```\n\n```C\n#define BUFSIZE 1024  \n#define TABLESIZE BUFSIZE  \n#undef BUFSIZE  \n#define BUFSIZE 512  \n#define DECSIZE int tSize \\  \n\t\t\t= TABLESIZE;\n```\n\n\u003e[!Tip]\n\u003eExpands to `\"int tSize = 512;\"`\n\n## Function-like Macros\n\nMacros make take parameters:  \n- Use parentheses in the definition after the macro name to indicate these\n- Use valid C identifiers, comma separated, optional whitespace\n\n- Macro argument usages are supplied using comma separated lists of code fragments\n- Arguments may contain macro usages - these are (repeatedly) expanded before expanding the macro being called\n- Whitespace is normalised to single spaces where needed\n- You can omit arguments in calls - this supplies empty arguments\n\n```C\n#define MIN(X,Y) (X\u003cY)?X:Y  \n//...  \nx = MIN(3,5) ‚Üí x = (3\u003c5)?3:5  \nMIN((z+1),20) ‚Üí ((z+1)\u003c20)?(z+1):20  \n//...\n```\n\n```C\n#define FOO(X,Y) X + Y + \"Y\"  \nFOO(3, ) //‚Üí 3 + + \"Y\"  \nFOO(3,5) //‚Üí 3 + 5 + \"Y\"  \nFOO() //‚Üí error\n```\n\n## Lexical Expansion\n\nC style macros use lexical expansion\nHigh-Level overview:\n- Macros definitions are stored in Tokenised form - not raw strings\n- pre-processor scans the program text\n- on \\#define, macro definition is extracted and stored\n- if a name is macro-defined, it is expanded\n\t- macro parameters replaced by expanded arguments\n\t- result is re-expanded to expand lower macro layers\n- if a name is not macro-defined, it is copied to output\n- Recursive calls to a macro are not re-expanded\n\n## Macros vs Functions\n\n- Although parameterised macros look a little like (inlined) functions, they are crucially different\n- Macro definitions and arguments are code fragments - no need for completed expressions as with functions\n- Macro arguments can contain other macro usages (cf. first-order functions only in $\\mathrm{C} / \\mathrm{C}++$ ), types and lexical entities e.g. variable names\n- Unlike function bodies, macro definitions can be used to declare new functions, variables, classes etc.\n\n```C\n#define SWAP(T,x,y) T t=x;x=y;y=t;  \n#define INITIALIZE = 0;  \nSWAP(int, low, high)  \nlow INITIALIZE\n```\n\n\u003e[!Tip]\n\u003eExpands to : \n\u003e`int t = low ; low = high; high = t`\n\u003e`low = 0;`\n\n## Stringizing\n\nSometimes you don't want to treat the macro argument as a token sequence (to be later parsed) but actually as the string literal that was used to represent the argument\nC Style macros allow for this - it is called \"stringizing\"\nSimply use \\# before the macro argument usage to stringize an argument\n\n```C\n#define WARN_IF(EXP) \\  \ndo { if (EXP) \\  \n\tfprintf (stderr, \"Warning: \" #EXP \"\\n\"); } \\  \nwhile (0)  \nWARN_IF (x == 0);\n```\n\n\u003e[!Tip]\n\u003eExpands to :  \n\u003e`do { if (x == 0) fprint (stderr,\"Warning: \" \"x==0\" \"\\n\"); while (0);`\n\n## Token Pasting\n\nC Style macros also allow you to modify the lexically matched strings used for identifiers in types, function names, variables etc  \nUse the directive ## between two tokens to effectively paste them, or concatenate the tokens together to form a single token\n\n```C\n#define COMMAND(NAME) { #NAME, NAME ## _command }  \nstruct command commands[] =  \n{  \n\tCOMMAND (quit),  \n\tCOMMAND (help),  \n};\n```\n\n```C\nstruct command  \n{  \n\tchar *name;  \n\tvoid (*function) (void);  \n};\n```\n\n\u003e[!Tip]\n\u003eExpands to :  \n\u003e```C\n\u003estruct command commands[] =  \n\u003e{  \n\u003e\t{\"quit\",quit_command },  \n\u003e\t{\"help\",help_command }  \n\u003e};\n\n## Variadic Macros\n\nC style macros support variadic arguments  \nUse ... as the argument name and `__VA_ARGS__` inside the macro  \nbody to use the argument\n\n```C\n#define eprintf(...) fprintf (stderr, __VA_ARGS__)  \neprintf (\"%s:%d: \", input_file, lineno)\n```\n\n\u003e[!Tip]\n\u003eExpands to :  \n\u003e`fprintf (stderr, \"%s:$d: \", input_file, lineno)`\n\n#### Example - 3D Arrays as Macros for 1D Arrays\n```C\n#include\u003cstdio.h\u003e  \n#define MAKE_2DARRAY(T,N,M,a) \\  \n\nT a[N*M];\\  \nint a##COLS = M;  \n\n#define SET_2D(a,i,j,v) a[i*a##COLS+j]=v  \n#define GET_2D(a,i,j) a[i*a##COLS+j]\n```\n\n```C\nint main(){  \n\tMAKE_3DARRAY(int,3,5,3,a)  \n\tSET_3D(a,2,3,1,455);  \n\tint v = GET_3D(a,2,3,1);  \n\tprintf(\"COLS is %d\\n\" , aCOLS);  \n\tprintf(\"VALUE is %d\\n\" , v);  \n}\n```\n\n```C\n#define MAKE_3DARRAY(T,N,M,K,a) \\  \nMAKE_2DARRAY(T,N,M*K,a)\\  \na##COLS = M;\\  \nint a##DEP = K; \n\n#define SET_3D(a,i,j,k,v) SET_2D(a, i*a##DEP, j*a##DEP+k, v)  \n#define GET_3D(a,i,j,k) GET_2D(a,i*a##DEP,j*a##DEP+k)\n```\n\n","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Advanced-Programming-Language-Concepts/Week-7/Template-Metaprogramming":{"title":"Template Metaprogramming","content":"# Parametric Declarations\n\nParametric declarations of classes, structures, functions etc could be loosely considered as another very simple common form of metaprogramming.\nWe see these in many languages\n- Parametric polymorphism in functional languages such as ML and Haskell\n- Java Generics\n- C++ template polymorphism (e.g. in the Standard Template Library)\n\nAlthough we aren't manipulating code directly when using these, there is often some notion of expansion or rewriting of code that happens to implement these\n\n# C++ Templates\n\nThe C++ approach to parametric polymorphism\n\nClass definitions may be written in templated form\n\n![[notes/Advanced Programming Language Concepts/Images/Pasted image 20230330163542.png|500]]\n\n# C++ Function Templates\n\nThe same template modifier can be applied to individual function definitions\n\n```C\ntemplate \u003cclass T\u003e  \nT min(const T\u0026 a, const T\u0026 b){  \n\tif (a \u003c b) return a; else return b;  \n}\n```\n\n\u003e[!Tip]\n\u003eThere is no separate type-checking upon template instantiation and expansion.  \n\u003eIf the programmer uses the instance `min\u003csomeType\u003e` where someType does not support an \u003c operation this will fail. cf. Haskell type class Ord\n\n# Template Instatiation\n\nTo instantiate a template at a particular concrete argument we use the notation `Foo\u003cArg\u003e`\n\n![[notes/Advanced Programming Language Concepts/Images/Pasted image 20230330163753.png|500]]\n\nA fully expanded template class is just a normal class\nTemplate expansion is performed in an early stage of the compiler\n\n## Code Bloat\n\nImplementation of $\\mathrm{C}++$ templates usually follows the instantiation model:\n- for each template instance, a separate piece of code is generated\n- there is no sharing between different template instances\n- but caching of repeated instances with same arguments\n- not directly required by semantics (but implicit)\nDifferent to Java Generics\nSpeed/space trade-off: instantiation model usually faster but prone to code bloat:\n- many instances leads to class definitions for each different combination of the arguments used\n\n# Template Parameters\n\nTemplates can have three different kinds of parameters:\nThe first is **types** or **classes**:\n- these are the most common kind\n- they are usually denoted by class keyword\n- some restrictions: no local classes, ...\nThe second kind is non-types (i.e., **values**)\n- These are integral value types : int, bool, short, long etc\nThe third kind is **templates** themselves as parameters!\n- This allows for higher-order template definitions\n\n\u003e[!Tip]\n\u003eThere is also an alternative keyword `typename` that is sometimes used to denote type parameters\n\n```C\ntemplate \u003ctemplate \u003cclass T\u003e class TT\u003e  \nclass A {  \n\t//...  \n};\n```\n\n# Value Parameters\n\nThe use of value parameters is a very interesting feature in C++ templates and distinguishes it from e.g. Java Generics\n\n```C\ntemplate \u003cclass T, int Max\u003e  \nclass stack {  \n\t//...  \n\tpublic:  \n\t//...  \n\t\tbool is_full() { return size==Max}  \n};\n```\n\nThis allows for a generic stack implementation but also allows the type itself to depend on the integer value parameter\n- This is dependent typing! In C++ !\n\n# Template Specialisation\n\nEach template may be defined using several **specialised** cases\n\n![[notes/Advanced Programming Language Concepts/Images/Pasted image 20230330164447.png|700]]\n\n\u003e[!Tip]\n\u003eGiven a usage `t\u003cA,B,C\u003e`, the compiler expansions algorithm has to choose the maximally specialised pattern that matches `A,B,C`\n\u003eThis must be unique or a compiler error occurs\n\n# Observations on Template Specialisation\n\nSpecialisation is allowed for all template parameters including non-type parameters\nThis requires compile-time expression evaluation, which can be forced by using static const or enum\nThe selection of most specialised instances is a form of computation - it can encode conditionals!\nRecursive expansion of templates is a form of computation - it can encode recursion.\nTemplate expansion is a Turing-complete computational model!\nIt is executed \"statically\" by the compiler!\nWe could (but shouldn't) make a programming language out of this.\nIt is akin to \"functional programming with bad syntax\"\n\n# Template Metaprogramming\n\nWe can use the template \"meta programming\" language to say, calculate expressions at compile time\n\n```C\ntemplate \u003cint N\u003e struct Factorial {  \n\tenum { RET = N * Factorial\u003cN - 1\u003e::RET };  \n};  \ntemplate \u003c\u003e struct Factorial\u003c0\u003e {  \n\tenum { RET = 1 };  \n};  \nvoid foo() {  \n\tint x = Factorial\u003c3\u003e::RET; // == 6  \n\tint y = Factorial\u003c0\u003e::RET; // == 1  \n}\n```\n\nThe use case for this is not entirely convincing and nowadays would be better done using a constexpr (C++11) or better a consteval (C++20)\nThe use of pattern matching and recursion is useful to see though.\nTemplate metaprogramming becomes more powerful when used for manipulating code portions programmatically. e.g. loop unrolling\n\n# Loop Unrolling with Template Metaprogramming\n\nSuppose\n```C\ninline void addVec(int size, double* c, double* a, double* b) {  \n\twhile (size--)  \n\t\t*c++ = *a++ + *b++;  \n}\n```\n\nTypically we might know the size of vectors that we are manipulating at compile time. This is a \"static\" argument\nIf so then we should be able to avoid the while loop and create code that makes the appropriate fixed number of additions\n\n```C\ntemplate \u003cint n\u003e  \ninline void addVect(double* c, double* a, double* b) {  \n\t*c = *a + *b;  \n\taddVect\u003cn-1\u003e(c+1, a+1, b+1);  \n}  \ntemplate\u003c\u003e  \ninline void addVect\u003c0\u003e(double* c, double* a, double* b) { }\n```\n\nAn expansion of the instantiation at some integer `N` would have `addVect\u003cN\u003e` unroll to create a series of assignments\n\n![[notes/Advanced Programming Language Concepts/Images/Pasted image 20230330165110.png|500]]\n\n# Partial Evaluation using Template Metaprogramming\n\nNotice the mix of both static and dynamic arguments to the example `addVec` function above.  \nWe can use this idea to good effect in a variety of scenarios\n\n```C\nint power(int n, int m){  \n\tif (n==0) return 1  \n\telse if (n==1) return m  \n\telse return power(n-1, m) * m ;  \n};\n```\n\nSuppose the value n is known at compile-time  \n- make it a template argument!\n\nIf the n argument is static but m not then we can partially evaluate the function using a template\n\n![[notes/Advanced Programming Language Concepts/Images/Pasted image 20230330165603.png|500]]\n\n\u003e[!Tip]\n\u003eThe concept of **partial evaluation** or **staged computation** refers to symbolically executing code P for some given static inputs, leaving a residual computation P' that depends on dynamic inputs\n\n\u003e[!Tip]\n\u003eThe concept of **staging** refers to identifying those parts of the code that are suitable for evaluating statically\n\n","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Algorithmic-Game-Theory/Algorithmic-Game-Theory-ToC":{"title":"Algorithmic Game Theory ToC","content":"\n# **Week 1**\n#### [[Intro to Algorithmic Mechanism Design]]\n\n# **Week 2**\n#### [[Basics of Mechanism Design]]\n#### [[Vickrey-Clarks-Grove (VCG) Mechanism]]\n\n# **Week 3**\n#### [[Dominant Strategy Implementation]]\n#### [[Revelation Principle]]\n\n# **Week 4**\n#### [[Extensions of Stable Matching Problem]]\n#### [[Optimal Auctions]]\n#### [[Stable Matching]]\n\n# **Week 5**\n#### [[Hospitals, Residents Problem]]\n#### [[Stable Roommates]]","lastmodified":"2023-04-19T18:54:03.999889345Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-1/Intro-to-Algorithmic-Mechanism-Design":{"title":"Intro to Algorithmic Mechanism Design","content":"# Mechanism Design\nIn systems with strategic participants:\n- The system designer must anticipate strategic behaviour to create good and reliable design\n- We cannot expect participants to behave against their own interests\n\n**Goal**: Design rules so that strategic behaviour by participants leads to a desirable outcome\n\n\u003e[!Tip]\n\u003eRoughly speaking\n\u003eAssuming unknown individual utilities, we ask whether we can design a game such that, no matter what the secret utilities of the agents actually are, the equilibrium of the game is guaranteed to have a set of certain desired properties\n\n# Algorithmic Mechanism Design (AMD)\n\nA **mechanism** is an algorithm where the input is withheld by strategic selfish agents\nAMD exists in the intersection between economic game theory and computer science\n\nSettings in which:\n- A center wants to solve an optimization problem but\n- The inputs to this problem are the private information of self-interested agents\n\nThe center must design a mechanism that:\n- Solves the optimization problem while\n- Inducing the agents to act as the mechanism designer wishes (ideally truthfully revealing their information)\n\n## AMD vs. Classical Economic Mechanism Design\n\nAMD considers computational constraints to be of central importance\n- Mechanisms that cannot be efficiently implemented in polynomial time are not considered to be viable solutions to a mechanism design problem\n- Analytic tools of theoretic computer science such as worst case analysis and approximation ratios are employed\n\n## Auctions\n\n### Types of Auctions\n- Single good\n\t- English auction\n\t- Dutch auction\n\t- First-price sealed-bid auction\n\t- Second-price sealed-bid (Vickrey) auction\n- Multiunit auctions\n- Combinatorial auctions\n- Double auctions\n\n### Single-Item Auctions\nA seller with a single item\n$n$ strategic bidders\nEach bidder $i$ has a private valuation (or willingness to pay) $\\theta_i$ for the item\nOur bidder utilitiy model is a quasilinear utility model\n- If $i$ loses, and has to pay $p_i$, their utility is $-p_i$\n\t- In auctions where only winners pay, $i$'s utility is 0\n- If $i$ wins at a price $p_i$, their utility is $u_i(\\theta_i)=\\theta_i-p_i$\n\nWe are assuming\n- Independent private value model i.e. a bidder's valuation does not depend on other bidder's valuations\n- Bidders cannot collude\n\n### Games Induced by Vickrey Auctions\n\u003e[!note]\n\u003eVickrey Auction\n\u003e- The highest bid wins and pays the second-highest bid.\n\u003e- If both bidders bid the same value, then choose a tie-breaking rule, e.g.: $A$ wins, or $B$ wins, or neither win (item is unallocated).\n\u003e- The loser's utility is zero\n\u003e- The winner's utility is: winner's value - loser's bid\n\nLet $b_i$ denote the bid placed by bidder $i$\nLet $b=\\left(b_1, b_2, \\ldots, b_n\\right)$ denote the bid profile of all bidders.\nThe set of **actions** available to each bidder is all possible bids that they can place\n- virtually any non-negative real,\n- unless there are rules in the auction, e.g. \"only place integer bids\", or \"don't place a bid less than ¬£3\" (reserve price)\nLet $u_i(b)$ denote the utility of bidder $i$ given bid profile $b$.\nThe **payoff (utility)** of each bidder $i$ depends on the outcome (allocation + payment), which in turn depends on $b_i$ and the bids placed by the other bidders\nThe game induced by the Vickrey auction (in fact, any auction) is a **Bayesian game**.\n\n## Normal Form (Strategic Form) Game\n\nA tuple $(N, A, u)$ where\n- $N=\\{1, \\ldots, n\\}$ is a finite set of agents.\n- $A=A_1 \\times \\ldots \\times A_n$, where $A_i$ is a finite set of actions (i.e. pure strategies) available to agent $i$.\n- $u=\\left(u_1, \\ldots, u_n\\right)$, where $u_i: A \\mapsto \\mathbb{R}$ is the utility (a.k.a. payoff) function for player $i$.\n\n\u003e[!Tip]\n\u003e$S_i$ is used to refer to the set of all (pure and mixed) strategies available to agent $i$\n\u003e$s_i$ is used to denote a mixed strategy of agent $i$\n\u003e$A_i$ is used to denote the set of actions (or pure strategies) available to agent $i$\n\n## Bayesian Game\n\nA tuple $(N, A, \\Theta, p, u)$ where\n- $N=\\{1, \\ldots, n\\}$ is a finite set of agents\n- $A=A_1 \\times \\ldots \\times A_n$, where $A_i$ is the set of actions available to agent $i$\n- $\\Theta=\\Theta_1 \\times \\ldots \\times \\Theta_n$ where $\\Theta_i$ is the type space of player $i$\n- $p: \\Theta \\mapsto[0,1]$ is a common-prior probability distribution on $\\Theta$\n- $u=\\left(u_1, \\ldots, u_n\\right)$, where $u_i: A \\times \\Theta \\mapsto \\mathbb{R}$ is the utility function for player $i$\n\n### vs. Normal Form Games\n- The types of the agents determine which normal-form game they are playing.\n- Agents don't know the type of the other agents, only $p$ is known.\n- Based on $p$, each agent can assign a probability to what game they're playing.\n\n### Bayesian Game with Strict Incomplete Information\nA tuple $(N, A, \\Theta, u)$ where\n- $N=\\{1, \\ldots, n\\}$ is a finite set of agents\n- $A=A_1 \\times \\ldots \\times A_n$, where $A_i$ is the set of actions available to agent $i$\n- $\\Theta=\\Theta_1 \\times \\ldots \\times \\Theta_n$ where $\\Theta_i$ is the type space of player $i$\n- $u=\\left(u_1, \\ldots, u_n\\right)$, where $u_i: A \\times \\Theta \\mapsto \\mathbb{R}$ is the utility function for player $i$\nSometimes **$p$ is not known**. That is we have no probabilistic information in the model\n\n### Bayesian Game Setting\nA tuple $(N, O, \\Theta, p, u)$\n- $N=\\{1, \\ldots, n\\}$ is a finite set of agents\n- $O$ is a set of outcomes\n- $\\Theta=\\Theta_1 \\times \\ldots \\times \\Theta_n$ is a set of possible joint type vector\n- $p$ is a common-prior probability distribution on $\\Theta$\n- $u=\\left(u_1, \\ldots, u_n\\right)$, where $u_i: O \\times \\Theta \\mapsto \\mathbb{R}$ is the utility function for player $i$\n\nThe Bayesian Game Setting does not include actions for the agents and instead defines the utility function over the set of possible outcomes","lastmodified":"2023-04-19T18:54:04.023889347Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-2/Basics-of-Mechanism-Design":{"title":"Basics of Mechanism Design","content":"# Mechanism\n\n\u003e[!Definition]\n\u003eA (deterministic) mechanism (for a Bayesian game setting $(N, O, \\Theta, p, u))$ is a pair $(A, M)$, where\n\u003e- $A=A_1 \\times \\ldots \\times A_n$, where $A_i$ is the set of actions available to agent $i$, and\n\u003e- $M: A \\mapsto O$ maps each action profile to an outcome\n\n## Direct Mechanism\n\nA **direct mechanism** is a mechanism in which the only action available to each agent is to announce his private information\nSo in a direct mechanism $A_i=\\Theta_i$ for each $i$\nA (deterministic) direct mechanism (for a Bayesian game setting $(N, O, \\Theta, p, u))$ is a pair $\\color{#ff82b2}(A, M)$, where\n- $A=A_1 \\times \\ldots \\times A_n$, where $\\color{#ff82b2}A_i=\\Theta_i$ is the set of actions available to agent $i$, and\n- $M: A \\mapsto O$ maps each action profile to an outcome.\n\n## Quasilinear Utility Settings\n\nIn a **quasilinear utility setting**:\n- the set of outcomes is $O=X \\times \\mathbb{R}^n$ for a finite set of choices $X$, and\n- when outcome $o=\\left(x,\\left(p_1, \\ldots, p_n\\right)\\right)$ is chosen, the utility of an agent $i$ given joint type $\\theta$ is $u_i(o, \\theta)=u_i(x, \\theta)-p_i$\n\nWhen we assume **Independent Private Values** (IPVs), we can write agent $i$ 's utility function as $u_i\\left(x, \\theta_i\\right)$.\n\nWe can then also refer to an agent's **valuation** for choice $x$, written $v_i(x)=u_i\\left(x, \\theta_i\\right)$\n- $v_i$ is the maximum amount of money $i$ is willing to pay for the mechanism to choose $x$.\n- The notation of $v_i$ does not explicitly refer to $\\theta_i$, but an agent's valuation does depend on her type $\\left(\\theta_i\\right.$ is dropped for simplicity of notation and because it can be inferred from the context)\n\n### Mechanisms in Quasilinear Settings\n\n\u003e[!Definition]\n\u003e**Quasilinear Mechanism**\n\u003eA quasilinear mechanism is a triple $(A, \\chi, p)$, where\n\u003e- $A=A_1 \\times \\ldots \\times A_n$, where $A_i$ is the set of actions available to agent $i$,\n\u003e- Choice function $\\chi: A \\mapsto X$ maps each action profile to a choice in $X$, and\n\u003e- Payment function $p: A \\mapsto \\mathbb{R}^n$ maps each action profile to a payment for each agent\n\n## Bayes-Nash Equilibrium\n\nIn normal-form games we have Nash equilibrium\nIn Bayesian form games we have **Bayes-Nash equilibrium**\nThey are conceptually the same: A Bayes-Nash equilibrium is a mixed-strategy profile $s$ such that each $s_i$ is a best response to $s_{-i}$.\nIt's only that the calculation is more involved as to compute the best response, each agent has to take into account the probability distribution $p$ over the set of possible joint type vectors $\\Theta$\n\n## Mechanism Design\n\nEither:\n- Perform an **optimisation** problem, given that the **values** of (some of) the inputs are **unknown** (withheld by the agents)\n- Design a game that **implements** a particular **social choice function** in equilibrium, given that the designer does not know agents' preferences and the agents might lie\n\n## Social Choice Setting\n\n$\\color{#ff82b2}O$ : a set of outcomes, e.g.\n- possible locations for a bridge or library\n- possible meeting times\n- candidates for local MPs\n\n$\\color{#ff82b2}N$ : a set of agents who have preferences over the outcomes\n\n**Goal**: Designing/picking a social choice function $f$ that maps from agents' preferences to a particular outcome, which is enforced\n\n## Bayesian Game Setting vs. Social Choice Setting\n\nBayesian game setting extends the social choice setting to a new setting where agents are **strategic** and hence cannot be relied upon to disclose their preferences honestly\n\n## Implementation in Dominant Strategies\n\nA mechanism $M$ implements a social choice function $f$ in **dominant strategies** if for some dominant strategy equilibrium of the induced game, we have that the mechanism $M$ chooses the same outcome (given action profile of the agents) as does $f$ (given true utilities of the agents)\n\n## Dominant-Strategy Truthful Mechanism\n\nA strategy profile $\\left(s_1, \\ldots, s_n\\right)$ in which every $s_i$ is a dominant strategy for agent $i$ is called an equilibrium in dominant strategies\n\n\u003e[!Definition]\n\u003e**Dominant-Strategy Truthfulness**\n\u003eA direct mechanism is dominant-strategy truthful if, for every agent $i$, telling the truth (i.e. revealing the true valuation) maximises $i$ 's utility, no matter what strategy the other players pick.\n\nAlso known as\n- **strategy-proof** mechanism\n- **dominant-strategy incentive-compatible** mechanism\n- **truthful** mechanism\n\nIf Mechanism $M$ is dominant-strategy truthful then truth-telling is a (very weakly) dominant strategy for each agent\n\n## Dominant Strategy Truthfulness in Single-Item Auctions\n\nA single-item auction $(\\Theta, \\chi, p)$ is dominant-strategy truthful if for each bidder $i$, bidding $b_i=\\theta_i$ maximises $i$ 's utility, no matter what bids the other bidders place:\n$$\nv_i\\left(\\chi\\left(\\theta_i, b_{-i}\\right)\\right)-p\\left(\\theta_i, b_{-i}\\right) \\geq v_i\\left(\\chi\\left(b_i, b_{-i}\\right)\\right)-p\\left(b_i, b_{-i}\\right), \\forall b_i \\forall b_{-i} \\forall \\theta_i\n$$\nWe can actually write the above inequality as\n$$\nv_i\\left(\\chi\\left(\\theta_i, \\theta_{-i}\\right)\\right)-p\\left(\\theta_i, \\theta_{-i}\\right) \\geq v_i\\left(\\chi\\left(b_i, \\theta_{-i}\\right)\\right)-p\\left(b_i, \\theta_{-i}\\right), \\forall b_i \\forall \\theta_{-i} \\forall \\theta_i\n$$\n\nTo simplify notation, sometimes we write $v_i$ as a function of action profiles instead of outcomes, e.g. write $v_i\\left(b_i, b_{-i}\\right)$ instead of $v_i\\left(\\chi\\left(b_i, b_{-i}\\right)\\right)$\n\n### Vickrey Auction is Dominant-Strategy Truthful\n#### Proof\nAssume that the other bidders bid in some arbitrary way. We show that $i$ maximises her utility by bidding truthfully. We break the proof into two cases:\n1. By bidding honestly, $i$ wins the auction.\n2. By bidding honestly, $i$ loses the auction.\n**Case 1**: By bidding honestly, $i$ wins\n- If $i$ submitted a higher bid, she would still win and pay the same amount\n- If $i$ submitted a lower bid, she would either still win and pay the same amount... or lose and get utility zero.\n**Case 2**: By bidding honestly, $i$ loses\n- If $i$ submitted a lower bid, she would still lose and pay nothing\n- If $i$ submitted a higher bid, she would either lose and still pay nothing... or win and pay more than her valuation.\nIn either case, bidding truthfully maximises $i$'s utility","lastmodified":"2023-04-19T18:54:04.023889347Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-2/Vickrey-Clarks-Grove-VCG-Mechanism":{"title":"Vickrey-Clarks-Grove (VCG) Mechanism","content":"# Quasilinear Mechanism\n\nIn a quasilinear utility setting:\n- the set of outcomes is $O=X \\times \\mathbb{R}^n$ for a finite set of choices $X$, and\n- when outcome $o=\\left(x,\\left(p_1, \\ldots, p_n\\right)\\right)$ is chosen, the utility of an agent $i$ given joint type $\\theta$ is $u_i(o, \\theta)=u_i(x, \\theta)-p_i$\n\n\u003e[!Definition]\n\u003e**Quaislinear Mechanism**\n\u003eA quasilinear mechanism is a triple $(A, \\chi, p)$, where\n\u003e- $A=A_1 \\times \\ldots \\times A_n$, where $A_i$ is the set of actions available to agent $i$,\n\u003e- Choice function $\\chi: A \\mapsto X$ maps each action profile to a choice in $X$, and\n\u003e- Payment function $p: A \\mapsto \\mathbb{R}^n$ maps each action profile to a payment for each agent\n\n## Direct Quasilinear Mechanism\n\n\u003e[!Definition]\n\u003e**Direct Quasilinear Mechanism**\n\u003eA **direct** quasilinear mechanism is a triple $(A, \\chi, p)$, where\n\u003e- $A=A_1 \\times \\ldots \\times A_n$, where $A_i=\\Theta_i$ is the set of actions available to agent $i$,\n\u003e- Choice function $\\chi: A \\mapsto X$ maps each action profile to a choice in $X$, and\n\u003e- Payment function $p: A \\mapsto \\mathbb{R}^n$ maps each action profile to a payment for each agent\n\n# Types\n\nType of an agent encapsulates all the private information that the agent has\nOften the type of an agent is simply their private utility function $u_i$\n\nIn a quasilinear setting $u_i(o, \\theta)=u_i(x, \\theta)-p_i$\nAssuming IPVs, $u_i(o, \\theta)=u_i\\left(o, \\theta_i\\right)$\nIn a quasilinear setting with IPVs $u_i(o, \\theta)=u_i\\left(x, \\theta_i\\right)-p_i$\n\nWe refer to $u_i\\left(x, \\theta_i\\right)$ as agent $i$ 's **valuation** for choice $x$ and use a shorthand $v_i(x)$\nIn a quasilinear setting with IPVs, the **type** of an agent is \"equivalent\" to their valuation function.\n- So when a direct mechanism asks agent $i$ to reveal their **type** $\\theta_i$, it is asking $i$ to reveal $v_i$\n\n# Direct Quasilinear Mechanism with IPVs\n\nSetting:\n- $n$ strategic agents\n- A finite set $X$ of choices\n- An agent's valuation for choice $x \\in X$ is $v_i(x)=u_i\\left(x, \\theta_i\\right)$\n- the maximum amount $i$ is willing to pay for $x$ to be chosen\nIn a direct mechanism:\n- Agents are asked to declare $v_i(x)$ for each $x \\in X$\n- Let $\\hat{v}_i$ denote the valuation that agent $i$ declares to the mechanism\n\t- $\\hat{v}_i$ may be different from her true valuation $v_i$\n\t- Let $\\hat{v}$ denote the declared valuation profile of all agents, and $\\hat{v}_{-i}$ the declared valuation profile of all agents except $i$\n- The mechanism maps $\\hat{v}$ to a **choice** $x \\in X$ and a **payment** for each agent\n\nOften when it is understood we are in a quasilinear setting, $x \\in X$ is referred to as an **outcome**\n\n# Truthfulness\n\n## Properties of Dominant-Strategy Truthfulness\n\n### Efficiency\n\n\u003e[!Definition]\n\u003e**Efficiency**\n\u003eA quasilinear mechanism is efficient, or social-welfare maximising, if in equilibrium selects a choice $x$ that maximises $\\sum_{i=1}^n v_i(x)$\n\n- Efficiency is also called economic efficiency to distinguish from other (e.g. computational) notions.\n- Note that efficiency is defined in terms of true (not declared) valuations\n\n### (Dominant-Strategy) Truthfulness\n\n\u003e[!Definition]\n\u003e**Dominant-Strategy Truthful Mechanism**\n\u003eA direct quasilinear mechanism is dominant-strategy truthful (truthful) if for each agent $i$, declaring $\\hat{v}_i=v_i$ maximises $i$ 's utility, no matter what the other agents declare:\n\u003e\n\u003e$u_i\\left(\\chi\\left(v_i, v_{-i}\\right), p_i\\left(v_i, v_{-i}\\right)\\right) \\geq u_i\\left(\\chi\\left(\\hat{v}_i, v_{-i}\\right), p_i\\left(\\hat{v}_i, v_{-i}\\right)\\right), \\forall \\hat{v}_i \\forall v_{-i} \\forall v_i$\n\u003e\n\u003eOur definition before, adapted for the quasilinear setting\n\n### Individual Rationality\n\n\u003e[!Defintion]\n\u003e**Ex post Individual Rationality**\n\u003eA mechanism is ex post individually rational if in equilibrium, the utility of each agent is at least 0\n\u003e- So no agent loses by participating in the mechanism.\n\u003e- There is also the notion of ex interim individual rationality\n\n### Budget Balance\n\n\u003e[!Definition]\n\u003e **Budget Balance**\n\u003e A quasilinear mechanism is budget balance when $\\forall v, \\sum_{i=1}^n p_i(s(v))=0$, where $s$ is the equilibrium strategy profile.\n\u003e- Regardless of the agents' types, the mechanism collects and disburses the same amount of money from and to the agents.\n\u003e- There are also weak and ex ante variants.\n\n### Tractability\n\n\u003e[!Definition]\n\u003e**Tractability**\n\u003eA quasilinear mechanism is tractable if for all $\\hat{v}, \\chi(\\hat{v})$ and $p(\\hat{v})$ can be computed in polynomial time.\n\u003e- The mechanism is computationally feasible\n\n### Other Properties\n- Revenue Maximisation\n- Fairness\n\n## Efficiency + Dominant-Strategy Truthfulness\n\nVickrey (second price) auction is both efficient (social-welfare maximising) and dominant-strategy truthful\nThe general class of mechanisms that are both efficient and dominant-strategy truthful are called **Groves Mechanisms**\n\n# Groves Mechanisms\n\n\u003e[!Definition]\n\u003e**Groves Mechanisms**\n\u003eAny direct quasilinear mechanism $(\\chi, p)$ where\n$\\hspace{14em}\\begin{gathered}\\chi(\\hat{v})=\\underset{x}{\\operatorname{argmax}} \\sum_i \\hat{v}_i(x) \\\\p_i(\\hat{v})=h_i\\left(\\hat{v}_{-i}\\right)-\\sum_{j \\neq i} \\hat{v}_j(\\chi(\\hat{v}))\\end{gathered}$\n\u003e- VCG is a specific mechanism within the class of Groves mechanism. (The most famous mechanism within this class.)\n\u003e- Some people refer to Groves mechanisms as VCG mechanisms.\n\u003e- Vickrey auction is a special case of VCG, and hence VCG is sometimes known as generalised vickrey auction\n\n- agent $i$ must pay some amount $\\color{#ff82b2}h_i\\left(\\hat{v}_{-i}\\right)$ that doesn't depend on his own declared valuation\n- agent $i$ is paid the sum of others' declared valuations for the chosen choice\n\n# Vickrey-Clarks-Groves (VCG) Mechanism\n\nThe **Clarke tax** sets the $h_i$ term in the definition of the Groves mechanism as:\n$$\nh_i\\left(\\hat{v}_{-i}\\right)=\\sum_{j \\neq i} \\hat{v}_j\\left(\\chi\\left(\\hat{v}_{-i}\\right)\\right)\n$$\n\u003e[!Definition]\n\u003e\n\u003eThe VCG mechanism is a direct quasilinear mechanism $(\\chi, p)$ where\n\u003e\n$\\hspace{13.5em}\n\\begin{gathered}\\chi(\\hat{v})=\\underset{x}{\\operatorname{argmax}} \\sum_i \\hat{v}_i(x) \\\\p_i(\\hat{v})=\\sum_{j \\neq i} \\hat{v}_j\\left(\\chi\\left(\\hat{v}_{-i}\\right)\\right)-\\sum_{j \\neq i} \\hat{v}_j(\\chi(\\hat{v}))\\end{gathered}\n$\n\n![|500](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230318203201.png)\n\nEvery agent pays his/her social cost\nVCG is also called pivotal mechanism\n\nWho pays 0\n- Agents who don't affect the choice of the mechanism\nWho pays more than 0\n- Pivotal agents who make things worse for others by existing\nWho gets paid\n- Pivotal agents who make things better for others by existing\n\n## Combinatorial Auction Example\n\nTwo goods $A$ and $B$\n$n$ agents (here bidders)\nSet of outcomes $X$ has $(n+1)^2$ elements: who gets $A$ (if anyone) and who gets $B$ (if anyone)\nWe assume (as is usually the case) that **each bidder only cares about what good s/he receives** (and hence values receiving no good at 0 )\nTherefore, we can write an agent $i$ 's valuation by specifying only 3 values: $v_i(A), v_i(B)$ and $v_i(A B)$.\n\nVCG chooses who gets what item(s) and how much each agent pays\n\nWhat choice does VCG pick (i.e. who gets $A$ and who gets $B$ ), and what is the payment for each agent?\nCombinatorial auction setting with two agents\n- $v_1(A)=3, v_1(B)=2, v_1(A B)=6$\n- $v_2(A)=1, v_2(B)=4, v_2(A B)=4$\n- The social welfare maximising allocation awards $A$ to agent 1 and $B$ to agent 2 , hence achieving social welfare of $v_1(A)+v_2(B)=7$\n- $p_1=4-4=0$ and $p_2=6-3=3$\n\n## Selfish Routing Example\n\n![|400](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230225210802.png)\n\nThe number on each edge is the cost of transporting along that edge. Each edge is owned by a different agent and the costs are private information of the agents.\nGoal: Find the shortest (least-cost) path from from $A$ to $F$.\nThe set of outcomes include all possible paths from from $A$ to $F$.\nNote that numbers on edges are costs, not benefits.\n- If we select a path that crosses an edge of cost $c$, its owner is incurring a cost of $c$ which means his value for this path is $-c$.\n- If our path doesn't cross agent i's edge, his value for the path is 0\n\nWhat choice will be selected by $\\chi$ ? ABEF\nHow much will $A C$ have to pay?\n- The shortest path when $A C$ is not present has length 5 and imposes cost of $-5$ on the remaining agents.\n- The shortest path when $A C$ is present has length 5 , and imposes cost of $-5$ on other agents.\n- Thus, $P_{A C}=(-5)-(-5)=0$.\nWho else pays zero? $B D, C E, C F$ and $D F$\n\nHow much will $A B$ have to pay?\n- The shortest path when $A B$ is absent is $A C E F$, which imposes a cost of $-6$ on the remaining agents.\n- The shortest path when $A B$ is present has length 5 and imposes a cost of $-2$ on other agents.\n- Thus $p_{A B}=(-6)-(-2)=-4$\n\nHow much will $B E$ have to pay? $p_{B E}=(-6)-(-4)=-2$\nHow much will $E F$ have to pay? $p_{E F}=(-7)-(-4)=-3$\n$E F$ and $B E$ have the same costs but are paid different amounts. Why?\n- $E F$ has more market power: for other agents, the situation without $E F$ is worse than the situation without $B E$\n\n## Truthfulness\n\n\u003e[!Theorem]\n\u003eTruth-telling is a dominant strategy under Groves mechanisms\n\n### Proof\nConsider a situation where every agent $j$ other than $i$ follows some arbitrary strategy $\\hat{v}_j$. Consider agent $i$ 's problem of choosing the best strategy $\\hat{v}_i$. The best strategy for $i$ is one that solves\n$$\n\\max _{\\hat{v}_i}\\left(v_i(\\chi(\\hat{v}))-p_i(\\hat{v})\\right)\n$$\nSubstituting in the payment function from the Groves mechanism, we have\n$$\n\\max _{\\hat{v}_i}\\left(v_i(\\chi(\\hat{v}))-h_i\\left(\\hat{v}_{-i}\\right)+\\sum_{j \\neq i} \\hat{v}_j(\\chi(\\hat{v}))\\right)\n$$\nSince $h_i\\left(\\hat{v}_{-i}\\right)$ does not depend on $\\hat{v}_i$, it is sufficient to solve\n$$\n\\max _{\\hat{v}_i}\\left(v_i(\\chi(\\hat{v}))+\\sum_{j \\neq i} \\hat{v}_j(\\chi(\\hat{v}))\\right)\n$$\n---\n$$\n\\max _{\\hat{v}_i}\\left(v_i(\\chi(\\hat{v}))+\\sum_{j \\neq i} \\hat{v}_j(\\chi(\\hat{v}))\\right)\n$$\nThe only way the declaration $\\hat{v}_i$ influences this maximisation is through the choice of $\\chi$. If possible, $i$ would like to pick a declaration $\\hat{v}_i$ that will lead the mechanism to pick an $x \\in X$ which solves\n$$\n\\max _x\\left(v_i(x)+\\sum_{j \\neq i} \\hat{v}_j(x)\\right)\n$$\nUnder Groves mechanisms,\n$$\n\\chi(\\hat{v})=\\underset{x}{\\operatorname{argmax}}\\left(\\sum_i \\hat{v}_i(x)\\right)=\\underset{x}{\\operatorname{argmax}}\\left(\\hat{v}_i(x)+\\sum_{j \\neq i} \\hat{v}_j(x)\\right)\n$$\nA Groves mechanism will choose $x$ in a way that solves the maximisation problem in Equation (1) when $i$ declares $\\hat{v}_i=v_i$. Because this argument does not depend in any way on the declarations of the other agents, truth-telling is a dominant strategy for agent $i$\n\n### Proof Intuition\nExternalities are internalized\n- agents may be able to change the choice of the mechanism to another one that they prefer, by changing their declaration\n- however, their utility doesn't just depend on the choice-it also depends on their payment.\n- since they get paid the (reported) valuation of all the other agents under the chosen alternative/choice, they now have an interest in maximising everyone's utility rather than just their own\n\nIndividual's incentives are aligned with the society's incentives.\nIn general, DS truthful mechanisms have the property that an agent's payment doesn't (directly) depend on the amount of his declaration, but only on the other agents' declarations\n- the agent's declaration is used only to choose the choice, and to set other agents' payments\n\n## Groves Uniqueness\n\n\u003e[!Theorem]\n\u003eIn settings where agents may have unrestricted quasilinear utilities, Groves mechanisms are the only mechanisms that are both efficient and dominant-strategy truthful\n\n# VCG Summary\n\nVCG, and Groves mechanisms in general, are efficient and dominant-strategy truthful.\n\nDespite having these two fantastic properties, VCG is rarely used in practice because it also has a long list of weaknesses\n\nAn important weakness of VCG is that the **finding the social-welfare maximising choice might be hard** (NP-hard)\n- This is true e.g. in combinatorial auctions.\n- So VCG is **not tractable** in general combinatorial auctions\n\n# Limitations of VCG\n\n## Individual Rationality in VCG\n\n\u003e[!Definition]\n\u003e**Ex Post Individual Rationality**\n\u003eA mechanism is ex post individually rational if $\\forall v$, in equilibrium the utility of each agent is at least 0\n\n- VCG in general does not give rise to individual rationality\n- VCG is individual rational if two mild constraints (next slide) are satisfied\n\n## Two Assumptions\n\n\u003e[!Definition]\n\u003e**Choice-set Monotonicity**\n\u003eA setting exhibits choice-set monotonicity if $\\forall i, X_{-i} \\subseteq X$.\n\u003e- In other words: removing any agent weakly decreases-that is, never increases - the mechanism's set of possible choices $X$.\n\n\u003e[!Definition]\n\u003e**No Negative Externalities**\nA setting exhibits no negative externalities if $\\forall i, \\forall x \\in X_{-i}, v_i(x) \\geq 0$\n\u003e- In other words: every agent has zero or positive utility for any choice that can be made without her participation\n\n## VCG and Individual Rationality\n\n\u003e[!Theorem]\n\u003eThe VCG mechanism is ex-post individual rational when the choice set monotonicity and no negative externalities properties hold\n\n### Proof\nAll agents truthfully declare their valuations in equilibrium. Then\n$$\n\\begin{gathered}\nu_i=v_i(\\chi(v))-\\left(\\sum_{j \\neq i} v_j\\left(\\chi\\left(v_{-i}\\right)\\right)-\\sum_{j \\neq i} v_j(\\chi(v))\\right) \\\\\n=\\sum_j v_j(\\chi(v))-\\sum_{j \\neq i} v_j\\left(\\chi\\left(v_{-i}\\right)\\right)\n\\end{gathered}\n$$\n$\\chi(v)$ is the choice that maximises social welfare, and so the optimisation could have picked $\\chi\\left(v_{-i}\\right)$ instead (by choice set monotonicity). Thus,\n$$\n\\sum_j v_j(\\chi(v)) \\geq \\sum_j v_j\\left(\\chi\\left(v_{-i}\\right)\\right)\n$$\n---\n$$\n\\sum_j v_j(\\chi(v)) \\geq \\sum_j v_j\\left(\\chi\\left(v_{-i}\\right)\\right)\n$$\nFurthermore, from no negative externalities,\n$$\nv_i\\left(\\chi\\left(v_{-i}\\right)\\right) \\geq 0\n$$\nTherefore,\n$$\n\\sum_j v_j(\\chi(v)) \\geq \\sum_{j \\neq i} v_j\\left(\\chi\\left(v_{-i}\\right)\\right)\n$$\nAnd thus Equation (2) is non-negative\n\n## Budget Balance and VCG\n\n\u003e[!Definition]\n\u003e**Budget Balance**\n\u003eA quasilinear mechanism is budget balanced when $\\forall v, \\sum_{i=1}^n p_i(s(v))=0$, where $s$ is the equilibrium strategy profile\n\u003e- VCG is not budget balanced (even in a simple single-item auction).\n\n\n\u003e[!Definition]\n\u003e**Weak Budget Balance**\nA quasilinear mechanism is weakly budget balanced when $\\forall v, \\sum_{i=1}^n p_i(s(v)) \\geq 0$, where $s$ is the equilibrium strategy profile\n\u003e- Weak budget balance requires that the mechanism does not lose money.\n\u003e- VCG is not weakly budget balanced (e.g. in the selfish routing example it had to pay the agents and didn't collect any money)\n\n## Another Property\n\n\u003e[!Definition]\n\u003e**No Single-Agent Effect**\n\u003eA setting exhibits no single-agent effect if $\\forall i, \\forall v_{-i}, \\forall x \\in \\operatorname{argmax}_y \\sum_j v_j(y)$ there exists a choice $x^{\\prime}$ that is feasible without $i$ and that has $\\sum_{j \\neq i} v_j\\left(x^{\\prime}\\right) \\geq \\sum_{j \\neq i} v_j(x)$\n\u003e- In other words, total welfare of agents other than $i$ is weakly increased by dropping $i$\n\n## Weakly Budget-Balanced and No Single-Agent Effect\n\n\u003e[!Theorem]\n\u003eThe VCG mechanism is **weakly budget-balanced** when the no  \n**single-agent effect** property holds\n\n### Proof\nAll agents truthfully declare their valuations in equilibrium. We must show that the sum of transfers (i.e. payments) from agents to the center is greater than or equal to zero\n$$\n\\sum_i p_i(v)=\\sum_i\\left(\\sum_{j \\neq i} v_j\\left(\\chi\\left(v_{-i}\\right)\\right)-\\sum_{j \\neq i} v_j(\\chi(v))\\right)\n$$\nFrom no single-agent effect condition we have that for all $i$\n$$\n\\sum_{j \\neq i} v_j\\left(\\chi\\left(v_{-i}\\right)\\right) \\geq \\sum_{j \\neq i} v_j(\\chi(v))\n$$\nThe result thus directly follows\n\n## Ex Post Individual Rationality\n\n\u003e[!Theorem]\n\u003eIn any Bayesian game setting in which VCG is ex post individually rational, VCG collects at least as much revenue as any other efficient and ex interim individually-rational mechanism\n\u003e- Ex interim individual rationality is a weaker condition than ex post individual rationality\n\u003e- This result is somewhat surprising: does not require dominant strategies, and hence compares VCG to all Bayes-Nash mechanisms\n\u003e- A useful corollary: VCG is as budget balanced as any efficient mechanism can be\n\u003e- It satisfies weak budget balance in every case where any Bayes Nash Incentive Compatible, efficient and ex interim individual rational mechanism would be able to do so\n\n## Disadvantages\n\n\u003e[!Theorem]\n\u003eNo dominant-strategy truthful mechanism is always both efficient and weakly budget balanced, even if agents are restricted to the simple exchange setting.\n\u003e- simple exchange is an environment consisting of buyers and sellers with quasilinear utility functions, all interested in trading a single identical unit of some good.\n\n\u003e[!Theorem]\nNo Bayes-Nash incentive-compatible mechanism is always simultaneously efficient, weakly budget balanced and ex interim individual rational, even if agents are restricted to quasilinear utility functions.\n\u003e- Class of Bayes-Nash incentive-compatible mechanisms includes the class of dominant-strategy truthful mechanisms\n\u003e- ex interim IR is weaker than ex post IR\n","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-3/Dominant-Strategy-Implementation":{"title":"Dominant Strategy Implementation","content":"### Are Indirect Mechanisms ever useful\nA direct truthful mechanism forces the agents to reveal their types completely. There might be settings where agents are not willing to compromise their privacy to this degree\n\nFull revelation can sometimes place an unreasonable burden on the communication channel\n\nAgents' equilibrium strategies might be difficult to compute; in this case the additional burden absorbed by the mechanism might be considerable\n\n# Implementable Choice Rules\n\n## Weak Monotonicity\n\n\u003e[!Definition]\n\u003e**Weak Monotonicity**\n\u003eA social choice function $\\chi$ satisfies weak monotonicity (WMON) if for all agents $i$ and all possible valuation profiles of the other agents $v_{-i}$ we have that $\\chi\\left(v_i, v_{-i}\\right)=x \\neq y=\\chi\\left(v_i^{\\prime}, v_{-i}\\right)$ implies that $v_i^{\\prime}(y)-v_i^{\\prime}(x) \\geq v_i(y)-v_i(x)$\n\n- WMON means that if the social choice changes when a single agent changes her declaration, then it must be that this change expressed a relative increase in preference for the new choice over the old choice.\n- Alternatively (if you rearrange the inequality terms) you can say that the increase in her value for the new choice (i.e. $\\left.v_i^{\\prime}(y)-v_i(y)\\right)$ is at least as large as the increase in her value for the old choice (i.e. $\\left.v_i^{\\prime}(x)-v_i(x)\\right)$\n\n### WMON is Necessary\n\u003e[!Theorem]\n\u003e**WMON is Necessary**\n\u003eIf a mechanism $(\\chi, p)$ is $D S$ truthful, then $\\chi$ satisfies WMON\n\n\u003e[!Theorem]\n\u003e**When WMON is Sufficient**\n\u003eIf all domains of preferences $V_i$ are convex sets (as subsets of Euclidean space) then for every social choice function $\\chi$ that satisfies WMON there exists payment functions $p_1, \\ldots, p_n$ such that $(\\chi, p)$ is DS truthful\n\n### What Social Choice Functions are WMON\nKnown for two extreme cases:\n1. Unrestricted quasilinear settings where $V_i=\\mathbb{R}^X$\n2. Single dimensional settings\n\n#### Case for Unrestricted Quasilinear Settings\n##### Affine Maximiser or Weighted VCG\n\u003e[!Definition]\n\u003e**Affine Maximiser**\n\u003eA social choice function $\\chi$ is an affine maximiser if for some subrange $X^{\\prime} \\subseteq X$, for some agent weights $w_i \\in \\mathbb{R}^{+}$, and for some outcome weights $\\gamma_x \\in \\mathbb{R}, \\forall x \\in X^{\\prime}, \\chi$ has the form\n\u003e\n$\\hspace{14em}\\underset{x \\in X^{\\prime}}{\\operatorname{argmax}}\\left(\\gamma_x+\\sum_i w_i v_i(x)\\right)\n$\n\n\u003e[!Theorem]\n\u003e**Roberts**\n\u003eIf there are **at least three** choices that a social choice function will choose given some input, and if agents have **general quasilinear preferences**, then the set of (deterministic) **social choice functions implementable in dominant strategies** is precisely the set of **affine maximisers**\n\n###### Understanding Robert's Theorem\nIn the case of **general quasilinear preferences** (i.e., when each agent can have any valuation for each choice $x \\in X)$ and where the choice function selects from more than two alternatives, affine maximisers are **the only DS-implementable** social choice functions.\nEfficiency is an affine-maximising social choice function for which $\\forall x \\in X, \\gamma_x=0$ and $\\forall i \\in N, w_i=1$\n- Affine maximising mechanisms are **weighted Groves mechanisms**.\n- They transform both the choices and the agents' valuations by applying linear weights, then effectively run a Groves mechanism in the transformed space.\n- Thus, we cannot stray very far from Groves mechanisms even if we give up on efficiency.\n\nIt is possible to implement a **richer set of functions** when agents' preferences are restricted further\n\n#### Case for Single Dimensional Settings\n##### Single-Parameter Domains\nThe opposite case to full dimensionality of unrestricted quasilinear\nThere is a single real parameter that directly determines the whole valuation vector $v_i$\nThere are several possible levels of generality in which to formalize this, we will consider an intermediate level that is simple and yet sufficient for most applications\n\nIn our setting, each bidder has a scalar value for **\"winning\"**, with \"losing\" having value of 0\nEach agent is associated with a subset of **winning alternatives** $W_i \\subseteq X$ where all $x \\in W_i$ are equivalent to each others (in terms of their value) to agent $i$, and all $x \\notin W_i$ are valued at 0 by $i$\n\n###### Examples\n- Single-item auction where (as we have assumed in this module) agents only care about whether they receive the item or not. So $W_i$ is the single outcome where $i$ wins\n- A combinatorial auction setting with so called \"known single-minded\" agents, where each agent is only interested in a specific bundle of items (that is known to the mechanism), with only her value for the bundle being her private information. So $W_i$ are all the outcomes in which $i$ receives her bundle of interest\n- Selfish routing setting where the mechanism wants to buy a path. $W_i$ is the set of all paths that contain edge $i$\n\n##### Setting\n- Each agent $i$ is associated with a subset of winning alternatives $W_i \\subseteq X$, and a range of values $\\left[t^0, t^1\\right]$, which are both publicly known\n- Agent $i$ values all $x \\in W_i$ at $v_i$ (which is her private knowledge), and has value of 0 for all other choices\n\n\u003e[!Definition]\n\u003e**Monotonicity in Single-Parameter Domains**\n\u003eA social choice function $\\chi$ on a single parameter domain is called monotone in $v_i$ if for every $v_{-i}$ and every $v_i^{\\prime} \\geq v_i$ we have that $\\chi\\left(v_i, v_{-i}\\right) \\in W_i$ implies that $\\chi\\left(v_i^{\\prime}, v_{-i}\\right) \\in W_i$. That is, if valuation $v_i$ makes $i$ win, then so will every higher valuation $v_i^{\\prime} \\geq v_i$\n\n## Critical Values\nFor a monotone function $\\chi$, for every $v_{-i}$ for which agent $i$ can both win and lose, there is always a critical value $c_i\\left(v_{-i}\\right)$ at and below which $i$ loses and above which she wins\n\nIf $i$ wins for every $v_i$ then the critical value at $v_{-i}$ is undefined\n\n## Normalised Mechansims\nA mechanism on single parameter domain is called normalised if the payment for losing is always 0\nThat is, $p_i(v)=0$ if $\\chi\\left(v_i, v_{-i}\\right) \\notin W_i$\n\nEvery DS truthful mechanism can be easily turned into a normalised one. So it suffices to characterise normalised mechanisms\n\n## Characterising Implementable Social Choice Functions\n\u003e[!Theorem]\n\u003eA normalised mechanism $(\\chi, p)$ on a single parameter domain is $D S$ truthful if and only if the following conditions hold:\n\u003e1. $\\chi$ is monotone in every $v_i$\n\u003e2. Every winning bid pays the critical value.\n\u003e\t- If $\\chi\\left(v_i, v_{-i}\\right) \\in W_i$ then $p_i\\left(v_i, v_{-i}\\right)=c_i\\left(v_{-i}\\right)$.\n\u003e\t- If $c_i\\left(v_{-i}\\right)$ is undefined (implying that given $v_{-i}, i$ wins for all $\\left.v_i\\right)$, then there exists some value $r_i, r_i \\leq t^0$, such that $p_i\\left(v_i, v_{-i}\\right)=r_i$\n\nUnderstanding this theorem:\n- Not restricted to affine-maximisers\n- E.g. $\\chi=\\operatorname{argmax}_x \\sum_i v_i(x)^2$, or $\\chi=\\operatorname{argmax}_x \\min _i v_i(x)$\n- In many cases this flexibility allows the design of tractable (i.e. computationally efficient) **approximation** mechanisms for problems whose exact optimisation is computationally intractable\n\n## Computational Applications of Mechanism Design\n\n- Task scheduling: allocate tasks among agents to minimise makespan\n- Bandwidth allocation in computer networks: allocate real-valued capacity of a single network link among users with different demand curves\n- Multicast cost sharing: share the cost of a multicast transmission among the users who receive it\n- Two-sided matching: pair up members of two groups according to their preferences, without imposing any payments, e.g. students and supervisors, hospitals and residents, kidney donors and recipients","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-3/Revelation-Principle":{"title":"Revelation Principle","content":"# Revelation Principle\n\nThe **Revelation Principle** tell us that any social choice function that can be implemented (in Dominant Strategy) by any mechanism, can also be implemented by a direct, truthful mechanism\n\n\u003e[!Theorem]\n\u003e**Revelation Principle**\n\u003eFor every mechanism in which every participant has a dominant strategy (no matter what her private information), there is an equivalent direct dominant-strategy truthful mechanism\n\n## Proof\n\nThe revelation principle claims that: for every mechanism in which every participant has a dominant strategy (no matter what its private information), there is an equivalent direct dominant-strategy truthful mechanism.\nConsider an arbitrary, non-truthful mechanism (e.g. may be indirect)\nRecall that a mechanism defines a game, and consider a DS equilibrium $s=\\left(s_1, \\ldots, s_n\\right)$\n![|600](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230228210943.png)\nWe can construct a new direct mechanism\nThis mechanism is truthful by exactly the same argument that $s$ was a DS equilibrium in the original mechanism\nThe agents don't have to lie, because the mechanism already lies for them.\nSo, $s_i^{\\prime}\\left(\\theta_i\\right)=\\theta_i$\n![|600](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230228211033.png)\n\nThe Revelation Principle is good for:\n- recognition that truthfulness is not a restrictive assumption\n- for analysis purposes, we can consider only truthful mechanisms, and be assured that such a mechanism exists\n- recognition that indirect mechanisms can't do (inherently) better than direct mechanisms\n\nThe set of equilibria is not always the same in the original mechanism and revelation mechanism\n- of course, we've shown that the revelation mechanism does have the original equilibrium of interest\n- however, in the case of indirect mechanisms, even if the indirect mechanism had a unique equilibrium, the revelation mechanism can also have new, bad equilibria\n\n# Direct vs. Indirect Mechanisms\n\n**Direct** - the mechanism asks agents to reveal their type\n- Set of actions available to each agent is equal to their type space, $A_i=\\Theta_i$\n- Agents each simultaneously send a single message to the center (the mechanism)\n**Indirect** - agents may send a sequence of messages; in between, information may be (partially) revealed about the messages that were sent previously (like extensive form game)\n\n## Advantages of an Indirect Mechanism\n\n- A direct truthful mechanism forces the agents to reveal their types completely. There might be settings where agents are not willing to compromise their privacy to this degree\n- Full revelation can sometimes place an unreasonable burden on the communication channel\n- Agents' equilibrium strategies might be difficult to compute; in this case the additional burden absorbed by the mechanism might be considerable\n\n# Characterization of Dominant Strategy Truthful Mechanisms\n\nIn some applications, maximising social welfare is a hard computational problem (NP-complete), but there are efficient algorithms that approximate the maximum social welfare\nCan we implement their corresponding social choice functions?\n\nIn some settings the mechanism designer has some other objectives that she wants to optimise. E.g.\n- revenue\n- some kind of fairness\n- makespan (in scheduling applications)\n\n## Direct Characterisation\n\nLet $X_i\\left(\\hat{v}_{-i}\\right) \\subseteq X$ denote the set of choices that can be selected by the choice rule $\\chi$ given the declaration $\\hat{v}_{-i}$ by the agents other than $i$ (i.e. the range of $\\left.\\chi\\left(., \\hat{v}_{-i}\\right)\\right)$\n\n\u003e[!Theorem]\nA mechanism is dominant-strategy truthful if and only if it satisfies the following conditions for every agent $i$ and every $\\hat{v}_{-i}$ :\n\u003e1. The payment function $p_i(\\hat{v})$ can be written as $p_i\\left(\\hat{v}_{-i}, \\chi(\\hat{v})\\right)$.\n\u003e2. $\\forall v_i, \\chi\\left(v_i, \\hat{v}_{-i}\\right) \\in \\operatorname{argmax}_{x \\in X_i\\left(\\hat{v}_{-i}\\right)}\\left(v_i(x)-p_i\\left(\\hat{v}_{-i}, x\\right)\\right)$\n\n\n- An agent's payment can only depend on other agents' declarations and the selected choice\n- The mechanism optimises for each agent: taking the other agents' declarations and the payment function into account, from every player's point of view the mechanism selects the most preferable choice.","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-4/Extensions-of-Stable-Matching-Problem":{"title":"Extensions of Stable Matching Problem","content":"# Classical Stable Matching Problem\n\n## Participants\n- A set of $n$ leaders\n- A set of $n$ followers\n\n## Preferences\n- Each leader has **strict preferences** over all followers\n- Each follower has **strict preferences** over all leaders\n\nEvery leader ranks all followers (i.e. finds them **acceptable**) and vice versa.\n\n## Objective\nFind a one-to-one **stable** matching\n- (one-to-one) Matching: each leader is paired with at most one follower and vice versa\n- Stable: no **blocking pair**\n\t- $(\\boldsymbol{l}, \\boldsymbol{f})$ is a blocking pair iff they both prefer each other to their assigned partners\n\n# Concurrent Proposals\n\nGale-Shapley is **non-deterministic** - When choosing a free leader (who hasn‚Äôt proposed to every follower ) to propose, the algorithm can choose any such leader arbitrarily\n\nWe can consider a (parallelised) variant of GS in which all free leaders (who haven‚Äôt proposed to every follower ) propose at the **same time**\n‚Ä¢ If a follower receives several proposals, she compares them all with their current fianc√© (if any), picks the one she most prefers and rejects the rest\n\n# Extensions of Stable Matching Problem\n\n## **S**table **M**atching with **I**ncomplete Lists\n\nAgents may declare some candidates unacceptable\nAn agent prefers to remain unmatched than to get matched to an unaccpetable partner\n\n**Matching** - an individually rational pairing of leaders and followers.  \n1. Each leader is paired with at most one follower and vice versa.  \n2. Each agent finds his/her partner acceptable.  \n**Stable Matching** - a matching with no blocking pair\n\n![|300](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230319185114.png)\n\u003e[!Tip]\n\u003eIn this example, $f_1$ finds $l_1$ unacceptable\n\n### Gale-Shapley for SMI\nThe same algorithm, but with changes in lines 2,4 and 12\n\n```C\nassign all leaders and followers to be free; //initial state  \nwhile (some leader l is free and hasn‚Äôt proposed to every follower ùóµùó≤ ùó≥ùó∂ùóªùó±ùòÄ ùóÆùó∞ùó∞ùó≤ùóΩùòÅùóÆùóØùóπùó≤)\n\tf = first follower on l's list to whom l hasn't yet proposed;  \n\t// next: l proposes to f  \n\tif (f is free and finds l ùóÆùó∞ùó∞ùó≤ùóΩùòÅùóÆùóØùóπùó≤)\n\t\tassign l and f to be engaged; //tentatively matched  \n\telse if (f prefers l to her fianc√© l') { //f is engaged  \n\t\tset l and f to be engaged;  \n\t\tset l' to be free;  \n\telse f rejects l; //and l remains free  \noutput the ùó≤ùóªùó¥ùóÆùó¥ùó≤ùó± ùóΩùóÆùó∂ùóøùòÄ, who form a stable matching;\n```\n\n## **S**table **M**atching with **T**ies\n\nAgents may be indifferent among several candidates\n\n**Blocking Pair** - when ties are allowed, three different types of blocking pairs can be defined. The straightforward extension of the one you are already familiar with is the following:  \n‚Ä¢ There is no leader-follower pair, each of whom would **strictly** prefer to match with each other rather than their assigned partner\n\n**Stable Matching** - A matching with no blocking pair\n\n![|300](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230319185348.png)\n\u003e[!Tip]\n\u003eIn this example, $f_1$ is indifferent between $l_2$ and $l_1$ and $l_2$ is indifferent between $f_2$ and $f_1$\n\n## **S**table **M**atching with **T**ies and **I**ncomplete Lists\n\nBoth incomplete lists and indifferences are allowed\n\nSame Gale-Shapley algorithm for SMI works for SMTI\n- **Only change** - Break ties in preferences arbitrarily first\n\n# Optimal Stable Matchings\n\n## Achievable Candidates\n\nFor a given instance, there may be several stable matchings\n\n![|400](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230313201143.png)\nThis instance has two stable matchings - \u003cstrong\u003e\u003cfont color=\"00b050\"\u003eGreen\u003c/font\u003e\u003c/strong\u003e and \u003cstrong\u003e\u003cfont color=\"800080\"\u003ePurple\u003c/font\u003e\u003c/strong\u003e\n- Both $f_1$ and $f_2$ are achievable to $l_1$\n- Only $l_3$ is achievable to $f_3$\n\n\u003e[!Definition]\n\u003eA leader $l$ and a follower $f$ are **achievable** to each other if there exists a stable matching in which $l$ and $f$ are matched\n\n## Leader-Optimal Matching\n\n**Leader-optimal matching** - a stable matching in which each leader receives his best achievable partner.  \n**Follower-optimal matching** - a stable matching in which each follower receives her best achievable partner\n\n**Claim** - When preferences are strict, all executions of leader-oriented GS return the leader-optimal matching\n\u003cstrong\u003e\u003cfont color=\"00b050\"\u003eProof\u003c/font\u003e\u003c/strong\u003e (By Contradiction):\n- Suppose a leader is matched with a follower other than best achievable partner\n- Leaders propose in decreasing order of preferences\n\t$\\Rightarrow$ some leader is rejected by an achievable partner during GS\n- Let $l$ be first such leader and let $f$ be the first (and hence best) achievable partner that rejects $l$\n- Let $\\boldsymbol{\\mu}$ be a stable matching where $\\boldsymbol{l}$ and $f$ are matched.\n- When $f$ rejects $l$ in GS, she forms (or re-affirms) commitment to a leader, say $l^{\\prime} \\Rightarrow$ f prefers $l^{\\prime}$ to $l$\n- Let $f^{\\prime}$ be the partner of $l^{\\prime}$ in $\\boldsymbol{\\mu}$\n- $l^{\\prime}$ had not been rejected by any achievable partner (including $f^{\\prime}$ ) at the point when $l$ is rejected by $f$\n\t- Because this is the first rejection by an achievable partner\n- Thus, $l^{\\prime}$ had not yet proposed to $f^{\\prime}$ when $l^{\\prime}$ proposed to $\\mathrm{f} \\Rightarrow l^{\\prime}$ prefers $\\mathrm{f}$ to $f^{\\prime}$ \n- Thus $\\left(l^{\\prime}, \\mathrm{f}\\right)$ is a blocking pair in $\\boldsymbol{\\mu}$, a contradiction (to $\\mu$ being stable)\n\n**Corollary 1** - When preferences are strict, all executions of leader-oriented Gale -Shapley return the same stable matching\n**Corollary 2** - When preferences are strict, there exists a leader-optimal stable matching and a follower-optimal stable matching\n\n### Conflict of Interests\n**Leader-pessimal matching** - a stable matching in which each  \nleader receives his **worst achievable** partner\n**Follower-pessimal matching** - a stable matching in which each  \nfollower receives her **worst achievable** partner\n\n\u003e[!Theorem]\n\u003eWhen preferences are strict, the leader-optimal matching is the follower-pessimal matching, and vice versa\n\n### The Case with Ties\n**Claim** - When **ties** are allowed, a **leader-optimal** stable matching and/or a **follower-optimal** stable matching **may not exist**\n\n![|400](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230313203519.png)\nThis example has two stable matchings - \u003cstrong\u003e\u003cfont color=\"00b050\"\u003eGreen\u003c/font\u003e\u003c/strong\u003e and \u003cstrong\u003e\u003cfont color=\"800080\"\u003ePurple\u003c/font\u003e\u003c/strong\u003e \n‚Ä¢ Neither is a leader-optimal stable matching - $l_2$ prefers \u003cstrong\u003e\u003cfont color=\"800080\"\u003ePurple\u003c/font\u003e\u003c/strong\u003e but $l_3$  \nprefers \u003cstrong\u003e\u003cfont color=\"00b050\"\u003eGreen\u003c/font\u003e\u003c/strong\u003e\n‚Ä¢ Neither is a follower-optimal stable matching - $f_1$ and $f_2$ prefer \u003cstrong\u003e\u003cfont color=\"00b050\"\u003eGreen\u003c/font\u003e\u003c/strong\u003e but $f_3$ prefers \u003cstrong\u003e\u003cfont color=\"800080\"\u003ePurple\u003c/font\u003e\u003c/strong\u003e\n\n# Dominant Strategy Truthfulness\n\nAgents (leaders and followers) declare their preferences to the centralised system  \n‚Ä¢ Agent are strategic - they misreport if it is in their benefit  \n- i.e. if providing a different ranking over candidates results in the system matching them with a better one\n\nA matching mechanism is **dominant-strategy truthful** (DS truthful), if every agent finds it in his/her best interest to declare his/her true preference list, no matter what other agents choose to do\n\n## Is Gale-Shapley Dominant Strategy Truthful\n\nAssume that **preferences are strict**\n\nWhen the leader-oriented version of Gale-Shapley algorithm is executed, all **leaders** find it in their best interest to be **truthful**\nSome followers, however, may benefit from **misreporting** their preferences\n\n![|500](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230313204939.png)\n\n![|500](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230313205041.png)\n\n## Dominant Strategy Truthfulness\n\n\u003e[!Theorem]\n\u003e**Dubins and Freedleader**\n\u003eThe mechanism that **yields the leader-optimal** stable matching (in terms of stated preferences) makes it a **dominant strategy for each leader** to state his **true** preferences\n\nSimilarly, the mechanism that yields the follower-optimal stable matching makes it a dominant strategy for every follower to state her true preferences\nIf we have ties in preferences but a leader-optimal stable matching exists, then leader-oriented GS is DS truthful for leaders\n\n## Impossibility of Dominant Strategy Truthfulness\n\n\u003e[!Theorem]\n\u003e**Roth**\n\u003eNo stable matching mechanism exists for which truth-telling is a dominant strategy for every agent, **even when preferences are strict**\n\n### Proof of the Impossibility Result\n#### Proof Sketch\n1. Construct an instance of SMI\n2. Show that whatever stable matching the mechanism chooses, at least one agent can benefit by misreporting (i.e. if that agent declares a different preference, the mechanism matches the agent with a better partner)\n\n#### Proof\nConsider the following instance with 2 leaders and 2 followers\n![|400](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230313205826.png)\n\n1. This instance has two stable matchings - \u003cstrong\u003e\u003cfont color=\"00b050\"\u003eGreen\u003c/font\u003e\u003c/strong\u003e and \u003cstrong\u003e\u003cfont color=\"800080\"\u003ePurple\u003c/font\u003e\u003c/strong\u003e  \n2. Every stable matching mechanism must choose either \u003cstrong\u003e\u003cfont color=\"00b050\"\u003eGreen\u003c/font\u003e\u003c/strong\u003e or \u003cstrong\u003e\u003cfont color=\"800080\"\u003ePurple\u003c/font\u003e\u003c/strong\u003e  \n3. Suppose the mechanism chooses the \u003cstrong\u003e\u003cfont color=\"00b050\"\u003eGreen\u003c/font\u003e\u003c/strong\u003e matching\n4. If f 2 now only declares l 1 as acceptable then the only stable matching is the \u003cstrong\u003e\u003cfont color=\"800080\"\u003ePurple\u003c/font\u003e\u003c/strong\u003e matching.  \n5. Similarly, if the mechanism chooses the purple matching, then if l 2 declares only f 2 as acceptable then only the \u003cstrong\u003e\u003cfont color=\"00b050\"\u003eGreen\u003c/font\u003e\u003c/strong\u003e matching is stable\n6. In either scenario, at least one agent benefits by not reporting truthfully\n\n#### Observation\nIn the proof of the impossibility result, we allowed incomplete  \nlists and agents could report by \"**truncating**\" their preferences  \nand by falsely declaring an acceptable partner as unacceptable\n\n## Impossibility of Truthful Nash Equilibrium\n\n**Roth Corollary** - No stable matching mechanism exists for which stating the true preferences is always a best response for every agent when all other agents state their true preferences\n\n**Alternative Statement for Corollary** - **No stable matching mechanism** exists for which it is always an **equilibrium** for every agent to state his or her **true preferences**\n\n## Few People Can Manipulate\n\n\u003e[!Theorem]\n\u003eThe number of students that have more than one achievable hospital vanishes. Therefore, with high probability, the truthful strategy is a dominant strategy\n\n**Approximate Truthfulness** - The incentive to manipulate is smaller than epsilon","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-4/Optimal-Auctions":{"title":"Optimal Auctions","content":"# Optimal Auctions for Selling a Single Item\n\nSo far we have ignored the mechanism's revenue (i.e. some of the payments made by the agents), except in attempting to keep it as close to zero as possible (budget balanced).\nBut in some auctions, it is desirable to maximise the seller's revenue\n\nA seller my be willing to risk failing to sell the item even when there is an interested buyer\nA seller may be willing sometimes to sell to a buyer who didn't make the highest bid\n\nMechanisms which are designed to maximise seller's expected revenue are known as as **optimal auctions**\n\n## Optimal Auctions Setting\n\nAs assumed previously:\n- Independent private valuations (IPVs)  \n- Risk-neutral bidders\n\nAdditionally, we assume that:\n- Each bidder i's valuation is drawn from some strictly increasing cumulative density function $F_i(v)$ with a PDF $f_i(v)$ that is continious and bounded below\n- We allow $F_i \\neq F_j$ : asymmetric auctions\n- The seller knows each $F_i$\n\n**Optimal Auction** - Maximises seller‚Äôs expected revenue subject to  \nsome form of individual rationality\n\n### Example\n2 bidders, $v_i$ uniformly distributed on $[0,1]$\nSet reserve price $R$ and then run a second price auction:\n- no sale if both bids below $R$\n- sale at price $R$ if one bid above reserve price and other below\n- sale at second highest bid if both bids are above reserve\n\nStill dominant strategy to bid true values, so\n- no sale if both bids below $R$ - happens with probability $R^2$ and revenue $=0$.\n- sale at price $R$ if one bid above reserve price and other below happens with probability $2(1-R) R$ and revenue $=R$.\n- sale at second highest bid if both bids are above reserve - happens with probability $(1-R)^2$ and revenue\n$E\\left[\\min v_i \\mid \\min v_i \\geq R\\right]=\\frac{1+2 R}{3}$\nExpected revenue $=2(1-R) R^2+(1-R)^2 \\frac{1+2 R}{3}$\nExpected revenue $=\\frac{1+3 R^2-4 R^3}{3}$\nMaximising: $0=2 R-4 R^2$, or $R=\\frac{1}{2}$\n\nReserve price of $1 / 2$ gives us revenue $=5 / 12$\nReserve price of 0 gives us revenue $=1 / 3$\nTradeoffs:\n- lose sales when both bids were below $1 / 2$ - but low revenue then in any case and probability $1 / 4$ of happening\n- increase price when one bidder has low value other high: happens with probability $1 / 2$\n\nLike adding another bidder: increasing competition in the auction\n\n## Designing Optimal Auctions\n\n\u003e[!Definition]\n\u003eBidder i's virtual valuation is $\\psi_i\\left(v_i\\right)=v_i-\\frac{1-F_i\\left(v_i\\right)}{f_i\\left(v_i\\right)}$.\n\u003e- Let us assume that this is increasing in $v_i$ (e.g. in the case of uniform distribution on $[0,1]$ this is going to be $\\left.2 v_i-1\\right)$\n\n\u003e[!Definition]\nBidder i's bidder-specific reserve price $r_i^*$ is the value for which $\\psi_i\\left(r_i^*\\right)=0$\n\n### Myerson's Theorem\n\u003e[!Theorem]\n\u003e**Myerson**\n\u003eThe **optimal (single-item) auction** is a sealed-bid auction in which every agent is asked to declare his valuation. The good is sold to the agent $i=\\operatorname{argmax}_i \\psi_i\\left(\\hat{v}_i\\right)$, as long as $\\hat{v}_i \\geq r_i^*$. If the good is sold, the winning agent $i$ is charged the smallest valuation that she could have declared while still remaining the winner; i.e.\n$\\hspace{11em}\\inf \\left\\{v_i^*: \\psi_i\\left(v_i^*\\right) \\geq 0 \\text { and } \\forall j \\neq i, \\psi_i\\left(v_i^*\\right) \\geq \\psi_j\\left(\\hat{v}_j\\right)\\right\\}$\n\n#### Understanding Myerson's Theorem\nSealed-bid auction in which every agent is asked to declare his valuation\n\nDeclarations are used to compute a virtual (declared) valuation $\\psi_i\\left(\\hat{v}_i\\right)$ for each agent $i$\n\nThe item is sold to the agent $i$ whose virtual valuation is the highest, as long as this value is nonnegative; i.e. $\\hat{v}_i$ is no less than her reserve price $r_i^*$\n\nIf every agent's virtual valuation is negative, the seller keeps the item and achieves a revenue of zero\n\nIf the item is sold, the winning agent $i$ pays an amount equal to the smallest valuation that she could have declared while still remaining the winner:\n$$\n\\inf \\left\\{v_i^*: \\psi_i\\left(v_i^*\\right) \\geq 0 \\text { and } \\forall j \\neq i, \\psi_i\\left(v_i^*\\right) \\geq \\psi_j\\left(\\hat{v}_j\\right)\\right\\}\n$$\n## Analysing Optimal Auctions\n\n**Optimal auction**:\n- winning agent $i=\\operatorname{argmax}_i \\psi_i\\left(\\hat{v}_i\\right)$, as long as $\\hat{v}_i \\geq r_i^*$.\n- $i$ is charged the smallest valuation that she could have declared while still remaining the winner:\n$$\\inf \\left\\{v_i^*: \\psi_i\\left(v_i^*\\right) \\geq 0\\right.$ and $\\left.\\forall j \\neq i, \\psi_i\\left(v_i^*\\right) \\geq \\psi_j\\left(\\hat{v}_j\\right)\\right\\}$$\n\n### Questions\nIs this VCG?\n- No, it's not efficient.\nHow should bidders bid?\n- This is a second-price (Vickrey) auction with a reserve price, held in virtual valuation space.\n- Neither the reserve prices nor the virtual valuation transformation depends on the agent's declaration\n- Thus the proof that a Vickrey auction is dominant-strategy truthful applies here as well\nWhat happens in the special case where all agents' valuations are drawn from the same distribution?\n- We will have a Vickrey auction with reserve price $r^*$ satisfying $r^*-\\frac{1-F_i\\left(r^*\\right)}{f_i\\left(r^*\\right)}=0$\nWhat happens in the general case?\n- The virtual valuations also increase weak bidders' bids, making them more competitive.\n- Low bidders can win, paying less.\n- However, **bidders with higher expected valuations must bid more aggressively**\n\n## Optimal Auctions in Practise\n\nOptimal Auctions are not really used in practise\n- They are not **detail free**! The seller needs to know bidders' distributions.\n- In a symmetric IPV setting, it is better to attract one additional bidder than to set an optimal reserve price.\n- Intuitively, adding an extra bidder is similar to a reserve price (as her addition increases the competition among the other bidders) but different also (because she can buy the item herself).\n- Trying to **attract more bidders** may be **more important** that trying to figure out bidders' valuation distributions in order to run an optimal auction.","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-4/Stable-Matching":{"title":"Stable Matching","content":"Leaders can only lead and followers can only follow\n\n# Setting\n\n## Participants\n\n- A set of leaders $L=\\{\\mathbf{1}, \\ldots, \\boldsymbol{n}\\}$\n- A set of followers $\\boldsymbol{F}=\\{\\mathbf{1}, \\ldots, \\boldsymbol{n}\\}$\n\n## Preferences\n- Each leader has strict preferences over all followers\n- Each follower has strict preferences over all leaders\nAll preferences together: **preference profile**\n\n## Objective\n- To find a one-to-one stable matching\n- (one-to-one) Matching: each leader is paired with at most one follower and vice versa\n- Stable: no pair $(\\boldsymbol{l}, f)$ wants to deviate\n\n# Stable Matching\n\n![|200](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230313184718.png)![|200](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230313184737.png)\n\nA matching is **stable** if\n- There is no leader-follower pair, each of whom would prefer to match with each other rather than their assigned partner\nIn the latter case, this is called a **blocking pair**\n![|500](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230313185154.png)\n\n\u003e[!Tip]\n\u003eIn this example this is a blocking pair as light blue would prefer to be matched with pink and pink would prefer to be matched with light blue\n\n## Gale \u0026 Shapley Algorithm\n\n\u003e[!Theorem]\n\u003e**Gale \u0026 Shapley**\n\u003eA stable matching **always** exists, and can be found in polynomial time\n\n### Leader Oriented\n\n```C\nAssign all leaders and followers to be free; //initial state  \nwhile (some leader l is free and hasn‚Äôt proposed to every follower)  \n\tf = first follower on l's list to whom l hasn't yet proposed;  \n\t// next: l proposes to f  \n\tif (f is free)  \n\t\tassign l and f to be engaged; //tentatively matched  \n\telse if (f prefers l to her fianc√© l') { //f is engaged  \n\t\tset l and f to be engaged;  \n\t\tset l' to be free;  \n\telse f rejects l; //and l remains free  \noutput the n engaged pairs, who form a stable matching;\n```\n\n![|600](notes/Algorithmic%20Game%20Theory/Images/stable%20matching.gif)\n\n### Proof of Correctness\n**Claim** - Gale-Shapley algorithm always terminates and returns a stable matching\n\nIn order to prove this we need to show that:  \n1. The algorithm always terminates\n2. The algorithm returns a matching (every leader is  \nmatched with at most one follower and vice versa)\n3. The matching it returns is stable (no blocking pair)\n\n#### Termination\n**Observation 1.** Leaders propose to followers in decreasing  \norder of preference  \n**Observation 2.** Once a follower is matched up, s/he never  \nbecomes unmatched; only \"trades up\"\n\n**Claim** - Algorithm terminates after at most $n^2$ iterations of  \nWhile loop\n\u003cstrong\u003e\u003cfont color=\"00b050\"\u003eProof\u003c/font\u003e\u003c/strong\u003e - Each time through the while loop, a leader proposes to a new follower. Thus there are at most $n^2$ possible proposals\n\n#### Matching\n**Claim** - Gale-Shapley outputs a matching\n\u003cstrong\u003e\u003cfont color=\"00b050\"\u003eProof\u003c/font\u003e\u003c/strong\u003e:\n- Leader proposes only if unmatched $\\Rightarrow$ matched to $\\leq 1$ follower\n- Follower keeps only best leader $\\Rightarrow$ matched to $\\leq 1$ leader\n\n#### The Matching is Perfect (Everyone is Matched)\n**Claim** - In Gale-Shapley matching, all leaders get matched\n\u003cstrong\u003e\u003cfont color=\"00b050\"\u003eProof\u003c/font\u003e\u003c/strong\u003e (By Contradiction):\n- Suppose, for a contradiction, that some leader $l$ is unmatched when Gale-Shapley terminates.\n- Then some follower, say $f$, is unmatched upon termination.\n- By Observation 2, $f$ was never proposed to.\n- But, $l$ proposes to every follower, since $l$ ends up unmatched\n- A contradiction!\n\n**Claim** - In Gale-Shapley matching, all followers get matched\n\u003cstrong\u003e\u003cfont color=\"00b050\"\u003eProof\u003c/font\u003e\u003c/strong\u003e (By Counting) - By previous claim, all $n$ leaders get  \nmatched. Thus all $n$ followers get matched\n\n#### Stability\n**Claim** - In Gale-Shapley matching $\\mu$, there are no blocking pairs\n\u003cstrong\u003e\u003cfont color=\"00b050\"\u003eProof\u003c/font\u003e\u003c/strong\u003e:\n- Consider any pair $(\\boldsymbol{l}, \\boldsymbol{f})$ that is not in $\\boldsymbol{\\mu}$\n- **Case 1**: $l$ never proposed to $f$\n\t$\\Rightarrow \\boldsymbol{l}$ prefers $\\boldsymbol{\\mu}(\\boldsymbol{l})$ to $\\boldsymbol{f}$. (since leaders propose in decreasing order of preferences\n\t\t$\\mu(l)$ - Partner of $l$ in $\\mu$\n\t$\\Rightarrow(l, f)$ is not blocking\n- **Case 2**: $l$ proposed to $f$\n\t$\\Rightarrow f$ rejected $l$ (either right away or later)\n\t$\\Rightarrow \\boldsymbol{f}$ prefers $\\boldsymbol{\\mu}(\\boldsymbol{f})$ to $\\boldsymbol{l}$ (as followers only trade up)\n\t\t$\\mu(f)$ - Partner of $f$ in $\\mu$\n\t$\\Rightarrow(l, f)$ is not blocking\n- In either case, the pair $(l, f)$ is **not a blocking pair**\n\n","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-5/Hospitals-Residents-Problem":{"title":"Hospitals, Residents Problem","content":"# **H**ospitals/**R**esidents Problem and **H**ospitals/**R**esidents with **T**ies\n\n- Agents on one side can get matched to several candidates\n- Many-one stable matching problem\n\nWorking in practise:\n- Junior doctors (or residents) must undergo training in hospitals  \n- Applicants rank hospitals in order of preference  \n- Hospitals do likewise with their applicants  \n- Centralised matching schemes (clearinghouses) produce a matching in several countries\n\n## **H**ospitals/**R**esidents Problem\n\nParticipants\n- A set of $n_1$ residents $\\left\\{r_1, r_2, \\ldots, r_{n_1}\\right\\}$\n- A set of $n_2$ hospitals $\\left\\{h_1, h_2, \\ldots, h_{n_2}\\right\\}$\n\nEach hospital has a **capacity**\n\nPreferences:\n- Residents rank **acceptable** hospitals in strict order of preference, hospitals do likewise\n- We assume that unacceptability is **mutual**: if $h$ finds $r$ unacceptable then $r$ finds $h$ unacceptable and vice versa\n\n### Matching in **HR**\nA matching $M$ is a set of resident-hospital pairs such that:\n- $(r, h) \\in M \\Rightarrow r, h$ find each other acceptable\n- No resident appears in more than one pair\n- No hospital appears in more pairs than its capacity\n\n#### Example Matching\n![|500](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314161213.png)\n\n### Stability\nMatching $M$ is stable if $M$ admits no blocking pair\n\n$(r, h)$ is a blocking pair of matching $M$ if:\n1. $r, h$ find each other acceptable and\n2. either $r$ is unmatched in $M$ or $r$ prefers $h$ to his/her assigned hospital in $M$ and\n3. either $h$ is undersubscribed in $M$ or $h$ prefers $r$ to its worst resident assigned in $M$\n\nA matching $M$ is a set of resident-hospital pairs such that:\n- $(r, h) \\in M \\Rightarrow r, h$ find each other acceptable\n- No resident appears in more than one pair\n- No hospital appears in more pairs than its capacity\n\nMatching $M$ is stable if $M$ admits no blocking pair \n$(r, h)$ is a blocking pair of matching $M$ if:\n1. $r, h$ find each other acceptable and\n2. either $r$ is unmatched in $M$ or $r$ prefers $h$ to his/her assigned hospital in $M$ and\n3. either $h$ is undersubscribed in $M$ or $h$ prefers $r$ to its worst resident assigned in $M$\n\n#### Examples\n##### Blocking Pair 1\n![|500](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314161427.png)\n\n##### Blocking Pair 2\n![|500](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314161444.png)\n\n##### Blocking Pair 3\n![|500](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314161503.png)\n\n##### Stable Matching\n![|500](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314161524.png)\n\n\n\n### **R**esident-Oriented **G**ale **S**hapley\nExtension of Gale-Shapley to HR\n```C\nM = ‚àÖ; //assign all residents and hospitals to be free  \nwhile (some resident r·µ¢ is unmatched and has a non-empty list)  \n\tr·µ¢ applies to the first hospital h‚±º on her list;  \n\tM = M ‚à™ {(r·µ¢ , h‚±º )};  \n\tif (h‚±º is over-subscribed)  \n\t\tr‚Çñ = worst resident assigned to h‚±º ;  \n\t\tM = M ‚àñ {(r‚Çñ, h‚±º )}; //r‚Çñ is set free  \n\tif (h‚±º is full)  \n\t\tr‚Çñ = worst resident assigned to h‚±º ;  \n\t\tfor (each successor r‚Çó of r‚Çñ on h‚±º‚Äôs list)  \n\t\t\tdelete r‚Çó from h‚±º‚Äôs list;  \n\t\t\tdelete h‚±º from r‚Çó‚Äôs list;  \noutput the engaged pairs, who form a stable matching;\n```\n\n#### Example\n![|400](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314162451.png)\n![|450](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314162507.png)\n\n### Optimal Stable Matchings\nExtension of results for SMI\n\n**Claim** - When preferences are strict, all executions of **resident**-oriented GS (RGS) return the resident-optimal (stable) matching\n\n**Claim** - When preferences are strict, all executions of **hospital**-oriented GS (HGS) return the hospital-optimal (stable) matching\n\n**Claim** - When preferences are strict, the hospital-optimal matching is the **resident-pessimal** matching, and vice versa\n\n### **H**ospital-Oriented **G**ale **S**hapley\n```C\nM = ‚àÖ; //assign all residents and hospitals to be free  \nwhile (some hospital h·µ¢ is undersubscribed and has non-empty list)  \n\ts·µ¢ = q·µ¢ - |M(h·µ¢)|; //the number of available seats in h·µ¢\n\th·µ¢ applies to the first s·µ¢ residents on its list;  \n\tforeach (r‚±º that h·µ¢ applies to)  \n\t\tif (r‚±º is free) M = M ‚à™ {(r‚±º , h·µ¢ )};  \n\t\telse if (r‚±º prefers h·µ¢ to her current hospital h‚Äô)  \n\t\t\tM = M ‚à™ {(r‚±º , h·µ¢ )} \\ {(r‚±º , h‚Äô)}; //h‚Äô is set free  \n\t\tfor (each successor h‚Çó of M(r‚±º ) on r‚±º‚Äôs list)  \n\t\t\tdelete h‚Çó from r‚±º‚Äôs list;  \n\t\t\tdelete r‚±º from h‚Çó‚Äôs list;  \noutput the engaged pairs, who form a stable matching;\n```\n\n#### Example\n![|400](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314163607.png)\n![|450](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314163625.png)\n\n### Hospital-Optimal vs. Resident-Optimal\n![|450](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314165052.png)\n\n### Rural Hospitals Theorem\n\u003e[!Theorem]\n\u003eIn a given instance of HR:  \n\u003e1. the **same residents** are assigned in all stable matchings;  \n\u003e2. each hospital is assigned the **same number of residents** in all stable matchings;  \n\u003e3. any hospital that is **undersubscribed** in one stable matching is assigned **exactly the same set of residents** in all stable matchings\n\n### Dominant Strategy Truthfulness\n\u003e[!Theorem]\n\u003eA stable matching mechanism that yields the **resident-optimal** matching makes it a **dominant strategy for all residents** to state their true preferences\n\u003e- Under strict preferences, RGS is dominant-strategy truthful for residents\n\n\u003e[!Theorem]\n\u003e**No stable matching mechanism exists** that makes it a dominant strategy for **all hospitals** to state their true preferences.  \n\u003e- Even when hospital-oriented GS (HGS) is executed and preferences are strict, some hospitals may benefit from misreporting their preferences\n\n## **H**ospitals/**R**esidents problem with **T**ies\n\nResident's preference lists are short\nHospital's lists are generally long, so ties may be used\n\nA hospital may be **indifferent** among several residents\n\nAn instance of HRT may not admit a hospital-optimal and/or a resident-optimal matching\nA matching $M$ is stable in an HRT instance $I$ if and only if $M$ is stable in some instance $I$ ' of HR obtained from $I$ by breaking the ties\n\n## **H**ospitals/**R**esidents problem with **C**ouples\n\nPairs of residents who wish to be matched to geographically close hospitals form couples\nEach couple $\\left(r_i, r_j\\right)$ ranks in order of preference a set of pairs of hospitals $\\left(h_p, \\boldsymbol{h}_q\\right)$ representing the assignment of $r_i$ to $h_p$ and $r_j$ to $h_q$\n\nA stable matching need not exist\nStable matchings can have different sizes\n\nThe problem of determining whether a stable matching exists in a given HRC instance is NP-complete, even if each hospital has capacity 1 and:  \n- there are no single residents  \n\n- there are no single residents, and  \n- each couple has a preference list of length ‚â§2, and  \n- each hospital has a preference list of length ‚â§3  \n\n- the preference list of each single resident, couple and hospital is derived from a strictly ordered master list of hospitals, pairs of hospitals and residents respectively , and  \n- each preference list is of length ‚â§3, and  \n- the instance forms a ‚Äúdual market‚Äù\n\n","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Algorithmic-Game-Theory/Week-5/Stable-Roommates":{"title":"Stable Roommates","content":"Find your roommate\nEach student has a strict preferemce list\nSame notion of stability as stable marriage\nNo longer a bipartite graph\nStable matching (stable marriage) is a special case\n\n# **S**table **R**oommates Problem\n\n**Participants**\n- $2 n$ students or agents\n\n**Preferences**\n- Each agent has strict preferences over all other (2n-1) agents\n\n**Matching**\n- A set of $\\mathrm{n}$ disjoint pairs of agents\n\n**Stable Matching**\n- A matching $M$ with no blocking pair\n- That is, no $\\{p, q\\} \\notin M$ such that $p$ prefers $q$ to her partner in $\\mathbf{M}$, and $\\mathbf{q}$ prefers $p$ to her partner in $\\mathbf{M}$\n\nA stable matching does not always exist\n\n#### Example\n\n![|400](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314175655.png)\n\n## Irving's Algorithm for SR\n\nGiven an instance of SR, decides whether a stable matching exists\nAnd if so, finds one\n\nRuns in $O(n^2)$ time\nWorks in two phases:\n- **Phase 1** - Similar to Gale-Shapley algorithms for the Stable Matching problem\n- **Phase 2** - Elimination of \"rotations\"\n\n### Semiengagement\nEngagement is not a symmetric relation (unlike in SM)\n- If $x$ is engaged to $y$, it is not necessarily the case that $y$ is engaged to $x$\n- So we use the term semiengage and say that \" $\\mathrm{x}$ is semiengaged to $\\mathrm{y}^{\\prime \\prime}$\n- y could be free, semiengaged to another agent $z$, or semiengaged to $x$\n\nAll agents **start out free**\nA semiengaged agent $\\mathbf{x}$ becomes **free** when her semi-fianc√© rejects $\\mathrm{x}$\n\n$\\mathbf{x}$ becomes semiengaged when she **proposes** to someone\n- The algorithm is designed so that when $\\mathrm{x}$ proposes to $\\mathrm{y}$ it must be the case that $y$ is either free or finds $x$ preferable to the current proposal she is holding\n\n### Phase 1\nSimilar to Gale-Shapley\n\n```C\nAssign all agents to be free; //initial state  \nwhile (some free agent x has a nonempty list)  \n\ty = first agent on x's list  \n\t// next: x proposes to y  \n\tif (some person z is semiengaged to y)  \n\t\tassign z to be free; // y rejects z  \n\tAssign x to be semiengaged to y;  \n\tfor (each successor w of x on y‚Äôs list)  \n\t\tdelete w from y‚Äôs list;  \n\t\tdelete y from w‚Äôs list;\n```\n\nAfter Phase 1, there are two possibilities:\n1. Exist an agent who got rejected by everyone else\n\t- No stable matching\n2. Every agent holds a proposal. In other words, each row should have one top bar and one bottom bar (could coincide)\n\t1. If every row has only one remaining entry (top bar and bottom bar coincide) then we have a unique stable matching\n\t2. -\u003e **Phase 2**\n\n#### Example\n![|400](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314181447.png)\n![|300](notes/Algorithmic%20Game%20Theory/Images/Pasted%20image%2020230314181527.png)\n\n### Phase 2\nThe reduced preference list from the end of phase 1 is referred to as **phase-1 table**\n\nThe preference table is further reduced until\n- **All lists contain just one entry**, in which case it constitutes a stable matching, or\n- Until **some list becomes empty**, in which case no stable matching exists\n\nReduction of preference table takes place by eliminating \"exposed rotations\"\n\nHigh level intuition is:\n- If the original preference table admits a stable matching, so does all subsequent reduced tables\n- If a reduced table doesn't admit a stable matching, neither does the original preference table\n\nPhase 1 always returns the same preference table\nDepending on the order of elimination in phase 2, we may arrive at different stable matchings\nSo **not all executions of Irving's algorithm return the same matching**\n\n#### Exposed Rotation\nA pair of sequences $\\rho=\\left(\\left(p_0, \\ldots, p_{r-1}\\right),\\left(q_0, \\ldots, q_{r-1}\\right)\\right)$ constitute an **exposed rotation** if\n- $q_i$ is the second entry on $p_i^{\\prime}$ s list, and\n- $p_{i+1}$ is the last entry on $q_i^{\\prime}$ s list\n\t- $i+1$ is taken modulo $r$\n\nExposed rotation $\\rho=\\left(\\left(p_0, \\ldots, p_{r-1}\\right),\\left(q_0, \\ldots, q_{r-1}\\right)\\right)$ is eliminated by deleting $\\left(q_i, p_{i+1}\\right)$ from each other's lists, for all $\\mathrm{i}$\n- delete $\\mathrm{q}_{\\mathrm{i}}$ from $\\mathrm{p}_{\\mathrm{i}+1}$ 's list\n- delete $\\mathbf{p}_{i+1}$ from $q_i$ 's list\n\n#### Algorithm\n```C\nT = phase-1 table; //initial state  \nwhile ((some list in T has more than one entry) and (no list in T is empty))  \n\tfind a rotation ùùÜ exposed in T  \n\tT = T / ùùÜ // eliminate ùúå  \nif (some list in T is empty)  \n\treturn instance unsolvable;  \nelse  \n\treturn T, which is a stable matching;\n```\n\n#### Example\n![|500](notes/Algorithmic%20Game%20Theory/Images/stable%20roommates.gif)\n\n# Extensions of **S**table **R**oommates\n\n## Odd Number of Agents\n\nThere may be an odd number of agents\nIn any matching one agent is unmatched\n\nStability defined as before\nAn agent prefers being matched than to remain unmatched\n\n### Extending Irving's Algorithm\nIf after phase 1 all preference lists are nonempty, then there exists no stable matching\nIf at the end of phase 1, exactly one agent's $x$ preference list becomes empty\n- $x$ cannot be matched in any stable matching\n- If there exists a stable matching, no other person is unmatched\n- To check whether or not there exists a stable matching, we run phase 2 (without $x$)\n\n## Unacceptable Partners\n\nSome agents may find other agents unacceptable\nIn this case we get Stable Roommates with Incomplete Lists (SRI)\n\nAn agent prefers being matched to an acceptable partner than to remain unmatched\n\n### Extending Irving's Algorithm\nAfter phase 1, one or more preference lists may become empty\n- Any agent with an empty list cannot be matched in any stable matching\n- Any person with a nonempty list must be matched in every stable matching\n- To check whether or not there exists a stable matching, we run phase 2 without those agents whose lists are empty at the end of phase 1\n\n### Stable Pairs\nAny pair $(x,y)$ removed during phase 1 cannot be a stable pair\n- i.e. $x$ and $y$ are not matched in any of the stable matchings\n\nFor each agent, the **first entry** in the phase-1 table is their **best achievable roommate** (if there is any achievable roommate)\nFor each agent, the **last entry** in the phase-1 table is their **worst achievable roommate** (if there is any achievable roommate)\n\n## Ties\n\nSome agents might be indifferent between several other agents\nIn which case we get Stable Roommates with Ties (SRT)\n\nAs in SMT, different types of blocking pairs can be defined for SRT. Here we will focus on the straightforward extension of the stability notion we already know  \n- A matching is stable if there is **no pair** such that each of whom would **strictly prefer to match with each other** rather than their assigned partner\n\n\u003e[!Theorem]\n\u003eDeciding whether a stable matching exists, given an instance of SRT, is **NP-complete**\n\nEven if each preference list is either strictly ordered or contains a tie of length 2 at the head","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Biometrics/Biometrics-ToC":{"title":"Biometrics ToC","content":"\n#### [[Computer Vision Techniques]]\n\n#### [[Face and Fingerprint]]\n\n#### [[Gait Biometrics]]","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Biometrics/Computer-Vision-Techniques":{"title":"Computer Vision Techniques","content":"\n# Background Subtraction\n\nWhat the fuck was he talking about in the background subtraction part\n\n# Wavelets\n\nWavelets are used for:\n- Scale-Space analysis\n- Simultaneous decimation in space and frequency\n\n## 2D Gabor Filter\n\n$$g w 2 D(x, y)=\\frac{1}{\\sqrt{\\pi \\sigma^2}} e^{-\\left(\\frac{\\left(x-x_0\\right)^2+\\left(y-y_0\\right)^2}{2 \\sigma^2}\\right)} e^{-i 2 \\pi \\pi_0\\left(\\left(x-x_0\\right) \\cos \\theta+\\left(y-y_0\\right) \\sin \\theta\\right)}$$\n$$\\begin{array}{ll}\n-x_0, y_0 \\text { - central position } \u0026 -\\theta \\text { - orientatio } \\mathrm{n} \\text { of the wavelet } \\\\\n-f_0  \\text { - central frequency } \u0026 -\\sigma \\text { - width of the wavelet }\n\\end{array}$$\n\n#### Applications of Gabor Wavelets\n1. Texture Modelling and Analysis\n\t1. Iris texture measurements for security systems\n\t2. Face feature extraction for automatic face recognition systems\n2. Image coding\n3. Image restoration\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230224184042.png)\n\n# Intensity and Spatial Processing Techniques\n\n## Image Histogram\nA histogram shows the number of pixels for each gray scale in an image\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230224184222.png)\n\n## Image Scaling\nSometimes the gray scales in an image are outside of the standard range  \n\\[0 ‚Äì 255\\]\nIn such cases, image scaling (or normalisation) is required to  \nmap the gray scales to the standard range\nMethods for image scaling:\n1. Linear scaling\n2. Linear scaling with clipping\n3. Absolute value scaling\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230224184658.png)\n\n## Histogram Stretching\nSometimes the histogram of the original image is too narrow leading to poor  \nvisibility\nIn order to enhance the image, a histogram stretching technique is used  \nto simply stretch the domain of the histogram using linear scaling methods\n![|300](notes/Biometrics/Images/Pasted%20image%2020230224185422.png)\n\n# Edge Detection\n\n**Edge** - Sharp change in intensity\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230224215448.png)\n\nBest way to find an edge is to take derivatives\n1. Detect local maxima of first derivative\n2. Detect the zero-crossing of the second derivative\n\n$$\n\\frac{\\partial I}{\\partial x} \\approx I(x+1, y)-I(x, y) \\rightarrow\n\\begin{array}{|l|l|}\n\\hline-1 \u0026 1 \\\\\n\\hline\n\\end{array}$$\n\n$$\\frac{\\partial I}{\\partial y} \\approx I(x, y+1)-I(x, y) \\rightarrow\n\\begin{array}{|c|}\n\\hline-1 \\\\\n\\hline 1 \\\\\n\\hline\n\\end{array}$$\n\nBy convolving these masks with the original image the partial derivatives can be calculated\n\n## Prewitt Masks\n$$\n\\begin{array}{|c|c|c|}\n\\hline-1 \u0026 -1 \u0026 -1 \\\\\n\\hline 0 \u0026 0 \u0026 0 \\\\\n\\hline 1 \u0026 1 \u0026 1 \\\\\n\\hline\n\\end{array}\n\\hspace{1em}\n\\begin{array}{|c|c|c|}\n\\hline-1 \u0026 0 \u0026 1 \\\\\n\\hline-1 \u0026 0 \u0026 1 \\\\\n\\hline-1 \u0026 0 \u0026 1 \\\\\n\\hline\n\\end{array}$$\n\n## Sobel Masks\nSmooths the image before edge detection\n\n$$\\begin{array}{|c|c|c|}\n\\hline-1 \u0026 -2 \u0026 -1 \\\\\n\\hline 0 \u0026 0 \u0026 0 \\\\\n\\hline 1 \u0026 2 \u0026 1 \\\\\n\\hline\n\\end{array}\n\\hspace{1em}\n\\begin{array}{|c|c|c|}\n\\hline-1 \u0026 0 \u0026 1 \\\\\n\\hline-2 \u0026 0 \u0026 2 \\\\\n\\hline-1 \u0026 0 \u0026 1 \\\\\n\\hline\n\\end{array}$$\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230224221833.png)\n\n## Laplacian of Gaussian (LoG)\nIn order to find edges of an image, LoG filter is convolved with the image and the zero-crossings of the filtered image is considered as edges\nThe Gaussian filter smoothes the edges before edge detection\nA threshold can be used to determine how big the difference is between neighbouring pixels of a zero-crossing\n\n# Feature Extraction or whatever\n\n# Object Description\n\n## Desirable Properties\n\n- Complete - Different objects must have different descriptions  \n- Congruent - Similar objects must have similar descriptors  \n- Compact - Efficient. I.e., quantity of information  \n- Invariant - Recognise independent of changes  \n\t- Illumination  \n\t- Geometry: Scale, Translation, Rotation\n\n### Invariance\nRecognise independent of orientation\n![|200](notes/Biometrics/Images/Pasted%20image%2020230319001205.png)\n\nCan lead to ambiguities\n![|200](notes/Biometrics/Images/Pasted%20image%2020230319001229.png)\n\n## Region Description\n\n### Area\n![|400](notes/Biometrics/Images/Pasted%20image%2020230319001342.png)\n![|400](notes/Biometrics/Images/Pasted%20image%2020230319001355.png)\n\n### Perimeter\n![|400](notes/Biometrics/Images/Pasted%20image%2020230319001412.png)\n![|400](notes/Biometrics/Images/Pasted%20image%2020230319001422.png)\n\n### Compactness\nMeasures the efficiency with which a boundary encloses an area\n![|500](notes/Biometrics/Images/Pasted%20image%2020230319001455.png)\n![|400](notes/Biometrics/Images/Pasted%20image%2020230319001505.png)\n\n#### Examples\n![|500](notes/Biometrics/Images/Pasted%20image%2020230319001536.png)\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230319001554.png)\n\n### Dispersion\nMeasures the occupancy as the ratio between the area of the circle enclosing the region and the area of the region\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230319001629.png)\n\nCan alternatively be measured as the ratio between the circle enclosing and contained inside the region\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230319001702.png)\n\n### Moments\nConsider the region as a distribution\n$$\nm_{p, q}=\\sum_x \\sum_y x^p y^q I(x, y) \\Delta A\n$$\nZero-order: Total Mass\n$$\nm_{0,0}=\\sum_x \\sum_y I(x, y) \\Delta A\n$$\nFirst-order/Centre of mass\n$$\nm_{1,0}=\\sum_x \\sum_y x I(x, y) \\Delta A \\quad m_{0,1}=\\sum_x \\sum_y y I(x, y) \\Delta A\n$$\nLocation of centre of mass\n$$\n\\begin{aligned}\n\u0026\\bar{x}=\\frac{m_{1,0}}{m_{0,0}}\\\\\n\u0026\\bar{y}=\\frac{m_{0,1}}{m_{0,0}}\n\\end{aligned}\n$$\n![|200](notes/Biometrics/Images/Pasted%20image%2020230319001931.png)\n\n#### Invariance\n![|500](notes/Biometrics/Images/Pasted%20image%2020230319001957.png)\n\n#### Centralised Moments (Translation Invariant)\n![|400](notes/Biometrics/Images/Pasted%20image%2020230324205737.png)\n![|400](notes/Biometrics/Images/Pasted%20image%2020230324205752.png)\n\n#### First-Order Centralised Moments\n$$\n\\begin{gathered}\n\\mu_{1,0}=\\sum_x \\sum_y(x-\\bar{x}) I(x, y) \\Delta A \\\\\n\\mu_{1,0}=\\sum_x \\sum_y x I(x, y) \\Delta A-\\sum_x \\sum_y^{-} \\bar{x} I(x, y) \\Delta A \\\\\n\\mu_{1,0}=\\sum_x \\sum_y x I(x, y) \\Delta A-\\bar{x} \\sum_x \\sum_y I(x, y) \\Delta A \\\\\n\\mu_{1,0}=m_{0,1}-\\frac{m_{0,1}}{m_{0,0}} m_{0,0} \\\\\n\\mu_{1,0}=0\n\\end{gathered}\n$$\n\n#### Second-Order Centralised Moments\n$$\n\\begin{gathered}\n\\mu_{2,0}=\\sum_x \\sum_y(x-\\bar{x})^2 I(x, y) \\Delta A \\\\\n\\mu_{2,0}=\\sum_x \\sum_y\\left(x^2-2 x \\bar{x}+\\bar{x}^2\\right) I(x, y) \\Delta A \\quad \\bar{x}=\\frac{m_{1,0}}{m_{0,0}} \\\\\n\\mu_{2,0}=m_{2,0}-2 m_{1,0} \\frac{m_{1,0}}{m_{0,0}}+\\left(\\frac{m_{1,0}}{m_{0,0}}\\right)^2 m_{0,0} \\\\\n\\mu_{2,0}=m_{2,0}-\\frac{m^2{ }_{1,0}}{m_{0,0}}\n\\end{gathered}\n$$\n\n#### Example of Centralised Moments\n![|500](notes/Biometrics/Images/Pasted%20image%2020230324210427.png)\n\n#### Normalised Central Moments (Scale Invariant)\nThe normalised central moment of order (p+q) is obtained by dividing the central moment of the same order by a normalisation factor\n$$\n\\begin{gathered}\nx^{\\prime}=k x \\quad y^{\\prime}=k y \\\\\n\\eta_{p q}=\\frac{\\mu_{p q}}{\\mu_{00}^\\gamma} \\\\\n\\gamma=\\frac{p+q}{2}+1 \\quad \\forall p+q \\geq 2\n\\end{gathered}\n$$\n\n#### Second-Order Normalised Centralised Moments\n$$\n\\begin{aligned}\n\u0026 \\eta_{2,0}=\\frac{\\mu_{20}}{\\mu_{00}^\\gamma} \\quad \\gamma=\\frac{2+0}{2}+1=2 \\\\\n\u0026 \\mu_{2,0}=m_{2,0}-\\frac{m_{1,0}^2}{m_{0,0}} \\quad \\quad \\mu_{0,0}=m_{0,0} \\\\\n\u0026 \\eta_{2,0}=\\frac{m_{2,0}}{m_{0,0}^2}-\\frac{m^2{ }_{1,0}}{m^3{ }_{0,0}} \\\\\n\u0026\n\\end{aligned}\n$$\n\n#### Invariant Moments (Rotation Invariant)\n$$\n\\begin{aligned}\nM 1= \u0026 \\eta_{20}+\\eta_{02} \\\\\nM 2= \u0026 \\left(\\eta_{20}-\\eta_{02}\\right)^2+4 \\eta_{11}^2 \\\\\nM 3= \u0026 \\left(\\eta_{30}-3 \\eta_{12}\\right)^2+\\left(3 \\eta_{21}-\\eta_{03}\\right)^2 \\\\\nM 4= \u0026 \\left(\\eta_{30}+\\eta_{12}\\right)^2+\\left(\\eta_{21}+\\eta_{03}\\right)^2 \\\\\nM 5= \u0026 \\left(\\eta_{30}-3 \\eta_{12}\\right)\\left(\\eta_{30}+\\eta_{12}\\right)+\\left(\\left(\\eta_{30}+\\eta_{12}\\right)^2-3\\left(\\eta_{21}-\\eta_{03}\\right)^2\\right)+ \\\\\n\u0026 \\left(3 \\eta_{21}-\\eta_{03}\\right)\\left(\\eta_{21}+\\eta_{03}\\right)\\left(3\\left(\\eta_{30}+\\eta_{12}\\right)^2-\\left(\\eta_{21}+\\eta_{03}\\right)^2\\right) \\\\\nM 6= \u0026 \\left(\\eta_{20}-\\eta_{02}\\right)\\left(\\left(\\eta_{30}+\\eta_{12}\\right)^2-\\left(\\eta_{21}+\\eta_{03}\\right)^2\\right)+4 \\eta_{11}\\left(\\eta_{30}+\\eta_{12}\\right)\\left(\\eta_{21}+\\eta_{03}\\right) \\\\\nM 7= \u0026 \\left(3 \\eta_{21}-\\eta_{03}\\right)\\left(\\eta_{30}+\\eta_{12}\\right)\\left(\\left(\\eta_{30}+\\eta_{12}\\right)^2-3\\left(\\eta_{21}+\\eta_{03}\\right)^2\\right)+ \\\\\n\u0026 \\left(3 \\eta_{12}-\\eta_{30}\\right)\\left(\\eta_{21}+\\eta_{03}\\right)\\left(3\\left(\\eta_{12}+\\eta_{30}\\right)^2-\\left(\\eta_{21}+\\eta_{03}\\right)^2\\right)\n\\end{aligned}\n$$\n#### Invariant Moments\n$$\n\\begin{gathered}\nM=\\eta_{20}+\\eta_{02} \\\\\n\\eta_{2,0}=\\frac{\\mu_{20}}{\\mu_{00}^2} \\quad \\eta_{0,2}=\\frac{\\mu_{02}}{\\mu_{00}^2} \\\\\nM=\\frac{\\mu_{20}+\\mu_{20}}{\\mu_{00}^2}\n\\end{gathered}\n$$\n\n#### Example Invariant Moments\n![|500](notes/Biometrics/Images/Pasted%20image%2020230324212206.png)\n\n#### Advantages of Moments\n- Work on grey scale as well as binary objects\n- Can utilise pixel brightness\n- Access to detail\n\n#### Disadvantages of Moments\n- Assumes only one object present\n- Computationally expensive\n- High order moments\n- Large numbers\n- Sensitive to noise\n\n## Shape Description\n\n**Drawbacks**\n- Difficult to extract curves from images\n- Ambiguous (many objects can have similar shapes)\n- Analytic complexity in many areas\n\nBoundary/ Shape description\n- Discrete\n\t- Chain Codes\n\t- Run-Length Codes\n\t- Extreme points\n- Curves\n\t- Polynomials\n\t- Splines\n\t- Wavelets\n\t- Fourier\n- Properties (Discrete/Curve)\n\t- Length\n\t- Curvature\n\t- Bending energy\n\t- Convexity\n\n### Fourier Descriptors\n1. Have image and template image\n2. Take boundaries of both\n3. Find Fourier Expansion of boundaries\n4. Convert to Fourier Descriptors of boundaries\n\n![|600](notes/Biometrics/Images/Pasted%20image%2020230325164834.png)\n\n#### Common Fourier Descriptors\n**Polar** Fourier Descriptors (angular)  \n- Cumulative Angular Function  \n- Fourier Series (trigonometric form) \n\n**Elliptic** Fourier Descriptors  \n- Complex Curve  \n- Fourier Series (complex/trigonometric form)\n\n#### Elliptic Fourier Descriptors\nBasic approach\n1. To obtain a complex function from the 2D curve  \n2. To perform a Fourier expansion  \n3. To define descriptors from Fourier coefficients\n\n##### Complex curve\n![|400](notes/Biometrics/Images/Pasted%20image%2020230325170327.png)\n\n##### Alternative Definitions\n![|500](notes/Biometrics/Images/Pasted%20image%2020230325170433.png)\n\n##### Trigonometric Expansion\n![|600](notes/Biometrics/Images/Pasted%20image%2020230325170930.png)\n\n![|600](notes/Biometrics/Images/Pasted%20image%2020230325171013.png)\n\n##### Trigonometric Form\n$$\n\\begin{array}{ll}\na_{x k}=\\frac{2}{T} \\int_0^T x(t) \\cos (k \\omega t) d t \u0026 a_{y k}=\\frac{2}{T} \\int_0^T y(t) \\cos (k \\omega t) d t \\\\\nb_{x k}=\\frac{2}{T} \\int_0^T x(t) \\sin (k \\omega t) d t \u0026 b_{y k}=\\frac{2}{T} \\int_0^T y(t) \\sin (k \\omega t) d t\n\\end{array}\n$$\n\n##### Discrete Computation\n$$\n\\begin{array}{lll}\na_{x k}=\\frac{2}{m} \\sum_{i=1}^m x_i \\cos (k \\omega i \\tau) \u0026 \\text { and } \u0026 b_{x k}=\\frac{2}{m} \\sum_{i=1}^m x_i \\sin (k \\omega i \\tau) \\\\\na_{y k}=\\frac{2}{m} \\sum_{i=1}^m y_i \\cos (k \\omega i \\tau) \u0026 \\text { and } \u0026 b_{y k}=\\frac{2}{m} \\sum_{i=1}^m y_i \\sin (k \\omega i \\tau)\n\\end{array}\n$$\n\n##### Basic Approach\n1. To obtain a complex function from the 2D curve\n$$\nc(t)=x(t)+j y(t)\n$$\n2. To perform a Fourier expansion\n$$\n\\left[\\begin{array}{l}\nx(t) \\\\\ny(t)\n\\end{array}\\right]=\\frac{1}{2}\\left[\\begin{array}{l}\na_{x 0} \\\\\na_{y 0}\n\\end{array}\\right]+\\sum_{k=1}^{\\infty}\\left[\\begin{array}{ll}\na_{x k} \u0026 b_{x k} \\\\\na_{y k} \u0026 b_{y k}\n\\end{array}\\right]\\left[\\begin{array}{c}\n\\cos (k \\omega t) \\\\\n\\sin (k \\omega t)\n\\end{array}\\right]\n$$\n3. To define descriptors from Fourier Coefficients\n\n##### Invariant Descriptors\n$$\n\\left[\\begin{array}{l}\nx(t) \\\\\ny(t)\n\\end{array}\\right]=\\frac{1}{2}\\left[\\begin{array}{l}\na_{x 0} \\\\\na_{y 0}\n\\end{array}\\right]+\\sum_{k=1}^{\\infty}\\left[\\begin{array}{ll}\na_{x k} \u0026 b_{x k} \\\\\na_{y k} \u0026 b_{y k}\n\\end{array}\\right]\\left[\\begin{array}{c}\n\\cos (k \\omega t) \\\\\n\\sin (k \\omega t)\n\\end{array}\\right]\n$$\n###### Translation\n$$\n\\begin{gathered}\n{\\left[\\begin{array}{l}\nx^{\\prime}(t) \\\\\ny^{\\prime}(t)\n\\end{array}\\right]=\\frac{1}{2}\\left[\\begin{array}{l}\na_{x 0} \\\\\na_{y 0}\n\\end{array}\\right]+\\sum_{k=1}^{\\infty}\\left[\\begin{array}{ll}\na_{x k} \u0026 b_{x k} \\\\\na_{y k} \u0026 b_{y k}\n\\end{array}\\right]\\left[\\begin{array}{c}\n\\cos (k \\omega t) \\\\\n\\sin (k \\omega t)\n\\end{array}\\right]+\\left[\\begin{array}{l}\nt_x \\\\\nt_y\n\\end{array}\\right]} \\\\\n{\\left[\\begin{array}{l}\nx^{\\prime}(t) \\\\\ny^{\\prime}(t)\n\\end{array}\\right]=\\frac{1}{2}\\left[\\begin{array}{l}\na_{x 0}-t_x \\\\\na_{y 0}-t_y\n\\end{array}\\right]+\\sum_{k=1}^{\\infty}\\left[\\begin{array}{ll}\na_{x k} \u0026 b_{x k} \\\\\na_{y k} \u0026 b_{y k}\n\\end{array}\\right]\\left[\\begin{array}{c}\n\\cos (k \\omega t) \\\\\n\\sin (k \\omega t)\n\\end{array}\\right]}\n\\end{gathered}\n$$\n###### Translation Invariant\n$$\na_{x k}^{\\prime}=a_{x k} \\quad b_{x k}^{\\prime}=b_{x k} \\quad a_{y k}^{\\prime}=a_{y k} \\quad b_{y k}^{\\prime}=b_{y k} \\quad \\text { for } k \\neq 0\n$$\n\n###### Scale\n$$\n\\left[\\begin{array}{l}\nx^{\\prime}(t) \\\\\ny^{\\prime}(t)\n\\end{array}\\right]=\\frac{1}{2}\\left[\\begin{array}{l}\na_{x 0} \\\\\na_{y 0}\n\\end{array}\\right]+s \\sum_{k=1}^{\\infty}\\left[\\begin{array}{ll}\na_{x k} \u0026 b_{x k} \\\\\na_{y k} \u0026 b_{y k}\n\\end{array}\\right]\\left[\\begin{array}{c}\n\\cos (k \\omega t) \\\\\n\\sin (k \\omega t)\n\\end{array}\\right]\n$$\n###### Scale Invariant\n$$\n\\frac{a_{x k}^{\\prime}}{a_{x 1}^{\\prime}}=\\frac{a_{x k}}{a_{x 1}} \\quad \\frac{b_{x k}^{\\prime}}{b_{x 1}^{\\prime}}=\\frac{b_{x k}}{b_{x 1}} \\quad \\frac{a_{y k}^{\\prime}}{a_{y 1}^{\\prime}}=\\frac{a_{y k}}{a_{y 1}} \\quad \\frac{b_{y k}^{\\prime}}{b_{y 1}^{\\prime}}=\\frac{b_{y k}}{b_{y 1}} \\quad \\text { for } k \\neq 0\n$$\n\n###### Rotation\n$$\n\\begin{aligned}\n\u0026 {\\left[\\begin{array}{l}\nx^{\\prime}(t) \\\\\ny^{\\prime}(t)\n\\end{array}\\right]=\\frac{1}{2}\\left[\\begin{array}{l}\na_{x 0} \\\\\na_{y 0}\n\\end{array}\\right]+\\left[\\begin{array}{cc}\n\\cos (\\rho) \u0026 \\sin (\\rho) \\\\\n-\\sin (\\rho) \u0026 \\cos (\\rho)\n\\end{array}\\right]_{k=1}^{\\infty}\\left[\\begin{array}{ll}\na_{x k} \u0026 b_{x k} \\\\\na_{y k} \u0026 b_{y k}\n\\end{array}\\right]\\left[\\begin{array}{c}\n\\cos (k \\omega t) \\\\\n\\sin (k \\omega t)\n\\end{array}\\right]} \\\\\n\\\\\n\u0026 a_{x k}^{\\prime}=a_{x k} \\cos (\\rho)+a_{y k} \\sin (\\rho) \\quad b_{x k}^{\\prime}=b_{x k} \\cos (\\rho)+b_{y k} \\sin (\\rho) \\\\\n\u0026 a_{y k}^{\\prime}=-a_{x k} \\sin (\\rho)+a_{y k} \\cos (\\rho) \\quad b_{y k}^{\\prime}=-b_{x k} \\sin (\\rho)+b_{y k} \\cos (\\rho) \\\\\n\u0026 a_{x 0}^{\\prime}=a_{x 0} \\quad a_{y 0}^{\\prime}=a_{y 0}\n\\end{aligned}\n$$\n\n##### Example\n![|600](notes/Biometrics/Images/Pasted%20image%2020230325172343.png)\n\n![|300](notes/Biometrics/Images/Pasted%20image%2020230325172406.png)\n\n##### Multiscale\n![|500](notes/Biometrics/Images/Pasted%20image%2020230325172642.png)\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230325172707.png)\n\n","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Biometrics/Face-and-Fingerprint":{"title":"Face and Fingerprint","content":"\n# Processes\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230225191833.png)\n\n# Fingerprints\n\n## Fingerprint Sensors\n\n### Optical Fingerprint Sensors\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230225191908.png)\n\n### Capacitive Fingerprint Sensors\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230225191932.png)\n\n## Fingerprint Pattern 1\n\nFingerprint is a set of ridges\n\n**Macro-singularities**:\n- Arch\n- Loop\n- Whorl\n\n![|600](notes/Biometrics/Images/Pasted%20image%2020230225192444.png)\n\n## Fingerprint Pattern 2\n\n**Minutiae**/**Galton's Characteristics**:\n- Terminations - End points\n- Bifurcations - Splitting points\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230225192756.png)\n\n## Fingerprint Pattern 3\n\n### Dependent on Resolution\n\n#### High\n##### Sweat Pores\n![|300](notes/Biometrics/Images/Pasted%20image%2020230225193404.png)\n\n#### Medium\n##### Incipient Ridges\n![|300](notes/Biometrics/Images/Pasted%20image%2020230225193518.png)\n\n#### Low\n##### Minutiae (And Creases)\n![|300](notes/Biometrics/Images/Pasted%20image%2020230225193553.png)\n\n## Basic Enhancement\n\n### Histogram Equalisation\nUsed to whiten whites and blacken blacks\n![|400](notes/Biometrics/Images/Pasted%20image%2020230225193846.png)\n\n## Basic Filtering\n\n### Median Filtering\nUsed to average out noise\n![|400](notes/Biometrics/Images/Pasted%20image%2020230225193919.png)\n\n## Basic Feature Extraction\n\n### Thresholding\nSharpens contrast\n![|400](notes/Biometrics/Images/Pasted%20image%2020230225194031.png)\n\n## Enhancements\n\n![|600](notes/Biometrics/Images/Pasted%20image%2020230318235333.png)\n\nImage normalization to have a specific mean and variance  \nOrientation estimation by using the angle of gradient of the image  \nLocal frequency of the image is estimated  \nIs the local feature recoverable or not? Compose a mask for regions which are recoverable\nA bank of Gabor filters tuned to local ridge orientation and ridge frequency is applied\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230318235450.png)\n\n## Recognition Approaches\n\n### Minutiae\nChoose maximum alignment of minutiae pairings\n![|300](notes/Biometrics/Images/Pasted%20image%2020230318235544.png)\n\n#### Minutiae Detection\n\n##### Termination Minutia\n![|200](notes/Biometrics/Images/Pasted%20image%2020230318235842.png)\n\n##### Bifurcation Minutia\n![|200](notes/Biometrics/Images/Pasted%20image%2020230318235906.png)\n\n##### False Minutia\n![|200](notes/Biometrics/Images/Pasted%20image%2020230318235927.png)\n\n#### Matching Minutiae\nCreate feature vector\n![|400](notes/Biometrics/Images/Pasted%20image%2020230319000028.png)\n\n### Correlation\nMaximise match between fingerprint images\n![|300](notes/Biometrics/Images/Pasted%20image%2020230318235619.png)\n\nHolistic fingerprint recognition using Gabor filters\n![|600](notes/Biometrics/Images/Pasted%20image%2020230319000231.png)\n\n### Ridges\nMaximise match of selected ridge features\n- Local orientation\n- Frequency\n- Shape\n- Texture\n\n#### Texture Based Matching\n![|500](notes/Biometrics/Images/Pasted%20image%2020230319000315.png)\n\n## Challenges\n\n- Pressure/ skin deformation - nonlinear change in appearance  \n- Image quality and forensic use  \n- Skin condition ‚Äì effect of drugs  \n- Legal issues ‚Äì is a fingerprint unique and permanent?\n\n### Pressure Correction 1\n![|600](notes/Biometrics/Images/Pasted%20image%2020230319000434.png)\n\n### Pressure Correction 2\n![|600](notes/Biometrics/Images/Pasted%20image%2020230319000451.png)\n\n# Face Recognition\n\n## Approaches\n\n- Holistic - Image as a whole\n- Model Based - Recognition by parts\n\n## Eigenface Overview\n\n1. Calculate a set of weights based on the input image and the $M$ eigenfaces by projecting the input image onto each of the eigenfaces.\n2. Determine if the image is a face at all (whether known or unknown) by checking to see if the image is sufficiently close to \"face space.\"\n3. If it is a face, classify the weight pattern as either a known person or as unknown.\n4. (Optional) Update the eigenfaces and/or weight patterns.\n5. (Optional) If the same unknown face is seen several times, calculate its characteristic weight pattern and incorporate into the known faces.\n\n### Principal Component Analysis (PCA)\n![|600](notes/Biometrics/Images/Pasted%20image%2020230324190404.png)\n\n![|600](notes/Biometrics/Images/Pasted%20image%2020230324190426.png)\n\n### Eigenface Approach\n1. Collect image dataset (multiple samples with variation in expression and lighting. (Say four images of ten people, so $M=40$.)\n2. Calculate the $(40 \\times 40)$ matrix $L$, find its eigenvectors and eigenvalues, and choose the $M^{\\prime}$ eigenvectors with the highest associated eigenvalues. (Let $M^{\\prime}=$ 10 in this example.)\n3. Combine the normalized training set of images to produce the $\\left(M^{\\prime}=10\\right)$ eigenfaces\n4. For each known individual, calculate the class vector by averaging the eigenface pattern vectors per subject. Choose thresholds for face class, and face space.\n5. For new face image calculate pattern vector and distances to classes, to face space. If the minimum distances \u003c threshold, face class identified\n6. If the new image is known, this image may be added to the original set of familiar face images, and the eigenfaces may be recalculated\n\n## Haar Wavelets\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230324190615.png)\n\n## Face Databases\n\n- FERET\n- Notre Dame HumanID\n- University of Texas Video Database\n\n## Face Recognition in Changing Illumination\n\n### Intensity and Spatial Processing Techniques\n#### Histogram Equalisation\nThe integration of a probability distribution function is known as cumulative distribution function (cdf), i.e:\n$$\nC(X)=\\int_0^X p(x) d x\n$$\nLet us consider a histogram as a pdf. The objective of histogram equalisation is to process the original image so that the cdf of the processed image becomes a linear function(or the pdf becomes uniform).\nTherefore we need to find a transformation function $s=T(r)$ so that the histogram of the processed image is uniform ($r$ and $s$ are the grey scales of the original and processed images respectively).\nAccording to the probability laws, the following equation should hold for the histograms of the original $p_r(r)$ and processed $p_s(s)$ images\n$$\n\\int_0^s p_s(S) d S=\\int_0^r p_r(T) d T\n$$\n![|600](notes/Biometrics/Images/Pasted%20image%2020230324191515.png)\n\n#### Method\n![|600](notes/Biometrics/Images/Pasted%20image%2020230324191833.png)\n\n#### Varying Gamma\n$V_{\\text {out }}=V_{i n}^\\gamma$\nGiven the half left of the face image as a reference, we can locally set gammas to change the image in the darker areas to become as bright as the left part\nMasking is optional and may be used to leave out facial hairs\nHistogram equalisation followed by:\n$$(a=0.1, \\tau=10)$$\n$$I(x, y)=\\frac{I(x, y)}{\\left(\\operatorname{mean}(\\min (\\tau, I(x, y)))^a\\right)^{\\frac{1}{a}}}$$\n\n![|150](notes/Biometrics/Images/Pasted%20image%2020230324192126.png)\n\n#### Local Binary Patterns\n$1$ if greater than or equal to the middle value\n$0$ if less than the middle value\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230324192601.png)\n\nLeft table is without preprocessing\nRight table is with preprocessing\nVariability of the differently lit faces is reduced\n![|500](notes/Biometrics/Images/Pasted%20image%2020230324192836.png)\n\n## Multiple Features\n\n![|600](notes/Biometrics/Images/Pasted%20image%2020230324193022.png)\n\n## Challenges in Face Recognition\n\n- Lighting/ illumination  \n- Viewpoint  \n- Occlusion  \n- Resolution  \n- Facial expression  \n- Ageing  \n- Make-up/ cosmetics\n\n## Gabor Wavelet Facial Expression Analysis\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230324201416.png)\n\n## Component Facial Expression Analysis\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230324202207.png)\n\n## Active Shape Models\n\n- Label face points in training data\n- Compress data using PCA\n- Evaluate eigenvectors\n- Acquire face image\n- Iterate model to find face features\n- Determine feature vector\n- Active appearance models include texture\n\n![|200](notes/Biometrics/Images/Pasted%20image%2020230324203826.png)\n\n![|600](notes/Biometrics/Images/Pasted%20image%2020230324204147.png)\n\n## Face De-ageing\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230324204820.png)\n\n## Age Estimation\n\n![|600](notes/Biometrics/Images/Pasted%20image%2020230324205413.png)\n\n","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Biometrics/Gait-Biometrics":{"title":"Gait Biometrics","content":"\n**Advantages**\n- Perceivable at a distance\n- Hard ot disguise\n\n**Potential Applications**\n- Security\n- Surveillance\n- Immigration\n- Forensics\n- Medicine\n\n# Databases\n\n## Early UCSD Data\n\n- 6 Subjects\n- 7 Sequences\n- Sony Hi8 Video camera\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230325173228.png)\n\n## HiD (NIST) Database\n\n- Acquired by NIST/ USF on DARPA  \n- Human ID at a Distance (HiD) program  \n- 122 subjects  \n- Canon progressive scan 30 fps  \n- Included change in surface, shoe and luggage (covariates)  \n- Included evaluation protocol\n\n![|250](notes/Biometrics/Images/Pasted%20image%2020230325173332.png)\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230325173352.png)\n\n![|400](notes/Biometrics/Images/Pasted%20image%2020230325173416.png)\n\n## Southampton Data\n\n- 100 subjects  \n- Sony TRV900E digital camcorders  \n- Filmed indoors and outdoors  \n- Included covariate data for 12 subjects  \n- Also from HiD\n\n![|200](notes/Biometrics/Images/Pasted%20image%2020230325173500.png)\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230325173537.png)\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230325173557.png)\n\n## CASIA (B) Database\n\n- 24 subjects  \n- 11 Viewpoints  \n- Different clothing and carrying conditions\n\n![|250](notes/Biometrics/Images/Pasted%20image%2020230325173702.png)\n\n![|500](notes/Biometrics/Images/Pasted%20image%2020230325173718.png)\n\n![|600](notes/Biometrics/Images/Pasted%20image%2020230325173737.png)\n\n## Other Datasets\n\n- Old Southampton data  \n- CMU  \n- Wuhan  \n- Maryland  \n- MIT  \n- GATech  \n- Southampton Multibiometrics (face in video, gait, ear, semantics)\n\n# Techniques for Gait Extraction and Description\n\n#### Silhouette Descriptions (Common)\n- Established statistical analysis  \n- (Temporal) symmetry  \n- (Velocity) moments  \n- (Unwrapped) silhouette\n\n![|250](notes/Biometrics/Images/Pasted%20image%2020230325174117.png)\n\n#### Modelling Movement (Few)\n- Pendular thigh motion model  \n- Coupled and forced oscillator  \n- Anatomically-guided skeleton\n\n![|250](notes/Biometrics/Images/Pasted%20image%2020230325174137.png)\n\n## Velocity Moments\n\n- Extension of spatial moments  \n- Applied to silhouettes  \n- Selected by ANOVA\n\n$$\nA_{m n \\mu \\gamma}=\\frac{m+1}{\\pi} \\sum_{i=2}^{\\text {images }} \\sum_{x, y} U(i, \\mu, \\gamma) S(m, n) P_{i_{x, y}}\n$$\n\n$$\n\\begin{aligned}\n\u0026 A_{m n \\mu \\gamma}=\\text { Velocity Moment } \\\\\n\u0026 \\mathrm{U}(i, \\mu, \\gamma) \\propto v_x^\\mu v_y^\\gamma \\propto \\text { velocity } \\\\\n\u0026 \\mathrm{S}(m, n)=\\text { centralised moment } \\\\\n\u0026 \\quad P_{i x, y}=\\text { Pixel grey scale at }(x, y)\n\\end{aligned}\n$$\n\n![|300](notes/Biometrics/Images/gait%20moments.gif)\n\nTrying to walk differently:\n![|300](notes/Biometrics/Images/Pasted%20image%2020230325175410.png)\n\n![|300](notes/Biometrics/Images/gait%20moments%202.gif)\n\n## Average Silhouette\n\n- Popular technique for gait representation\n- Also called gait energy/entropy image\n\n![|300](notes/Biometrics/Images/Pasted%20image%2020230325175608.png)\n\n1. Background is taken from each frame and pixels thresholded resulting in a binary image\n![|150](notes/Biometrics/Images/Pasted%20image%2020230325175723.png)\n2. Normalize silhouettes by height to account for distance\n![|150](notes/Biometrics/Images/Pasted%20image%2020230325175802.png)\n3. Add all silhouettes together and divide by the number of frames\n4. Resulting image is the signature\n![|150](notes/Biometrics/Images/Pasted%20image%2020230325175840.png)\n\n### HiD Baseline Analysis\n- Form silhouette (background subtraction +)\n- Detect gait periods\n- Frame Similarity between centered Silhouettes\nFrame Similarity $=\\frac{\\text { Number of pixels in intersections }}{\\text { Number of pixels in Unions }}$\n- Estimate correlation of frame similarity between probe and gallery sequences\n- Similarity is median of max. correlation between gallery and probe sequences\n\n","lastmodified":"2023-04-19T18:54:04.027889347Z","tags":[]},"/notes/Comp-Systems-1/Comp-Systems-1":{"title":"Test","content":"\n\u003ciframe src=\"https://drive.google.com/file/d/1q78xK-34K3AUm_Y60ZwcAcf0Dm1aESrk/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Building-Machines-that-See":{"title":"Building Machines that See","content":"\n# Types of Computer Vision\n## Vision in the Wild - Used in everyday life\ne.g. Scanning pictures at a museum to find out more information about them\n## Robot Vision\nUsed to feed robots information about their environment\n## Industrial Vision\nUsed for checking products made in mass manufacture\n# Key Terms in Designing Vision Systems\nWhat you want your system to be\n- Robust\n- Repeatable\nAchieved by designing your system to be\n- Invariant\n- And applying Constraints\n# Robustness\nThe vision system must be robust to changes in its environment\ne.g. Changes in lighting, angle or position of the camera\n# Repeatability\nRepeatability is a measure of robustness\nMeans the system must work the same over and over, regardless of environmental changes\n# Invariance\nHardware and software can be designed to be invariant to certain environmental changes\n- e.g. You could design an algorithm to be invariant to illumination changes\nWhat you design into your system to make it more robust and repeatable\nInvariance to environmental factors helps achieve robustness and repeatability\n# Constraints\nConstraints are what you apply to the hardware, software and wetware (people) to make your computer vision system work in a robust, repeatable fashion\n- e.g. You constrain the system by putting it in a box so there can't be any illumination changes\n# Constraints in Industrial Vision\n![|400](https://remnote-user-data.s3.amazonaws.com/ODajJMej4bd2oz0CyYz_nlxUTCauZt6-eYUUAM7Xk4hkRqx6MPbQC9PUzCQeHrCtVfhqXXt8FbTEUdBY7Khq_eA6ydByqGJPQfq_XjyznF2E9wyKs_oh5s4Sl2GIIHvm.png) \n# Software Constraints\nProduction algorithms need to be fast\nIntelligent use of colour\n- Colour can help detect if something is wrong\nSimple, but incredibly fast algorithms\n- Hough transform is popular\n# Colour-Spaces\nThere are many ways of numerically representing colour\n- A single representation of all possible colours is called a colour-space\n- It is generally possible to convert from one colour-space to another by applying a mapping\n# RGB Colour-Space\nMost physical image sensors capture RGB\n- Most widely known space\n- \"Couples\" brightness (luminance) with R, G and B channels, meaning illumination invariance is difficult\n# **HSV Colour-Space**\n## Hue, Saturation, Value\n![|400](https://remnote-user-data.s3.amazonaws.com/h-whMTyDC02QmUaoomZcwhnrb44OBfony4R1TV9bvGKXT_Wimv5IfdP2_VCs4ZnI7lqHWnF7OcuH9DVS7eKN3yN5LrTw0Pdoq3Owa-ioKa6_Q38bYay4Ibxa0HJoYm__.png) \nHue encodes the pure value as an angle\n- e.g. Red = 0¬∞ = 360¬∞\nSaturation is how vibrant the colour is\nValue encodes the brightness\nSimple way to achieve invariance to lighting is to use just the H or H \u0026 S components\n# **Physical Constraints**\nExample in Mobile Vision\n- QR-codes are designed to be robust\n- But most software requires (constrains) the user to operate in a certain way\n\t- Within a certain area\n\t- Orientation - Approximately upright\n\t- Approximately stationary\n## Industrial vision is usually solved by applying simple computer vision algorithms and lots of physical constraints\n### Acquisition Hardware\n- Expensive camera\n- Optics filters\n### Environment\n- Enclosure\n- Lighting\n- Mounting\n## Example in Industrial Vision\nIlluminating a room of products travelling through it so the camera can better see the products\n## Example in Vision in the Wild\n### ANPR Constraints\n#### License plates are constrained in design\n- Material which reflects IR well\n- Dimensions\n- Easily recognisable font for camera\nLicense plate styles are different across the world, so most ANPR systems will only work with plates from a single country\n# **Unconstrained Vision**\nAs computers become more powerful and software techniques are developed to deal with invariance the need for constraints become less\nHowever, will always be the problem of optimising costs, and constraints can always help reduce costs","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Computer-Vision-ToC":{"title":"Computer Vision ToC","content":"#### [[notes/Computer Vision/Introduction|Introduction]]\n\n#### [[Eye and Human Vision]]\n\n#### [[Image Formation]]\n\n#### [[Image Sampling]]\n\n#### [[Point Operators]]\n\n#### [[Edge Detection]]\n\n#### [[Further Edge Detection]]\n\n#### [[Finding Shapes]]\n\n#### [[Finding More Shapes]]\n\n#### [[Building Machines that See]]\n\n#### [[Machine Learning for Pattern Recognition]]\n\n#### [[Covariance and Prinicpal Components]]\n\n#### [[Local Interest Points]]\n\n#### [[Local Features and Matching]]\n\n#### [[Consistent Matching]]\n\n#### [[Large Scale Image Search]]\n\n#### [[Image Classification and Auto Annotation]]","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Consistent-Matching":{"title":"Consistent Matching","content":"# Constrained Matching\nAssume we are given a number of correspondences between the interest points in a pair of images\n![|400](https://remnote-user-data.s3.amazonaws.com/eaiIjWPdu_I8cqT5l2Cx_FcUPLRmVowmdKTV0HVUFXehJVHviybk3ke3U4zrnYqrhaG-7f13aeUNAVaW4tkrje0cTfqMModRNqULHmCe2BacS5LM8OGYo5vWAZZEekJK.png) \nWe estimate which of the correspondences are inliers (e.g. correct) or outliers (e.g. incorrect/mismatches)\nWe assume there is a geometric mapping between the two scenes, that can help us eliminate the mismatches \n\n#### Geometric Mappings\n\n![|400](https://remnote-user-data.s3.amazonaws.com/s_ded5ZwlepxfNXL0upv6LEcv1XdAC2f7DntDbQmxthAdI0akbGF7JUAuEK2MunQKLWa5A8v-Cj2_e-lsO27bidg97zlED8VHHvEcwwNtLW168zk4hgOIog-bmuoOKee.png) \n\n# Point Transforms\nWe use point transforms of the form\n$$x'=Tx$$\nWhere\n- $x$ - the original coordinate\n- $x'$ - the transformed coordinate\n- $T$ - the transform matrix\n## Similarity Transform\nHas 4 Degrees of Freedom\n- Translation + Rotation + Scale\n## Aspect Ratio\n![|400](https://remnote-user-data.s3.amazonaws.com/9_Ls2O4_CLThyLytQtG2tzbakOPk-NAKLxiAqzKO-dsSNRQe81taqzye6MNjR2wxt3ft7UXupH2h4LT0fy7pqwMUctqZQRo5X3v543cWvWykC--ZkY1Sl4NAqNHeCVLe.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/kI7es1GN4mbQjcSwEvjIWjuy_rl_jMnEIiCFfvNGYftRfTVjVbLp8GPhaCs-CB3WHGj4m86FfK3mGPuHxwNE_Ljp11FDdCXyrzeChK7MHCbN53Yelm56ZYdRE7OfEkKO.png) \n## Affine Transform\nHas 6 Degrees of Freedom\nTranslation + Rotation + Scale + Aspect Ratio + Shear\n## The Affine Transform\nIt is more convenient to write this as a single transform matrix by adding an extra dimension to each vector\n![|400](https://remnote-user-data.s3.amazonaws.com/Pavhub8UGazgnMcKT7eoopwbI6jcdn0oxfqWbgzvL04qlYd7SQayjQLdjstGB4Xpco18_sAbAkV0vXC0wgSJwKcyWftD9m9ILZQBOjjltUJFZXOIZppvaQ9mxyHAoThH.png) \n**Defined as**\n![|400](https://remnote-user-data.s3.amazonaws.com/RUa3QjasjqgjwQMMmm8MFS3qShOjRWWCZXAxeeFMopes4jQ9ZRre_LdYwn2lEGotwHeE5dzV29rKBo8yP3sHDNx3jmY960NGbkr5zxoxQu6077WIEIIqHfeCCR1PfdEw.png) \n$$x'=Ax+b$$\n## Translation and Rotation\n![|400](https://remnote-user-data.s3.amazonaws.com/EGziOPVB4v7X9N4Wu58tE_BowSWrwVKRkA1iL1FiO05-gpMApn1WyHCZMzitVsUCmoKYq3A-vNFbZrdPgwYv01EhGI4YgAHBVWVCTZy8XCB9R1auL-YMAxzvK6QHlaKn.png) \n![|400](https://remnote-user-data.s3.amazonaws.com/UZIGqWE3ZOKwSFsRoWC5wCLjG6bXHT0pVeNFJ87J93YDVn9NlBoaPoGM2fW1jd_ReN-NlNCvvwhR8lwPcWGsekq2BYaAJReTjV1h7LMqBKaeWfmOzoYx_gNgE7chhyzN.png) \n## Translation\n![|400](https://remnote-user-data.s3.amazonaws.com/O27tW1bJ7ufWHowGCPjMfeEmo8S0608R80L5EwPHT1LKPk37ZfgE7IIWRF4BDZgSen_d_dYmb_42edflYmCqH4N0IV5UEA-cFMeiFnGnPdWLNGQTUwLs1usggwKLd7Sd.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/Iw5e_LhS-eEQ0vUFL2P1QqWS96vI3NPDV5_zjOH-qUXGfntunXPaWY99GE4kXNIiKF5oNgvQyh0vh9328DFVkhCTj80XgelzKOXHulQdQMltR-2ZARjeSnBA6XqhwQoL.png) \n## Shear\n![|400](https://remnote-user-data.s3.amazonaws.com/6o_BDxRdcYDo0ujXj0aj3weUlVdUsuJCrAhbuPjQod1hRyq0TFK7SDn156kfJGtSfOD10nyLyRx0beCO6v9_juTgCHvIhhDSbhzcgJHYZ7Ia3a-nmc1P70VFqymGMwlC.png) \n \n![|400](https://remnote-user-data.s3.amazonaws.com/VXQk6r-6gevZ2RdLsYhZ4s8dGn3VR8qcvlGUOizPTPwGdWVx0fUCOVlqQDY1U14Qe2Jhy_ehcIXK7A4ShmY72escOi3YcEcM3_otoIFq5edKDkbpqVqZDFLdlFrWTH1-.png) \n## Scaling\n![|400](https://remnote-user-data.s3.amazonaws.com/mMkcdsWQhspsAYfdMtrr429BexwUjFaBcQTura-yPHaYoHL1EyCRqJ7crOE2d4pUEKAY5TLz2m8uVgCCAfCDsepHuIH_YG1ul6RJ3v048VC83wSfoD8Vzs607N2VMhBp.png) \n![|400](https://remnote-user-data.s3.amazonaws.com/SOumd9ejjNadlsEedpGefhBIqJneSM6-MzQZpVrh5kyTvpZ4_pe5z4Jqa-x5xtkLWQWUHKfWhj1IVTKdqd0wMstv_etIJcjIg8Sc2Pw4OgJiuYHppYLzXubWmVes-Det.png) \nGeometric Transforms change the content of an image by applying a mapping\n- To Incorporate more Degrees of Freedom\n# Homogeneous Coordinates\nCoordinates are called homogeneous when they are modelled like this\n$$\\begin{bmatrix}\nwx'\\\\\nwy'\\\\\nw\n\\end{bmatrix}$$\n$$y'=v/w$$\nWe normalise by w so that the transformed vector is $$\\begin{bmatrix}\n\\cdot \u0026 \\cdot \u0026 1\n\\end{bmatrix}$$\n$$x'=u/w$$\ng and h will allow us to model perspective\n![|400](https://remnote-user-data.s3.amazonaws.com/T_idr1Ky53aBsKv2qN1rh29Y9Anu3v6HjmmEQARDhlUmDW6n-Zxq5m_U1HIeck-I8hBpvKsork7Mh2NP8GS8-jLJKhkKxdQ2PpcCjxfr2oZJEY-Ey4q102JdEE504GKL.png) \n \nThe Planar Homography (Projective Transformation)\n![|400](https://remnote-user-data.s3.amazonaws.com/T_idr1Ky53aBsKv2qN1rh29Y9Anu3v6HjmmEQARDhlUmDW6n-Zxq5m_U1HIeck-I8hBpvKsork7Mh2NP8GS8-jLJKhkKxdQ2PpcCjxfr2oZJEY-Ey4q102JdEE504GKL.png) \n$$x'=u/w$$\n$$y'=v/w$$\n$g$ and $h$ are the keystone distortions\nThey squish one side of the image to simulate a perspective change\n![|400](https://remnote-user-data.s3.amazonaws.com/ZB25yPRaMp214_rEXnE6jF9mwAz5G1LRws1LGsSmC0rmHQB0slpXzvt_b0qlS6_bkpP1B-9HkhmbXqIzkz8f5w9QOY3cRtU_CpwF2pTH3GYvq_iM29XhWQj_1YVRjtSb.png) \n\n# Recovering a Geometric Mapping\n## Simultaneous Equations\n### Least Squares\n![|400](https://remnote-user-data.s3.amazonaws.com/ng9x_dID0F7wLEYAYDfF4NpeKzlc3DiecM8ZuIQcLq421k589f7oVDqLRhIrxO7AMyCe_cc02HIAm1cwS5RAtgCdg5emUtEUDdwccPW6DMLwQouvLJnnXo0KhXxnQnix.png) \n![|400](https://remnote-user-data.s3.amazonaws.com/xQgpVj6qXDEhZtiCzIDfFRrk9giF8s3f5TplVZ8dWXqtwfmK41-Rxik-o5SW0Er0Ska8_sxoBkDTzwLa-2lTv2d3MML1HiTHO_YCVhRhpgnXXC509axfYUyLQCfszzkv.png) \nWe need to seek the minimum error, or least squares solution\nIn the presence of noise, and with potentially more matches than required, we have to solve an overdetermined system\nIt is possible to estimate a transform matrix from a set of point matches by solving a set of simultaneous equations\nWe need at least 4 point matches to solve a homography or 3 to solve an affine transform\n## Robust Estimation\n### RANSAC - RANdom SAmple Consensus\n#### We assume\n- M data items required to estimate model T\n- N data items in total\n#### Algorithm\n- Repeat steps 1 to 4 n times\n- If k is large enough, either accept T\n\t- Or compute the least-squares estimate using all inliers, and exit with success \n- Select M data items at random\n- Estimate model T\n- Fail - no good T fit of data\n- Find out how many of the N data items fir T within tolerance tol, call this k\n\t- The other points are the outliers\n\t- The points that have an absolute residual less than tol are the inliers\n\t- i.e. Compute how many times the absolute residual is less than tol\nNeed a way to deal with estimating a model (i.e. a transform matrix) in the presence of high amounts of noise (i.e. mis-matches)\nLeast squares will be sub-optimal and find a very bad solution\n \n# Applications of Robust Local Matching\n## 3D Reconstruction\nPossible to estimate depth, and ultimately build a complete 3d scene from sets of point correspondences formed from matching local features\n## Matching Music/Sounds\n### How Shazams aglorithms work\nA recording of a piece of music is turned into an image called a spectrogram\nLocal image features can be extracted, described and matched from the spectrogram images\n## Object Recognition \u0026 AR\n### Object Recognition\nImage of object is matched against scene, and recognised if there is a consistent match\n### Augmented Reality\nData can be added to a scene on the basis of a match\n\n# Problems with Direct Local Feature Matching\n## Local feature matching is slow\nTypical image may have ~2000 interest points/sift descriptors\nEach sift descriptor is 128 dimensions\n- Assuming your matching a query against a database of images...\n## Optimising\n### Hashing\nLocality Sensitive Hashing (LSH) creates hash codes for vectors such that similar vectors have similar hash codes\n### Efficient Nearest Neighbour Search\n#### K-D Trees\nK-D Tree Problems\n- Doesn't scale well to high dimensions\n\t- You end up needing to search most of the tree\n- There are approximate versions, which won't return the exact answer, which do scale\nBinary tree structure that partitions the space along axis-aligned hyperplanes\n##### Searching\n- Walk down the tree until a leaf is hit, then brute force search to find the best point in the leaf\n![|400](https://remnote-user-data.s3.amazonaws.com/wqzjPYyTj1FT0ayVve_9BdEQDt0AahN3li1V6gr98QINfjbJSI2pkHoSvO2GyQQ3BhEt5rDyGwldrQZRHVY4dPRs-n3q8eshO2dgGzZkihfkW2MKmBKTByxelZDM4oof.png) \n![|400](https://remnote-user-data.s3.amazonaws.com/68gnUfNyW2xE3SV9ZmdSMNpdbf7LcKhNiGFPjY5D-MIdlqlQuf8UXMn-IMGBLf5_di6XQa9izD3H_3CLoBRvsBk3VnCPNl65BQeyx8hFL0I6Ho5z0S8tR18d4Cl3yc3C.png) \nThen backtrack and see if the next subtree needs checking\n![|400](https://remnote-user-data.s3.amazonaws.com/FCC7HUmnpfsh9wg11FLIS27hd27K-s7UU5XtlrgFuI6SamgW3F4s8mWsYiOb0yGVDpWXRMNHL0Lf2QzmLQ0Pxw9C1vRW15U3qQsA6pb4wqdKyuxhBapRo_yZfpfn0VRX.png) \n- A subtree needs checking if the partition is closer to the query point than the current best found point\n- Then repeat the brute force process in each partition you check\n![|400](https://remnote-user-data.s3.amazonaws.com/wRxxlhhn_EkMc97cZ2mRBIg-uL84GSGiHcWnaCr-F-8VKhZdSytUAs9x7x6z-lPgj8U18r7OJtYGFP5xncaHaIjUXessKUkYz-oxKUL_TJ3zM3taob2elHqNleIVeQWU.png) \nStop after a certain depth, or when the number of points in a leaf is less than a threshold\nTypically take each dimension in turn and split it on the media of the points in the enclosing partition\n![|400](https://remnote-user-data.s3.amazonaws.com/R5MoeeRg4pvhfRFE9NyAwvU83PJS4NSayFleq7Faady61upmXilr0BLV0lrNaTn2phNyDeAlw5IFSA6y_uct6jRCdOQaIJ0UZXfgaQcKC3LXNVe40IlbVY0jSVlR2u8w.png)\n![|400](https://remnote-user-data.s3.amazonaws.com/Z_5j-0vw0DG3Ps8UYckeqow66lImGA9UkI3pvzF6tlwrpSSa0Tk28G503Gm5eztRcTpJXIKpqgn1SZgu5ysmLfcurnpnV7uhZn8GJQvgYjaB3UECNW8LWy6RF1y48Ry6.png) \n### Sketching\nWith the correct LSH function, the Hamming distance between a pair of sketches is proportional to the euclidean distance between the original vectors\nConcatenates binary hashes into a bit string\nCan compress sift features to 128 bits\n- Hamming distance computation is cheap \n","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Covariance-and-Prinicpal-Components":{"title":"Covariance and Prinicpal Components","content":"# Random Variables and Expected Values\nVariance and covariance are expressed in terms of random variables and expected values\nRandom Variable - A variable that takes on different values due to chance\n- The set of sample values from a single dimension of a featurespace can be considered to be a random variable\nThe expected value $E[X]$ is the most likely value a random variable will take\nWe will assume the values an element of a feature can take are equally likely\nSo the expected value is just the mean value\n# Variance\nVariance $\\sigma^2$ is the mean squared difference from the mean\nEffectively a measure of how spread-out the data is\n$$\\sigma^2(x)=\\frac{1}{n}\\sum\\limits_{i=1}^{n}(x_i-\\mu)^2$$\n# Covariance\nCovariance $\\sigma(x,y)$ measures how two variables change together\nIt is technically $E[(x-E[x])(y-E[y])]$\n$$\\sigma(x,y)=\\frac{1}{n}\\sum\\limits_{i=1}^{n}(x-\\mu_x)(y-\\mu_y)$$\nThe variance is the covariance when the two variables are the same (\\sigma(x,x)=\\sigma^2(x)) \nA covariance of 0 means the variables are uncorrelated\n\n# Covariance Matrix\nEncodes how all possible pairs of dimensions in an n-dimensional data set vary together\n$$\\Sigma=\\begin{bmatrix}\n\\sigma(X_1,X_1) \u0026 \\sigma(X_1,X_2) \u0026 ... \u0026 \\sigma(X_1,X_n)\\\\\n\\sigma(X_2,X_1) \u0026 \\sigma (X_2,X_2) \u0026 ... \u0026 \\sigma(X_2,X_n)\\\\\n... \u0026 ... \u0026 ... \u0026 ...\\\\\n\\sigma(X_n,X_1) \u0026 \\sigma(X_n,X_2) \u0026 ... \u0026 \\sigma(X_n,X_n)\n\\end{bmatrix}$$\nThe covariance matrix is a square symmetric matrix\n![|400](https://remnote-user-data.s3.amazonaws.com/Xpv_rK9URuvkjTvmpGlFKJi3i1z66oQ0zgbZm8O2mAkYZL8V-juD4R0jwgJvfbicBP-Q7FSuQVoMZaduhkm6MmdzlCCAow0NwAc99ZJW_8kgiUKUNdPmxhKaSOn5nzkd.png) \n# Mean Centring\nThe process of computing the mean (across each dimension independently) of a set of vectors, and then subtracting the mean vector from every vector in the set\nAll the vectors will be translated so their average position is the origin\n![|400](https://remnote-user-data.s3.amazonaws.com/0WtNAd-YtLPMBpuSI9ogei6eEVHvKyN1QbCYu9FsZm6tHM5pcvc2s3b9de9G7I4LhzIZyq6jHZ64HZ_pMTt5uMONEm9-Upc2geFKwsznX4hT0TNF5ZXedMMUe16sXIzY.png)\n\n# Covariance Matrix Properties\nConsider a matrix of mean centred featurevectors\n$$\\Sigma \\propto Z^TZ$$\nThe covariance matrix $\\Sigma$ is directly proportional to the transposed matrix $Z^T$ multiplied by the original matrix $Z$ \n\n# Principle Axes of Variation\n## Basis\nA set of n linearly independent vectors in an n dimensional space\n- Vectors are orthogonal\n- They form a \"coordinate system\"\n- There are an infinite number of possible basis\n## The First Principal Axis\nFor a given set of n dimensional data, the first principle axis (or principal axis) is the vector that describes the direction of greatest variance\n![|400](https://remnote-user-data.s3.amazonaws.com/uhMsBAdcESitpERI71YUhHnYOpm6QnhoHs-MF_1qFmw9CMTJPmsBduKPx1_DW858jzBPu-HoSC2lFK-M7npiPC645QHOuree3ecdgVZc9Std3DgKEr1SPuabjIS22gwI.png) \n## The Second Principal Axis\nThe second principal axis is a vector in the direction of greatest variance orthogonal (perpendicular) to the first major axis\n![|400](https://remnote-user-data.s3.amazonaws.com/RnGLZ2BrSw3A2sY-vCuU8mfQPsJoDUz45fJ-OKbwJ8S6n5rvMlQegDD0TB_t1SG4cvQVeNwpFQ7TqkfDYbo4HWkLHSwjJhFAsCuALb0CwFRgvCVzCW3OfGHfOXYE6zkr.png) \n## The Third Principal Axis\nIn spaces with 3 or more dimensions, the third principle axis is the direction of greatest variance orthogonal to both the first and second principal axes\nThe set of n principal axes of an n dimensional space are a basis\n\n# Eigenvectors and Eigenvalues\n$$\\colorbox{aqua}A \\colorbox{pink}v = \\colorbox{lightgreen}{Œª} \\colorbox{pink}v$$\nWhere\n- $\\colorbox{pink}{v}$ - An n dimensional vector, known as an eigenvector\n- $\\colorbox{lightgreen}Œª$ - A scalar value, known as an eigenvalue\n- $\\colorbox{aqua}A$ - An n\\times n square matrix\n\nThere are at most $n$ eigenvector-eigenvalue pairs\nIf A is symmetric, then the set of eigenvectors is orthogonal\n- The eigenvector corresponding to the largest eigenvalue is the first principle component\n- Therefore, if A is a covariance matrix, then the eigenvectors are the principal axes\n- The eigenvalues are proportional to the variance of the data along each eigenvector\n\n# Finding Eigenvectors and Eigenvalues\nFor small matrices (n\\leq 4) there are algebraic solutions to finding all the eigenvector-eigenvalue pairs\nFor larger matrices, numerical solutions to the Eigendecomposition must be sought\n\n# Eigendecomposition\nBreaks a matrix down into a matrix Q, a diagonal eigenvalue matrix \\Lambda (only has values along the diagonal) and the inverse of the first matrix $Q^{-1}$\n$$A=Q\\Lambda Q^{-1}$$\nIf A is real symmetric (i.e. a covariance matrix), then Q^{-1}=Q^T (i.e. eigenvectors are orthogonal), therefore\n$$A=Q\\Lambda Q^T$$\nSo the eigendecomposition of a covariance matrix $A$ ($A=Q\\Lambda Q^T$) gives you the principal axes and their relative magnitudes\n## Ordering\nSome solvers are optimised to only find the top k eigenvalues and corresponding eigenvectors, rather than all of them\nStandard eigendecomposition solver implementations will order the eigenvectors (columns of Q) such that the eigenvalues (in the diagonal of \\Lambda) are sorted in order of decreasing value\n\n# Principal Component Analysis\n## Linear Transform\nThe effects of a linear transform can be reversed if W is invertible\n$$Z=TW^{-1}$$\nThis is a lossy process if the dimensionality of the spaces is different\nA linear transform W projects data from one space into another\n$$T=ZW$$\nT can have fewer dimensions than Z\nWhere original data is stored in the rows of Z\n\n![|400](https://remnote-user-data.s3.amazonaws.com/oFScSOCtwOE-e_tKPq7rmZjxSk-yRxPsv5ePsgDyhn5FPYQn_e_lt4KECL0JLzKMj9SRW0sn25o3zjfw-KzX_G1jWeZAmwroCs--nqyXwvjNLZPo2smc6Z040ubnQU7B.png)\n\n![|400](https://remnote-user-data.s3.amazonaws.com/fYsdP0JJlZ03kGEGvFamo2GcGx3wMWAPFzROFDCIapsAhfOFIS70xf4wyrrzxqYIonYdlq7vfxrZprmAThjldz_MXOp2L_0chhTZj32JnEmMZJFL5a5grI6UC8n8J74u.png)\n## PCA\nPCA is an Orthogonal Linear Transform that maps data from its original space to a space defined by the principal axes of the data\nDimensionality reduction can be achieved by removing the eigenvectors with low eigenvalues from Q\ni.e. Keeping the first L columns of Q, assuming the eigenvectors are sorted by decreasing eigenvalue \nThe transform matrix W is just the eigenvector matrix Q from the eigendecomposition of the covariance matrix of the data\nMaps data from one dimension into another\n### PCA Algorithm\n1. Project the original vectors into a lower dimensional space $T_L$ \n$$T_L=ZQ_L$$\n2. Sort the columns of Q and the corresponding diagonal values of \\Lambda so that the eigenvalues are decreasing\n3. Select the L largest eigenvectors of Q (the first L columns) to create the transform matrix $Q_L$\n4. Form the vectors into a matrix Z, such that each row corresponds to a vector\n5. Perform the eigendecomposition of the matrix $Z^TZ$, to recover the eigenvector matrix Q and diagonal eigenvalue matrix $\\Lambda$\n$$Z^TZ=Q\\Lambda Q^T$$\n6. Mean-centre the data vectors\n\n# Eigenfaces (Eigenimages)\nFlatten a grey level image into a vector\n- Take each row and add it to the vector\n![|400](https://remnote-user-data.s3.amazonaws.com/RhCsaBmFGEPl3qN5wLBAW_UBjASkWSKB18VSZ3nDx_ml0cVcXTE5t3_iBZ8XNcwTTcKOVq_B4-nggF3DVlDIjmBqJzYpVSSxI8U5quvKSfCZq0hpHKfBofZitv_ZQMRG.png) \nThis causes some problems\n- Highly susceptible to image noise\n- It is not invariant to\n\t- Change in position/orientation/scale of the object in the image\n\t- Changes in lighting\n\t- Size of the image\n## Making it invariant\nAlign (rotate, scale and translate) the images so that a common feature is in the same place\n- i.e. The eyes in a set of face images\nRequire almost the same object pose across images\n- i.e. Faces facing the front\nMake all the aligned images the same size\nOptionally - Normalise (or histogram equalise) the images so they are invariant to global intensity changes\n## Another problem is the size of the featurevectors\nA potential solution is to apply PCA\n- Fewer dimensions makes applying machine learning much more tractable\n- PCA can be used to reduce the dimensionality\n- A smaller number of dimensions allows greater robustness to noise and mis-alignment\n\t- There are fewer degrees of freedom, so noise/mis-alignment has much less effect\n\t- And dominant features are captured\nIf the images are 100x200 pixels, the vector has 20000 dimensions\nThis is impractical and the vectors are highly susceptible to image noise and variations due to slight mis-alignments\n","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Edge-Detection":{"title":"Edge Detection","content":"\n![|400](https://remnote-user-data.s3.amazonaws.com/sjzgE4trwlwrkAVA4R_0__PK9PfqVHk-JAnL9C0ro5ou59LGVZbOshNpAQgYacbuR2CWffld7-sEZrG18pcnsbsTYtLJsAkLaQaHWvMIpDKRZrLhtLVfyiIUfjFClfo3.png) \n\nAn edge is contrast\n![|400](https://remnote-user-data.s3.amazonaws.com/sjzgE4trwlwrkAVA4R_0__PK9PfqVHk-JAnL9C0ro5ou59LGVZbOshNpAQgYacbuR2CWffld7-sEZrG18pcnsbsTYtLJsAkLaQaHWvMIpDKRZrLhtLVfyiIUfjFClfo3.png) \n \n# First Order Edge Detection\n## Horizontal Differencing\n![|400](https://remnote-user-data.s3.amazonaws.com/Sa8mSnJnkV2ZXL2zukAk2NJ48CkAsVfXT26AbQW7WhZ_ozP47Gq18_KSXeaPdT_uyQY4twh2mVwVnpxAoB4Tn6ylx7xGvt9q7W7_BpO0o3NyDz7zJAuac64Sg2NOkQWd.png) \nDetects vertical edges\nHorizontal Differencing‚ÜíCalculates the difference between the current point and the point to the right\n## Vertical DIfferencing\n![|400](https://remnote-user-data.s3.amazonaws.com/KLpQ4LDR9hc-RLSaOJKxY5KFWQz0-cr8yKdOS32FTFAPqattzNHRv_g8aC9X7kimWt40krDjNDOjxRS4NlXOuLF4TobPGMmSNbMOlt34OL7d5jdfzjf7ZCMM1-etUY2r.png) \nDetects horizontal edges\nVertical Differencing‚ÜíCalculates the difference between the current point and the point below\n## First order edge detection\nThe addition of the horizontal and vertical differences\n![|400](https://remnote-user-data.s3.amazonaws.com/l9zVepydsn9hP4GKSf0Uqi7xY5550MlTCWm-0fpJIndWKodBjMJ0S3e3j5t4rhkCxb5J6pbEuAhwBpdShuSbjj6BouZ5x1HQaQES0esiqu5p4LmACTYIrvDSqWnkZvlf.png) \n## Vertical Edge Formula\n$$Ex_{x,y}=|P_{x,y}-P_{x+1,y}|$$  \n## Horizontal Edge Formula\n$Ey_{x,y}=|P_{x,y}-P_{x,y+1}|$ \n\n## Vertical and Horizontal Edge Formula\n$E_{x,y}=|2\\cdot P_{x,y}-P_{x+1,y}-P_{x,y+1}|$  \n\nThis provides us a template\nThis is because it is 2 times the current point, minus one times the point to the right, minus one times the point below, and the other point is disregarded\n### Vertical and Horizontal Edge Template\n![|400](https://remnote-user-data.s3.amazonaws.com/KXshk05u4niLs68iUTPqWOZSChdrs-yNAoGTHmMW51avRDdqfXizfMm5WVRgzLwntUrb33rCINn1hvyjwRoQEkM2q_reywLov8zeSEy26bex1DtSa0gcqwkqormU6tIB.png) \n$$E_{x,y}=|2\\cdot P_{x,y}-P_{x+1,y}-P_{x,y+1}|$$\nIn code this looks like\n![|400](https://remnote-user-data.s3.amazonaws.com/KS1NSyj5Pw4gk7hpNH5_T91Q-SqKS6R-PPOHKmei5JrmT2Tv61ey__pioxYzbw6MB_KDx07MePvFlmwPbHe2GQ8etiU-Fhs8JCltOI_X1nn5uBaFznVkbxoi15_14Vdk.png) \n![|400](https://remnote-user-data.s3.amazonaws.com/l9zVepydsn9hP4GKSf0Uqi7xY5550MlTCWm-0fpJIndWKodBjMJ0S3e3j5t4rhkCxb5J6pbEuAhwBpdShuSbjj6BouZ5x1HQaQES0esiqu5p4LmACTYIrvDSqWnkZvlf.png) \n\n# Taylor Series\nUsed to approximate a function at a point further than where we currently are\n## Formula\n$f(t+\\Delta t)=f(t)+f'(t)\\Delta t+\\frac{f''(t)}{2!}(\\Delta t)^2 +\\frac{f'''(t)}{3!}(\\Delta t)^3+...+\\frac{f^n(t)}{n!}(\\Delta t)^n$  \n\n# Edge Detection Maths\nTaylor expansion for $f(x+\\Delta x)$\n$$f(x+\\Delta x)=f(x)+f'(x)\\Delta x+\\frac{f''(x)}{2!}(\\Delta x)^2 +O(\\Delta x^3)$$\nThis is equivalent to\nThe equivalent template is\n![|400](https://remnote-user-data.s3.amazonaws.com/v9fVvJ9dxe0s1HsgxAw5KJZTzMqBaqewMyGvNF7clbw_U-RRfNmiZBlOIzVe2LezaxDWp68_URYMeOksJQZb-W8HtFWo2AkRWCtCoYwL6IWVcb9t2G1gekwYFX65-OQE.png) \n- The point minus the point to the right \n$$Ex_{x,y}=|P_{x,y}-P_{x-1,y}|$$\nExpand $f(x-\\Delta x)  o$\n$$f(x-\\Delta x)=f(x)-f'(x)\\Delta x+\\frac{f''(x)}{2!}(\\Delta x)^2 -O(\\Delta x^3)$$\nCalculate $f(x+\\Delta x)-f(x-\\Delta x)$\n$$f(x+\\Delta x)-f(x-\\Delta x) = \\frac{f(x+\\Delta x)-f(x-\\Delta x)}{2\\Delta x}-O(\\Delta x^2)$$\nThis can be rearranged to\n$$f'(x)=\\frac{f(x+\\Delta x)-f(x)}{\\Delta x}-O(\\Delta x)$$\nThis tells us\n- If $\\Delta x\u003c1$, this error is smaller \n$$Ex_{x,y}=|P_{x+1,y}-P_{x-1,y}|  $$\n![|400](https://remnote-user-data.s3.amazonaws.com/RI2KblfjrRq8jqnu-FCBDIqX-Yhtou79gykYbPZaxQbomzOwvFR8IMFlVZQa8NPpl2Ldc2XmwzpFYbnaIDgk9IJJa3bozTwcvb9uLoVhpX44rWI6vtRx1L8VpxOGyvRu.png) \n\n# Templates for Improved First Order Difference \n## My\n![|150](https://remnote-user-data.s3.amazonaws.com/uAbQc8K29wW9r_v8s1Mm_ctUhzcO_7ztcxSKBhmAxX1JU6Dug2OzDyvCn_1qY3O2YUukogM_S3DVwmNRKovJPdtpnSyxB8in-ZS2Gw4h5Xxr4WAh0onWxJ3yEUfp6qb5.png) \n## Mx\n![|250](https://remnote-user-data.s3.amazonaws.com/OFfqeVqcOwnRDy-lXW3bD38lOfxSao-N6t0tNzABzYrve9_FIWG-jOx8XZLPfl7zQyRtZfF_Fc8kzi8dgfVH3WjggcV6uS2XkGVcJEIyVi9otjrKLodJH3TkGDb85iLZ.png) \n\n# Edge Detection in Vector Format\n![|400](https://remnote-user-data.s3.amazonaws.com/Y0JVAYqzxE15UxoJkmhS7Czf7j9IiVq8E2djXaLbt232j-wsoXEAPfToB550HnuxTyBl9UU6f9cAFTOdvIevoCowN2_j7Ix4ZMMxoefq-0VH26wohyN63QGVya07RrSq.png) \n#### Magnitude M\n$$M=\\sqrt{{M_x}^2+{M_y}^2}$$\n#### Direction $\\theta$\n$$\\theta=\\tan^{-1}(\\frac{M_y}{M_x})$$\n# Templates for 3x3 Prewitt Operator\nAveraging the improved horizontal and vertical operators over 3 rows/columns gives Prewitt templates\n## Mx\n![|400](https://remnote-user-data.s3.amazonaws.com/uLRzJCjzIwk41eoGZwEOt6rphTD7ITDJzBlit3ZP9HVByif789uRNK8E1OdY5s-mizPasi5h9tG-KOVPd0sqYV213LHIEAUTmsD9r0xaN6iZyLrvNebVY1Cm7oQbS4kG.png) \n## My\n![|400](https://remnote-user-data.s3.amazonaws.com/dgjqyBxUm2wsIpyauvoHqglE9I1VG67wxt3oyeagwXuKn_A8j4pTiI-cQltxnJf18aqL3w2ISh2Dv7kWss5LZ1HAOdxg1sHfpU05aNlH0zlmb9LV3dAZBQc6_nF3yphx.png) \n\nThe edge magnitude and direction is calculated for the centre point\n\n# Applying the Prewitt Operator\n## Original Image\n![|400](https://remnote-user-data.s3.amazonaws.com/8LTigPhz30YwIJ9GJxQbC-mPxIuxWO7MXmwScK5rMvBBL-0A1OS4dOvydILmc99gfLgZBGa-7NRyJQrdrCHluJc1IRJa_Y0EvAo6fTYoU_o7qX4tz6QZnH5thLaawnAm.png) \n## Edge Magnitude\nBlurred edges\n![|400](https://remnote-user-data.s3.amazonaws.com/oA2rz975pYs27E--6qIumtOkqRbNevIN2wCNE_8g2hcNoQ1oe2mfOYRVTtxbDgpKPD602hnwp5JIIbs4cYHLJgr6CYxraiQbVWFP3_pEr26_TT9vojhjUhs2Zm7n2_wu.png) \nNo double points\nNo missing points in the corner, unlike before\n## Vector Format\n![|400](https://remnote-user-data.s3.amazonaws.com/5UKBaQj1ZrJR-OKS9ER5U2YsSA_nxm0ta7oL_HGMdlCRfEN6p14qIb6-xctaodGCfNVQ-l6MvKcI4fOP5r-9sokOYrXRYLwmYyVnLN0FXg4p9FJq8Lrt7bHHAnbUrYRi.png) \n## Edge Direction\n![|400](https://remnote-user-data.s3.amazonaws.com/TAowEoFGhOlLPNay9atPmct9XZ93KUem7mOUdrna7fVkN9HZ22-g4AwOuDoqzOGc04SWS2c3JPkFh8jSRz8suVAH2XylfJP1ZJgJF7b8hyGz2_j_wV4LQhZVLh-CnPDK.png) \n\n# Templates for Sobel Operator\nSobel is the most popular basic operator\nIt is an improvement of the Prewitt operator\nDouble the centre coefficients of the Prewitt operator\n## Mx\n![|400](https://remnote-user-data.s3.amazonaws.com/6LPbR-I4CmNhYGxcAzTUB_qZQwLi2gI4wnWlREmwh2fNBoXbQ0vTDaXmWeiOKrhVmjqHGCcAgFWsOFvxfAJuDu5t7X5O6MSQDxdhCMypQu4D6Y6-74wfC-BIHVRFLvCq.png) \n# My\n![|400](https://remnote-user-data.s3.amazonaws.com/zQ643T-uxE2cgoF7KvY9C9Ydmv6GI7mtyCk-t318qYViy5xbvDfCz0bMXRyzdHBTHG0YIkH9FF-qMrLi7DEoFoJwJNWn5iTBIAwuxdLlLmtKq3dEKF1LMMqSpZt2TYxz.png) ","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Eye-and-Human-Vision":{"title":"Eye and Human Vision","content":"\n# A framework for computer vision!\n\n![|400](https://remnote-user-data.s3.amazonaws.com/3JOwjXF2z6LMeO9hpM9LGLyMDpUr3owtjOBVBbIyRun7CD_ngzmf4a9S5PSaqiz2DGU0pYLYurrVCX_Nyo-0dizlELVQeceqvuhrXHYBjX76iOWBozpXfMQK3umnljJg.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/QqyYj-Iysy8HERF_snzyuibkAIPE-7gs-0pdfpOFSVtlOHbn4lH3E5S7egUs8CXrQ3s6Ut_-ZFfHv66Z9B4ViswEYYTyHcy55ahe0gi2Ztbd_i-lC9wfM7fHLVn0AZc9.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/WhAgRKFMHQ050oTG-rqCVqC1ffox3W9SUQ834kDHU6zZGqiNu4MosCx0YtIzDbaFOX1J_R5H9d9nHvh7_7AyY9CClWqWiRvJeEx3LoyWoM-Vys8G7_KWDqqWBzWCWx4U.png) \n \n![|400](https://remnote-user-data.s3.amazonaws.com/8RPT9yyOIVoBEsp2-APT5CjqTIonmZjtumF_hMNMvbjg5w6fj8G0dk1tEKNV2UpsTtDmXwA1vTeZTAMR66y5stPdiSLgzaNo6iGIeqyCdn2dp1y0N75BgNgaShM6mdWm.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/SnP43XKH2xKp4zK9ZnrzJQOoIcqvJz7X_9NKCC-KcA6959mA6NQoLHBNQat6IsxRgdIQlHx6NZ3Hi_YRMb_ARtG4A6JDCqufz80YgrhTJziN-3OM4X2WJuaAAu2-weoD.png) \n\n## Modelling the eye\n![|400](https://remnote-user-data.s3.amazonaws.com/u5TMXqGvWP5JI9QEH5Kx-d0p9_BhOw-oa5T70e3kV9czKyUzmx6bry5vTeOLyaj-TdI5Ewoq4SyxPzXRPbnv42KYg9bKEnphXwhsP2erpQrpOHgOAOpTWA-xMuMX3sVm.png)\n \n## Human eye\n![|400](https://remnote-user-data.s3.amazonaws.com/QkzGglj94-WqSDHRsKVPrMvyWcqDB9kJobFo_f8jCVdV3WGZz81SoNOIoaI6ghyH7CvUS6BigTCJP4WDI06zlI_duibiXvMlUgE5GQAIyZB8Cg0ScqPP7gTNc1RSDz_n.png) \n- Evolved for survival\n- Function of the eye‚ÜíTo form an image on the retina\n- Lens is shaped, rather than moved\n- Image is transmitted via‚ÜíOptic nerve\n \n## Optics\n![|400](https://remnote-user-data.s3.amazonaws.com/t0kgVs65kUDOzIq3BXiF0HdB2_JsafTHlCl16LYwhaxMOWKzaB2-GaECw1TZZ3VLPIuFBsFBBoHXcVrED82EgfjzzvBHW9KKan9acdQJpK3qMoWQdlSDPzfQxpmqKj6S.png) \n\n## Sensors\nNeed a lot of sensors\n- $10^7$ Cones\n- $10^8$ Rods\nCones come in three types \n1. Short wavelength‚ÜíBlue\n2. Medium wavelength‚ÜíGreen\n3. Long wavelength‚ÜíRed\nInsufficient bandwidth of optic nerve implies coding\n \n## Spectral Responses\n![|400](https://remnote-user-data.s3.amazonaws.com/qUJ2lYuAmhQ0dJk6Ev4ePIEiv7nMnPI-Z2GJMyKV25ymaW4a_95BwOk3xFIGYWTqxQnTKVNPACaxRaPatwADG6XMwBkLg6rbng0DexecKUAmuVdB21ezEC__HrcRRFMp.png) \n- Blue (S) response is‚ÜíPoor\n- Greeen (M) response‚ÜíDominates\n- Red (L) response‚ÜíCloser to heat\nHuman vision must compensate for the poor blue sensors\n \n## Neural Processing\n![|400](https://remnote-user-data.s3.amazonaws.com/_ZcpcQW4NVIXWvQkEKqgsY_urKas1fOjvbANonHpThWfGB2rJQcojCpO0jKjliGJmhmMi0xMHUx1t3DqOATqaBdd-jK_XZke4oWZbhcqCltBj36GmiI3F2b5m3ZOIkqS.png)\n#### Sensor information must be combined\n![|400](https://remnote-user-data.s3.amazonaws.com/_ZcpcQW4NVIXWvQkEKqgsY_urKas1fOjvbANonHpThWfGB2rJQcojCpO0jKjliGJmhmMi0xMHUx1t3DqOATqaBdd-jK_XZke4oWZbhcqCltBj36GmiI3F2b5m3ZOIkqS.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/2udWgfSI9s-idQpRf8TJNXpJabK9HiOduLnBWW-9j37TJYsDHMypyuO0tbvpF9_Kd50W-76Q8Cp6J32sE5ZKx_ZMdQkUldMolEjsTWX-lVrww4Bhmw-HANvHWOG6uwi9.png) \n\n## Mach Bands\n![|400](https://remnote-user-data.s3.amazonaws.com/GVu6ji4T5KP3E0TChbgEI1RgS5604CeYqTwdzTcnSSwlze8H0KbS5vRulf5ecTiENKROHPlS8JSRzvEwtuEe_t1A_hMxVrxJXCpoIJdTe-bpZ6k8QWJ-ibmG-15bsBYm.png) \nMach bands are not in the image‚ÜíYour vision introduces them\n- Result of‚ÜíBrightness adaptation\n\n## How Human Vision uses Edges\nThe human eye needs training and can be deceived\n![|400](https://remnote-user-data.s3.amazonaws.com/e7PyXutNMH_HfaNAyPX4WNyABZvMZ3Lu2b-61dpXv2hxgmdDj2l7uCvzsF5D5B9i3SYvEpXBFxyw3q8V7nwF3I_57iJwh8MsfZHUag_mXMko2BrwexDmQrxWgZ22a9Ad.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/kcWo-2jVjNEgaZq5FVecf0kNqcKgmsVCgskeukCxOHHDykga5qlYNIewK_CHeZTRgJMXxzxvakAknBYVokZWgzvIGuNe1YxToIWShvasyMZaaoM9h65ltlzD3qL3YhDT.png) \n\nMeasurement needs comparison\nIllusions are a consequence of complex function","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Finding-More-Shapes":{"title":"Finding More Shapes","content":"\n# Hough Transform for Circles\nHas duality, similar to line equations\nOR\nPoints x_0,y_0\nRadius r\n- Centre x,y\n$$(x-x_0)^2+(y-y_0)^2=r^2$$\nOR\n$$(x-x_0)^2+(y-y_0)^2=r^2$$\n- Radius r\n- Centre $x_0,y_0$\n- Points x,y\n## Circle Voting and Accumulator Space\nIllustrations courtesy of Mark Nixon\n#### Accumulator\n ![|150](https://remnote-user-data.s3.amazonaws.com/Xh747k5sUlB3PbfyJANIIc8w7rVzcA0R3_cYFPEJt_Tb3rrnwhQ72t3y7fMoZJdRFbcOCjgO4qcPbSm7dBoFZDzjCYDQjCbLa8XrrCXYGILPr9c2Qafuq4hyR5kNQ-ci.png) \n#### Image\n![|150](https://remnote-user-data.s3.amazonaws.com/f4wCMbV9KIQbeV4XcQC0c_DY5zTJJCvd4gX5vG4Mp08eApJ0AAKCXM3ww9LrcHvyvlQoSEJBKztBIlljQUfzIc0GvqnTmLhPqf9tFwcCU_3OcI_t4Y6zkWljiP7KP-C4.png) \nAn edge point in the image corresponds to a circle in the accumulator space. Every point on the circle in the accumulator space is considered a vote\nSame process as line voting\nThe accumulator space is actually third dimensional, the third dimension represents the radius of the circle\nThe point in the accumulator with the most votes will be an intersection of the cones where the circles have the same radius as they did in the original image, and the point will be the crossing of all of the circles\nSo we are actually generating cones of votes\n![|400](https://remnote-user-data.s3.amazonaws.com/j6dAdtJPCYmYRyNQhfkTh6GDhlpNrqqaMQc6a5eZs-VaXXWCOPRSeJdvAeKEtog1vSCPKpVYPev8VljX312UCpGqIG9L8xdXuOempc5Ihit1L_v5hoV8RanjBxZalDUK.png)\n## Pseudocode for Circular Hough Transforms\n\n## Applying the Hough Transform for Circles\n![|400](https://remnote-user-data.s3.amazonaws.com/KIZuwV-JzFSX6EqlEYY4W40CDa_NP3o78rOFrkCEMLT7QkP3kk9ba_RgEOPfvJ5yTzwzhJuxHSvqNwe1_yulF0pie4DcMMGZEmmOnFg_2IBc6iGf0BfgNqw8Y2qJMJUM.png)\n## Extensions into Conic Sections\n### Ellipse\n$$\\frac{(x-x_0)^2}{a^2}+\\frac{(y-y_0)^2}{b^2}=1$$\nEllipses are described by 4 parameters\nAccumulator size increases rapidly as the range of values increases\nMemory size becomes impractical\nMotivates approaches to save memory and improve speed\n## Improving Circular Hough Transform Performance\nDifferentiating (x-x_0)^2+(y-y_0)^2=r^2 \nGives $\\frac{dy}{dx}=-\\frac{(x-x_0)}{(y-y_0)}$\nThe final circle equation only has two parameters, which reduces accumulator space greatly, increasing performance \nRearranging\n$$y-y_0=\\frac{r}{\\sqrt{1+(\\frac{dy}{dx})^2}}$$\n$(\\frac{dy}{dx})^2$ is the edge direction \n\nSubstituting for (x-x_0) back into the circle equation\n$$(\\frac{dy}{dx})^2(y-y_0)^2+(y-y_0)^2=r^2$$\n## Arbitrary Shapes\nHow to recognise shapes which are sections\nUse a generalised Hough transform\nAnd vote via the look-up table\nForm a discrete look-up table (R-table)\n## R-table Construction\nThen store those combinations of r and \\alpha and index them by the edge direction\nThen measure the edge direction at the points on the outside of the shape\nFirstly find the reference (centre) point of the shape, which can be found by averaging the x and y points of the shape\nEdge direction is not unique so there will be multiple entries in the tables at certain values\n- This eventually gives noise in the accumulator where multiple values are stored at the same index\nUsing this, we then determine the length r and direction \\alpha to the outside points from the reference point\n## Procedure for Generalised Hough Transform\n### Preparation\nForm r-table (list of points, indexed by edge direction)\nDetermine centre of template shape\n### Application\nUse r-table to vote for points in the real image\nTake maximum from accumulator to find centre co-ordinates of the shape\n\n## Scaling for Generalised Hough Transform\nAccounting for shapes being different distances from the camera\nIf you want to find a shape regardless of the scale of the shape (any size)\n- We then have an accumulator in terms of x_0, y_0, centre coordinates and the scale\n- We scale the vector of the voting, we vote for scales of the distance from the point to the centre\n- This gives a three dimensional accumulator array, which will find shapes whatever size they appear\n## Orientation for Generalised Hough Transform\nAdd another dimension to the accumulator space\nWe can then rotate the vector in the r table, and then vote for different rotations \n## Active Contours\nFor unknown arbitrary shapes\n- Extract by evolution\nShape is placed on image and contracts until it finds the desired shape\n### ![|400](https://remnote-user-data.s3.amazonaws.com/E1DhNW3SkqoDyi97zqV9rDm9QC8UVhnHQ4JlsWM8jR99PTVQVrxTRKwrDuevQyOB_qUcNAWiLwIZn8m9RlwwxVJ_BI7ZRyAUhVRnCkd2zDXp1LIC0MccIistS_GEF-H8.png) \n## Geometric Active Contours\n![|400](https://remnote-user-data.s3.amazonaws.com/6ybzufr_PzCsE4uqOmLASxvukwViDqtUTFhm1CJpPT9bRU5Y0ZkpsFIs4gu9n6TTNwvkEYPyiApsvQG9pbYIK-q-oTAKq7k8gHyQjjn-eRPqXJdzWlsGr6R4G7v3aCpg.png)\nExtracts a shape by using information from a segment of the image","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Finding-Shapes":{"title":"Finding Shapes","content":"\n# Grouping points to find shapes\n## **Template Matching**\n### ![|400](https://remnote-user-data.s3.amazonaws.com/sGWWCr_gFjUmJfTeVqK5_ez7HxkG2Qlyil1fKdz7gWCo7deItS3FM2m8W95K93k1sQbypDdNJWvdXo2sPL4iR_Hwoje05D2nyFL6xfEyg9LxuUUJ7QvsoBQMrijGdB02.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/Gwx6FL5lJT5-R68EQS3v3U5oIJ3KJG5gFAmmNWhbqBSDoH6ljvmR0eDkPKzZJFmLNqz5pmzsdXHdmrUQ7XCdel8ZjIOEYTin_AIP2-_UlYznUeKPCQspsdgH4UPYeDo2.gif) \n### Process of Template Matching\n#### We store a count of the matching points\n##### Where the match is best, we've found the shape\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/Gwx6FL5lJT5-R68EQS3v3U5oIJ3KJG5gFAmmNWhbqBSDoH6ljvmR0eDkPKzZJFmLNqz5pmzsdXHdmrUQ7XCdel8ZjIOEYTin_AIP2-_UlYznUeKPCQspsdgH4UPYeDo2.gif) \n#### Take a template of what we want to find and match it to the image\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/sGWWCr_gFjUmJfTeVqK5_ez7HxkG2Qlyil1fKdz7gWCo7deItS3FM2m8W95K93k1sQbypDdNJWvdXo2sPL4iR_Hwoje05D2nyFL6xfEyg9LxuUUJ7QvsoBQMrijGdB02.png) \n- Where the match is best, we've found the shape\n### This process can be improved by just matching the edges\n#### But if only the edges are being matched, then only the text and symbols on the sign will be matched, producing much less noise\n#### In the example the template could match with some points in the road or the sky, producing some noise\n## **Template Matching in Occluded and Noisy Images**\n### Occluded Images\n#### Template matching is optimal in occlusion\n#### Shapes can be found even when partially occluded\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/E5ZRNk2lASpAiMExr36jFzVufj2J5vJPtyZHI30y-Yf61geZR2A7HdhJ86tOHXQuZpSpRHmsa-EbYcEOnFEsOnBwTknG14IwPGDGDPsZd9aJHt-xOlmFAwQaVQv-X69W.png)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/E5ZRNk2lASpAiMExr36jFzVufj2J5vJPtyZHI30y-Yf61geZR2A7HdhJ86tOHXQuZpSpRHmsa-EbYcEOnFEsOnBwTknG14IwPGDGDPsZd9aJHt-xOlmFAwQaVQv-X69W.png) \n#### Shapes can be found even when partially occluded\n#### Template matching is optimal in occlusion\n### Noisy Images\n#### Shapes can be found in noise that is challenging for human vision\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/uxyf5JnOhSbcw0Mc1KnAZrpcaoU6FBbKx4jqsgv9ucicqs2JPc8jloRUhuJZPp1QSwBvQltYSNe92WDrEqxZhFJi6KcqZDvlle2QuJdQeQwaZGmUT09xw8vTDiKnNhbQ.png) \n#### Template matching is optimal in noise\n#### Shapes can be found in noise that is challenging for human vision\n#### Template matching is optimal in noise\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/uxyf5JnOhSbcw0Mc1KnAZrpcaoU6FBbKx4jqsgv9ucicqs2JPc8jloRUhuJZPp1QSwBvQltYSNe92WDrEqxZhFJi6KcqZDvlle2QuJdQeQwaZGmUT09xw8vTDiKnNhbQ.png)\n## **Convolution and Correlation**\n### Correlation is about‚Üímatching templates\n#### You are just shifting the template across the image, looking for a match\n#### I\\otimes T=\\sum_{(x,y)\\in W}I_{x,y}T_{x+i,y+j}\n### So we need to flip the Fourier template\n#### I \\otimes T=\\mathscr{F}^{-1}(\\mathscr{F}(I)\\cdot \\times \\mathscr{F}(-T))\n### Convolution is about‚Üíapplication of a template\n#### It involves flipping the template\n- I\\cdot T = \\sum_{(x,y)\\in W}I_{x,y}T_{x-i,y-j}\n- This is very slow with large templates\n- Can be sped up by multiplying the transforms\n#### OR by multiplying the transforms\n- I\\cdot T = \\mathscr{F}^{-1}(\\mathscr{F}(I)\\cdot \\times \\mathscr{F}(T))\n## **Application of Correlation using FFT**\n### ![|400](https://remnote-user-data.s3.amazonaws.com/8PbQa5m4hVnJnw7UAx8co-UU1L2UqcFRgjebLZGaTAxPpxQbd-wbXtQud7CK0_USI1pgp1h7Wh0H0gyjbod-EWO4OsDCy7_Pq8OmjqGiiZGZ_UpAlECQ4xTUdiuy0k0b.png) ![](https://remnote-user-data.s3.amazonaws.com/t2hyTF8GQh35R3r2_M7PIURlCI3BoAHx-Im3Zz6bs3BgP1k_pO_mRWysK-IqBu5M0hGIFaotDa27ittn7CaKKcKGL8wkvfCX4UEFAzsCO_FFalFdfEfZK95VZtiLOwCy.png) \n#![|400](https://remnote-user-data.s3.amazonaws.com/ilXxdB9Lcxy7JvhwrXeOYz8Dn2ppWyVEfiX0H3CuMk0A-wNjqzjvw7SBS0g4SHF4QIkVCuhVPNHrML--q9FO45xwqBLV7jxyJBC_AIUQW9cmv8mHu5WYzyIYOR39olRS.png) \n#![|400](https://remnote-user-data.s3.amazonaws.com/iXsKbmEs87ZdlnkMYTqV4sZfvXP2xhajPsb9f4Os8wlv_pn4UkHUZZDOmEr1wSa1fEirFrlCJCPJiDUG4NtA2BQ5GPqJ31F7h8OBnetlsMAlI6bJO-1eXUNnaVI8UMfG.png)![](https://remnote-user-data.s3.amazonaws.com/HviOFqUtqEDihHOD4Ekii9EumAU71I3ljjXWPKf_OaGSia19PfyMT41VzRHXj_nbAJiD8aC9nvLTXcV-4OFZsOpMWc4gVc_P6dZ5ylmEdqzKas3byjncq_JXuXlywHF0.png) \n#![|400](https://remnote-user-data.s3.amazonaws.com/_dEO7MoIfwIdrFgY9DEVTouLtq8yjGiAjotUcuKT_vmpZ7fv6QIcCuuF3rxUTnVcgkDgEccRLRX95N_aPrWST39LuQrwfY4_DAy7yoxPzLtM-zwAZdXaH2uN29375pMh.png) \n#![|400](https://remnote-user-data.s3.amazonaws.com/H4BYSTKkSNksltu5eE7EGVZtEPwaGYPCxNNmsjwAW2U_41qZ1vWMEfWe_S0CULEDUzVlcmkW7IpWod375nvmhXfgNoAUE7kQA24S-pp-N2xIp0XZm-z1QHqq4FdIKjWn.png) \n### No sliding of templates\n### Cost is 2xFFT plus multiplication\n## **Hough Transform**\n### Performs the same as {{template matching}}, but is faster\n### The Principle of Duality ‚Üì \n#### A line has\n- points x,y\n- gradient m\n- intercept c\n- y=mx+c\n#### A line can also be represented as\n- points m,c\n- gradient -x\n- intercept y\n- c=-xm +y\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/zTUFQ23V8KtxBkz2EXZJe2sLdQHFPWUGWl4n5LX-pn2z_2G2wWmPle9-HwogSWl0l9_oN9IFVEx1sYZ3BjwZc87Vpgf_XEIHCyuTWDMqEsbKhkYl4OLgVaMOJtCV_WSO.png) \n#### If you apply this process to a set of points on a line in one space, you can generate a set of lines in another space. The crossing of these lines will be the values of m and c of the line in the original space\n### This is called the principle of duality\n### A line can also be represented as\n### A line has\n## **Pseudocode for Hough Transform**\n### If a point is an edge, then the corresponding line for that point is plot in the accumulator space\n###  \n### The crossing can be found by finding the point in the accumulator space with the highest value\n### The code checks through all points in the image\n## **Applied Hough Transform**\n### ![|400](https://remnote-user-data.s3.amazonaws.com/pULoNjuq99lzfswOd68QhSbjSVgTwM9MhRMsDWt9tWZCYIN6aarcLvDQgTBNIvaWR78wj4iyVA4pN7dYoBg7Xi3ey8CT8i6i1LGHim3aHx3B3oT4NJqgsPfh1d_gZhP5.png) \n#### This version of the Hough transform does not detect vertical lines\n- Because‚Üíthe gradient of the line would tend to infinity, so we would need infinite accumulator space\n## Hough Transform for all Lines\n- \n### ![|400](https://remnote-user-data.s3.amazonaws.com/D4lLuxt763s1AbgaTqr9Yqslgb-M3QzdeNI5kF21L7yTCRNfyxOyfz6HmKGF6f0ErH6UoWIsIZOT_JF0_myNPhUAe4XSxU1L7HyTNeZxQ_m_YC4xM7jjhhLEjQWy_Zjm.png) \n### The crossing in the accumulator space represents the line in the original image\n### Use foot of normal to represent a line\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/lyLGdw4Z7LWAVXvUw0M14iDiScP-2WVKNWsH-2ZOzSEajxWEJv6mgiq7S_AZZ850BSRwy8hLvjxA87F_bRdxXIHEEtydfJhXqtL7saJnpft54OQCVCMDVkevnKw3yjvU.png)  \n#### \\rho = x\\cos\\theta + y\\sin\\theta\n### ![|400](https://remnote-user-data.s3.amazonaws.com/D4lLuxt763s1AbgaTqr9Yqslgb-M3QzdeNI5kF21L7yTCRNfyxOyfz6HmKGF6f0ErH6UoWIsIZOT_JF0_myNPhUAe4XSxU1L7HyTNeZxQ_m_YC4xM7jjhhLEjQWy_Zjm.png)  \n### Use foot of normal to represent a line\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/lyLGdw4Z7LWAVXvUw0M14iDiScP-2WVKNWsH-2ZOzSEajxWEJv6mgiq7S_AZZ850BSRwy8hLvjxA87F_bRdxXIHEEtydfJhXqtL7saJnpft54OQCVCMDVkevnKw3yjvU.png) \n### The crossing in the accumulator space represents the line in the original image\n- ","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Further-Edge-Detection":{"title":"Further Edge Detection","content":"\nSobel is a good basic operator but has blurred and noisy edges\n# Canny Edge Detection Operator\n## Stages in Canny Edge Detection\n1. Gaussian Smoothing\n2. Sobel Edge Detection\n3. Non-maximum Suppression\n4. Hysteresis Thresholding\n![|400](https://remnote-user-data.s3.amazonaws.com/I_9Ei80WT3SUadCSbOGikQxLEc-FLZzWFWaTdTNHsq2dV03Lu2YZ8sGOsmrdwouKMyTs2YEh_Qb--fpD8wNWA46w6UKk8655Ey8AXJOschZr7XrfNOyEg-LH0uOcKHFm.png)  \n### ![|400](https://remnote-user-data.s3.amazonaws.com/I_9Ei80WT3SUadCSbOGikQxLEc-FLZzWFWaTdTNHsq2dV03Lu2YZ8sGOsmrdwouKMyTs2YEh_Qb--fpD8wNWA46w6UKk8655Ey8AXJOschZr7XrfNOyEg-LH0uOcKHFm.png)\nCanny gives thin edges in the correct places, but is a more complex process\n## Objectives of the Canny operator\nOptimal detection with no spurious responses (no responses to noise)\nSingle response to a single edge\nGood localization with minimal distance between detected and true edge position (edges are in the right place)\n\nThe objectives made the operator un-implementable, so a set of approximations are used\n- Threshold with hysteresis to connect the edge points together\n- Use the Sobel operator\n- Non-maximal suppression (getting rid of everything that isn't the maximum)\n- Gaussian smoothing\n# Interpolation in Non-maximum Suppression\n![|400](https://remnote-user-data.s3.amazonaws.com/y2GV04Wur_kyNdjMCmj2FS0Vki7aE3fXoMWRfHUhhEVVyczKqVC3nAZmDiUahsYPnwa_QMLtSx9gIbbuXiGki29J_RtNXsF_k8js3T9uYXo7mHM-OHnGjkq8bYbKifL2.png) \nUses linear interpolation, as you need to use points which are not on the image grid\n# Hysteresis Thresholding Transfer Function\nHas an upper and a lower threshold, for when the value is increasing or decreasing respectively\nThresholding with memory\nHysteresis thresholding takes into account that if you have found an edge, then you are likely to find another edge next to it, so the threshold for what is considered an edge decreases\n![|400](https://remnote-user-data.s3.amazonaws.com/HpgegWKU6TetnzHqRvYmMn7hBM1AzyEv8z_MJ5Jf515Wc-1RBuVnd_ebVQ4Hs5ijtnNzddfEMmvVJiG0zIcCOFUIDIl4C96im7pMeDx6uXAC2E8WqOUi-bYuPChVFxLh.png) \nHow does it work\n- Has an upper and a lower threshold, for when the value is increasing or decreasing respectively\nFor edge detection, the lower threshold is the average {{noise }}and the upper threshold is the average feature boundary\n# Action of Non-maximum Suppression and Hysteresis Thresholding\n![|400](https://remnote-user-data.s3.amazonaws.com/lfvUh-kU6uW6wHWsM9xaNJ6UWo__vWQoMNARV2Bbm9xNT60Fd49gfOLK_8OrLQkEOWQ72AaSH39-GYoF2WNF4abwWYq2273c733jcf1StRhcQrUchhsXOLzjAUXzCZp4.png) \n# Comparing Hysteresis Thresholding and Uniform Thresholding\n![|400](https://remnote-user-data.s3.amazonaws.com/ofUotIs1P6HTyc85G8Df9jxSX9mutRef3Gkr_PpsjYGiCJvyhser3kfZRJQb4_3WCa0RWBm7ZpngiaUyFc4w7Hl1-hnNYj8ww1KmKQW_JjEGFYwxkiNg9X16RBssTXxH.png)\nAND any connected points \u003e lower threshold\nHysteresis thresholding gives all points \u003e upper threshold AND any connected points \u003e lower threshold\n# Comparing Canny and Sobel\n![|400](https://remnote-user-data.s3.amazonaws.com/3aKroWSBaKU4E5OpMokfns7yqSb4_0S7ZEcJ9EfxQEGkh4ntfRPWduertyI_EhW0PIV2inkKtkId7XQ62CZLz3hPhUoL7yf13QDNHggg99KFlgRxezdydI1pRQ8g9L3e.png)\nCanny gives thinner lines and less noise\n# First and Second Order Edge Detection\n![|400](https://remnote-user-data.s3.amazonaws.com/UUWAUWI67_sECkEpVdi57eG7QbkwzhRzgqCdWeEUVWtf3lscB6uNQqF3QGkEBDHAQ4FL602zZHbZ_Pd1ozhhoPOo0yPLHr8CXFPQNGF25B-wr7L2E4jLWrPSx07XN9p2.png) \n### First Order\nSingle differentiation‚Üíthen threshold the function to find the edge (The red dotted line)\n(The red dotted line)\nSuch as‚ÜíCanny and Sobel\n### Second Order\n(The green dotted line)\nSecond derivative‚Üíthen find the zero crossing (where the gradient of the first derivative is 0) (The green dotted line)\n# Edge Detection via the Laplacian Operator\nWhere the numbers change from negative to positive there will be a 0 crossing so there is an edge\n![|400](https://remnote-user-data.s3.amazonaws.com/AoCIrnaM__5MWV-gTScIsCPm0uPHvr-P7GhWXwPRsF3hImkVwfPFjVkrqiSvYgg5C4dUFy8DIeSnpyUJH42tEUauJMIQdXWpn39dvsb4-w0H-fxCaxhdUXPl730X74d5.png) \n## The Laplacian Operator\n![|400](https://remnote-user-data.s3.amazonaws.com/AoCIrnaM__5MWV-gTScIsCPm0uPHvr-P7GhWXwPRsF3hImkVwfPFjVkrqiSvYgg5C4dUFy8DIeSnpyUJH42tEUauJMIQdXWpn39dvsb4-w0H-fxCaxhdUXPl730X74d5.png) \n\nThe Laplacian operator is a second order operator\n![|400](https://remnote-user-data.s3.amazonaws.com/mgYiymmW8Pyu3XW5mm78rvqfv0QvlD_fbIgSerHLbw9YrK5YbEnOjv3wl2XP4uvpKuO5cc6M0VpdgBNK3ctA5gX-uVq4-O-D0nm6i5lqWOFp7nNvfzX8Q66vmj_1geVz.png)\nSince first order operators are sensitive to noise‚Üísecond order operators will be even more sensitive to noise, which is why there is a -6 inside the image, which is not close to any edges\nThere is an edge where‚Üíthe numbers change from negative to positive, as there will be a 0 crossing\n# Laplacian of Gaussian\n## Derivation\n- Then differentiate again\n$$\\frac{\\delta^2 g(x,y,\\sigma)}{\\delta x^2}=(\\frac{x^2}{\\sigma^2}-1)\\frac{e^{}\\frac{-(x^2+y^2)}{2\\sigma^2}}{\\sigma^2}$$\n- Take the Gaussian function\n$$g(x,y,\\sigma)=e^{\\frac{-(x^2+y^2)}{2\\sigma^2}}$$\n- In terms of x and y, the second derivative is\n$$\\Delta^2 g(x,y,\\sigma)=\\frac{\\delta^2g(x,y,\\sigma)}{\\delta x^2}U_x + \\frac{\\delta^2 g(x,y,\\sigma)}{\\delta y^2}U_y$$\n- Differentiate once\n$$\\frac{\\delta g*x,y,\\sigma)}{\\delta x}=-\\frac{x}{\\sigma^2}e^{\\frac{-(x^2+y^2)}{2\\sigma^2}}$$\n- Which simplifies to\n$$\\Delta^2 g(x,y,\\sigma)=\\frac{1}{\\sigma ^2}(\\frac{x^2+y^2}{\\sigma^2}-2)e^{\\frac{-(x^2+y^2)}{\\sigma^2}}$$\n- Substituting in the previous equations gives\n$$\\Delta^2 g(x,y,\\sigma)=(\\frac{x^2}{\\sigma^2}-1)\\frac{e^{}\\frac{-(x^2+y^2)}{2\\sigma^2}}{\\sigma^2} + (\\frac{y^2}{\\sigma^2}-1)\\frac{e^{}\\frac{-(x^2+y^2)}{2\\sigma^2}}{\\sigma^2}$$\n\nFormula‚Üí$\\Delta^2 g(x,y,\\sigma)=\\frac{1}{\\sigma ^2}(\\frac{x^2+y^2}{\\sigma^2}-2)e^{\\frac{-(x^2+y^2)}{\\sigma^2}}$ \nThe Laplacian of Gaussian operator is called the Mexican Hat operator because of its shape when plotted\n![|400](https://remnote-user-data.s3.amazonaws.com/sTTe5B7Bt4rK9J9R0tNl-6OA1MuDU9l2PRa2PhRpxCsl0Xu66JajKUKAZA4mDnNiTYKQijVugOqS621Q1LIO7e7KhoVLIkjb7ozx1rVPW6v3bCYocHlKINQ8vQpeYZj8.png) \n# Zero Crossing Detection\nWe take the average of each of the points in each quadrant\nWe split the 3x3 section into 4 2x2 sections\n![|400](https://remnote-user-data.s3.amazonaws.com/TPCqF1Pt2k7f8bP3euPJQxuHg49sMPZgemDCHhMPUjZxcmwAr066QlVMMsBhC8vn8S5M-J6l8ptETGgFcTNy1dl2j1WFQdpAUlJ4DmgzVLEwQkEhr3x3FFBBmYZpekpc.png) \nIf one of the quadrants has a negative average and one of the quadrants has a positive average, then there must be a zero crossing at the centre point\nWe split the 3x3 section into 4 2x2 sections\n![|400](https://remnote-user-data.s3.amazonaws.com/TPCqF1Pt2k7f8bP3euPJQxuHg49sMPZgemDCHhMPUjZxcmwAr066QlVMMsBhC8vn8S5M-J6l8ptETGgFcTNy1dl2j1WFQdpAUlJ4DmgzVLEwQkEhr3x3FFBBmYZpekpc.png)  \nIf one of the quadrants has a negative average and one of the quadrants has a positive average, then there must be a zero crossing at the centre point\n$$IF (max(1,2,3,4) \u003e 0 \\land min(1,2,3,4)\u003c0) THEN f(x,y)=edge$$\nWe take the average of each of the points in each quadrant\n# Examples of Second Order Edge Detection\n## Marr-Hildreth Edge Detection\n![|400](https://remnote-user-data.s3.amazonaws.com/vKrHyJK3OCYWlv4Sd5LbBvobuDGwZSnIQJZ_WrhKikyOnKfTo6hOFdnlZ0QPEL_wQNqKe0dNvYZtbJgP4Y7D9Q4A8A8sJelOb6Nb0CDhMOkBZZtSPDz1DF36UhnVUUR2.png) \nWindow size and variance must be specified as input\n# Comparison of Edge Detection Operators\n![|400](https://remnote-user-data.s3.amazonaws.com/C-5TC3QerivbcQsrCfq40-DOEvlw9girIjm7IKBRKWufTYGB0yk0LIDO2tWDWC2b_G9Fhb252hpMlqj_0I7coMHXbLGBjaJXnGSA-S2NS7Ux1_TBdD0TOSiskbiQD1r-.png)","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Image-Classification-and-Auto-Annotation":{"title":"Image Classification and Auto Annotation","content":"\n### Multilabel Classification\nMultilabel classification, in the context of images, is called Automatic Annotation\n\n![|400](https://remnote-user-data.s3.amazonaws.com/D95GgAyKMmpCT5iDpP6sG1QjOF8oH16OOMwv3TFPPrP7rULm5zkLcg81_zBs8PpbsGsWYU3YKmOLZKMlA0i6cD6HfKvpwFVQ17tbivbxZ6Fky-c-C7cItMSGqkH7hzg_.png) ","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Image-Formation":{"title":"Image Formation","content":"\n# Inverse Fourier Transformation\n\n![|400](https://remnote-user-data.s3.amazonaws.com/UYGkq5xc9QjoeOtbV6kE7dPGvk1Pu8M76GmCNipB_IheLBf_Wo494PqC_ohxoFMbCX2IMCbX65e2ZRW_2JzMoLamowVsqS1FQY-og3fflaEwttqsxMXHzrlbwzsF5ZLv.png)  \n\nReconstructing a signal from its Fourier transformation\n![|400](https://remnote-user-data.s3.amazonaws.com/Y-TYs3gCUHiXJyGQ8AJ3DznFvV1hkY1nsaIYOH90E4oP28z18dQMbiA0_BsPHywTKOlrSeTtmUV8L3Cl6EEmH9qh9GBkSVhDRTRyf6Q7iWIlklCcwV2CWW0aIHyQ3K7d.png)  \n### ![|400](https://remnote-user-data.s3.amazonaws.com/5uniLhK1OOzXyhDn23tTLb-hdlXII0mqFWv5DRebl-nJgpodlh8OQGeNCfsP-hHRFSJnP9gYHJVov_YN9qDqwIDoxWuWLsFvGHnCA3GpOwXk8wOMzYBL6Zi79F0GgGYC.png) ![|400](https://remnote-user-data.s3.amazonaws.com/osGP5L8-xsMRUBVvgCYWNqHC0AP3ja4ghxu_ophJatd1BOEkERZR3cr0uVde9-N2Qs3xX08nkGhv1gLy1MQlkmi9qymT0azn_o5jsQ-8RZcoiQ6BXvz8l-YNzwo6H8w5.png)  \nRectangular pulse is not reconstructed perfectly as the limits used are -6 to 6, if $-\\infty$ to $\\infty$ were used then the pulse would've been reconstructed perfectly \nInverse Fourier transform is used for Reconstruction\n## Decomposing an Image into Bits \nThe Most Significant Bit carries the most information where as bit 0 is noise\n![|400](https://remnote-user-data.s3.amazonaws.com/6tbj-umtqI9sre8wocOPv6ACbNCpBM7UFa-FM-vpPqiP5t0YFduBqxigNZ5XVifRY7GlE3eb-QDrRuoOoulDZ9zLStnRLgICKpt_OqqMtDowWe9Ee3DUN1o3cy2LvGdR.png) \nAnd here, bit 4 is the lighting\nImages don't just have to be represented as integers, floating point values are also commonly used\n![|400](https://remnote-user-data.s3.amazonaws.com/A-TC-l9NFw9Uqj432itokNYFck2y8VNQ2XsPQnupd6CHTpdfN21zhlb-tHgyhoGL3t_a_WWN_4lJLmxdNOaYD-8GvcGwJY6ejqPqTz9Jg-vgntW1o9Th_EaCB0ZhulQ8.png)  \n## Image in terms of Frequency\nPixels in an image vary in intensity\n![|200](https://remnote-user-data.s3.amazonaws.com/Hu-hJ9V492-kClk_tpaGrJ466x0JL1PtoJhvYzvYVX76MzdYvFG__u-ODeOiANOtCyGODem7MiRvMfBmkkfhi2No57nvIpBedA5WE02vDz9kJbInHffQCMFbzkeIgSL9.png) \nIn this example image, there are lots of vertical structures, so there are horizontal frequencies where the intensity changes a lot travelling from left to right\nIntensity varies depending on which direction you travel across an image\n- High frequencies‚Üíare where the intensity changes a lot\n- Low frequencies‚Üíare where the intensity doesn't change much\n## Fourier Transformation of a Rectangular Pulse\n![|400](https://remnote-user-data.s3.amazonaws.com/ziiB58lQn2ljA1bnxV2ph5Rt9ZnbCAZopP5js9FPktPvGVWf__Coy8XqCaEt8R6oPpTGGFLaxDdbHie93cojMWid_qLj_7THJAG9ryf1qL-C9gUypR7QjmSDGWsk9Tph.png)  \n![|400](https://remnote-user-data.s3.amazonaws.com/2taCqxtQDTbrwPi5P4--KZzHE12AeRyARYCVxOgguWOiUuiGeuxNepNMFYsxxXDc2htbLPy0_sSXmRt00z81fsW-UNQTscB5y1eBmHDN_geKdRPhsSqiCkvPUpZVPXGg.png)  \n## Magnitude and Phase of Fourier Transformation of a pulse \n![|400](https://remnote-user-data.s3.amazonaws.com/Hrq-_jNh4H-o3BH8SBfcV5OeEVuPDYLeeoJuUKkzX_YpdPZzJyPCUx56NRU49OZnmmJFTWuAVGnsXvc1atU9p0A95FGCfSN7oNdE2noawh2WrauqRmRfo2a9gqKgvypE.png)  \n## Effects of Differing Image Resolution \n![|400](https://remnote-user-data.s3.amazonaws.com/ZA9t7uzW_i1aU2pIC251UOHOTv51rGDDlv8sVOZk0W6ECvW4ucz6H_S2gzpbtfJQDGdpWkMsYo7ugI1nwcnasIrMOGIuO3zzttrBC6oN-SqoCD1qeIRgynUC0syH4iOT.png)\n\nLow resolution‚ÜíLose information\n- But NxN points implies a lot of storage\n\t- How to choose an appropriate value for N?\n## What does the Fourier Transformation Do?\n![|400](https://remnote-user-data.s3.amazonaws.com/Zsu0D23pe2JV9V5B01rY9BgL77Xp4gz9_tqe3jvFpeQM14lqU-KWaYlFfXrtBGAr1vGIuvDHUzuujq23WpXHura_4bx0H_3OpXOEpPNMt1rw7hvzojtnRg2xhZ5C4zb9.png)   \nThe Fourier Transform can‚Üíseparate a complex signal into its fundamental frequencies, which when added together will give the original signal\nFourier's treatise‚ÜîPeriodic function is the result of adding up sine and cosine waves of different frequencies\n## The Importance of Phase\n![|400](https://remnote-user-data.s3.amazonaws.com/HG2aG7xeGNTtASIm2Xz2i4EarfDekc1BhECtECyGuGIMbDUOFnxakX2gNpQ1ZTccBmG_AbQDtslM-_x42_1A_SiYiV-Kr1tHgymMrUQJqGH8I0ONSQZCBvF-jdob9XsB.png)  \n \n## Jean Baptiste Joseph Fourier   ‚Üì \n- Invented transforms\n- Basis of the Fourier transformation‚ÜíAny periodic function is the result of adding up sine and cosine waves of different frequencies\n- Found a way to understand the sine waves and cosine waves that make up the original signal\n\n## Fourier Transformations Formula\n1. The Fourier Transformation is a function $a( )$ of a time-variant signal $p(t)$\n2. The Fourier Transform is then $Fp=a(p(t))$ \n3. The transform is a function of frequency\n4. So $Fp(f) = a(p(t))$ \n5. $\\mathscr{F}$nstands for the Fourier transform\n6. So $Fp(f) = \\mathscr{F}(p(t)) = a(p(t))$ \n7. The function $a()$ is actually an integral of cosine and sine waves, $cas(t)$\n8. So $Fp(f) = \\mathscr{F}(p(t)) = \\int_{-\\infty}^{\\infty} p(t)cas(t)dt$\n9. $cas$ = 'cosine and sine' and $e^{-jft} = cos(ft)-jsin(ft)$ \n10. So $Fp(f) = \\mathscr{F}(p(t)) = \\int_{-\\infty}^{\\infty}p(t)e^{-jft}dt$\n11. Where $j$ is the complex number $j = \\sqrt{-1}$ \n\n![|400](https://remnote-user-data.s3.amazonaws.com/A-TC-l9NFw9Uqj432itokNYFck2y8VNQ2XsPQnupd6CHTpdfN21zhlb-tHgyhoGL3t_a_WWN_4lJLmxdNOaYD-8GvcGwJY6ejqPqTz9Jg-vgntW1o9Th_EaCB0ZhulQ8.png)  \n\n## Inverse Fourier Transformation\nReconstructing a signal from its Fourier transformation\n![|400](https://remnote-user-data.s3.amazonaws.com/UYGkq5xc9QjoeOtbV6kE7dPGvk1Pu8M76GmCNipB_IheLBf_Wo494PqC_ohxoFMbCX2IMCbX65e2ZRW_2JzMoLamowVsqS1FQY-og3fflaEwttqsxMXHzrlbwzsF5ZLv.png)  ","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Image-Sampling":{"title":"Image Sampling","content":"# Sampling Signals  \n![|400](https://remnote-user-data.s3.amazonaws.com/bOlCevRBG3Va1ErzkhOPz4r-OklHb2kBfWWhmEEOVxtCLFJ56QbviNgqR-ibFM8KM92QfBlRLYua4dx8ex9YDJ7pj6q8nxo0hC8gq4YnVxGp4uBA271vC1yrQSUMK8aZ.png) ![|400](https://remnote-user-data.s3.amazonaws.com/M8g_BEZSH9CZJQKwHR542oUMhXoziLRxzb1B3imcwrNIuF3UGrxcLhe3jb1nBg2_gFY82BDl_ZbgUpSM7gYmISiihN33oaqJ3fWfU4d5tNa5Ua1Pq-hYpV4o4ea0QYOK.png)  ![|400](https://remnote-user-data.s3.amazonaws.com/mXOLSg5UPhMhgl-K_lifu0aMIoL2NqlwEzef98E38BhxW0Lt3nwhJ79vCTcQ3XbuL_dcBuUW1u9U0JzfEFODjlGJHDpubJfSd1c6-HA7cL9GBopaR7Jy6_96aC4g-8ZU.png) \n- Bad sampling‚Üíwhere you sample too little, you get the wrong signal\n\t- This is called Aliasing\n- Good sampling‚Üíwhere you sample often, you get a more accurate signal\nAliasing - The wrong signal is obtained due to poor sampling\n\n# Aliasing in Sampled Imagery  \n![|400](https://remnote-user-data.s3.amazonaws.com/sTvSLx2sc5Us4PrxTV4VP5WUiEQC0kj28qtrbdHHqfLsRZyYceoXsHBMzYlA8DPiEWINu2a7THb45cQLyNlR9ZNLnDb4DRMe0axTSK-yEItfS5j25Lt9T8GdRmp3uP1T.png) \nThe blinds have a high frequency structure, there is an extra pattern in the low resolution image\n \n# Correct and Incorrect Apparent Wheel Motion  \nIn films wheels can appear to rotate the wrong way, this is because the sample rate is too low, so the wheel appears to move the opposite direction\n![|400](https://remnote-user-data.s3.amazonaws.com/93RNOo8Dw4nMWe0LjmSXU784AjhrgBSNcwBZ5d5-K6EZ32i-0U1Ar52VmfRMQi9sJPysN-eWr0NZxa2Eedzs3LrAe6cup5uBXjcDYX6N1N1-BpWn_hnAgmxPOlfBMjZS.png) \n \n# In the Frequency Domain  \n![|400](https://remnote-user-data.s3.amazonaws.com/1pjs0LXcX7K5IL8YxGfJvzAy75-e0kxwHHmuf0sgFjtuKn5zeEs7sRBYyo7kw3O7AeuHiREMdg_izhExnGdTnZ8zHwrN69PagE7gfhtZan7tZJPj013b-q48WOLTN114.png)  \n- So the minimum sampling frequency is 2\\*max \n- When sampled at a correct frequency‚Üíwhen the spectra repeat they just touch\n- The sampling process is to make the range of signals (spectrum) repeat\n- When sampled at a low frequency‚Üíthe spectra overlap. The high frequency areas (grey areas) have been corrupted\n- When sampled at a high frequency‚Üíthe spectra are quite far apart\n\n# Sampling Theory  \nGuideline - Two pixels for every pixel of interest\nNyquist's sampling theorem‚ÜîIn order to be able to reconstruct a signal from its samples we must sample at minim at twice the maximum frequency in the original signal\n \n# 1D Discrete Fourier Transform\n$Fp_u=\\frac{1}{N} \\sum\\limits_{i=0}^{N-1} p_i e^{-j\\frac{2\\pi}{N}iu}$ \n- Purpose of Discrete Fourier‚ÜíDiscrete Fourier calculates frequency from data points\n- In the continuous domain you could integrate, since the domain is now discrete we have to use a summation\n- $p_i$ is a vector of sampled points\n- $Fp_u$ is a vector of sampled frequencies\n- N is the number of data points \n- $e^{-j\\theta}=cos\\theta-jsin\\theta$\n\n# Transform Pair for Sampled Pulse\n![|400](https://remnote-user-data.s3.amazonaws.com/0wCgDuLbgl8iByCehou1z7nQfds9uEYpad7L0A2YTQeMagG-d_yzLh-sbDNW74m6mRN628CUIZb8gIy503U720xxVjGJbplAvCVOgf-HFXFmOQQBqIhsrDSNZHHN3ImI.png)  \nThe Fourier transform takes us from the time domain to‚Üíthe frequency domain\nThe sampling theorem says that if you don't sample well enough‚Üíthen you can't get back again\n## Signal Reconstruction from its Transform Components\n![|400](https://remnote-user-data.s3.amazonaws.com/CBHMczyidmRIdjXkwWLtdRbw8610OSHBe5g-zEoZSfsuuUQPWYCrO0MbjaL0h7hv9rwFWte2jVUkWxcKEhuLEi1B5eB-El2N53E-shbM6JFn5xHawVblu3nfNnf0PEnA.png) \n \n# 2D Fourier Transform\n## Forward Transform\n-  __x__  and  __y__  - Two dimensions of space\n-  __u__  and  __v__  - Two dimensions of frequency\n- $\\textbf{F}\\textbf{P}_{u,v}=\\frac{1}{N^2}\\sum\\limits_{x=0}^{N-1}\\sum\\limits_{y=0}^{N-1}\\textbf{P}_{x,y}e^{-j(\\frac{2\\pi}{N})(ux+vy)}$\n-  N  x  N  image with pixels $\\textbf{P}_{x,y}$\n## Inverse Transform\n$$\\textbf{P}_{x,y}=\\sum\\limits_{u=0}^{N-1}\\sum\\limits_{v=0}^{N-1}\\textbf{F}\\textbf{P}_{u,v}e^{j(\\frac{2\\pi}{N})(ux+vy)}$$\n\n# Implementation via Fast Fourier Transformation\nThis is a 1-D Fourier Transformation\n![|400](https://remnote-user-data.s3.amazonaws.com/mkiAk6nlpkQSlgb8Hfhedz8WiFBXtP7sTrBj1CbWW6ybWW0G54K6kSpuTGDDITi7ozFz9QAWFaevReOslpbXiI8F0Vpthq_dJ8ljQbM4RHseXGIjtI8v5TR8YwlwiVyU.png)\n \n# Properties of Fourier Transform\n1. Shift Invariance‚ÜíShifting the image does not change the magnitude of the Fourier transform![|400](https://remnote-user-data.s3.amazonaws.com/dwdjV_8xK3_HGrHFcXP5b5U1rMDUETVux2avnq7Hor26SYXrYnilaHmljZy9eO1ZRlSeHs9CuypnE4lJ8tql27XglqqPxN1iqVr-YWpSC6IDMWpE3Rh-wFsa36RT68Au.png)\n2. Rotation‚ÜíWhen you rotate an image, the frequency components rotate![|400](https://remnote-user-data.s3.amazonaws.com/YRBtb9Z6HdQaNlPZ-bhSonoFTVeN5LoZCzwO4JJrLHFbOyXN0TgMSh_zir6hbV_qmfTI8rNXnDRot4nyAm9UFlFV9leUJqMSUs4_pjNkB_vUpP4VPatlN0AoDfbKe3GF.png)\n3. Filtering‚ÜíFourier transforms provide access to different frequency components![|400](https://remnote-user-data.s3.amazonaws.com/yqiR6v19Ot4jnNXRtmCUZ5rSL8-xGafcKdfGzjEkASn-z5Ji9mQ8H-zmgdH6_8B_X-F-zn12QHwR0pPk7QYmd74mS5VPI6xoJTnuCTplb1HwZd0HDfFt8vgb1XXa9HRv.png)\n\n# Applications of 2D Fourier Transforms\n- Understanding and analysis\n- Representation (invariance)\n- Speeding up algorithms\n- Recognition/Understanding\n- Coding\n","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Introduction":{"title":"Introduction","content":"\n# Applications of Computer Vision\n- Medical Imaging\n- Modern Cameras/Phones\n- Robotics\n- Image Coding\n- Biometrics\n- Product Inspection\n\nImages consist of picture elements known as pixels\n![|400](https://remnote-user-data.s3.amazonaws.com/rSUwKbDgbGP8bwocgycHBrILTokyv6d4_Ex-y6hdxrgIIy1YIQQeL_UMncOEANsvOcCRzQiFa_eM4wYf5RShBPosvEkTFioOWrBn9xem8lzwPheeH8LRI-ebIw_vb_uh.png)\n\n![|400](https://remnote-user-data.s3.amazonaws.com/rSUwKbDgbGP8bwocgycHBrILTokyv6d4_Ex-y6hdxrgIIy1YIQQeL_UMncOEANsvOcCRzQiFa_eM4wYf5RShBPosvEkTFioOWrBn9xem8lzwPheeH8LRI-ebIw_vb_uh.png)  \n \n2D Images are matrices of numbers\n![|400](https://remnote-user-data.s3.amazonaws.com/rGk5QkVYaaaJBy_lBrxs9j9gS0-7n54WczA1GXazfQ9gceZRWwPNB2Sr47m4EknaN1JgCs8BtbaOlu8o5q3LS65DeI1_VZpSxncsFAqfByRieE8DTbGl9p8altdi1wxN.png) \n \n## Point Operations\nCalculating values of specific points![|400](https://remnote-user-data.s3.amazonaws.com/7Yxgsc1k9eitYB28isRkbBWew3Hz4BjZWtCVehLbA6pYq5TKRTHJtcFpJWltfCJWBPlYCeCaZprFRwwPXUadIBn2d76xS1koy-uLVY5TtzVtXz4Nfe6Kj-am9WDMU0qI.png)\n## Group Operations\nProcessing neighbourhoods of pixels\n![|400](https://remnote-user-data.s3.amazonaws.com/5DorLfN8-jv7Zp3lWQ9ddYskkNv6fXxmyDZb_Mbqde0aZs9x_lKzrFhaZYhG2UXlEz-V1vlBaSjACjFGvB-_jw9BBr8mfAAxYPuExp3nI_1rhPoOsd6HHn8KZSrpDbF5.png)\n\n## Feature Extraction\nFinding shapes\n![|400](https://remnote-user-data.s3.amazonaws.com/jo_EFI5_uv7kdO2djzabflmy1l-hTTxSyEs2PoySn0tVC0ZSuE1LNA5fzAInZxfo6WZrGwgPuMEPHWQSQ3BkbPhwrSscRyCSJDh-EU3uk2ZIBhdYO5jyxkm9q3timPSv.png)\n\n## Applications of Computer Vision ‚Üì \n1. Image coding\n2. Product inspection\n3. Robotics\n4. Modern cameras/Phones\n5. Medical imaging\n6. Biometrics\n\n## Gait Recognition\nRecognising people from the motion of their whole body\n![|400](https://remnote-user-data.s3.amazonaws.com/G03WmBnfb32AHVEk2dtosoM2luWmqlryPVKB40X4s88S8qFnio0kMUtAHgND5Q1hJksaqodEIuNepHAMFU_kt60nz7cq8g3l6STb-DL9hUZemWxJBOq-7lFK3yELdItQ.png)","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Large-Scale-Image-Search":{"title":"Large Scale Image Search","content":"\n# Text Information Retrieval\n## Weighting the Vectors\nThe number of times a word occurs in a document reflects the importance of that word in the document\n### Possible Weighting Schemes\n#### Term Frequency - Inverse Document Frequency (TF-IDF)\nInverse Document Frequency - Provides high values for rare words and low values for common words\n##### Term Frequency\nThe frequency count of a term in a document\n##### Raw Frequency\nFrequency of occurrence of term in document included in vector\n##### Binary Weights\nOnly uses the presence (1) or absence (0) of a term recorded in a vector\n### Weighting Intuitions\n- A term that appears in many documents is not important\n\t- e.g. the, going, come, ...\n- If a term is frequent in a document, and rare across other documents, it is probably important in that document\n## Bag of Words Vectors\nEach word in the documents bag of words, contributes a count to the corresponding element of the vector for that word\n- Each vector is effectively a histogram of the word occurrences in the respective document\n- Vectors will have a high number of dimensions, but be very sparse\nWe create vectors for each document with as many dimensions as there are words in the lexicon\nThe lexicon/vocabulary is the set of all processed words across all documents known to the system\n## The Vector-Space Model\n- Model each document by a vector\n- Model each query by a vector\n- Assumes documents that are \"close together\" in space are similar in meaning\n- Use standard similarity measures to rank each document to a query in terms of decreasing similarity\n## Inverted Indexes\n- A map of words to lists of postings\n- A posting is a pair formed by a document ID and the number of times that specific word appeared in that document\n- Computing the Cosine Similarity\n\t- For each word in the query, lookup the relevant postings list and accumulate similarities, for only the documents seen in those postings lists\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/Uz8GJyOeswkTWxzGkpEcN0C1eUw8tDFKCzwpX0WzIf-GyuT0QK8W05afo1rrRxvJ18zD5W9RofWtb5e89NbLXMiWKejCHmsuK6HsW8ODcbzx9AenWhSQCJIV_X3dryJg.png) \n![|400](https://remnote-user-data.s3.amazonaws.com/e16xDON3GPBEJolFKH2_ur8AOdP8GYcXR2VXkm4aHU5F_MC3aeJjbh3HMLvbHzcHfdpw-HfsCIaymhCAe8iwKABr1YC7hl21XG7hOgmtytpLm4gr9KNcqW-3nzPHuglP.png) \n## Searching the Vector Space Model\nGiven a query you can find a match by measuring the distance between vectors\nThe query vector will be significantly shorter than the bag of words vectors, so distance is measured using the cosine similarity\n![|400](https://remnote-user-data.s3.amazonaws.com/Uw47pGONuOQ087vA-W3uU1-V1yn12R8qn8mLOwxzzmjC54FsZi-jYqR20TPaELofAatKg6lWdxYWgkKCqUtHA-OlOI2H8kM6jnXzoh7jMhAEgq6IwC6GQyOfiP4aAUIg.png) \n## The Bag Data Structure\n### Bag of Words\n![|400](https://remnote-user-data.s3.amazonaws.com/kDACx4-c0DNVu41Ba9uR_33hnxszH3ZBUhtDbJE3_9G6xf_NFnBi9uWhaslgnFSv7FTBKp9wkSbYJgUVSDD0xSgJY_hswlmo3UtCF_IDfJc6wLsthpG2iXu3fnWb14Ps.png) \nA bag is an unordered data structure like a set which, unlike a set, allows elements to be inserted multiple times\n- Sometimes called a multiset or a counted set\n## Text Processing (Feature Extraction)\n- Stop-word Removal (Optional) - Removing words like \"the\"\n- Tokenisation\n- Stemming/Lemmatisation (Optional) - Reducing words to their stem\n\t- e.g. Jumped - \u003e Jump\n- Bag of Words\n#### Example \n![|400](https://remnote-user-data.s3.amazonaws.com/f_kuHYqqGco0sxCNX2u43bNgwupI3JtVwjWrksaw1zjbC7y69pvFWvNSrd8w170kwcnZfHdwKRbbYnfxD78EQeK96OEQy_hsiQDN7aheD-5M6vYSsrrfROzWn_FOt03P.png) \n## Vector Quantisation\nVector quantisation is achieved by representing a vector by another approximate vector\n![|400](https://remnote-user-data.s3.amazonaws.com/gxe0eY5PtTjZnSNO8tzcb2E_O0yFcEcuNiu1Pu9kog49eSjT7MgRrxkghsJpOR_C3auZySNsBTaaDw7bolJvmL9lJ26SsUGyH6um-6pJSOHHOnNBiSQ5r_h6TIR_vEll.png) \n- Each input vector is assigned to the nearest vector from the pool of representative vectors\n### Learning a Vector Quantiser\n- Vector quantisation is a lossy data compression technique\n- Given a set of vectors, a technique like k-means clustering can be used to learn a fixed size set of representative vectors\n\t- The representatives are the mean vector of each cluster in k-means\n\t- The set of representation vectors is called a codebook\n![|400](https://remnote-user-data.s3.amazonaws.com/jIxoTIAowUE0KWqrc40o-zhQjhmbTZooyPivBbcKd5JY6UslisOPqcS6b-oZiSmtddVF1Cm-cQhRlFE0ZLMN26CGWqN4MW1h6f9jEzKdD9BSM2Du88AlFf_ujIscbruM.png) \n\n# Visual Words\n## SIFT Visual Words\n- We can vector quantise SIFT descriptors\n\t- The codebook is the visual equivalent of a lexicon or vocabulary\n\t- Each descriptor is replaced by a representative vector known as a visual word\n\t\t- The process of applying vector quantisation to local features is similar to the stemming of words\n\t\t- The visual word describes a small image patch with a certain pattern of pixels\n## Bags of Visual Words\nOnce we've quantised the local features into visual words, they can be put into a bag\n- This is the Bag of Visual Words (BoVW)\n- We effectively ignore the location of the local features in the original image\n## Histograms of Bags of Visual Words\nOnce we have a BoVW and knowledge of the complete vocabulary (the codebook), we can build histograms of visual word occurrences\nThis provides a way of aggregating a variable number of local descriptors into a fixed length vector\n- Useful for machine learning\n- Also allows us to apply techniques for text retrieval to images\n![|400](https://remnote-user-data.s3.amazonaws.com/TKu6VE3h-7QptAlkuDlW9o7txvCTEF7SH6kYExyjMVUEaAhBNzL13aYlFQmS4RhebHxToctThpA6mpDmfLwecxzRYEhxqP1e9Q57-stx-YnDtDX3ctLMulsbr1QsLnVs.png) \n## The Effect of Codebook Size\nThe size of the vocabulary is a key parameter in building visual word representations\n- Too small means all vectors look the same, not distinctive\n- Too big means the same visual words might never appear across images, too distinctive\n\n# Content-Based Image Retrieval\n## Overall Process for Building a BoVW Retrieval System\n1. Vector quantise the features, and build BoVW representations for each image\n2. Learn a large codebook from a sample of features\n3. Collect the corpus of images that are to be indexed and made searchable\n4. Construct an inverted index with the BoVW representations\n5. Extract local features from each image\n## Optimal Codebook Size\nInverted indexes only give a performance gain if the vectors are sparse\nVisual words also need to be sufficiently distinctive to minimise mismatching\n- Large codebooks cause problems as they are non-trivial\n- Implies a very large codebook size\n![|400](https://remnote-user-data.s3.amazonaws.com/cxElqQaN10VcAZKh_dyNO0iT6uGDUz84XeDMwSDngrAoR38M2n2wTdk1iL5GRMRB40kcEn9n9cKrT7KVKb3xAsEiPAYZtufcRxidm6XWxfWMoaORvjx62zFqzwArZZ4k.png) \n## BoVW Retrieval\nWith the visual word representation, everything used for text retrieval can be applied directly to images\n- Inverted index\n- Vector space model\n- Weighting schemes\n- Cosine simularity","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Local-Features-and-Matching":{"title":"Local Features and Matching","content":"\n# Local Features\nInterest points are detected in the image and a feature is extracted from the surrounding pixels, represented by, usually just one, featurevector\nFeature points are used for\n- Robot navigation\n- Camera pose estimation and camera calibration\n- Motion tracking\n- 3d reconstruction\n- Image alignment\n- Object recognition\n- Indexing and database retrieval\n\n# Matching with Features\n- Detect feature points in both images\n- Find corresponding pairs\n![|400](https://remnote-user-data.s3.amazonaws.com/MgSq7AlBR3NJb86c8nrUBZ3FhQCyrJDYEWvEeyAeOqzzPEWWn0Nz_uSQeTjrUatItrdAeo9CLwSxjYDRKyqKOP-ChBfVT26iik46nCX-a0TSmELS_x4M6ZFMbtxVdYaq.png) \n## Issues with this method\n### Problem 1\n![|400](https://remnote-user-data.s3.amazonaws.com/pXvwDOMvt5qv3xoROYc_l87nvsdzZF2CRRbECnxl0aQRhqWQOqd_MuSFB94Jlh0syfqpsZWw2rLG7gECHVt4SiRA4Tbbn3vsib8E1b30Virp8WGI8p1gVnNBXE-tdXXC.png) \n- We need to detect the same points independently in both images\n- We need a repeatable detector\n### Problem 2\n- We need an invariant, robust and distinctive descriptor of each point\n- For each point, we need to able to recognise the corresponding point in the other image\n![|400](https://remnote-user-data.s3.amazonaws.com/g9QJxvqJocrDxgQmeVjzb3KVnXIyidb5GvIOETOw3kx5QdI3MJ-D-6Qz2bkwC8siIbiLAbwRnVNiUqABPbP9L78ymfoY5mZdk6bsFBx7zDbwRkBwIOLW3zjRFvBKD9Nh.png) \n\n# Two Types of Matching Problem\nIn stereo vision there are two important concepts related to matching\n## Narrow-baseline stereo\nThe camera has made a small movement between its two images of the recorded object\n![|400](https://remnote-user-data.s3.amazonaws.com/YauNt3JRUpF3yu4YIUEkiGEEnQ0WBARSUISVAyEoeFmai-Jevi5tIiM4GUQXBYQ4laRAV0CA5o9NJ-xFpFhgCuOAxnX1K_2dgfZ1A-KDFf9xuYjCfmDA9F3bBz6VfnzA.png) \n## Wide-baseline stereo\n![|400](https://remnote-user-data.s3.amazonaws.com/WepGxv2LlL5KbVUDi6liIcwWmC0uECnwuCXKQbRcm1Q5_isLnE9D6DtXYh1Z7scTz0Gw8Oo372tRovAG478BPPRxJGaWovl3ws2dSMVcCqHJ6YyY1CSxEekDjo_qyaPA.png) \nThe camera has made a large movement between its two images of the recorded object\n\n- These concepts extend to general matching\n\t- Techniques for wide-baseline stereo are applicable to generic matching tasks\n\t\t- e.g. Object recognition, panoramas, etc\n\t- Techniques for narrow-baseline stereo are applicable to tracking where the object doesn't move too much between frames\n\n# Robust Local Description\n## Descriptor Requirements\n### Narrow Baseline\n- Robustness to rotation and lighting are not so important\n- Descriptiveness can be reduced as search is over a smaller area\n### Wide Baseline\n- Need to be robust to intensity change, invariant to rotation\n- Robust to small localisation errors of the interest point\n\t- The descriptor should not change too much if we move it by a few pixels, but to change more rapidly once we move further away\n- Need to be highly descriptive to avoid mismatches\n\t- But not so distinctive you can't find any matches\n \n# Matching by Correlation (Template Matching)\n## Narrow Baseline Template Matching\n### Interest point in two images with a slight change in position\n![|400](https://remnote-user-data.s3.amazonaws.com/hC87RA5XrBKiKxVkYJL7DC6YYWJeTF3ynedwDe-evZIrR55TbocCk5IzEQtAj7WSULvsWB5aPhJImNBsqPWVkdxEQPRmLQexyksW7Y1L8KIOi96K6a7JzFvRShM-PrCb.png)\n\n### Local search windows, based on the interest point in the first image\n![|400](https://remnote-user-data.s3.amazonaws.com/loMkCqQe3t6z76j-81Vc05xFKoUbd0oYznxHAuwPL4AOQcNUKCp3mgF-R8kpWim_m7ohHkSwCEqEQOz6zYpLMKoDVbnCQ2418xxEB99Gbd7IOHYl2mJX7mixUw1iL_yW.png)\n\n### The template can then be matched against target interest points in the second image\n![|400](https://remnote-user-data.s3.amazonaws.com/lXIvoWAFeuwJ1bdmkLcPrKw_FDxM2zocurvfBIkH-Qz048vmvf972Ezlg-577J9XoxKpAW9P09jxoxHFzT61RB2YYa64d1h8q7H2h8s7K3afvjF42mM4vDILLZz8YUxn.png) \n## Problems with Wider Baselines\n- Sensitive to localisation of interest point\n\t- Not a problem with a small search window\n- Not robust to rotation\n- Can't assume a search area with wider baselines\n\t- Need to consider all the interest points in the second image\n\t\t- More likely to mismatch\n\n# Local Intensity Histograms\n## Use local histograms instead of pixel patches\n1. Describe the region around each interest point with a pixel histogram\n![|400](https://remnote-user-data.s3.amazonaws.com/BdtcXa7Kb81ptkrLcloRZ6BIZ-FkOWdvM11e9DNxixjl8fHr1PCmYyZ8cn9M5yG3Qtau7_xSbuKSTq14690JyNYZDsTfIkCmZWU9v634tyx2XCfEvEaP6I5kQUi7rImP.png) \n2. Match each interest point in the first image to the most similar point in the second image\n\t- i.e. In terms of Euclidean distance or some other measure between the histograms\n![|400](https://remnote-user-data.s3.amazonaws.com/0GhfQcOe1cNcsG486ptg6GOaNnnpAsElQ3TMWaLibaE9va7XNCwM3WEFTfNa3FSJ0jL_6y8J9mT9J_FEFL5IZtGO4oBixjFR5bJNCzJ8bwHrVTnVUMTshXEhPLjxIgCC.png) \n## Problems\n- Not invariant to illumination changes\n- Sensitive to interest point localisation\n- Not rotation invariant if the sampling window is square or rectangular\n\t- Can be overcome by using a circular window\n- Not necessarily very distinctive\n\t- Many interest points are likely to have similar distribution of grey values\n## Overcoming Localisation Sensitivity\nApply a weighting so that pixels near the edge of the sampling patch have less effect, and those nearer the interest point have more\n- Common to use a Gaussian weighting centred on the interest point for this\nWe want to allow the interest point to move a few pixels in any direction without changing the descriptor\n## Overcoming Lack of Illumination Invariance\nIllumination invariance is potentially achievable by normalising or equalising the pixel patches before constructing the histogram\n### Local Gradient Histograms\nInstead of building histograms of the raw pixel values, we could instead build histograms that encode the gradient magnitude and direction for each pixel in the sampling patch\n- The gradient magnitude and direction histogram is also more distinctive\n- Gradient magnitudes and directions are invariant to brightness change\n#### Building Gradient Histograms\n- For each pixel in the sampling patch\n\t- Accumulate the gradient magnitude of that pixel in the respective orientation bin\n- Quantise the directions (0¬∞-360¬∞) into a number of bins\n\t- Usually around 8 bins\n![|400](https://remnote-user-data.s3.amazonaws.com/2ApfIGZrYEZC1Yra_ppqXtWJnZ7xbCIEiu1PV2hmi6WvWY5dIyW6j-iC6nFAHjrAmUEDkUipuqNR_3Dx6DRUaExJqRSe9Nra-YV5saOPUB5IFwxsiTCUTQXNqUzo55CN.png) \nYou can compute the gradient orientations/directions and magnitudes of an image by using its partial derivatives\n\t- ![|400](https://remnote-user-data.s3.amazonaws.com/jvLgv-gF2sU-0fvyNAnegWsEU8-Jkzk9aqvjHdVehahAYSbn_eu-1wcMYglFJBB0NFq3VpY92nX7I2VEORserATfFjrkKZCwZGgTCFToY-lH-JmACGKUn54oV-z2debO.png) \n#### Rotation Invariance\n- By finding the dominant orientation\n\t- And cyclically shifting the histogram so the dominant orientation is in the first bin\n![|400](https://remnote-user-data.s3.amazonaws.com/y9g-0vm-wkAkYyhZW7X98YsDoliicRCiz_6MfYL09Y8kChpyt35BFtIREyV_iQN3u4mGyZNqiS87sTnmk-V0Dw-eukKjrXEAiY3_ikEveVHPtckq6Or87FyPZ3sIcZq-.png) \n- Gradient histograms are not naturally rotation invariant\n- But can be made invariant\n\n# The SIFT Feature\nStandard SIFT geometry appends a spatial 4x4 grid of histograms with 8 orientations\nLeading to a 128-dimensional feature\n- Which is highly discriminative and robust\n\n- Built on local gradient histogram idea\n\t- Which effectively creates multiple gradient histograms about the interest point and appends them all together into a longer feature\n- Incorporates spatial binning\n- The Scale Invariant Feature Transform (SIFT) is widely used\n\n# SIFT Construction\n## Sampling\n- Sampling patch around interest point\n- Patch is either fixed size, or more commonly, proportional to the scale of the interest point\n![|200](https://remnote-user-data.s3.amazonaws.com/5P2OQ570ccA_sUDgzsqDCBlcT1nZiSRg6eyTE9189-eqCQdIVricXJ0g7pJ61PVZQJs61fNkxKEb2HMQaYBKO59mFbLO7eIUJ69AC6yYI_1NEtdZuP2Op9VSKb74XdlS.png)\n## Binning\n![|200](https://remnote-user-data.s3.amazonaws.com/4aF8Cqvz_c4eMkYMTTUTVS4Sv6FgqoLQbrxAlr5CRGUCrMPfVbcmpZ6s7WboDBi9O1yu_svtuzUjhqRyUXp4HBsPkR3HMszgGSFUAOjHHTWaB8fkXXGc-FWF1MrAEIrv.png) \nGradient histograms, taking into account the gaussian weightings, are created for each spatial bin\n- Orientations are measured relative to the overall dominant orientation of the patch\nThere are usually 4x4 spatial bins, rather than the 2x2 shown\n## Weighting\n![|200](https://remnote-user-data.s3.amazonaws.com/O09a-SgiqIV1HKWV5_aTcJDeidpdxBX7Dqx7RunwyRvaZZ_eCU7rvnWKJo4ZCzS1NolHnQygiv2y-MocFabw4VcpavjCX4rY3cieYaykVGXqpy3xR1xXzqspFfghhWTk.png) \nThe corners of the sampling square have zero weight, so in effect the sampling region is actually circular\nA gaussian centred on the interest point weighs pixel contributions lower near the edges\n \n# Matching SIFT Features\n## Euclidean Matching\nTake each feature in turn from the first image, and find the most similar feature in the second image\n- Threshold can be used to reject poor matches\n- Doesn't work too well and results in lots of mismatches\nThe simplest way to match features\n\n## Improving Matching Performance\nOnly form a match if the ratio of distances between the closest and second closest matches is less than a threshold\n- Threshold typically set to 0.8\n- This means you can be more confident you have found the right point as you can see if there are any another similar points, that it could potentially be\nTake each feature from the first image, and find the two closest features in the second image\n","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Local-Interest-Points":{"title":"Local Interest Points","content":"# What makes a good Interest Point in an Image?\n- Invariance to brightness change\n\t- Local changes as well as global ones\n- Sufficient texture variation in the local neighbourhood\n- Invariance to position between the angle/position of the scene to the camera\n# Finding Interest Points\n## Different types of interest points to choose from\n### Blob Detection - Difference-of-Gaussian Extrema\n![|200](https://remnote-user-data.s3.amazonaws.com/aMdPOOwczOgzvqXqJ4I1I63efazF5aRvMBXds4R27kRVlHarabPZzDCWDfFBj2cm37KGhiacPl139iCPu5JIXEfHSwcwt6aopI6xEq6dEDu_SVmDdOP-yIuoO6rGZr14.png) \n### Corner Detection - Harris and Stephens\n![|200](https://remnote-user-data.s3.amazonaws.com/beEThfWceMkMF6riundQ4w71N5-meJN4o157TdEUV5ogaQA0mtGVBCFhh5VdvSbHCo5qaSn3b7m_iE1jimGzPgzCz2-Hp4Vpfb7-yfGGx7gzvFIl8oUXLaKI_n0_JkSK.png) \n# Harris and Stephens Corner Detector\n## Basic Idea\n- Shifting that window by a small amount in any direction should give a large change in intensity\n- Search for corners by looking through a small window\n## \"Flat\" Region\nNo change in all directions\n![|200](https://remnote-user-data.s3.amazonaws.com/bmDg-eaIoCTTnbVI8w4POY5E7Jmuc1HXQkpGCAE0dW__19MYQ-Y_3kr1uncBUb3bkiEeq4bk3pPPDidnZDiwvN_SJkluNkncjzYFnD_oFo4dWGre97L8Y8B-Y_MvnfOd.png) \n\n## \"Edge\" Region\nNo change along the edge direction\n![|200](https://remnote-user-data.s3.amazonaws.com/XwRLRFhiUB_69yKDyYpBupG0jurIO1tRLLV4tEvzbC6J3TmAC2-TxX7lfrRYj0w7tcD4qs6ZWbkr0oNfbTCPeLrs4ezVucUuSCd2Wg-eZVmNsKnrx6yn117zu05c1kvr.png) \n## \"Corner\" Region\nSignificant change in all directions\n![|200](https://remnote-user-data.s3.amazonaws.com/iAwkm99HKJHOYAlBcMFSoldgDOfPwF_99OfQmqpcoIQHqR9BNnnBgmbUu3S3tUfIRJM3bvaOWYSwdjH8LRcoMnOgYpZ1PTLbynNCtrGki62bkkEma4nrMjxkxWUgfeaW.png) \n## Mathematics\nWeighted average change in intensity between a window and a shifted version by $(\\Delta x,\\Delta y)$ of that window\n### The Structure Tensor\n![|200](https://remnote-user-data.s3.amazonaws.com/Je6Z478m9wLorS8b1OY40dESQjYfAdoqFGTA1vj-AV3e3jL-g_ng4HJdWl_65kC0_4G9N7ouOg4cPr_ZiMBd5SvYcRfpLNmYBwqfjpSVdc3z0qErPpVuqXrAdutUTxpt.png) \nThe square symmetric matrix $\\textbf{M}$ is called the Structure Tensor or the Second Moment Matrix \n$$\\textbf{M}=\\begin{bmatrix}\n\\sum_W(I_x(x_i,y_i))^2 \u0026 \\sum_WI_x(x_i,y_i)I_y(x_i,y_i))\\\\\n\\sum_WI_x(x_i,y_i)I_y(x_i,y_i) \u0026 \n\\sum_W(I_y(x_i,y_i))^2\n\\end{bmatrix}$$\n- The eigenvalues and vectors tell us the rates of change and their respective directions\n- It concisely encodes how the local shape intensity function of the window changes with small shifts\n- As with the 2d covariance matrix, the structure tensor describes an ellipse\n![|400](https://remnote-user-data.s3.amazonaws.com/Dt9rM1y7UIgDaWDRXOZvFw0-vTpcPyePBL6YpxeNluy8isGJHUtUN0SRhrX5NPqJXJcd-jPuWhXtaIjMhLL-C7caWTzbMUOZNExKrSer32r19eNXHN19VEy3WcPRzSRi.gif) \nThe Taylor expansion allows us to approximate the shifted intensity\nWe can substitute and simplify the previous equation to\n$$\\begin{bmatrix}\n\\Delta x \u0026 \\Delta y\\\\\n\\end{bmatrix}\n\\textbf{M}\n\\begin{bmatrix}\n\\Delta x\\\\\n\\Delta y\\\\\n\\end{bmatrix} \n- \\begin{bmatrix}\n\\Delta x \u0026 \\Delta y\\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n\\sum_W(I_x(x_i,y_i))^2 \u0026 \\sum_WI_x(x_i,y_i)I_y(x_i,y_i))\\\\\n\\sum_WI_x(x_i,y_i)I_y(x_i,y_i) \u0026 \n\\sum_W(I_y(x_i,y_i))^2\n\\end{bmatrix}\n\\begin{bmatrix}\n\\Delta x\\\\\n\\Delta y\\\\\n\\end{bmatrix} $$\n$$E(x,y)=\\sum\\limits_Wf(x_i,y_i)[I(x_i,y_i)-I(x_i+\\Delta x,y_i+\\Delta y)]^2$$\nWhere\n- $I(x_i,y_i)$ - Intensity in window\n- $f(x_i,y_i)$ - Weighting function\n- $I(x_i+\\Delta x,y_i + \\Delta y)$ - Intensity in shifted window\n# Harris and Stephens Response Function\nRather than compute the eigenvalues directly, Harris and Stephens defined a corner response function in terms of the determinant and trace of $\\textbf{M}$\n![|400](https://remnote-user-data.s3.amazonaws.com/EeUxo5u5UcFr0kmT9qXROSL63tTyAPGV-S0TvFu9km65cyjzX5475WBTOmXYAGL1unx3ORhFQHVJ0lmyC2Lh-SFdyUQYk4Z9xHJ7QGj7Tk2Iv1E-hJknr6Lb0s4tbh8v.png) \nWhere\n- k - A small empirically set constant (usually 0.04 - 0.06)\n![|400](https://remnote-user-data.s3.amazonaws.com/mLQjESv_ysA_GTuTJ51rdS-z39hRn1-mqwBHKJr-XVn4a3hc8dQWw-XmxVsRhDPYgRjd1Lq-LLeWouF_kiYw2VDliWCqQT-_zxp85Tz6jzyJW_KjU89E6la1bF6SX_50.png)\n# Harris and Stephens Detector\n- Take all points with the response value above a threshold\n1. Keep only the points that are local maxima\n\t- i.e. Where the current response is bigger than the 8 neighbouring pixels\n# Scale in Computer Vision\n## The Problem of Scale\n- If you use a technique that uses a fixed size processing window (e.g. Harris corners) then this causes problems\n- As an object gets closer to the camera it gets larger with more detail, as it moves further away it gets smaller and loses detail\n## Scale Space Theory\n### A formal framework for handling the scale problem\n- Key notion - Image structures smaller than sqrt(t) have been smoothed away at a scale t\n- Represent the image by a series of increasingly blurred/smoothed images parameterised by a scale parameter t\n\t- Where t represents the amount of smoothing\n# Gaussian Scale Space\nMany types of scale space are possible\nOnly the gaussian function has the desired properties for image representation\n- These provable properties are called the \"scale space axioms\"\n\nGaussian scale space is defined as\n![|400](https://remnote-user-data.s3.amazonaws.com/GHenUWytFRU2JFwkYgkxaF_CemFSDlRj9nVGWfXFy359y6Bruf4mNb4IGJglWhBJs3uwaIv2fw3txINTudvcIxJ0QlSApvJ1of5_UvUZ-4F0j8mTU5pr1Axwwqrgq7MU.png)\n$$L(\\cdot,\\cdot,;t)=g(\\cdot,\\cdot;t)*f(\\cdot,\\cdot)$$\nWhere\n- $g(\\cdot,\\cdot;t)*f(\\cdot,\\cdot)$ - A convolution of the gaussian with parameter t over the image $f(\\cdot,\\cdot)$\n- $L(\\cdot,\\cdot,;t)$ - A set of images\n\t- $\\cdot,\\cdot$ - Spatial coordinates of the image\n\t- t - Scale parameter $(t\\geq0)$\n\t\t- $t=\\sigma^2=\\text{variance of the gaussian}$\n# Nyquist-Shannon Sampling Theorem\nIf a function x(t) contains no frequencies higher than B hertz, it is completely determined by giving its ordinates at a series of points spaced $\\frac{1}{2B}$ seconds apart\nSo, if you filter the signal with a low-pass filter that halves the frequency content, you can also half the sampling rate without loss of information\n## Gaussian Pyramid\nEvery time you double t in scale space, you can half the image size without loss of information\n![|400](https://remnote-user-data.s3.amazonaws.com/ODRxuLwXv4lScvGNPzZ_Hj0CdgJV3e7aR1uoHdL3OxWOG-nd_q0BTxHLYCaimi6PNFzC3KgKzwAuG2ShT_UarYhUvmujmsOjMStOnDyiln9LXXHqFPgNsSYhusgoJgYV.png) \nLeads to a much more efficient representation\n- Less memory\n- Faster processing\n# Multi-Scale Harris and Stephens\nWe define a gaussian scale space with a fixed set of scales and computer the corner response function at every pixel of each scale and keep only those with a response above a certain threshold\n# Blob Detection\nLaplacian of Gaussian  LoG  is the second derivative of a gaussian\nBy finding the local minima or maxima after convolving a  LoG, you get a blob detector \n## Scale Space  LoG  \nBy finding extrema of this function in scale space, you can find blobs at their respective scale (~sqrt(2t))\n- Just need to look at the neighbouring pixels\n\nUseful property\n- If a blob is detected at $(x_0,y_0;t_0)$ in an image, then under a scaling of that image by a factor s, the same blob would be detected at $(sx_0,sy_0;s^2t_0)$ in the scaled image\n\nNormalised scale space  LoG  is defined as\n![|400](https://remnote-user-data.s3.amazonaws.com/v3_U8z6HjKA6SOQqD4Ojmg1j0WKGCs68SIYjtXxgQqTbSUNDaUgVqstw1vq8YXvcygidEXLdVQYIdpLzplusdVV86tS6alXCLxXPmeY3crZEcDOTbd5dyR9jgppV_sXD.png) \n## Scale Space DoG\nIn practice its computationally expensive to build a  LoG scale space\nBut you can make the approximation\n![|400](https://remnote-user-data.s3.amazonaws.com/EoOil7XsYINvpDlyB1m94xLhtTmM2-m4ANAtfnVa3NR0i-gRzn-jJ4vuDHkUkeKkxdBnMs2kYrDuqpLNTvkFkOnKs4fk_lZoNFHRcZZptkaVoZReGx0K_NzShpesJfT9.png) \n\nThis is called a Difference-of-Gaussians (DoG)\n- Implies that the  LoG scale space can be built from subtracting adjacent scales of a Gaussian scale space\n## DoG Pyramid\nFor efficiency you can build a DoG pyramid\n- Images between a doubling of scale are an octave\n![|400](https://remnote-user-data.s3.amazonaws.com/V3paxVIVgQRuMsYQX2cE-V1xpBwDcEwUwuA7j8CsPGL5Ws9uxIMz5QOUhOxixPwS3RPDzAO5QP3mv5JIkcTx8sxgw2MQPKG3o6m4pVGc0ALnRzDXjspnopyo4ORDj1E9.png) \nAn oversampled pyramid as there are multiple images between a doubling of scale","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Machine-Learning-for-Pattern-Recognition":{"title":"Machine Learning for Pattern Recognition","content":"\n# Feature Spaces\nMany computer vision applications involving machine learning take the following form\n![|400](https://remnote-user-data.s3.amazonaws.com/TPDSN8DLRM72geLmCJQL2cxPQwM3-oGKro6cHjmKi7P4nk2rx30F9gx0pDUEJXDknWKCKHe56fnlEGn2iodX0btCv5kaPRnpPl0tXsYkwbYzo3axmOwdGTnPFTzWwWtI.png) \nFeature Extractor - Where cool image processing happens\n- Make featurevectors from image\nMachine Learning - Uses feature vectors to make intelligent decisions\n\n# Key Terminology\nFeaturevector - A mathematical vector\n- A list of, usually real, numbers\n- The dimensionality of featurespace is the dimensionality of every vector in it\n\t- Vectors of different dimensionality can't exist in the same featurespace\n- The number of elements is the dimensionality of the vector\n- Represents a point in a featurespace\n\t- Or equally, a direction in the featurespace\n- Has a fixed number of elements in it\n \n# Distances in Featurespace\nFeature extractors are often designed so they produce vectors that are close together for similar inputs\n- The closeness of two vectors can be computed in the featurespace by measuring a distance between the vectors\n![|400](https://remnote-user-data.s3.amazonaws.com/Z-iT6VB5XdFVm45YI7vAORsCWwGS6xtUFEAWFejPBaSMH6q05h8cokRpRHDZzQosrd3w5t0_uc9D5D96K0XVgrJ8YQ1FRq7Mivyo0A5cx1UjAqaYOpQUm4aA4SHL1f0a.png) \n\n# Euclidean Distance (L2 Distance)\n- Computed via an extension of Pythagoras theorem to n dimensions\n- The straight line distance between two points\n\t- (Most intuitive distance)\n$$D_2(p,q)=\\sqrt{\\sum\\limits_{i=1}^{n}(p_i-q_i)^2}=||p-q||=\\sqrt{(p-q)\\cdot (p-q)}$$\n![|400](https://remnote-user-data.s3.amazonaws.com/O63dQPeKpN0kXAh-r6cOROvhNl4bLAe6ywpyijVoRUVf4pEyLP1ppouxG_MgRTW0bGnQ4CWRwD03o8sPe5E8fbFAC312NGFaED8Ilh1REkVJRvmzcQASwdFgXqOt1KGe.png) \n\n# Taxicab/Manhattan Distance (L1 Distance)\n![|400](https://remnote-user-data.s3.amazonaws.com/E8MEKysPbPd8b3PAiE1BzkVE3XB25ghnYymSfgEnOziGKV4vmgkgtQ3WTxwpkW4WnHbjUYJW_vDqtOfewRXWwbIUXVHDebvqLcaSLmyqtfK3oZz5We5c2lqxYUiLaKdc.png)\n$$D_1(p,q)=\\sum\\limits_{i=1}^{n}|p_i-q_i|=||p-q||_1$$\nL1 distance is computed along paths parallel to the axes of the space\n \n# Cosine Similarity\n![|400](https://remnote-user-data.s3.amazonaws.com/AuRYGludWUnZGSo2yLHCuUiTQsfNWDjgcprMnMpB-FXtUgwillIDbYYE690VHeW-1gRfWyb2xpQWe89TeBI3AQd7UwXwd2HTsCoK03iEIq5Kte8EQ2K5gcnepNeH0He1.png)  \n- Useful if you don't care about the relative length of the vectors\n$$\\cos(\\theta)=\\frac{p\\cdot q}{||p||\\text{ }||q||}=\\frac{\\sum\\limits_{i=1}^{n}p_iq_i}{\\sqrt{\\sum\\limits_{i=1}^{n}p_i^2}\\sqrt{\\sum\\limits_{i=1}^{n}q_i^2}}$$\n- Measures the cosine of the angle between the two vectors\n\t- It is not a distance\n\n# Choosing Good Featurevector Representations for Machine Learning\nChoose features which allow to distinguish objects or classes of interest\n- Similar within classes\n- Different between classes\nKeep number of features small\n- Machine-learning can get more difficult as dimensionality of featurespace gets large\n \n# Supervised Machine Learning: Classification\n- Classification - The process of assigning a class label to an object (typically represented by a vector in a featurespace\n- Supervised machine learning algorithms use a set of pre-labelled training data to learn how to assign class labels to vectors (and the corresponding objects)\n\t- Multiclass Classifier - Has many classes\n\t- Binary Classifier - Only has two classes\n\n# Linear Classifiers\n![|400](https://remnote-user-data.s3.amazonaws.com/iF4tz5_0L_4zrf6-qamsyCcLfsQG6TayjtR3ARH9NwTmQQeALsvaGXM4uf8vUqGs4U-FsbkCXvP0LtumWbNveELPVAjnG6j7O0aOm8wanaMtWc4Kbesmwi-7_RievIby.png) \n- Try to learn a hyperplane that separates two features in featurespace with minimum error\n- To classify a new image, you need to check what side of the hyperplane its on\n![|400](https://remnote-user-data.s3.amazonaws.com/JHbHZ-wcuwzYOBIFrvZ5oVBJcu_LABnglOgFKfSzlZ-yK7io2W5a8-KJZ2eWsEI5XOeLeMVGHzrBXW1Xj8RCT7ouJKA6aNMUsGloU3CugTHGBKeqpxEt1rFdNDNtFWM1.png) \n- A Type of binary classifier\n- Many hyperplanes could be chosen\n\t- Different linear classification algorithms apply different constraints when learning the classifier\n\n# Non-linear Binary Classifiers\nLinear classifiers work best when the data is linearly separable\n![|400](https://remnote-user-data.s3.amazonaws.com/biJBVAnfaPZK_AJyk-9uAz3jbAS8BFBCfKGLtGV5NKOfPPaU769mhlxPuQRQQCn8229ZreTqsijl4yhD9R_Hi7Uf5SRrq6I7Tp0TpRmzjLrPzsXthJzrXVbA_XpxXnoR.png) \n\nNon-linear binary classifiers (such as Kernel Support Vector Machines) learn non-linear decision boundaries\n![|400](https://remnote-user-data.s3.amazonaws.com/ZaheNa3XbTYyvOgKR8de3-ZxO1yBGkxhK-o54Si3LNdpVtwbgc0f9tzJ1S2tyVHXmJGLE09Rdv5p4Zl-KHKPx7cc0y1PrDJ9S1CMsadQUEo8IDhXn1JFVoJT54LpETnE.png) \n\nThis can help reduce error, as seen in this example\n![|400](https://remnote-user-data.s3.amazonaws.com/IXW2SKBjzZq21VviDd20DRY2Fl75azNgN0l3oj0eZ8Fkl7Hma1pk0Q8H6DgryAweSzzjnuIQmOOCnEN5_6M3agaGgNjYvXmEgL2KTMnW2rw9Aajs2eT0y-aISjk6Fyka.png) \nHowever, by overfitting you can lose generality\n\n# Multiclass Classifiers: K Nearest Neighbours\nAssign an unknown point a class based on the classes of the k-nearest neighbours\n![|400](https://remnote-user-data.s3.amazonaws.com/7GDekSCXYifZYCudy7xPwXD97oBXxy9fbF8Ada6RMkGuijFS0nWGnzPohiXMu55k3w7DvKnTnxVpyA_FFML1hXhRvEHtzrnmvz8sAoA3IWNdYLXrbAPzZ-Nlqv3zVveF.png) \n## K-Nearest Neighbour Problems\nComputationally expensive if there are\n- Many dimensions\n- Lots of training examples\n \n# Multiclass Linear Classifiers\n## One versus All (OvA) / One versus Rest (OvR)\nOne classifier per class\n## One Versus One (OvO)\n$k\\frac{k-1}{2}$ classifiers\n- Effectively pairing all the classifiers together\n \n# Unsupervised Machine Learning: Clustering\n- Aims to group data without any prior knowledge of what the groups should look like or contain\n- Items with similar vectors should be grouped together by a clustering operation\n- Some clustering operations create overlapping groups\n\n# K-Means Clustering\nA featurespace clustering algorithm for grouping data into k groups with each group represented by a centroid\n1. The value of K is chosen\n2. K initial cluster centres are chosen\n3. The following process is performed iteratively until the centroids don't move between iterations\n\nEach point is assigned to its closest centroid\nThe centroid is recomputed by the mean of all the points assigned to it.\n- If the centroid has no points assigned, it is randomly re-initialised to a new point\n\n4. The final clusters are created by assigning all points to their nearest centroid","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Computer-Vision/Point-Operators":{"title":"Point Operators","content":" \n# Histogram of an image\n\n![|400](https://remnote-user-data.s3.amazonaws.com/7nH4rPBAlVRDXasCRZ7E8V-j856Rf8aR1ubAnmlUt3Dx6Mr_7d5D1hiNqwZ19WyFLem-H_kreDbEt8vMvwJnLmfaZlw6TVl1H3dbYcKJ7pOfj5_YsRJqDXFCOO9MbpKa.png)\n\nThe histogram shows the contrast\n \n# Brightening an Image\n$N_{x,y}=k\\cdot O_{x,y} + l$\n\nWhere\n- x and y are the coordinates \n- l is the level\n- O is the old image\n- N is the new image\n- k is the gain\nTo change the brightness of an image, add or subtract to the level at each point\n\nSo to change the brightness of an image, choose values for $k$ and $l$\n\n![|400](https://remnote-user-data.s3.amazonaws.com/CiQZ-oRyPwBVULu09_OrWcge-BtvEUGHrBLiY2_yVqSTGAURvksb7nx5micxvMTds84ccaSZJqg7g6u7JU-vWthi9ckuJg3liu-vqqi9SYMdawxdZYGI4N-FZU3fYHts.png) \n \n# Intensity Mappings\n## Copy\n![|400](https://remnote-user-data.s3.amazonaws.com/CduIDJwfhy1oPGyckj7iwy_Xt9fUXsSsZcC1U-KJGUNqqdeOeTWijhY_9sL-vgQ7v1YaDcnPyblitg1emrGPVhje10lnGCdnXLtL6OuxRhtAt7YGMOIWj9flyDuKiPVR.png)\n\nWhat is the Mapping?‚ÜíWhite becomes white and black becomes black \n## Brightness Inversion\n![|400](https://remnote-user-data.s3.amazonaws.com/fh8KAus9iEHcOtKZwctf2jjeD-53-OIytUtEBQK4m0xh_x7bQNijHoK720JnOvSz-lGN_27D4WILLWmPYlBEEtlBhLyS9u8TQU7y6xXZCGWeO3f7Ias5FVWKyGErdLVn.png) \n\nWhat is the Mapping?‚ÜíWhite values are swapped for black and black values are swapped for white\n\n## Brightness Addition\n\n![|400](https://remnote-user-data.s3.amazonaws.com/12DUf-6MAZAJGrt_67T2P7YY9d7nLq8w3mWk9L8WPc8om8cBbAjszZca5GSLIaiJNJWJJv9tJi-hFRlJJKejAYlkQGp77_aa36n31O7-11yM-cNEQoKcdEWXc4sMFrr9.png) \n\nWhat is the Mapping?‚ÜíInvolves a clipping process, as you cannot get whiter than white or blacker than black\n\n## Brightness Scaling by Multiplication\nWhat is the Mapping?\n![|400](https://remnote-user-data.s3.amazonaws.com/aRx9GBtDCrd1CMietuO3TVUPmOk4JwoY1K6KGTPsKO3ZJ10TKlXkXMHsY-caSzE2zoSUFACQ3NAc_l1jCMoPIzgsHLzt494lukNfo0vmCkgZhd1yVdqyJylAEXcC-4UI.png) \n\n# Exponential and Logarithmic Point Operators\n## Logarithmic Compression\n### Brightness compression\n![|200](https://remnote-user-data.s3.amazonaws.com/AWyiLa8PGwiJ9vz93oeum51FfNoRFXHMgxgk8Kye27-wMSl21Ym76YckETwKGI96Ms9NcXuJNrILBf7xeof_tcDcHR3jggkP0ckLjzW9louxQvfgxZJ3m2a1wpxwhNaW.png) \n$$N_{x,y}=log(O_{x,y}) $$\nWhat does it do?‚ÜíReplaces the value by the logarithm of its value\n## Exponential Expansion\n### Brightness expansion\n ![|200](https://remnote-user-data.s3.amazonaws.com/Qm-ubI-EKmOpbQUxHFbtKRSPGKMvg2nBbQuJPidU42OwWJVMQv__uSk_QfIdAleg8wtFz0QHyxj9-BFyjZ5UePDRf-tQAqzVB3FjH6VqIjZNtkoF3gfsV9j1l7oUA7D3.png) \n$$N_{x,y}=exp(O_{x,y})$$\nWhat does it do?‚ÜíPerforms an exponential operation on each point\n\n# Intensity Normalisation\nAim is to use all available grey levels for display\n## Intensity Normalisation Process\nOriginal Histogram![|400](https://remnote-user-data.s3.amazonaws.com/BkS2MmNLNKwYmph3wyYTn8LFLXEeJ2NM42JFJHOGmrWFFusOa69MonNbhesv8SiJXkFuU2mUWVv-DINQGYF4LvUiKdGPP2l5lIptdSzqpvx67Dif_GiIXIIFtfYakRpi.png)\n\n1. Shift the origin to zero (subtract the minimum value)\n![|400](https://remnote-user-data.s3.amazonaws.com/N05Thqptywelz0hCsb1R2D07E2-YAK0zBnt4Xfh5GZqU-_fY5beROvWR1pgT7CqvyxPm5gDNyoYM9tbA6xMOIiplkYcswpdEZ3E0JUUAMzR4Km-eZ8p3OrFGPtDNz8CP.png) \n \n2. Scale brightness to use whole range\n![|400](https://remnote-user-data.s3.amazonaws.com/PhSveFC1gJqeASuEnw7V6WrL1os9riWX8H9fx9Tk5fmYzAERNVzFY3WsVdZuILMJpQIlHDpW1sOC6QIoHRhyGGjiB5csPrtQkXMyRKBHvDP_FiPRnBPsejiniwGmuVNl.png) \n\n$$N_{x,y}=\\frac{N_{max}-N_{min}}{O_{max}-O_{min}}\\cdot (O_{x,y}-O_{min})+N_{min}$$\nWhere\n- N - New image \n\t- N_{max} - Maximum output\n\t- N_{min} - Minimum output\n- x,y - Coordinates\n- O - Old image \n\t- O_{min} - Minimum input\n\t- O_{max} - Maximum input\n\n# Intensity Normalisation vs Histogram Equalization\n## Intensity Normalised\n- Used in Matlab's  imagesc\n- Grey levels all weigh the same\n- Grey levels all weigh the same\n\n![|200](https://remnote-user-data.s3.amazonaws.com/VdyLwKK15lcZ9vtE932fIxY3N0U-GUlnvJ0nu5WJBmYp9wZa3F7vLukyNSHTucuI--XxGSpnXjLQJThDGR0NZSuqFdh3fDw30zSPu_cmX_qCfGej4NimJIPen8TOQ-pZ.png) \n\n![|200](https://remnote-user-data.s3.amazonaws.com/VdyLwKK15lcZ9vtE932fIxY3N0U-GUlnvJ0nu5WJBmYp9wZa3F7vLukyNSHTucuI--XxGSpnXjLQJThDGR0NZSuqFdh3fDw30zSPu_cmX_qCfGej4NimJIPen8TOQ-pZ.png)  \n\n![|400](https://remnote-user-data.s3.amazonaws.com/KPYQI0jECosgTBzWl5nL27dtco3NfgBRrJ1kkBfDL2JoykqBR1yHPngsC7N7Hq-of6ieYwLUrC42-ZO9X9daPUvgjNPyWLSY8j1LoaGuMYxsxxGUaTrNNpEq02hTIwZc.png)  \n\n![|400](https://remnote-user-data.s3.amazonaws.com/KPYQI0jECosgTBzWl5nL27dtco3NfgBRrJ1kkBfDL2JoykqBR1yHPngsC7N7Hq-of6ieYwLUrC42-ZO9X9daPUvgjNPyWLSY8j1LoaGuMYxsxxGUaTrNNpEq02hTIwZc.png) \n\nUsed in Matlab's imagesc\n\n## Histogram Equalized\n\n![|200](https://remnote-user-data.s3.amazonaws.com/oGpaO2EnZMsttjm7KNod9enMGcHWbbHl_GIrWB9BQE8qjfXCo81aFZkf0F3MSEKT58nyzFSyipD1q8yXMxe-3axAHY1xudsvaVTT_pEzO7i2hbKr8-V7l8St5GRGtq36.png)  \n\n- Grey levels have different weights\n- Grey levels have different weights\n- Aimed for human vision\n\n![|400](https://remnote-user-data.s3.amazonaws.com/e7iUlWwaeED5t08N9fl4-KwF1sB8YQUx8oqKqAGkzGh3Pxv_XnMOVnLUt6UWLjTCQ_cTRPXDOL_18peVxGpCEMkQ-dVJgpksCWdbxxt0xUNZ_ecIm2Lkm6BTbnv4DYvU.png) \n\n![|400](https://remnote-user-data.s3.amazonaws.com/e7iUlWwaeED5t08N9fl4-KwF1sB8YQUx8oqKqAGkzGh3Pxv_XnMOVnLUt6UWLjTCQ_cTRPXDOL_18peVxGpCEMkQ-dVJgpksCWdbxxt0xUNZ_ecIm2Lkm6BTbnv4DYvU.png)  \n\n![|200](https://remnote-user-data.s3.amazonaws.com/oGpaO2EnZMsttjm7KNod9enMGcHWbbHl_GIrWB9BQE8qjfXCo81aFZkf0F3MSEKT58nyzFSyipD1q8yXMxe-3axAHY1xudsvaVTT_pEzO7i2hbKr8-V7l8St5GRGtq36.png) \n\n# Histogram Equalisation\n\n![|200](https://remnote-user-data.s3.amazonaws.com/lojllLfXhNlF9c-tNV8kpFVLDHv5CDBkOE1azZHw1hdS25LBoE8G_Ra-r2jGNFPTqc6ZMWPaeGuzJF7lTJJgNAL9J1hP2XqQ0Jng7Y_3XlbCzykkA-hK3zKbn4Tsv_j2.png) \n\nThe aim is a flat histogram\n\n## Deriving the equation\nThe number of points (N^2) in the transformed and original image should be the same\n- The sum of points per level is equal in the equalised and original image\n$$\\sum\\limits_{l=0}^{M}O(l)=\\sum\\limits_{l=0}^{M}N(l)$$\nThe cumulative histogram up to the level p should be transformed to cover up to the level q\n- This is the stage that gives us the equalisation function, that then takes us to the equalised image\n$$\\sum\\limits_{l=0}^{p}O(l)=\\sum\\limits_{l=0}^{q}N(l)$$\nThe number of points per level in the output picture is N(l) = \\frac{N^2}{N_{max}-N_{min}}\nThis can be rearranged into a mapping function for the output pixels at level q  \n$$q=\\frac{N_{max}-N_{min}}{N^2}\\cdot \\sum\\limits_{l=0}^p O(l)$$\n- Can be used as a lookup function\n- Effective but non-linear and significant problems with noise\n- Often used in medical image analysis\nCalculating a cumulative histogram of the output picture\n$$\\sum\\limits_{l=0}^{M}N(l)=q\\cdot \\frac{N^2}{N_{max}-N_{min}}$$ \n\n# Thresholding an Image\nWhat is it?\n- Set the point to white if above a certain threshold, otherwise black\n$$N_{x,y}=\\begin{cases}255 \u0026 if \u0026 N_{x,y}\u003ethreshold\\\\0 \u0026 otherwise\\end{cases}$$\n## Thresholding at level 160\n![|200](https://remnote-user-data.s3.amazonaws.com/G5arlwbtidFIklArByboCOSPTzjKoLiLiTV_zc_rTs1LaLrs-XF_9u0_pwVDKW98N3nCxvrxtZmZ25XiUM_G4JKriKEP0N2nkP1XLxjB2nUBpFc8wF_InxDPV70WZ4x3.png) \n## Thresholding at level 127\n![|200](https://remnote-user-data.s3.amazonaws.com/nnLhSsmAFeImLUVie9DSrhVuK-QwxWduhOnhHG2kpmcEfc4lpnVOPA1PBmWuuPIHOO4mx2u7RYKh2WOQbURTCoBrFxJDYQvJfWcyRUK0kbLaVSVF8Ts8uhpXwiLO4WMB.png) \n","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Data-Management/Data-Management":{"title":"Data Management","content":"\n\u003ciframe src=\"https://drive.google.com/file/d/1v64Wp7maMITimvknMJfBzoXM-fn1X6CE/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Distributed-Systems-and-Networks/Distributed-Systems-and-Networks":{"title":"Distributed Systems and Networks","content":"\n\u003ciframe src=\"https://drive.google.com/file/d/1zN8u-GU7YLTQh4FQFCleK08YTu1tre7e/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.119889353Z","tags":[]},"/notes/Engineering-Management-and-Law/Engineering-Management-and-Law":{"title":"Engineering Management and Law","content":"#\n#\n# Introduction\n## \n## **Impactful Organisations**\n### Types of Impactful Organisation ‚Üì \n####1. Team/Group/Committee \n####2. Profit Sharing Partnership/Private Company\n####3. Publicly Traded Company\n####4. Government/Department/Agency\n####5. Charity/Social Enterprise/University\n## \n## Management - Provides execution and vision to the organisation‚ÜîProvides execution and vision to the organisation\n### Management involves ‚Üì \n####1. Decision making\n####2. Planning\n####3. Implementation\n####4. Prioritisation\n####5. Efficient work\n####6. Motivating\n####7. Resourcing\n####8. Foresight\n####9. Leadership\n### Mathematical Models‚ÜîSupport a scientific approach to management\n#### These models are known as‚ÜíManagement Science\n## \n## **Diversity**\n### Reasons diverse teams perform better: ‚Üì \n####1. Focus more on facts\n####2. Process facts more carefully\n####3. More innovative\n####4. Helps avoid 'groupthink'\n## \n## **Systematic Decision Making**\n### Best to be scientific or systematic about major decisions\n#### Deliberation helps to avoid‚ÜíBias\n## \n# Agile Development\n## \n## **Agile Project Management (Scrum)** - Places a premium on flexibility and evolving customer requirements throughout the development process\n### Planning the work and then working the plan\n### Customer needs may evolve and change over the course of the project\n### Importance of evolving customer needs leads to incremental, iterative planning process\n## **Unique Features of Agile Project Management**\n### Recognizes mistakes of assuming once initial project conceptualization and planning are completed, project will be executed to original specifications\n### Emphasis on adaptation, flexibility and coordinated efforts of multiple disciplines\n### \"Rolling wave\" process of continuous plan-execute-evaluate cycle\n### Flexible - Iterative system designed for the challenge of managing projects in the midst of change and uncertainty\n## **Scrum Process for Project Development**\n### ![](https://remnote-user-data.s3.amazonaws.com/3RJNHMs1anmyFDrqsrWbgTpvxd9P0dUeCutlXvmYDZufjmEd19XBGdPS6W8AiXErj7w97ERuad0mYC2XnSGs9ZTUBg55UN5rg58mmFQ9v_RXSE6k2alrF5VZHJuM3Ce9.png)\n## **Key Terms in Agile Project Management**\n### Sprint‚ÜîOne iteration of the Agile planning and execution cycle  \n### Scrum - The development strategy agreed to by all key members of the project\n### Time-box - The length of any particular sprint, fixed in advance, during the Scrum meeting\n### User stories - Short explanation of the end user that captures what they do or what they need from the project under development\n### Scrum Master - Person on the project team responsible for moving the project forward between iterations, removing impediments, or resolving differences of opinions between major stakeholders\n### Sprint backlog - The set of product backlog items selected for the sprint, plus a plan for delivering the sprint goal\n### Burndown chart - Remaining work in the sprint backlog\n### Product owner - Person representing the stakeholders and serving as the \"voice of the customer\"\n### Development team - Organizational unit responsible for delivering the product at the end of the iteration\n### Product backlog - A prioritized list of everything that might be needed in the completed product and the source of requirements for any changes\n### Work backlog - Evolving, prioritized queue of business and technical functionality that needs to be developed into a system\n## **Stages in a Sprint**\n### ![](https://remnote-user-data.s3.amazonaws.com/PzDZ3ifSau5yDhwspjQunOjq1pu8OwfmXg2l-3y9joYITYJwImB78_G8ctfe731hA4rjmm9T7ja1kFrxrIS2BnAZlDOULXzhI3ynfeVByDkWEtB8vk0enudT9k_QCBJJ.png) \n## **Problems with Agile**\n### Active user involvement and close collaboration of the Scrum team are critical throughout the development cycle\n### Evolving requirements can lead to potential for scope creep\n### It is harder to predict at the beginning of the project what the end product will actually resemble\n### Agile requirements are kept to a minimum, which can lead to confusion about the final outcomes\n### Testing is integrated throughout the lifecycle which can add cost to the project\n### Frequent delivery of project features puts a burden on product owners\n### If it is misapplied to traditional projects, it can be an expensive approach without delivering benefits\n## Retrospectives‚ÜíAt regular intervals the team stops to reflect on how to become more effective, then tune and adjust behaviour accordingly\n## **Reasons to take Retrospectives**##EMLCommon ‚Üì \n### Identifies needs for improvement\n### Builds motivation to change work dynamics\n### The best candidate (the team) conducts the retrospectives\n### With multiple teams, retrospectives help cross lines to build alliances\n### Provides closure from bad experiences that may demoralize\n## **Retrospectives in Failed Projects**  #EMLCommon ‚Üì \n### Provides opportunity to learn from failure\n### Helps focus on improvement rather than accusation and blame\n### Benefits of learning from experience ‚Üì \n#### Closes door against future similar adversity\n#### Stories shared aspects of groups knowledge and tradition\n#### Experiences recalled help foster team common focus\n## **Involved Parties in Retrospectives**\n### To participate\n#### Must\n##### Scrum master\n##### The team\n#### Good to\n##### External team members\n#### Not at all\n##### Management\n##### Customer\n### To facilitate\n#### Professional\n#### Scrum master\n#### Any team member\n## **Objectives in a Retrospective**\n### What worked well  #EMLCommon ‚Üì \n#### Celebrate\n#### Recognize heroes\n#### Identify and share good practise\n### What didn't go well \n#### Avoid recurring mistakes\n#### What can be done differently\n### What is still confusing\n### Recognize/document what has been learnt\n## **Possible Goals of a Retrospective**\n### Capture effort data\n#### Quantify effort expended on the project\n### Get the story out \n#### One person never knows the whole story, story fits together when collectively told\n### Improve process, procedures, management and culture\n#### Reflection leading to change\n### Capture collective wisdom\n#### For temporary teams, discussing and documenting ensures the collective wisdom outlives the breakup of the team\n### Repair damage to the team\n#### Provides team members a chance to rest and heal\n### Enjoy the accomplishment\n## **Retrospective Structure**\n### Decide what to do\n### Generate insights\n### Set the stage\n### ![](https://remnote-user-data.s3.amazonaws.com/PRBXzs6X8xz2iMLy_8Ydc3j-TAOBa3kv3ZzHSneOMA71_18Zwy61z38r1LoEGsxhvY7iY2lw5VTV0RqYutaQiPkwXmRTrJx9QpG93ZQ48AWifiCyzFsbUE4bFG9nU3UC.png)\n### Gather data\n### Close the retrospective\n## \n# The English Legal System\n## Laws - Rules laid down by those in authority\n### Flexible\n## \n## Categories of Law\n### International\n### National/Domestic\n#### Public\n#### Private\n### The 2 primary sources of law are Legislation and Case law\n## \n## Constitution and Sources of Law\n### 3 Branches of power\n#### The executive\n#### The legislature\n#### The judiciary\n### In a democracy it is important to have as much separation as possible between these so the rule of law is fair and honourable\n#### And that justice is accessible and overt with everyone equal in the eyes of the law\n## \n## Hierarchy of the Courts and Tribunals\n### The Supreme Court is the final court of appeal for all UK cases\n### ![](https://remnote-user-data.s3.amazonaws.com/eJOOa9bEUodFT_cAzWDwD9J5nPw_a_MwR-xoExo4e5_irJEZDo6zyEOQjIB1FhO5CIfPAfrAdYaF7m3c3cmOI3NhKSo0FsnnaFaZ-vD9y8aOfNOe1M9HX-75yeHLeWrE.png) \n## \n## The Judiciary\n### Role is to adjudicate on the law\n### Cannot be sued for decisions made in court but can be investigated regarding procedure of a case before it reaches court\n## \n## The Civil Justice System\n### Important to follow both substantive and procedural law\n### Consider the effect of taking a case to court (litigation) and determine if it is worth it\n#### Time\n#### Cost\n#### Relationships (With suppliers, employer/employees...)\n## \n## The Criminal Justice System\n### Actions brought by the state\n### Severity of the offence will determine where the case is heard and the consequences\n# Scheduling and Estimation\n## \n## **Risk Management**\n### Risk management - The art and science of identifying, analysing and responding to risk factors throughout the life of a project and in the best interest of its objectives\n### Project risk - An uncertain event or condition that, if it occurs, has a positive or negative effect on one or more project objectives such as scope, schedule, cost or quality\n## **Risk Life Span**\n### ![](https://remnote-user-data.s3.amazonaws.com/rLLRS5MvbVRo6mphYPNfCNb1gSwjSOTxqzWVMY8fTh768T-nKpOO2NvyRdZL31XIos4lQ4rUZ8MUVMHCdA_iTJyM6RXqe42LmXr4j38XoxVthOkmURlGn9VAeq_1DDvl.png) \n## **Common Types of Risk**\n### Absenteeism - Staff not turning up\n### Resignation\n### Staff pulled away\n### Time overruns\n### Skills unavailable\n### Ineffective training\n### Specs incomplete\n### Change in customer orders\n## **Risk Impact Matrix**\n### ![](https://remnote-user-data.s3.amazonaws.com/ePwLsgN_ryJ4vYtJuH3i9SaDUF1XDf9Ih9iOHxs7Zr6Ei1syrfeBeyMHj_1H9Zb2aXfnGBSvskoPJBNnA3oonZqtsGBDaKuIHbm147g87OyS13G6YDHa4XCqaCSMQZd8.png) \n## **Risk Mitigation Strategies**\n### Transfer\n### Accept\n### Control and documentation\n#### Change management\n### Workaround\n### Minimise\n### Contingency reserves\n#### Task contingency\n#### Managerial contingency\n### Insurance\n### Share\n### Other mitigation strategies\n#### Cross training\n#### Mentoring\n## **Control and Documentation**\n### Helps managers classify and codify risks, responses and outcomes\n## **Common Sources of Project Cost**\n### Labor\n### Materials\n### Subcontractors\n### Equipment and facilities\n### Travel\n## **Project Price Breakdown**\n### ![](https://remnote-user-data.s3.amazonaws.com/h7VpMI0hLLXcc3aK4wIQQqrp8whVTo9c_IyqgPd19Rhfl4x7MnI2B6FuFZLR6KWOprVcPhWy9J_8HhZtl8lDVcIOHvvSQtUVsD5s-UP5K8pQxLSHfLcUNp6W-mRcxmdl.png) \n## **Costing Software-Project-Development Activities as a Function of Size**\n### ![](https://remnote-user-data.s3.amazonaws.com/ceKlAUEKC2CXrRrVvq9ypbbHUkJG3itVGATnIf1jgDYZfJc9cxZ3eq2xTYU4XSHgh6JzlAcpZMxVo_MhWoJxFZNXHcIZthZqwA2hVUeqwuDxPtM28iog0y8tuda-ajQO.png) \n## **Problems with Cost Estimation**\n### Low initial estimates\n### Unexpected technical difficulties\n### Lack of definition\n### Specification changes\n### External factors\n## **Activity Based Costing**\n### Identify cost drivers associated with this activity\n### Compute a cost rate per cost driver unit or transaction\n### Multiply the cost driver rate with the volume of cost driver units used by the project\n### Assign costs to activities that use resources\n### Projects use activities, and activities use resources\n## **Benefits to Contingency Funding**\n###1. Recognizes future contains unknowns\n###2. Adds provision for company plans for an increase in project cost\n###3. Applies contingency fund as an early warning signal to a potentially overdrawn budget\n## **Project Scheduling Terms**\n### Project Network Diagram - Any schematic display of the logical relationships of project activities\n### Path - A sequence of activities defined by the project network logic\n### Event - A point when an activity is either started or completed\n### Node - A junction point joined to some or all of the other dependency lines (paths)\n### Predecessors - Activities that must be completed prior to initiation of a later activity in the network\n### Successors - Activities that cannot be started until previous activities have been completed\n### Early Start (ES) Date - The earliest possible date the uncompleted portions of an activity can start\n### Late Start (LS) Date - The latest possible date that an activity may begin without delaying a specified milestone\n### Forward Pass - Network calculations to determine the earliest start/finish for an activity through working forward through each activity in the network\n### Backward Pass - Network calculations to determine late start/finish for uncompleted tasks through working backwards through each activity in the network\n### Merge Activity - An activity with two or more immediate predecessors\n### Burst Activity - An activity with two or more immediate successors\n### Float - The amount of time an activity may be delayed from its early start without delaying the finish of the project\n### Critical Path - The path through the project network with the longest duration\n### Critical Path Method - A network analysis technique used to determine the amount of schedule flexibility on logical network paths and to determine the minimum project duration\n### Resource-limited Schedule - Where start and finish dates reflect expected resource availability\n## **Node Labels**\n### ![](https://remnote-user-data.s3.amazonaws.com/elj8sHKnP2ktpVz4IUhpSus_CHC2cbNyuP_Ll-levlo-UA2czkPWgBpr_MMc-kW0uaHtrY809Q_90lzdS87iJoIq-N0yxP6r7JGRK6U2LUXYj2TSzuG8QhuGfu_uaE-E.png)\n## **Serial Activities**\n### ![](https://remnote-user-data.s3.amazonaws.com/WBfRHjD1aozJJB44vNi0gLliBlvBvECJkmYwJBpNdHZRSGg7I-FFu1WztP7yMY1USmh8zzx4oWAvmduVF8erfbpY5vyLtQQ39sPIOkpNeWgVn9GWSepM7kwwMwOHS6dV.png) \n### Those that flow from one to the next, in sequence\n## **Concurrent Activities**\n### Where the nature of the work allows for more than one activity to be completed at the same time\n### ![](https://remnote-user-data.s3.amazonaws.com/qHCp1zSqcURSUQRcUliPSHg10Iwfe4p-wtT587d2ZJvFY5v_bRDuXI-yzmg1GqptIFQ7mONZMQNN_Yybd3Ggd4EbGGtYgcKYxQDG7TFWFhzGC5GxWSCPPu1exnBEzF7W.png) \n## **Merge Activity**\n### An activity can only begin following the completion of previous activities\n### ![](https://remnote-user-data.s3.amazonaws.com/M-ovBKIT-kJkUx9-TUgB0Rfv7J43iSVG-yzCaSebqTmDTsxUP-6Q4eggYnEBUjdH3aowQXdQmeBzwBEcSvu7C8QorJ80IIcux0bd3XUDwcsVW3yXfkfKcLcfTis_7HFp.png) \n## **Burst Activity**\n### Activities can only begin following the completion of its singular previous activity\n### ![](https://remnote-user-data.s3.amazonaws.com/kyO3JfTzTDa5_B2u3DQnvuuiXvhqK3JqZcJ_pPUiUEErFKdFRvVTTOKbaNhXpvKxkTs9WpKweakDSOCDN8T39UDtxd09nk5DTq8tWkcatNElcE-qQvYFnw2H1HUq1SrQ.png) \n## **Duration Estimation Methods**\n### Experience\n### Expert opinion\n### Mathematical derivation\n#### \\text{Activity Duration} = TE = \\frac{a+4m+b}{6}\n#### \\text{Activity Variance}=s^2=(\\frac{b-a}{6})^2\n##### Where\n###### a - Most optimistic\n###### b - Most pessimistic\n###### m - Most likely\n## **Constructing the Critical Path**\n### Forward Pass - An additive move through the network from start to finish\n### Backward Pass - A subtractive move through the network from finish to start\n### Critical Path‚ÜíThe longest path from end to end which determines the shortest project length  #EMLCommon\n## **Project Activity Network with Task Durations**\n### ![](https://remnote-user-data.s3.amazonaws.com/u4i_V-EJjTkqmrIFAZNEOVtg9EoHk0IHcbdvljhDce_lwqscUwGBe4yRLIRx1FqJBpith9-_HxcktxiiXKy--c0oN3wZnBlqyZ7vn9v38VSWuekfdxohRoaFcxOh_w3s.png) \n## **Activity Network with Forward Pass**\n### Determining the earliest start/earliest finish\n### Left to right\n### ![](https://remnote-user-data.s3.amazonaws.com/6macbxs7oG4UMcn-2BJKIV44xGblLHrfNJEdZCle3ZTrGi1DUO_ECmX38cQ9f4a2zxhCYYgfmdiLymv3vQuqWgaNH2b_JKSB6aZ4GMwLfMqn0jK6kjCS-DjvXwfNOdrH.png) \n### You take the latest time at merge activities\n#### Which in this case was 11, because its later than 10\n## **Activity Network with Backward Pass**\n### Determining the latest start/latest finish\n### Right to left\n### ![](https://remnote-user-data.s3.amazonaws.com/3qFfkJftJreKnUbL1ShqHMqaM4dfzMwPAXBXOVyFSr52vsZbn3n99u7Jkgni01-rL2fcalUOxacvwSJW-xMG11UfShdJbrKuDuOJ19uM-F59Qqj7pqM_3CwC4ySgm30m.png) \n### Take the bottom middle number away from the bottom right number\n### Calculating the latest time a project can start\n## **Critical Path through a Project Network**\n### ![](https://remnote-user-data.s3.amazonaws.com/lZkrLRxvAXkfuLR50aV0Hy8niQscZ7OoV7n2WU__0oSyVwityCgYnaoC-o7BKv4aZgkOIIRXeRCNHsN2fLwxWUrdMRkl0YgE9Ejax9rQmKYXT1t4IOKMT8s7ehGu5Ee_.png) \n### Float - The amount of time an activity may be delayed from its early start without delaying the finish of the project\n#### aka the difference between the top left number and the bottom left number\n### The slack/float is all {{0}} along the critical path, as the project has took the longest it possibly can\n### Slack‚ÜíThe amount of time you can be delayed in an activity, without pushing back the final finish date #EMLCommon\n## **Options for Reducing the Critical Path**\n### Eliminate tasks on the critical path\n### Replan serial paths to be in parallel\n### Overlap sequential tasks\n### Shorten the duration on critical path tasks\n### Shorten early tasks\n### Shorten longest tasks\n### Shorten easiest tasks\n### Shorten tasks that cost the least to speed up\n## **Gantt Charts**\n### Can be used as a {{tracking}} tool\n### ![](https://remnote-user-data.s3.amazonaws.com/67IWtQsXSnQ4dCIi9ZiAQMyXKWaH6frfr68z1q8FQjd6Tffwa4vJKBdgdhHbMhAMXuSmHKPnRqJ7yAYDDcXr3zUpHCm6g6EupDnJ_YPFyyA1f9UIyrtDGFUymgl56n9s.png)\n### Benefits of Gantt charts\n#### Easy to comprehend\n#### Allow for updating and control\n#### Identify resource needs\n#### Easy to create\n#### Identify the schedule baseline network\n### Establish a‚Üítime-phased network\n## **The Project Control Cycle**\n### ![](https://remnote-user-data.s3.amazonaws.com/dHp6qiwRHlXRID49R5tvq7iureFLjuHCDGM3Eml47lVwehv4h1Q-NsB0aaNAKFKs8kdv7REDy-x-c7O8AvSvb189xDan_sOC7SjwOvPQgkkT-KZJdd6wejeYTFkwd1bQ.png) \n## **Milestone Analysis**\n### Milestone - An event or stage of the project that represent a significant accomplishment\n### Milestones\n#### Signal completion of important steps\n#### Motivate team and suppliers\n#### Offer reevaluation points\n#### Help coordinate schedules\n#### Identify key review gates\n#### Signal other team members when their participation begins\n#### Delineate work packages\n# Examinable Cases\n## **Bisset v Wilkinson**\n### ![](https://remnote-user-data.s3.amazonaws.com/SZejlqCUZtpLfY1oVL1B6lfs3kb6y7XmUSmBVVbFSH2SSStDGrB9rYacsHN2A43Qd1y83ET76fDvw8-d3pHX0P2o42DkKbLcvrfNpGLRJ0fn7tfI6Zlbh5K79j8cA6M1.jpeg) \n#### Type‚ÜíOffer and acceptance, misrepresentation \n#### Case  #EMLCommon ‚Üì \n##### Claimant purchased farm land to use as a sheep farm\n##### Asked the seller how many sheep the land would hold\n##### Seller estimated it would carry 2,000 sheep\n##### Claimant purchases the land\n##### Estimate was wrong\n##### Council held that the statement was a **statement of opinion** and not a **statement of fact** \n##### Therefore this was **not** an actionable misrepresentation\n## **Pharmaceutical Society of GB v Boots Cash Chemist**\n### ![](https://remnote-user-data.s3.amazonaws.com/P1GFIBrQ-tMOogQxCc7_vQfCQhNixaYYwaxVgzgpYYnvifZKSEnb5zlV1r4CPsaQxrCG15k3Tyv6Fm61zT7HfhiJhvgZaszn15u0rjEVkd1VxDcuTkhGYaYajexI9C-g.webp) \n### Type‚ÜíOffer and acceptance \n### Case  #EMLCommon ‚Üì \n#### Display on supermarket shelves is an invitation to treat\n#### Customer makes an offer to buy the goods at the cashier desk\n#### Contract is completed when the cashier (pharmacist) accepts the offer\n#### Therefore, within regulations of purchases having to be made within the presence of a pharmacist\n## **Fisher v Bell**\n### ![](https://remnote-user-data.s3.amazonaws.com/pUx014bTR4UrSjzvmf0N7volXjbOaTulUSkvd1NDP8RyMM1f9pJnZLKAR2UomavcJSGX-GzvIlxSvVS9SfOO-YeB-jxyMyFnnlbajT6hDr55hTAzaB3qWr8LXWvl1-Ip.jpeg) \n#### Type‚ÜíOffer and acceptance, goods in shop window are an [Invitation to Treat](Engineering Management and Law/Introduction to Contract Law and Formation/Offer vs Invitation to Treat/Invitation to Treat.md)   #EMLCommon\n#### Case  #EMLCommon ‚Üì \n##### Flick knife in shop window\n##### It is an offence to offer to sell and offensive weapon, however...\n##### Knife in the window was an invitation for the purchaser to make an offer\n##### Therefore, was legal\n##### The person buying is making the offer, the store is accepting/declining the offer\n## **Partridge v Crittenden**\n### ![](https://remnote-user-data.s3.amazonaws.com/1aUzFq9OeyaoA50dTDFjccHCs61jETK_nJjGkT2tqa6e3J0bK66AI-LC21urqM6Ub4zja0nZfRuFZFC5pTGSR36Ke9L5HA1P7LfZb2EgYQ6kYqMFBmXKX7ATIScC18WA.jpeg) \n#### Type‚ÜíOffer and Acceptance, newspaper advert was an [Invitation to Treat](Engineering Management and Law/Introduction to Contract Law and Formation/Offer vs Invitation to Treat/Invitation to Treat.md)   #EMLCommon\n#### Case \n##### The advert is an [Invitation to Treat](Engineering Management and Law/Introduction to Contract Law and Formation/Offer vs Invitation to Treat/Invitation to Treat.md)...\n##### As interested people had to enquire for more information\n##### Advert for sale of a wild bird\n##### So is **not** going against Protection of Wild Birds Act\n## **Carhill v Carbolic Smoke Ball Co.**\n### ![](https://remnote-user-data.s3.amazonaws.com/o2yJTgKbYumXdoGUkNVod_RX92_yOoseJ2w6tgxczZQNlG8AOGXAd14thGd1Fm9Dwf9WGCRB2WP43jMc_f2HuYuRBqrAhLJciC8Hzz2I6d6Gv09HwW9TatO-6ynkA4Sq.jpeg) \n#### Type‚ÜíOffer and Acceptance, newspaper advert was an offer \n#### Case  #EMLCommon ‚Üì \n##### Smoke Ball Co will pay ¬£100 to anyone who caught flu using their balls\n##### Put ¬£1000 in bank as evidence of sincerity\n##### Carhill uses balls and still catches flu\n##### CSBC made an offer to the world\n##### Carhill buys product and accepts contract\n##### Carhill won case\n## **Routledge v Grant**\n### ![](https://remnote-user-data.s3.amazonaws.com/NgfVxoL67bi6FmqIunsIlZzehx4QRwiLsNoZ6JaHNeeNO153pv6KkezjngNVC8ATlnklodDZpkes0OycPpl9h7LF-QFkd0VcL13mcIE9AO8OTSHQa_jF7HqF2rD8A8Of.jpeg) \n#### Type‚ÜíOffer and acceptance \n#### Case \n##### G is entitled to do so\n##### G withdraws the offer before six weeks pass\n##### G offers to buy R's house\n##### Gives R six weeks to accept the offer\n## **Hyde v Wrench**\n### ![](https://remnote-user-data.s3.amazonaws.com/45t2ELpg2ShqgiR1qpXmQc2JTQY2BRUYqt-6QU3EoOc91gW6zzx9S7YmpuWV8zgJn64Qyg4XKqJACuaKjqK8BoPVOw7YXc1QI3StZYmJT9JWFL7MnM5dh4ZZ2xZcE0Ll.jpeg) \n#### Type‚ÜíOffer and acceptance, counter offer destroys the original offer \n## **Adams v Lindsell**\n### ![](https://remnote-user-data.s3.amazonaws.com/-bzj3Gk0UUf0XvrxSREyWOIzL800spLVl0AXEk9imsY4tTLd6Sly2ng7iQ9juPFcLLqUGHLISUGuNG5egyzvadaWIx_AtZSWZUiYckIpYiayYXGmW1IQVVa14ZCYJ0He.webp) \n#### Type‚ÜíOffer and acceptance, postal rule \n## **Entores v Miles Far Eastern Corp**\n### ![](https://remnote-user-data.s3.amazonaws.com/tpUioxFSD4pB14nphHtKyYacPDua7y52di3a0q4Xg5-YC0QL6DHZOAJDcn-BDvp1B3NMXmoTEl-7-dQlH3VJySJRpideh6MFDUBABFEfGGI8pY0lb1Mojc4sHK6kIrx-.jpeg) \n#### Type‚ÜíOffer and acceptance \n## **L'Estrange v Graucob**\n### ![](https://remnote-user-data.s3.amazonaws.com/OOnnGXnFI6mDI0ru1k-aCG3EXX9otLrwykGVh_NANLyK5DC7gKdeqkl89pnZ5lRYMRrFvQklA7Gw8NlE3SMJ8I_kO4tJonuT41lVm9XCLNKEgOeK6i8AD99VUOoJgiCR.jpeg) \n#### Type‚ÜíUnfair terms \n## **Chappell v Nestle**\n### ![](https://remnote-user-data.s3.amazonaws.com/-n_KVsQGrkVp52COq1bexjSFu4KXEgiRFL3qhfNglnkIWDkTn-NK5NAd7Vb0lJ9DLGaRkx89P-Od2xxBfLsrPOH5UwyGjYVH6VAS0_NBY6oRUZZo3Vsmdi4CJOL7sZfF.jpeg) \n#### Type‚ÜíConsideration \n## **Re McArdle**\n### ![](https://remnote-user-data.s3.amazonaws.com/4Sqw01Ov4kmj-J-h75-RBTRNl035WeaHfsYZq9c_t2LnIJgSRqF7_P2CoNGo_Q5i8dtsYKkOhvC6o4I9WLpx_sC8DRTyfBXRBIPFnxTygRAueqxHXrqJ-qc-PX8tkMnE.jpeg) \n#### Type‚ÜíConsideration, past consideration isn't necessarily good consideration  #EMLCommon\n## Collins v Godefroy\n### ![](https://remnote-user-data.s3.amazonaws.com/gq4rQInpr1xFOVxfUXOx3eiIot9WqO1BkI7sBjriXZ1hPkbz22BHNstkn0AueFGMTEB90a4nsqctkOkEHT0giqWtvxXEteCZbprSgpUV4PKtxrSL0jpKsmPR78pIqvQH.jpeg) \n#### \n## \n# Intellectual Property Law\n## **Tangible versus Intangible Property Rights**\n### Owning a physical copy of a book does not mean you own the copyright to that book\n#Owning a copyright in a book, does not mean that you own every physically copy of that book\n#### Copyright is {{intangible}} property, the book is {{tangible}} property\n## **IP Production and Protection** ‚Üì \n### ![](https://remnote-user-data.s3.amazonaws.com/5vfQCLUZwLTkeY_FD7tvJ6W-dmKVNrnafMlFxVbTPOpsYOoTDXljgksX8Y64ystQSpwWV7NOtEg0f7FLHmM-pyJux1MjioQu9_chsc2J3Rj7z23PoDUXfUWuArFgqdnn.png)\n## **Trade Mark**\n### You infringe if you use a trademark in the course of trade without consent affecting the functions of a trademark\n### Well-known brands get better protection against ‚Üì \n#### Free-riding (unfair advantage)\n#### Blurring (detriment to distinctive character)\n#### Tarnishment (detriment to reputation/repute)\n## **Copyright**\n### 5 Key Concepts ‚Üì \n#### A 'work' (idea/expression dichotomy)\n#### By an 'author'\n#### Sufficiently 'original'\n#### A work of the 'right kind'\n#### Fixed in a tangible medium\n## **Patents**\n### Excludable Patentable Subject-Matter\n#### Matters not regarded as inventions \n##### The presentation of information\n##### A literary, dramatic, musical or artistic work or any other aesthetic creation whatsoever\n##### A discovery, scientific theory or mathematical method\n##### A scheme, rule or method for performing a mental act, playing a game or doing business, or a program for a computer\n#### Matters excluded  #EMLCommon ‚Üì \n##### Methods of medical and veterinary treatment\n##### Biological subject-matter\n##### Inventions contrary to morality/public order\n## **IP Subject-Matter**\n### ![](https://remnote-user-data.s3.amazonaws.com/S7pPzpa5IltzGkCd0dlV75OxS6d2Px32Ugp9w7zKXXggmNAYAkcg76-mhNJvrkeOnp3RoC23dUlSlkU6Q2E95ndLxXlYqQiEv7rujWKWIonSge66Y1vL40EZR1A53j4t.png) \n# Company Lifecycle\n## **What is a Company**\n### Most medium sized or larger businesses are companies ‚Üì \n####1. Companies register at Companies House, which can be searched online\n####2. Companies issue shares, each representing a fixed fraction of the firm\n####3. Shares in public companies can be bought and sold via a stock exchange\n####4. A business might also be a partnership, or a sole trader\n####5. Non-profit organisations can register as a charity with the Charity Commission\n### Companies must publish their accounts\n#### Public companies must provide more detailed accounts than private ones\n#### Any member of the public might buy shares based on this information\n## Why do firms seek growth‚ÜíThe purpose of a company is to increase the wealth of its shareholders (owners) by paying dividends and/or causing the share price to increase - Friedman (1970)\n### As firms move intro new areas work becomes less routine and more interesting\n### Employees anticipate opportunities for their own growth (Promotions, better pay, prestige)\n### Therefore growing firms find it easier to maintain employee morale\n### Larger firms have more influence and power to change the world for the better\n## \n## Lifecycle of a Business‚Üî![](https://remnote-user-data.s3.amazonaws.com/q4dFZACk16z_ODa68j1D_C1i6C9mHL0On1_22oih6ulX0L_aIOOcCoXspcFtnIEKD7HSQ7DcE1kn76sey3nAjg3Dz-7OCcBgOSLW-q-_kfSxQxxW4E_zYqeGeBWtlZ6t.png)  ![](https://remnote-user-data.s3.amazonaws.com/cEQxmY_zQas8WvWgMnISiHLv0gJoy9424a8fTanEgbBRe6nhtFC5ZwDiJl3NmPSDTboHUGxh4fPzGwfoNN4zRNqCrJIrpQ_-vaarCLRXWWORqDpAL3gElmx4azfIMACC.png)\n## \n## **Starting a Company**\n### Why start a company ‚Üì \n#### Engineers and technology change society\n#### It is more efficient to do so within an organisation\n### Entrepreneurship ‚Üì \n####1. You have more control\n####2. Might raise more funds\n####3. Might get rich\n### Intrapreneurship ‚Üì \n####1. Employer funds the work\n####2. Less risk for you\n####3. Richer pool of talent\n####4. You have less control\n####5. Lower reward\n## \n## **Theories of Growth**\n### Gibrat's Law‚ÜîGrowth of a business occurs in random shocks, there are no systematic determinants of business growth\n#### \"Firm growth rate is independent of the size at the beginning of the period tested, and the differences are just due to shocks in the system, and therefore the growth in firms is a random process, not depending on firm size or having any correlation over time\" - Robert Gibrat, 1931\n#### This law seems to hold up better for‚ÜíLarger firms\n#### For smaller firms, size and growth seems to be‚ÜíInversely proportional\n#### Age also has an effect on growth rate\n#### Small and young firms experience more volatile growth rates\n#### Gibrat's law is a good approximation or heuristic\n### Penrose's Theory of Growth‚ÜîExplains sources and hazards of growth\n#### Penrose's theory ‚Üì \n#####1. Resources available to a firm are indivisible and independent\n#####2. Firms grow as a result of the efficiency generated through \"learning by doing\"\n#####3. As managers gain more experience, they become more efficient at what they do and take less time to do their tasks\n#####4. Freed-up managerial resources then go towards value-creating growth-inducing activities\n#### This theory implies that growth is not an end in itself, but rather a‚ÜíResult\n#### Growth hazard: Operating costs ‚Üì \n#####1. Growth is limited by the amount of managerial attention available at any time\n#####2. Too much focus by managers on expansion diverts attention from operational efficiency, thus increasing operational costs\n#####3. Hence, above a certain point (optimal growth rate), increases in growth will lead to higher operating costs\n#####4. The Penrose Effect‚ÜíFast growing firms will thus have higher operating costs then their slower growing counterparts\n## \n## **Marris' Theory of Managerial Capitalism** ‚Üì \n###1. Managers and shareholders decide the management of firms\n###2. Managers aim to maximise the growth rate while shareholders aim to maximise dividends and share prices\n###3. Managers desire higher growth rate as it enhances their pay, position, status...\n###4. To achieve growth, managers therefore seek to retain and re-invest a higher proportion of total profits and expand the firm, driving growth\n###5. Reinvesting profit reduces the amount available for paying shareholder dividends\n###6. Lower dividends make the shares less attractive, lowering their prices\n###7. The threat of take-over reduces management job security\n#### To counter this threat‚ÜíManagers will seek to increase dividend payments\n###8. Paying higher dividends limits the resources available for the firm's growth\n###9. Managers will therefore choose the growth rate that maximises the price of shares and alo gives satisfactory dividends to shareholders\n###10. Shareholders also want balanced growth to ensure fair return on their capital\n###11. Thus the goals of managers and shareholder owners are aligned\n###12. The result is an optimum rate of growth for the firm\n## \n## Five Stage Model of Business Decline‚Üî![](https://remnote-user-data.s3.amazonaws.com/gm5fAorVGoG_Y3RnQRoHwVM69KW3myngNkI4hPD8bWWyu-gKv1vGz28dvn90_L3SydWLFkvUe1rdp4aBfk6PMyHirQBEEo7bQYbt4S4keXh7h_e4iHkHJvWFqU1P5krI.png)\n## \n# Traditional and Activity Based  Costing Systems and Procurement\n## Overheads\n### Overheads are costs required to run a business which cannot be directly attributed to any specific business activity, product or service\n### Production overheads include\n#### Machine setup\n#### Maintenance\n#### Storage\n#### Handling of goods\n#### Wasted materials\n#### Testing\n#### Faulty items\n#### ...\n### General business overheads include\n#### Accounting fees\n#### Advertising\n#### Insurance\n#### Interest\n#### Legal fees\n#### Labor burden\n#### Rent\n#### Repairs\n#### Supplies\n#### Taxes\n#### Telephone bills\n#### Travel expenditures\n#### Utilities\n#### ...\n### Financial statements include closing inventory as current assets using the minimum of the cost of production and net realisable value\n#### So cost accounting is required for both financial and management accounting\n## \n## Cost Allocations and Cost Tracing\n### ![](https://remnote-user-data.s3.amazonaws.com/0qggk_HPtTAYPPG2q-6xA5Udv49nJX99OnvheEJUr8p0OoVmWFWQTXXEUAHg0b1DvSu7eDF6qN8w9AtiFMzNZE7P4rnv9QxhOPEvDBQJ80iSWZcshJBLOz4cSDw2mcSI.png)\n## \n## Traditional Cost System\n### Quick and cheap to apply, easy to understand\n### Shares cost proportionally across all products\n### Calculate the total overheads and share this figure proportionally\n#### Based on the share of direct labour hours, or a similar cost driver\n#### e.g. Assume product A consumes 100k hours/year, and product B consumes 200k\n#### If overheads are ¬£900k, allocate ¬£300k of these to product A, ¬£600k to product B\n### This system may misallocate costs to higher volume but cheaper products\n#### E.g. If product A requires more expensive storage/handling/machinery\n#### Waste, faults, machine set up and maintenance costs may also be higher\n#### In these cases, product A should be allocated a higher proportion of overheads\n#### These days, labour hours/costs are a lower proportion of the total costs\n### More accurate costings are needed to improve management decisions\n## \n## Activity Based Costing (ABC)\n### Finer grained than TCS, potentially more accurate\n### Shares cost proportionally based on activity\n###1. Identify a number of cost drivers to user, not just labour hours\n#### E.g. Machine hours, set up costs, electricity, material storage, handling costs, ...\n###2. Determine a metric for each of these to use as a cost driver\n### Suppose total labour costs are ¬£6M, and total machine costs are ¬£10.5M\n#### Each of these figures now includes all overheads relevant to that category/cost pool\n### Product A uses 100k labour hours, 200k machine hours; B uses 200k \u0026 150k\n#### So labour costs are ¬£20 per hour, and machine costs are ¬£30k per hour for boths\n### ![](https://remnote-user-data.s3.amazonaws.com/Ca_A5TWMT8s0Ug7nzShQh1kS0oviZnliTlvckJXG2i-mSrsn0jLiS-I3pOTotkc1e0MsmaoYUpvjGmA4ft6_XTnkUMDfKnSBrcNQwdaR8D-SpN9ncXmFtXMpSLZBMyXW.png) \n### Classification of activities for ABC\n#### ![](https://remnote-user-data.s3.amazonaws.com/P3YuHAYP-JwKg6JliY8vsDm5NZD14QTKYwIyKXSeUqiVsqZXP8qvUSDV4rA7UwF2qPO6620RexCFCe6YAAgQODwmOlnHUcUs_SJU6Emf6TGAWl2D4TnalDrEZHjyJcMD.png)\n## \n## Suitable Cost Drivers and Metrics\n### ![](https://remnote-user-data.s3.amazonaws.com/7n_t6CgoWwjX5-oMNCEFDBHEAy--xOHra7l_Cgbh5d8APW8iPL-QJh6hVaBnre_zf1qcjBRfeEUc-FpPi8N7TpwcY5JKEKQgzX7mpAem9rCSGD-RBvoIXhh6XMOcJqHJ.png)\n## \n## Management Decisions and Cost Accounting\n### Cost accounting is used in a number of management decisions\n#### To determine the minimum pricing of a product or service\n#### To support cost engineering (you cannot improve what you do not measure)\n#### To make correct decisions about our-sourcing\n##### To construct the appropriate portfolio of products or services\n#### Activity Based Costing supports Activity Based Management\n##### To decide which activities and processes to focus on and improve\n### ![](https://remnote-user-data.s3.amazonaws.com/wXKB263AgtZ1FS7CoL2uiPX4yPqMeLWXCXudFx34GjuRa57jifzUyEYTsE0XlhVrduA0N5CE5DRfza25b8QbZWymn1kQ-w0mt7J_4tR749RgBen4JFdJPQS7giL2Prhp.png) \n## \n## Cost Engineering\n### To ensure manufacturing efficiency improves \u0026 to manage costs:\n#### Cut the number and variety of components required\n##### Reduce wastage of raw materials/percentage of faulty items produced\n#### Simplify production processes to reduce labour time\n#### Share common components between different products or services\n#### Buy in sub-assemblies rather than making everything \"in-house\"\n#### Reduce storage and handling overheads by \"just-in-time\" stock delivery\n### Cost engineering can be applied regularly, not just at the start\n#### Set annual targets for hains and/or benchmark against the competition\n## \n## Manufacturing Learning Curve\n### Manufacturing improves with experience\n#### Labour efficiency increases as repetition improves working practises\n#### Parts, processes and products become more specialised, hence more efficient\n#### Better and more automated equipment becomes available\n#### Products can be re-designed to become quicker and easier to manufacture\n#### Efficiency gains in one area may also be applied elsewhere\n### Curtis-Wright (1936) identified this effect in aircraft production\n#### Efficiency improved 20% with each doubling of manufacturing volume\n##### Boston Consulting Group's Henderson (1973) published the law $C_n = C_1n^{-a}$\n#### The efficiency gain is typically in the range 10-25% for each doubling\n### Manufacturing experience curve\n#### ![](https://remnote-user-data.s3.amazonaws.com/4wA-RpEKHM5PU3uF-2rJ3z5pPENST6rWP30cy4gTUckseq7jnmEUjTQ5YuSBtfLCl4Wtsy-uZpygcuZqDkVqjKUkS3Ep1ssOoQin5UD-ODNPuuhF-AhUYbqEtt8ms_eV.png) \n### \n## \n## ^^**‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí-‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí-Procurement and Outsourcing‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí‚Äí**^^\n## \n## The Value Chain\n### Sequence of activities which together create a product or service\n####1. Inward logistics - Receiving, storing, distributing inputs\n####2. Operations - Transforming inputs into a finished item, e.g. manufacturing\n####3. Market and Sales - Awareness raising, advertising, sales, sales administration\n####4. Distribution - Delivering finished items to the customer\n####5. Follow-up Services - Enhancing or maintaining the value of delivered items\n### ![](https://remnote-user-data.s3.amazonaws.com/9fQMgoSArphO8UlnwTGwzOMqgm8pYrgESnQ8VOigsfZCTnychfMzYG5exiuKV_5j4rK0bd3K-Sx2uMP4_aeAI4FHubDVaqsOq9otoV-2tka5zdEydhUwh-x1xk2ArEig.png) \n### The question for the company is, which steps are crucial to the delivery of value, and which are not?\n#### To identify the costs of activities to understand whether they add value\n#### What cost reductions and process improvements are possible\n#### Support activities should boost the effectiveness of primary one\n#### What activities can and should be outsourced?\n### Outsource only to companies who have competitive advantage\n### Monitor outsourcing decisions continuously\n## \n## Core Competencies\n### Core competency is defined as a harmonized combination of multiple resources and skills that distinguish a firm in the marketplace\n#### Makes a significant contribution to perceived customer benefits\n#### Should be difficult to imitate, can give access to new markets\n#### Drucker claims business has only two functions: marketing and innovation\n## \n## \n## \n# Product Evaluation and Customer Insight\n## **The Kano Model: Features vs Satisfaction**\n### ![](https://remnote-user-data.s3.amazonaws.com/HiA6cB16uNWwgyn3n1wftmhFV9-ot8eTboTFsXIUiL3gef8gTrUg8eVYb0PT9VxQNygBSZ1gScVfBtyBSNFjCjtNcnU2HQu3-ZHWQfN-H0SZpZzgodL5YXBVjkxXeUtR.png) \n#### As expectations increase, excitement becomes more basic\n#### Product Attributes\n##### Performance Attributes‚ÜíSatisfaction increases as more is provided\n##### Excitement Features‚ÜíUnexpected, surprise and delight the customer\n##### Basic Attributes‚ÜíExpected, cause dissatisfaction if not present \n#### Car Example\n##### Excitement Needs - New, exciting features\n###### e.g. The introduction of central locking or proximity central locking\n##### Performance/Linear Needs - The top speed of the car\n###### e.g. The greater the top speed of the car, the greater the customer satisfaction\n##### Basic Needs - How successfully the car starts\n###### e.g. Starting 9 times out of 10 will make the customer dissatisfied, however starting 99,000 times out of 100,000 times would only be considered fine, because it is a basic need\n## **The Problem with Customer Needs**\n### Customers are unlikely to express either basic or exciting attributes\n#### Customers instead focus on‚Üíperformance attributes and tend to mention needs that are already catered for \n## **The Innovators Dilemma**   \n### Staying close to your customers can be fatal\n### Satisfying your customers (delivering to your customers needs) can eventually be fatal\n### Organizations will reject new ideas because their current customers\n#### Did not ask for them\n#### Can not currently use them\n### Sustaining vs Disruptive Innovation\n#### Disruptive \n##### Long term survival\n##### Cheaper, lower performance\n##### Lower margins\n##### Meets customers future needs and establish new markets\n#### Sustaining \n##### Evolutionary\n##### Improved performance, efficiency and cost\n##### Satisfies customer's needs\n## **Problems with Traditional Methods**\n### Customers are not able to answer direct questions beyond 'performance needs'\n### Respondents are unable to articulate complex or emerging issues (tacit knowledge)\n### Most customers are unable to identify \"breakthrough features\"\n## **Customer Insight Methods**\n### Surveys\n#### Give quantitative results\n#### Achieving representative samples and adequate response rates are key issues\n### Questionnaires\n### Focus Groups\n#### Limitations \n##### Interpretation - Time consuming and requires experienced analysts\n##### Group dynamics can be a challenge\n##### Limits generalizability\n##### Small number of participants\n#### Need careful planning and appropriate analysis\n#### Strengths \n##### Concentrated amounts of rich data\n##### Interaction of participants adds richness\n##### Cost effective\n##### Participants guide the discussion\n### Ethnography\n#### Involves‚Üíobservation of people using products and services in real situations \n#### Can provide real insight into how people experience product use\n### ![](https://remnote-user-data.s3.amazonaws.com/ffhUcYhy1c6XxgTJxRg9K4YUPu2Mip6Gfm4JJlLHvLTg5jBdb4DtyV8gJY2kHXkyzniHVfuHkXM3bTMUCjya5__MWKzPDWpuCKku9RTL0EKK7PnGJsKRduhPlW7INgcr.png) \n## **Market Analysis**\n### Using web data\n#### Increase sales\n#### Drive traffic\n#### Target new customers\n#### Observe patterns and trends\n### Stages of market analysis\n#### Industry overview\n#### Pricing and forecast\n#### Target market\n#### Competition\n## **Pricing Strategies**\n### 5 Common Models\n#### **Price bundling**‚ÜîCombining products and/or services to increase value, and therefore price\n#### **Penetration pricing**‚ÜîSetting a price low to enter a competitive market and raising it later \n#### **Competitive pricing**‚ÜîSetting a price based on what the competition charges \n#### **Price skimming**‚ÜîSetting a high price and lowering it as the market evolves \n#### **Cost-plus pricing**‚ÜîCalculating your costs and adding a mark up \n### Issues\n#### Psychological Pricing - Looks cheaper, or lucky\n##### e.g. ¬£4.99 seems like ¬£4, instead of ¬£5\n#### Price is related to demand, in varying ways\n- Price Elasticity - The effect of price on quantity\n#### Premium Pricing - Price represents value\n- e.g. Expensive cars are expensive as it represents the quality of the car\n#### ![](https://remnote-user-data.s3.amazonaws.com/uiZ113Rh9vcxYuFwmFS1cOhDU67Mdln-dLKaoYVT0s6gsTB4yTuTOm1WJhnrr3wdeq-3WaUcCRl6RE5BoZ_M2tWPLbpmdgOewrve5OhizhLqqo6114NUKbnAl_QgQlmV.png) ![](https://remnote-user-data.s3.amazonaws.com/fnAcx0GlkqY2wjOwvE-g-tJhBg1FISLGbY3pkSWQckYNCIDPhOyQfdBtbhwyXcGbLWqj3cRDmSut3fHSndyzxFbDLU9lWcnFPJw72_BquHGUc03EfQLLoou-ivnoXfBQ.png) \n- \n# Corporate Social Responsibility\n## Corporate Social Responsibility (CSR)‚ÜíA concept whereby companies integrate social and environmental concerns in their business operations and in their interaction with their stakeholders on a voluntary basis\n## Carroll's Pyramid of CSR\n### ![](https://remnote-user-data.s3.amazonaws.com/UFFPs0i86mclA-pyc1iwJc6m5tkGepzQfyS8w9f44NBvKLKMT2-rfQHZ_-bBo1296Br40EdyhXoyBSGAC96gAUvm6cDqEpDD1iaHNPxiPhwQ94GYiFSD24GN7iTrvXd-.png)   \n## **Baden's Pyramid of CSR**\n### ![](https://remnote-user-data.s3.amazonaws.com/D_PKrxi8IYPuv72vOm1shYqNS01C5oxKvx9qC3U7JY3YtsSqt5gbfWn6Hh4f2Shx1FStbcxPcsHCDY-McxWdrvIee1wHTW9N5upX0DbdT7ZcngK8ibRq2g2HFVD-KQcj.png)  \n## **Stakeholder Management**\n### First step in Stakeholder Analysis is to assess the [Influence](Engineering Management and Law/Corporate Social Responsibility/Stakeholder Management/First step in Stakeholder Analysis is to assess the Influence and Importance of each individual stakeholder/Influence.md) and [Importance](Engineering Management and Law/Corporate Social Responsibility/Stakeholder Management/First step in Stakeholder Analysis is to assess the Influence and Importance of each individual stakeholder/Importance.md) of each individual stakeholder\n#### Influence‚ÜíThe extent to which a stakeholder is able to affect the organisation, as a measure of power\n#### Importance‚ÜíThe extent to which a stakeholders problems, needs and interests are affected by the organisations activities\n### Primary stakeholders are {{both}} important {{and}} influential\n### Secondary stakeholders are {{either}} important {{or}} influential\n- \n# Law of Agency\n## **The Agency Relationship**\n### ![](https://remnote-user-data.s3.amazonaws.com/TmGyMsPnY2r3m9SSjwEc59N1i7vjQwzeLlhF2djGOB3VrtIGKyBd4eKAYVplxIU8fzD_EQMzDiOpbRGSYpC44DAuTdOKMy7l5PLGnxR-gRZEuszO811adLjHE1fubnzI.png) \n## **Creation of Agency**\n### Generally agency relationships are easy to establish, and agents derive their authority from\n#### An express appointment by the principal (actual authority)\n#### An impression of representation conveyed by the principal to a third party (apparent or ostensible authority)\n#### An implied appointment by the principal (implied authority)\n#### The retrospective acceptance of a contract by the principal (authority by ratification)\n#### A situation of emergency (authority through necessity)\n## **Creation of Agency**\n### Authority through Necessity\n#### In such instances, the courts may bind the principal in the actions of the agent given that the following conditions are met\n- The agent must have acted in good faith\n- The agent's action was necessary, under the circumstances, in order to prevent loss or damage to the principal\n- It was not possible for the agent to discuss the issue with the principal and gain their instructions as to the action to be taken\n#### An agency may also be established where one party has acted on behalf of another during extraordinary or emergency situations\n### Apparent/Ostensible Authority\n#### To establish authority, the following criteria must be demonstrated\n- There must have been a representation regarding the person as an agent\n- The third party must have acted based on this representation\n- The principal must have conveyed this representation\n#### They authority that an agent possesses may also be apparent. This would be the case where the principal has represented to the third party that the agent has the authority to act on their behalf\n#### The agreement concluded between the agent and third party may bind the principal, even if the agent lacked the actual authority\n### Implied Authority\n#### E.g. A shop owner allows an assistant to order goods on their behalf and habitually pays for them\n#### The law can infer the creation of an agency by implication when a person by his words or conduct acts as if he has such authority and the principal acknowledges that he was entitled to act accordingly\n#### In such cases, the principal will be bound by the contracts as if they have expressly authorized them\n#### The authority of the agent to bind the principal in transactions they may have concluded with third parties can also be assumed or implied by the nature of the relationship\n### Actual Authority\n#### The agreement should identify the extent of the authority\n- i.e. The powers that the agent will have to bind the principal\n#### E.g. A shop owner informs the shop assistant that they are allowed to sell the goods in the shop for the price identified on the ticket with no discretion for discounts\n#### This can be established verbally or in writing (e.g. through a contract)\n#### In most cases, authority is conferred by the principal to the agent through an express agreement\n### Authority through Ratification\n#### Ratification may be expressed or implied and should meet the following criteria in order to become effective\n- It should be given within reasonable time from the agreement and communicated to the party\n- The principal must have the capacity to contract (to enter into the contract that the agent actually concluded)\n- The principal must be in existence at the time of contracting\n- The third party must be aware that a principal exists and the agent acts on their behalf\n#### When the principal accepts and confirms such a contract, the acceptance is called ratification\n#### An agency by ratification might be created either where\n- An agent who was duly appointed has exceeded his authority OR\n- A person who has no authority to act acted as if he has the authority\n#### In such case the principal can either reject the contract or accept the contract so made\n## **Duties of Agents**\n### Fiduciary Duty\n#### Includes the obligation of the agents\n- To avoid placing themselves in a position where their own interest conflicts (or it is possible to conflict) with that of the principal ('no conflict' rule)\n- To refrain from disclosing confidential information or documents ('confidentiality' rule)\n- To abstain from being involved in situations where they would profit at the expense of the principal ('no profit' rule)\n#### It is a commitment of the agent to always act in the best interests of the principal which arises from the confidence and trust that underpin the agency relationship\n### Other Duties\n#### Other duties imposed on agents include\n- The obligation to obey the lawful instructions of the principal\n- The obligation to carry the duties assigned to them personally, unless where delegation is expressly allowed by the principal; where delegation is implied by the circumstances of the case; or where it is required by the circumstances of the case\n- The obligation to pay the principal all sums received on their behalf maintain proper accounts\n- The obligation to carry out their duties with appropriate care and diligence -  based on the nature of the task and the skills they possess\n## **Rights of Agents**\n### In acting for the principal under the relevant authority, agents have the right to\n#### Indemnity - This relates to any liability or costs occurred in the course of their duties unless this is specifically included in the agreement, or the agency authority was exceeded\n#### Payment - This can be either the result of an express agreement between the parties (which shall also identify the rate and frequency of the payment) or implied by the parties' conduct and the circumstances\n#### Maintain the goods (lien) - This entitled the agent who is owed money by the principal to maintain control over the goods relating to the debt until the latter is satisfied\n## **Liability of Agents**\n### Contractual Liability\n#### Where an agent acts within the scope of their authority, they are not personally liable to third parties on contracts and obligations entered into on behalf of the principal\n#### However, a problem arises where the agent acts in excess of the principals authority.\n- In that case a distinction should be made between those cases where the agent\n\t- Has not disclosed that they were acting for a principal\n\t- Has identified themselves as such\n#### The Agent has disclosed the Agency Relationship\n- In such cases, the agent and the principal will be jointly liable to the third party\n- When the agent discloses the principal to the third party, and the agent was acting under actual authority, liability of the third party to the agent ceases and is transferred to the principal\n- The third party may then choose to enforce the contract against the agent or principal, but once the decision is made it cannot be changed\n#### The Agent has not disclosed the Principal\n- However, the undisclosed principal may assume the obligations arising from such contracts, unless where the third party\n\t- Specifically asked the agent to identify the principal and they withheld this information or misrepresented the position\n\t- Would not have agreed to the contract if the principal was disclosed\n##### Where an agent has not identified the existence of a principal in the contract with the third party, then the contract will exist between the agent and the third party and the usual rights and liabilities in a contractual agreement will apply\n### Tort Liability\n#### This connection is established where the wrongful conduct may fairly and properly be regarded as done by the agent in the ordinary course of the principal's business\n#### Examples of Vicarious Liability\n- An employer will be liable for the leak of lists of personal data by an IT security expert or marketing professional who handle such data for them\n- The owner of a delivery company will be liable for a car accident caused by a driver whilst they were delivering packages to clients\n#### In those cases where the agent committed a wrongful act which caused harm to a third party, they are held personally liable and must pay damages to the injured person\n- Vicarious Liability‚ÜíThe principal may also be 'jointly and severally' liable for the wrongful act of their agent provided that there is a ^^sufficiently close connection^^ between the agents authority and the events that gave rise to liability \n#### The third party is entitled to file a claim of damage against either the agent, the principal or both for the full amount of the suffered loss\n#### Vicarious liability arises both for {{intentional }}and {{negligent }}wrongful acts \n#### In case that the principal compensates the third party for all, or part of that loss, they are entitled to seek reimbursement by the agent for any damages they were forced to pay, but for when the principal authorized the wrongful conduct\n#### The basis for vicarious liability is sometimes termed the \"deep pocket\" theory\n- The principal (usually a corporation) has deeper pockets than the agent to pay for injuries traceable one way or another to events it set in motion\n## **Termination of Agency**\n### The agency relationship can be terminated through\n#### The mutual agreement of the parties\n#### The expiry of its period of validity\n#### The accomplishment of the purpose for which it was agreed\n#### The revocation or renunciation of the agency agreement\n#### The substantial alteration in business circumstances or the value of the subject matter of the agency\n#### The bankruptcy, loss of capacity, serious illness or death of the agent or the principal\n#### The agency's purpose becoming illegal\n- \n- \n# Introduction to Contract Law and Formation\n## **Elements of a Contract**\n### Agreements - Offer + acceptance\n### Consideration - The exchange of promises\n### Compliance with required formalities where applicable (e.g. written form or deed)\n## **How to conclude whether a contract has been formed**\n### Subjective test - Adopt the perspective of the individuals involved in the agreement, to understand what was happening to them\n### Objective test - Ignore the particular individuals, instead the adopt the perspective of a  reasonable hypothetical person\n## **Smith v Hughes**\n### The defendant intended to buy old oats, the plaintiff intended to sell new oats, there was no mention of the type of oats in the contract\n## **Bilateral and Unilateral Contracts**\n### Bilateral Contracts\n#### A contract is formed when these promises are exchanged\n#### ![](https://remnote-user-data.s3.amazonaws.com/jJDfQDO9ymOhjXA7IB9FcaEtkijo3y19cVRAAz8_T3w992MG86GSDrg7nOsH_eFNr5Suck9zdPc66Kf9VcIY4M0ZkqdsH7HdQToogSDGLz10x420V-AZSjEO8t8i2sR8.png) \n#### When moving to the delivery of goods, the buyer and seller swap roles\n### Unilateral Contracts\n#### E.g. Offering a reward for someone finding a dog, you are not obligated to be a part of the contract, but if you were to try and redeem the reward then you would be a part of the contract\n#### One party undertakes to do or refrain from doing something on his part if another party does or refrains from doing something. But the promisee does not himself undertake to do or refrain from doing that thing.\n## **Offer and Invitation to Treat**\n### Offeror - The person who makes the offer\n### Offeree - The person to whom the offer is made\n### ![](https://remnote-user-data.s3.amazonaws.com/ba6f4geYuiBP8MY4zd_j8VfrxgsNdqcpEilgp8Dr5GS4ZRColwWTbW7puhD5seO59W5_Bo75s6uTm1drHOjJMEGp1UPLG7No-l8W4Qq7400ofriHXVIq-ZJbdzuh70zY.png) \n### An offer is an expression of willingness to contract, made with the intention (actual or apparent) that it shall become binding on the person making it as soon as it is accepted by the person to whom it is addressed\n## **Offer vs Invitation to Treat**\n### Invitation to Treat‚ÜíInvitation to negotiate  #EMLCommon\n### If the initial statement is an offer and the recipient says yes, then we have a contract\n### If the initial statement is an [Invitation to Treat](Engineering Management and Law/Introduction to Contract Law and Formation/Offer vs Invitation to Treat/Invitation to Treat.md) and the recipient says yes...\n#### then we do not have a contract, but rather the 'yes' is an offer which the initiating party has to accept \n## **Gibson v Manchester City Council (1979)**\n### The council had a policy of selling houses to tenants\n### The tenant wrote to the council requesting details to buy the house\n### The council replied saying it 'may be prepared to sell the house to you' and Gibson completed the application form\n### The council changed its policy and Gibson sued the council alleging there was a concluded contract\n### The House of Lords disagreed holding that the councils letter was not an offer but an invitation to Gibson to make an offer\n#### If the councils reply was considered an invitation to treat, then Gibsons application was the offer, which was never accepted by the council\n#### From the councils perspective there was no contract\n#### From Gibsons perspective there was a contract\n#### If the councils reply was considered an offer then a contract was made when Gibson applied\n## **Storer v Manchester City Council (197)**\n### Council refused to proceed with the sale as in Gibson v Manchester Council\n### However the court of appeal found the contract was concluded because of the language used\n#### 'If you will sign the agreement and return it to me, I will send you the agreement on behalf of the [council] in exchange'\n## **Partridge v Crittenden (1968)**\n### Adverts\n### Under the Protection of Birds Act 1954, it was unlawful to offer for sale any wild live bird\n### The advert read 'Bramblefinch cocks, Bramblefinch hens 25 s. each'\n### Advertisements are invitations to treat\n### So the advert was not considered an offer\n## **Grainger v Gough (1896)**\n### Price lists\n### A man was circulating a price list for different wines and their prices\n### The transmission of such a price list does not amount to an offer to supply an unlimited quality of the wine described at the price named, so that as soon as an order is given there is a binding contract to supply that quantity\n### Reasons for the policy\n#### If it were so [i.e. an offer], the merchant might find himself involved in any number of contractual obligations to supply wine of a particular description which he would be quite unable to carry out, his stock of wine of that description being necessarily limited\n#### To avoid situations where the seller would be bound to deliver goods which he does not possess\n## **Fisher v Bell (1960)**\n### Shop windows\n### Someone was displaying a flick-knife for sale in the window of a shop\n### Potentially a violation of the Restriction of Offensive Weapons Act 1959\n### 'I confess that I think most lay people and, indeed, I myself when I first read the papers [proceedings], would be inclined to the view that to say that if a knife was displayed in a window like that with a price attached to it was not offering it for sale was just nonsense'\n### But\n#### 'It is perfectly clear that according to the ordinary law of contract the display of an article with a price on it in a shop window is merely an invitation to treat. It is in no sense an offer for sale the acceptance of which constitutes a contract'\n## **Pharmaceutical Society of Great Britain**\n### Self-service shops\n### The sale of certain drugs was to be supervised by specifically qualified people\n#### If the display of the item is an offer the contract is concluded when the customer selected the product from the shelves\n#### If the display of an item is an invitation the contract is concluded when the items were paid for\n### The court decides the display of an item was an invitation\n### 'I think that it is a well-established principle that the mere exposure of goods for sale by a shopkeeper indicates to the public that he is willing to treat but does not amount to an offer to sell'\n### ''The customer ... may himself pick up an article and bring it to the shopkeeper with a view to buying it, and if, but only if, the shopkeeper then expresses his willingness to sell, the contract for sale is completed'\n### 'The very fact that the supervising pharmacist is at the place where the money has to be paid is an indication to the purchaser that the shopkeeper may not be willing to complete a contract with anybody who may bring the goods to him'\n## **Thornton v Shoe Lane Parking (1971)**\n### Machines\n### 'The customer pays his money and gets a ticket. He cannot refuse it. He cannot get his money back'\n### 'He was committed at the very moment when he put his money into the machine. The contract was concluded at that time'\n### 'The offer is made when the proprietor of the machine holds it out as being ready to receive the money. The accpetance takes place when the customer puts his money into the slot'\n## **Chwee Kin Keong v Digilandmail.com (2004)**\n### Websites\n### Digilandmail was selling printers on its website for $66\n### The official HP website sells the same printer for $3,854\n### 4,086 laser printers were ordered\n### 'In an internet sale, a prospective purchaser is not a able to view the physical stock available. The web merchant, unless he qualifies his offer appropriately, by making it subject to the availability of stock or some other condition precedent, could be seen as an offer to sell an infinite supply of goods. A prospective purchaser is entitled to rely on the terms of the web advertisement'\n### 'It is therefore incumbent on the web merchant to protect himself, as he has both the means to do so and knowledge relating to the availability of any product that is being marketed. As most web merchants have automated software responses, they need to ensure that such automated responses correctly reflect their intentions from an objective perspective'\n## **Acceptancce**\n### A final and unqualified expression of assent to the terms of an offer\n### ![](https://remnote-user-data.s3.amazonaws.com/bDP9SBX1ahGizgCaIo0X7cF_mmrmqUKa6Rgx6Pcqabnu1oAMNab21Qw6DOYXATGX_WjOr8vRm-wGRGHL-JmvdxznbOdDF_8FG45XUcaSlWPOV5KfrRoVQBwPxfT12ONJ.png)\n## **The Postal Rule**\n### Adams v Lindsell (1818) [Letter delayed]\n### An offer is made, the purchaser accepts the offer via post\n### The agreement is made when‚Üíthe letter is sent by the purchaser\n#![](https://remnote-user-data.s3.amazonaws.com/LoXWl-vPdqm75JEDEtod2FUNrd6pCGDc9DEEMyJ_Y5HVt9sp5qwjAkdV6Rk_rGPRL8JyIq-tgX7uAfWTT4cqYDHE7lUlFzWOM1HbHRuwcrwq7m7wM5DIy1mc3OhyEfaH.png) \n### The postal rule is an exception to the communication rule\n## **Communication**\n### ![](https://remnote-user-data.s3.amazonaws.com/wu8E18bU2aupIyr3qdWMskBHC1x4cWa0Eg1tRp5Ns45T2F7EyYChMeH_CH8Z0bNAMH_Uwpnz4G3tJxRkWihl8R-DICYcIeg0TwIJcKAWhxTAwBKJiaDGK9AVGH-lfHL1.png) \n#### Instantaneous - E.g.‚Üíphone calls\n- Acceptance happens when‚Üíthe recipient sees the message\n#### Non-instantaneous - E.g.‚ÜíPost\n## **Agreement Problems**\n### Mistakes\n#### Unilateral mistake as to terms\n#### Unilateral mistake as to identity\n#### Mutual mistake\n### Uncertainty\n#### Fatal vagueness\n- May and Butcher Ltd v The King (1934) [Sale of surplus tentage] \n- No agreement\n#### Some vagueness can be overcome\n- E.g. If the price is not agreed, but the mechanism of which will determine the price is\n- Hillas v Arcos (1932) [Softwood goods]\n- Openwork Ltd v Forte (2018)\n## **Consideration**\n### Consideration is needed to form a {{contract}}  \n### Consideration is needed to amend a {{contract}}  \n### Consideration must not be {{in the past}}   #EMLCommon\n### Consideration must move from {{the promise}} \n### Consideration must be {{sufficient}}, but need not be {{adequate}}  \n### Consideration must have {{some }}value\n#### But value need not be {{equivalent to that of the promise in question}}  \n## **Terms and Representations**\n### Throughout negotiations, many things are said by different parties, these are statements\n### Statements can be classified into different types\n### ![](https://remnote-user-data.s3.amazonaws.com/xTlYW2DMzgqX5_zrFo_ka5r-JbEpoMldV15cGZnUIhHFg9CmDjrl_H9gsOujGuYVLvMzna9N02vJ6vTDXRNVMqmwms3GGSIO-4ua_-DqLCuD5ne5mzPKRWCNhxvz2mhB.png)\n## **Express and Implied Terms**\n### ![](https://remnote-user-data.s3.amazonaws.com/mN_3Tlhn6PL5ZT94ZWol-4LBJV2FfaEtD1b2ydaDdBxKtd5eLI-pxwain7Gg9A5vCcdKPqdIbSMF6qEqOUifjbTiwTKaJAZyaGuBjlYkDH2WRsPfKJw6Aqf1oS6MXdTq.png)\n## **Remedies for Breach of Contract**  #EMLCommon ‚Üì \n### Damages\n### Action for the agreed contract price\n### Quantum Meruit ('as much as he has earned')\n### Specific performance\n### Injunction\n### Repudiation\n###1. Damages #EMLCommon ‚Üì \n#### Damages are the primary remedy\n#### Damages may be based on expectation losses or reliance losses\n#### Damages must not be too remote\n#### Damages are not pumitive\n#### The innocent party has a duty to mitigate its losses\n#### Damages may be agreed in advance (**liquidated damages**) but must not amount to a penalty clause\n# Equality and Diversity Law\n## **The Equality Act 2010**\n### Who is covered?\n#### Employees, workers, self-employed who personally carry out services under a contract\n#### Applicants for employment and those already in employment  \n### Requirements ‚Üì \n#### A contract\n#### Mutuality of obligation\n#### Personal service as the dominant purpose\n#### Subordination‚ÜíPerforms services for/under the direction of the hirer\n### Who should not discriminate?\n#### Employers\n#### Trade unions and employer's associations\n#### Exclusion for age and disability discrimination‚ÜíArmed forces\n#### Employees/workers/employed persons\n#### Vocational training providers\n### What is covered?\n#### After dismissal\n#### Access to training, transfer, benefits and promotion\n#### Dismissal and other detriments\n#### Recruitment and selection\n#### Employment relationship an terms of employment\n### The Protected Characteristics\n#### Sexual orientation\n#### Gender reassignment\n#### Religion or belief\n#### Marriage and civil partnership\n#### Age\n#### Race\n#### Sex\n#### Pregnancy and maternity\n#### Disability\n## **The Prohibited Conduct**\n### Direct Discrimination\n#### Direct Discrimination‚ÜíTreating a person less favourably than others is or would be treated because of the protected characteristic\n- Direct Discrimination by Association\n\t- But does not share the characteristic themselves\n\t- Less favourable treatment of a person because they have some link with the protected characteristic\n- Direct Discrimination by Perception\n\t- Less favourable treatment because she is perceived to bear the protected characteristic\n\t- Whether the perception is correct or not\n- Cannot be justified, with some exceptions\n\t- Occupational requirement\n\t\t- E.g. Treating a disabled person more favourably than a non-disabled person\n\t- Age discrimination (proportionate means of meeting a legitimate aim)\n### Indirect Discrimination\n#### Arises when: A provision, criterion, or practise ‚Üì \n- Is neutral on its face\n- But puts, or would put, persons with the protected characteristic at a particular disadvantage\n#### ![](https://remnote-user-data.s3.amazonaws.com/pgRyjZBnhKRSPjpB2b4v1auRdQLginFSbQpNjf52jCVvosiEeE04AnogXM7NyUC8Pck05OSpTY9A96le1o6j7EY5q77dP4iHwYhvokCPfsSdMV0tPYNP1WTlPU12qjuj.png)\n#### Elements ‚Üì \n- Neutral 'provision, criterion, or practise' (PCP)\n- Comparative disadvantage\n\t- Group disadvantage\n\t- Individual disadvantage\n- Motive - \u003e irrelevant\n#### ![](https://remnote-user-data.s3.amazonaws.com/Djr2oiAtMrS6OFYfs3RrVTspYzZcTSMtFXVwLpSinJAushOR5fTj05wVOMzt-4R_zxa4kKruU5trBbolRLkNz3-qyPVeMfDlKZGq6dyw8a87mi8ms0WobsrcnZ56JHWb.png) \n- \n## **Harassment**\n### 3 Types\n#### ![](https://remnote-user-data.s3.amazonaws.com/F5ToZ9o-7LxaQPNDeJ-EJF3i3JIfSfpx9s6ZBRMJJlq_DjNETqDoH-t8FMDfy3tSAVRijr9N1X8sI6v5xp6tJGXDgXPmjwyB9eaKO-W_V-ytAGR-JUli6JaCTK76iqQD.png) \n#### ![](https://remnote-user-data.s3.amazonaws.com/TPCWaGQ8kgTknIat4B6GQ0N7J0O_tDLRCIitFQErr2BhIeU1M2fWwZ-EjN6HPAqXrFwNS6GkzQ7a2exTlgpSZ3gk7fXPoOkeMnSny4vnp-4R9zjErNUmWaXsIanvz2bk.png) \n#### ![](https://remnote-user-data.s3.amazonaws.com/s8Bp6hL36_9YipTa57HCvMpAyL2puc0_i8lXhzN_psVb0t44mKwN7QBlurGdzlVeqGBGC-S1iBLeLo873AfLbhm0_HpqFCMU6qkI43UXAlSX0TjTVbnSajq13DwOg-x5.png) \n### Harassment‚ÜíUnwanted conduct related to the relevant protected characteristic\n#### Which has the purpose or effect of ‚Üì \n- Violating the victims' dignity or\n- Creating an intimidating, hostile, degrading, humiliating or offensive environment\n### Test is subjective and objective\n#### The perception of the alleged victim\n#### Whether it is reasonable for the conduct to have that effect\n#### The other circumstances of the case\n## **Victimisation**\n### An employer will be held to have victimised an employee where, on the grounds of any of the protected characteristics, he/she subjects a person to detriment because he/she ‚Üì \n#### Brings proceedings under the Equality Act\n#### Gives evidence or information in connection with proceedings\n#### Does any other thing for the purpose of or in connection with proceedings\n#### Makes an allegation that another person has contravened the Act\n## **Equal Pay**\n### The EqA 2010, S 66 imposes an equality clause in the terms of a contract of employment, even where on is not included\n### Aim: ensuring that e.g. a woman‚Äôs terms of employment are no less favourable than a man‚Äôs\n### Claims have to be made on the basis of discrimination based on the claimant‚Äôs sex\n### Pay: includes all consideration that the worker receives from the employer\n### A claim must be made under: like work, work related as equivalent, and work of equal value\n### Claims have to be made with reference to a comparator from the same employment or an hypothetical comparator\n### The employer can raise a ‚Äòmaterial factor‚Äô defence that a difference in pay is not due to the sex of the claimant but due to reasons such as responsibility, experience..\n## **Work-Life Balance Rights**\n### Pregnant workers‚Üídismissal of a pregnant employee is an automatically unfair dismissal\n### Maternity rights‚Üímaternity leave, statutory maternity pay, maternity allowance, statutory paternity pay, statutory adoption pay\n### Family friendly policies‚Üíemployees may take reasonable time off from work to provide assistance to a dependant ( child, spouse, parent, partner, or someone who relies on the employee for care) , or to take time off when the dependant is ill, has given birth, been injured, has an unexpected problem relating to the dependant‚Äôs care\n## **Regulation of Working Time**\n### Working Time Regulations 1998\n### Maximum limits of work\n### Maximum daily, weekly and annual periods of rest and adequate breaks - entitlement\n### Holidays/annual leave - entitlement\n### Scope\n#### Excluded Sectors ‚Üì \n- Armed forces and police\n- Mobile workers\n- Domestic service\n- Agricultural workers\n- Doctors in training\n### Workers\n#### Employees\n#### Statutory workers\n#### Over 16\n#### Including agency workers and contract workers\n#### Workers on call\n### Working Time ‚Üì \n#### Any period during which he is working, at his employer‚Äôs disposal and carrying out his activity or duties\n#### Any period during which he is receiving relevant training  \n#### Any additional period which is to be treated as working time for the purpose of these Regulations under a relevant agreement\n### Maximum Working Week\n#### Maximum working time must not exceed {{48}} hours per week over a period of {{17}} weeks\n#### You can opt out by {{ individual agreement}} \n#### Unmeasured working time workers\n- Family workers\n- Managing executives\n- Professionals\n#### For young workers, {{8}} hours per day or {{40}} hours per week\n#### For night workers, must not exceed an average of {{8}} hours in 24\n### Entitlements\n#### Rest Periods and Rest Breaks\n- Adults Workers' Entitlement\n\t- Rest for {{11}} consecutive hours in each {{24}} \n\t- For daily working hours \u003e{{6}}, entitlement to {{20}} minutes away from the workstation\n\t- {{24}} hours in each seven day period\n- Young Workers' Entitlement\n\t- 48 hours in each 7 day period\n\t- For daily working hours \u003e{{4.5}}, entitlement to {{30}} minutes away from the workstation\n\t- Rest for 12 consecutive hours in each 24\n#### Annual Leave\n- . {{5.6}} weeks in any leave year \n- Leave to be taken in the leave year in which it was due\n- \n- \n- \n# Management Accounting and Company Finances\n## **Fundamental Accounting Equation** ‚Üì \n### Assets = Liabilities + Equity\n#### Borrowing money to buy a car increases your liability and also your assets\n#### Selling shares increases a companys cash and also its shareholder equity\n### This equation is maintained by double entry bookkeeping\n#### Each transaction is entered at least twice\n- Once as a credit and once as a debit, depending on the type of account\n#### These must balance, ensuring the new values also satisfy the equation\n### ![](https://remnote-user-data.s3.amazonaws.com/ayX4EawVZ4CIsTCvZraOxd_DmHlnBzpEJLUbNp-HFvqGrKQSlsv4LQ0Y3stOJi7agfJ7vDEOgEdG-jeu-0t48WCRBwG3VNcN2yq4_vP3yuMeNlNXqz1m0cEOvhYe-g4o.png) \n## **Bookkeeping and Company Accounts**\n### Companies must maintain accurate accounts\n#### To manage their cash flow, keep track of their assets, equities and liabilities\n#### Poor bookkeeping can result in unpaid tax, fines and encourages fraud\n### Small firms may delegate accounting data entry to a specialist firm\n### There are popular packages you can use to enter the data yourself\n### As the company grows it usually employs its own specialist staff\n## **Two Main Branches of Accounting**\n### Financial accounting ‚Üì \n#### Annual reports of the company's situation\n#### These are published to shareholders and the public\n#### Must be audited to confirm their correctness\n#### Used by investors to decide whether to buy, hold or sell shares\n### Management accounting ‚Üì \n#### Provides additional and more up to date information\n#### Typically include data which is company confidential\n#### Used to monitor, measure and manage performance\n#### And support management decision making\n### Plus tax accounting, forensic accounting, accounting information systems...\n## **Financial Reports**\n### Balance sheet shows‚Üíassets, liability and equity at a defined moment  #EMLCommon\n### Profit and loss report shows income and expenses\n### Equity statement‚Üíshows retained earnings  #EMLCommon\n### Cash flow statement reports on‚Üíoperating costs, investing and finances  #EMLCommon\n#### These relate to a state period of time, e.g. the reporting year\n### Typically also includes a financial review or management discussion\n### The report assumes the company is a \"going concern\"\n#### Hence can pay its debts as they fall due - but if not this should be flagged up\n#### In case of insolvency, shareholders have lower priority than loan providers\n#### Assets usually have lower value if they have to be liquidated (sold off) in a hurry\n## **International Financial Reporting Standard**\n### Fundamental qualitative characteristics of financial information\n#### Relevance\n#### Faithful representation\n### Enhancing qualitative characteristics\n#### Comparability\n#### Verifiability\n#### Timeliness\n#### Understandability\n### IFRS standards are required or permitted in over 140 jurisdictions\n## **Financial Analysis**\n### Before investing in a company, it is wise to analyse their financial data\n#### Can access online financial analysis\n#### Decide if you will hold your investment and profit through dividends\n### As well as the share price, you should look at key financial metrics ‚Üì \n####1. Market Capitalisation‚ÜíShare price x Number of shares\n####2. Earnings per Share (EPS)‚ÜíProfit / Number of shares\n####3. Price Earnings (PE) Ratio‚ÜíProfit / Market cap\n####4. Beta‚ÜíA measure of volatility compared to the rest of the market\n## **Management Accounting**\n### Management Accounting‚ÜíAnalysing information to advise business strategy and drive sustainable business success\n### Focusses more on the present and future compared to financial accounting\n### Analysis and control of costs, profitability analysis and optimisation\n### Claimed to create more value than other types of accounting\n### ![](https://remnote-user-data.s3.amazonaws.com/ZU0mjPJYpER4bgxwezf3U6UeS1vFm3Bmt-XkbpNiKPgqQJByHThdxxKQNwFYBA1waX6qJw4mSpXrw-G_NcxwwUtlE47PF_14OmeRiPqLE671ohvc82I_W9WNzq1G7r8l.png) \n## **Planning and Control**\n### Objectives\n#### Long term goals\n#### Problem - Different stakeholders in organisation may have different goals\n### Strategic decisions\n#### How to achieve the organisations objectives\n#### Strategy involves long-term plans\n### Operating decisions\n#### How to apply the organisations strategy\n#### Operations require short-term plans (budgets)\n### These all need to be monitored and controlled\n## **Budgeting**\n### Involves different levels in an organisation\n### Top down approach ‚Üì \n#### Senior managers tell lower levels what is expected, leave them to work out details\n#### Emphasises strategy over operations\n### Bottom-up approach ‚Üì \n#### Lower levels tell senior managers what they can achieve, what resources they need\n#### Emphasises operations over strategy\n### Participatory approach ‚Üì \n#### The budget is negotiated between different levels in the organisation\n#### May lead to compromises\n### ![](https://remnote-user-data.s3.amazonaws.com/G0vEJAAd4NiegmNmibvjaI_9VmGKrCjy4Fyo4GmjDzVtR00F6LDBw3KEIuRxWl1pgPW74h_4x6ZAWi2RLBd64rttCYH3ynnwSyCZCsTlX5D4uzP-KadRali7sYcoju6n.png) \n## **Costs**\n### Avoidable Costs‚ÜîCosts that can be eliminated by choosing one alterative over another\n#### Avoidable costs are relevant in account terminology\n### Unavoidable costs are never relevant and include [Sunk Costs](Engineering Management and Law/Management Accounting and Company Finances/Costs/Unavoidable costs are never relevant and include Sunk Costs/Sunk Costs.md) \n#### Sunk Costs‚ÜîA cost that has already been incurred and that cannot be avoided regardless of what a manager decides to do\n## **Cost Centres**\n### Cost Centre‚ÜîAn identifiable part of an organisation to which costs can be assigned and aggregated\n### In a manufacturing setting, a cost centre could be\n#### A single factory\n#### A particular department or activity\n#### A machine or group of machines\n#### An individual or group of individuals\n### Cost centres can usually be identified where\n#### Many costs can be allocated to specific parts of the organisation\n#### Someone has responsibility for that part of the organisation\n## **Motivations to measure cost**   ‚Üì \n### Help in determining the selling price\n### Help in production planning\n### Maintain management control\n### Support management decision making\n### Costs can be aggregated by\n#### Element (material, labour, ...)\n- Useful for cost control\n#### Nature (direct, indirect_\n- Useful for cost accounting\n#### Function (production, non-production)\n- Useful for financial accounting\n#### Behaviour (fixed, variable, ...)\n- Useful for budgeting and decision making\n## **Classification of costs**\n### Costs vary with activity, they can be ‚Üì \n#### Fixed \n#![](https://remnote-user-data.s3.amazonaws.com/2sKlB5sCepb0DDOp9Ab2oZgj6GY9PMggQ25xtSV_wVCgqmBCyxgmPU2syVfgDL1SFFo8bZtGXV51QmYPGmRwQq33pp82UL7aC8f143UqhVsMywAjlqMt9O1bUNQSjhE6.png)  \n#### Variable \n#![](https://remnote-user-data.s3.amazonaws.com/Hb9l5Ht0cjD63_X1jylc0hfIwMRd1WCjwSCvsZuKZ12uYznRIyVx5L1oZ_q0rbbPcqPPpXAUZY9t1WATZS1Li5jnRJ5P58i1zkoD2Hp5Rn7jHeiDp-3lBlBNPGunwML2.png) \n### Costs can also be\n#### Semi-variable\n#### Semi-fixed\n## **Cost Accounting and Profit Model**\n### A simple model of a business with just one product is given by ‚Üì \n#### $\\pi = pq - (F + wq)$ \n##### Where ‚Üì \n######1. $\\pi$ is profit\n######2. $p$ is sales price\n######3. $F$ is fixed costs\n######4. $w$ is variable costs per unit sold\n######5. $q$ is quantity sold\n## **Calculating Direct Costs**\n### Suppose a company manufactures tablet computers\n#### The required materials total ¬£400\n#### The required labour is 5 hours at ¬£20/hour\n#### The total direct cost is $¬£400 + 5 * ¬£20 = ¬£500$\n#### The variable cost is $w$\n### You need to add a share of the fixed costs to this\n#### If $F = ¬£1,500,000$ and $q = 15,000$ then $F/q = ¬£100$\n### So the simple model assigns a cost of ¬£600 per unit manufactured\n### This tells you what price $p$ to set in order to make a profit\n#### Using the model equation re-expressed as $\\pi / q = p - w - (F / q)$\n#### This is positive if $p \u003e q + (F/q)$\n#### If $p = w + (F / q)$ this is called the break-even point\n## Kaplan and Norton - The Balanced Scorecard\n### Measures that drive performance\n#### ![](https://remnote-user-data.s3.amazonaws.com/wFTsGMW-vXOxpqjOpCvGRxT5ebI51LIxMtfXlQS1AZ5roE5HkEdH6fn7dZwMoF3iJBmqBQit9zoOJoEOxcLke2suszk5BVKxdJsACeVAbBW9gCKeEbfc_qXZ7Y9R58lW.png)  \n### Example scorecard\n#### ![](https://remnote-user-data.s3.amazonaws.com/BanPT4b1PkFZQRfANFijewOaMbYPfIVkjd1m_a8fX54W_huW3bKqOhPTs07hK4KKPHgjmOnYECvZsTVNCwX9I3xadn3D-Fxsj9VzwTB7FcvljoR9NPtXASwUO99teNc7.png)\n### Ethics and Externalities\n#### The balanced score card omits social, environmental \u0026 ethical aspects\n#### The impact of company strategy and decision making is that making employees redundant affects their families and communities\n## **International Transfer Tax**\n### Companies traditionally pay tax based on their profits\n#### Governments use tax to reduce/correct social and environmental damage\n#### By providing social security, effective regulators and financial authorities...\n### Global multinational companies transfer profits between countries\n#### They end up reporting the profit in a low tax regime, which is tax efficient for them\n#### But governments then miss out on tax revenues\n### Resolving this issue requires international cooperation\n- \n# Business Organisations\n## **Forms of Business Organisation**\n### Unincorporated - Has no separate legal entity from their participants\n#### Partnership\n- E.g. Richard and Maurice McDonald\n#### Sole Trader\n- E.g. Jeff Bezos\n### Incorporated - A legal entity in its own right\n#### Private Limited Company (Ltd)\n- E.g. Dyson Ltd\n#### Public Limited Company (Plc)\n- E.g. Tesco Plc\n#### Limited Liability Partnership (LLP)\n- E.g. Ernst \u0026 Young LLP\n## **Sole Traders**\n### Characteristics\n#### The simplest business organisation\n#### No distinction between the sole trader as an individual and the person running the business\n#### Generally perform the work, though they can employ others or subcontractors\n#### Entitled to keep all profits after tax\n- But have unlimited and personal liabilities to their counterparties and the State for any acts or omissions related to the business\n### Formation\n#### There are no formal (regulatory) requirements regarding the formation of the sole trader business\n#### They may also operate the business in whatever way they wish, as they do not have to ask permission of partners or seek to change the nature of the business that may have been included in a memorandum of association\n#### Therefore they may start their trade immediately as long as they are registered with Her Majesty's Revenue and Customs (HRMC)\n### Termination\n#### Where they cannot pay debts associated with the business, there are formalities to do with bankruptcy proceedings\n#### Assuming any tasks undertaken have been completed and creditors have been paid, sole traders only need to inform the relevant authorities of their action to cease trading\n#### Few formalities to bring the sole trader business to an end\n## **Partnerships**\n### Characteristics\n#### Partnerships are relations between two or more persons who come together, and act in common to form a business with a view of profit\n#### There are four types of partner in a partnership\n- 'Typical' Partner‚ÜíHas the right to take part in the management of the firm \n- 'Silent' Partner‚ÜíInvests money in the partnership but has no active role in the management\n- 'Salaried' Partner‚ÜíAppears on the firm's letterheads, but does not have the rights and obligations of the other partners \n- Partner 'by estoppel'‚ÜíAppear as partners of the firm even though they have no active participation in it  #EMLCommon\n### Liability of Partners\n#### Partners are jointly and severally liable for\n- The torts (wrongful acts) committed in the normal course of business\n- The firms debts and contracts\n#### This means the firms creditors can take action against any partner\n- They can also take action against more than one partner at the same time\n#### If one partner commits a tort or crime in the course of the business, the partnership will be liable (including each partner) if this was within the offending partner's actual or apparent authority\n#### Liability is shared equally between the partners based on their respective percentage of ownership\n#### However, if one partner has resources to satisfy the debt and the others do not, the partner with funds is responsible for the full debt. They can then seek the money owed from the defaulting partners\n#### Liability cannot be imposed on a partner for acts that occurred before they entered the partnership. However liability continues even when the partner has left the partnership for acts conducted whilst they were a partner\n### Formation\n#### Partnerships are usually established through a contractually binding agreement ('partnership agreement')\n#### The agreement identifies\n- The purpose of the partnership\n- The time it should remain in existence\n- The names of the partners\n- The business address\n- The percentage of ownership and distribution of profits\n- The authority for participating in the management\n- The responsibilities of each partner\n### Termination\n#### According to the Partnership Act 1980, a partnership may be dissolved \n- When a specific task for which the partnership was created has been completed\n- On the agreement of the partners\n- On the death, bankruptcy, or permanent incapacity of a partner\n- Where there has been illegality on behalf of the partnership\n- On lapse of time\n## **Limited Liability Partnerships**\n### Characteristics\n#### An LLP is a separate legal entity, with its own legal personality\n#### This means that\n- The property of the LLP will also belong to the partnership instead of to the partners\n- Contracts and obligations will be created with the LLP rather than the individual partners\n- The partnership will continue despite changes to its internal membership until formally wound up\n### Liability of Partners\n#### The 'limited' type of this form of organisation implies that individual partners are only liable up to the value of their participation\n#### In case of insolvency, therefore, they will only suffer a loss that equals their investment in the LLP\n#### The LLP as a separate legal person remains fully liable for any debts and liabilities ('unlimited' liability)\n### Formation\n#### The incorporation document and a statement of compliance are filed with Companies house\n#### Once all relevant documentation has been received, a certificate of incorporation is issued, which confirms that the partnership exists legally\n#### Having received this certificate, the LLP can begin to trade\n#### The LLP must notify the Companies House of the individual partners' data and any amendments in its composition\n#### Having receieved  \n### Termination\n#### An LLP can be voluntarily dissolved following an application by the majority of its members\n#### LLPs can also be wound up through their insolvency. In that case, procedures may be established for voluntary arrangements, administrative orders, receivership and liquidation\n## **Limited Companies**\n### Most companies are registered as limited companies, meaning their assets and revenues are separate from the owners' assets and income\n### Companies can also register as unlimited companies\n### Characteristics\n#### Ability to own Property\n- The persons who form the company may introduce property to it, either in the form of capital contribution (in exchange for shares) or through a sale agreement\n- A limited company has the ability to own property irrespective of the composition of the shareholders\n#### Contractual Ability\n- Due to their separate legal personality, they may establish contracts and enforce them when the other party is in breach, although a director of the company must physically undertake this\n#### Limited Liability\n- If there are insufficient funds and assets to pay the creditors, shareholders will be liable for any remaining debts limited to the nominal value of the shares they own ('companies limited by shares'), or the sums guaranteed for that reason ('companies limited by guarantee')\n- The most important feature of limited companies\n- The company itself has unlimited liability and therefore must satisfy any debts to creditors\n- 'limited' refers to the potential liability of shareholders\n#### Perceptual Succession\n- Once established, they will remain in existence until they are legally wound up, regardless of who owns or runs the company\n#### Ability to commit Torts and Criminal Offences\n- It is possible for limited companies to commit a criminal offence or tort through their directors\n- Directors may also be convicted and imprisoned n the basis of their actions\n### Difference between Private and Public Limited\n#### A Public Limited Company (PLC) is entitled to offers its shares and debentures for sale to the public and it may be listed on the London Stock Market (although due to the rules in which companies may be listed this is only applicable to the latest organizations)\n#### A Private limited company (Ltd) is prohibited from offering its shares to the public. At the same time, though, it has become much less regulated and hence more favourable to those who run businesses than before\n#### ![](https://remnote-user-data.s3.amazonaws.com/5ygvMxCI7PIgoSHYseVfzb1YEBWlw-B-xMQTJtqWKSJ9jXkN5AmcbV0o2Zem-5CYpYPjA6N_7Qr-l4oGFWOTbiHwGgwzleH2wJRTMPTpwL1IjT58VMoPO0nhKfRLb8wZ.png) \n### Formation\n#### There are three methods for establishing a limited company\n- Royal Charter\n\t- An instrument of incorporation, granted by The Queen, which confers legal personality on an organisation and defines its objectives, constitution and powers to govern its own affairs. This is mainly used for the incorporation of state-run companies, universities etc.\n- Registration\n\t- The most common and simplest way to form a company in the UK\n\t- The new company will then be noted in the London Gazette\n\t- The founding members of the company (the 'subscribers') must send the following documents to the Companies House along with the appropriate registration fee\n\t\t- The articles of association\n\t\t- A completed Form IN01\n\t\t- The memorandum of association\n\t- If the documents are correct, the Register issues a certificate of incorporation, identifying the company with its registered number\n- Statute\n\t- It has been used mainly to create corporations, such as the utilities, where, upon privatization, their status had to be altered as they were no longer owner by the State and did not possess the powers that the State did\n### Termination\n#### A limited company will only cease to exist when formally wound up\n#### There are three main ways for winding up a limited company\n- Voluntary liquidation (for solvent companies) - following a resolution of the General Meeting and the filing of a 'Declaration of Solvency' to Companies House\n- Application to get the company struck off the Register\n- Liquidation by a court (for insolvent companies) - following a petition before the court, provided that the conditions for issuing an order of mandatory liquidation are met\n# Employment Law\n## **Basic Categories of Employment Law**\n### Labour law/Collective labour law‚ÜíTrade unions \u003c - \u003e employer\n### Employment law/Individual labour law‚ÜíIndividual worker \u003c - \u003e employer\n## **Sources of Employment Law**\n### Formal Sources ‚Üì \n#### Common law - Contract of employment\n#### Employment protection legislation - Mandatory 'floor of rights'\n- ERA 1996\n- TUPE 2006\n- TULRCA 1992\n- EqA 2010\n- Working Time Regulations 1998\n##### National Minimum Wage Act 1998\n####1. Code of practise\n- Code of Practise 1 on Disciplinary and Grievance Procedures (ACAS)\n- Code of Practise on Employment and Equal Pay (EHRC)\n- Health and Safety Executive (HSE)\n### Informal or Voluntary Sources ‚Üì \n#### Collective agreements\n#### Work rules, notices and other documents issued by management\n####1. Self-Regulatory Codes of Practise\n## **Institutions of Employment Law**\n### International\n#### International Labour Organisation (ILO)\n#### European Court of Human Rights (ECtHR)\n- National\n#### Employment Tribunals (ET)\n#### Common Law Courts\n#### Employment Appeal Tribunal (EAT)\n#### Equality and Human Rights Commission (EHRC)\n#### Advisory Conciliation and Arbitration Service (ACAS)\n## **Contract of Employment: Formation**\n### 'Regular' Contract Law Elements \n#### Consideration\n- Voluntary work?\n#### Unconditional Acceptance\n#### Intention to form a Legally binding Agreement\n#### Unconditional Offer\n- Role of \"subject to\" provisions\n#### Certainty\n- Can you identify all the key terms?\n## **Terms of the Contract**\n### ![](https://remnote-user-data.s3.amazonaws.com/U-Wkm5WM5XBHe1NQBnmGBCLSxXWKsDLc26GdzFMMQeWn_nm3oOMRt1qqfJfSqHo3dBBez0ecg-Y4zDS6FYHf8LfnAdrJ7oyrnXggxO9Y4ul6nQd6W4Zeiget7mVcvfFr.png) \n### Implied Terms in Law vs Express Terms\n#### Norm - Express terms always prevail over implied terms (in fact or in law) relating to the same matter\n### Express Terms\n#### Express terms can be found\n- Possibly, from work rules in work handbooks\n- Possibly, incorporated from collective agreements\n- Most obviously, in the written statement of terms\n#### Written Statement of Terms\n- The contract of employment itself need not be in writing, can be informal (agreed orally or implied from conduct)\n- But - ERA 1996 s. 1 - employer needs to provide a written statement of the particulars of employment\n- Required within 2 months of starting employment\n\t- Only if you are an employee\n- This is not the contract, but is prima facie evidence of its terms\n#### ERA 1996, s. 1, EC Directive 91/533\n- The written statement must state\n\t- Remuneration\n\t- Date employment began\n\t- Etc\n\t- Place of work\n\t- Terms and conditions relating to hours of work, holiday entitlement, holiday pay, sick pay\n\t- Pension scheme\n\t- Notice period\n\t- Names of employer and employee\n- Changes must be notified within one month but this may be done in another document\n### Implied Duties Owed by Employers  #EMLCommon ‚Üì \n#### To pay\n#### To provide work\n#### To indemnify\n#### Safety or duty of care\n#### Mutual trust and confidence\n### Implied Duties of the Employee \n#### Mutual trust and confidence\n#### To act in good faith\n#### To be ready and willing to work\n#### To use reasonable skill and care\n#### To take care of the employers property\n#### To obey lawful orders\n- \n# Decision Making and Investment Appraisal\n## Capital Budget Decision Making\n### Financial managers are required to determine what long-term investments the business should take on\n#### This is called the Captial Budget Decision\n### Capital budgeting is also known as Capital Investment Appraisal \n### The objective is to find investments where the returns exceed the cost of capital\n### If the firm cannot provide greater returns than safer financial assets, such as government bonds, it should return available funds to its shareholders\n#### ![](https://remnote-user-data.s3.amazonaws.com/IJLvw3u9FA9lalFs_pq6q6kyh5lZVQ6x0tmFngQ_jvmT5NMXlznwB-YXawBAsbA7IgXwW9SIeqKiL9b2YXeI4PYBKl78zshC6G8FEFuSUfhLYsBcb9-JgubosIWZIAxz.png)\n- \n## Six Stages in Capital Budgeting\n###1. Identification Stage - Identify investments that accomplish organizational objectives and strategies\n###2. Search Stage - Explore alternative capital investments that will achieve organizational objectives\n###3. Information-Acquisition Stage - Consider the expected costs and benefits of alternative capital investments\n###4. Selection Stage - Choose projects for implementation\n###5. Financing Stage - Obtain project financing\n###6. Implementation and Control Stage - Get projects under way and monitor their performance\n- \n## Methods of Evaluating Investment Proposals\n### Most popular methods are\n#### Methods that ignore the time value of money\n- Payback method\n##### Accounting Rate of Return (ARR)\n#### Methods that take into account the time value of money\n##### Net Present Value (NPV)\n##### Internal Rate of Return (IRR)\n### Money received today is worth more than the same sum received in the future, meaning it has a time dependent value\n- \n## Payback Method\n### Calculate the number of years before cumulative cash flow equals initial outlay or exceeds it\n### Shorter payback periods are better\n### Only accepts projects if their payback period is shorter than some defined value\n### For non-uniform cash flows\n#### Add cash flows period by period until the initial investment is recovered\n#### Count the number of periods included for the payback period\n### Example\n#### Rivers Ltd is considering the development of software to convert its manufacturing processes into computer based ones\n#### They have two options available, A and B\n#### Evaluate options A and B using the Payback Method\n#### Use this to advise Rivers Ltd which investment is better\n#### ![](https://remnote-user-data.s3.amazonaws.com/tWgR4R-LS_hZPQvh0Ik0nsMW_GhrJr7G5EShD-RS7enRKM1mtVyIT6LB0Of1hOLXNp3-urRjirNguU1YNx2ORX4LGSkvYl7GAKiHYOc4WZ21x8c8ig8ygF6JraFUWQ_p.png) \n### Answer\n#### ![](https://remnote-user-data.s3.amazonaws.com/27x1xhxJcuMiGTN6X26PG_ZyIJKzVZbTODTzE9xK6FebPJo1T-mWFoCkHecFA0idptuX1V1wzsFhXnD7X5wqMvVRKexFn7eAdPOlMl4ZON6DdI25GWGlaniZmDMz_DYI.png) \n#### Using the Payback Method\n- Option B would be chosen since the payback is at the end of 2 years\n- Whereas option A pays back at the end of 3 years\n### Evaluating the Payback Method\n#### Advantages\n- Widely used\n- Simple to understand\n- Appropriate where liquidity constraints exist and a fast payback is required\n- Appropriate for risky investments in uncertain markets\n- Often used as an initial screening device\n#### Limitations\n- Ignores the time value of money\n- Ignores cash flows that occur after they payback period\n- \n- Accounting Rate of Return (ARR)\n### $ARR = \\frac{Average Accounting Profit}{Average Investment}$ \n### Accept the project only if its ARR is greater than or equal to the required accounting rate of return\n#### If there are mutually exclusive project, accept the one with the highest ARR\n### ARR is frequently used to evaluate manager's performance, and is relatively simple to calculate\n### ARR ignores the time value of money, however\n- \n## Future Value and Present Value\n### Future Value - The amount to which an investment is expected to grow after earning interest\n### Present Value - The value today of some expected future cash flow\n### Calculating Present and Future Values\n#### If inflation is 10%, ¬£110 next year is worth the same as ¬£100 now\n#### To work out the future value, you multiply by $\\frac{100+r}{100}$\n- Where  __r__  is the inflation rate as a percentage\n- Note that $\\frac{100+r}{100}=1+\\frac{r}{100}$\n- In general, the future value of ¬£ __n__  in  __y __ years time is $n \\cdot (1+\\frac{r}{100})^y$\n- This makes sense if you can find an investment giving  __r __ percent return\n#### To work out the present value, you divide by $\\frac{100+r}{100}$\n- A future sum of ¬£ __n __ is at present worth $\\frac{n}{(1+\\frac{r}{100})^y}$\n- Reducing a sum by a certain amount is called discounting\n- \n## Discounted Cash Flows\n### Measure all expected future cash inflows and outflows of a project as if they occurred at a single point in time, typically the present\n#### They consider the total profitability over the project's anticipated lifetime\n#### DCF methods allow for the  __time value of money__ \n#### A pound received today is worth more than a pound received in the future\n### DCF methods use the Requires Rate of Return (RRR)\n#### This is the minimum acceptable annual rate of return on an investment\n- \n## Net Present Value (NPV) Method\n### Calculates the expected monetary gain or loss from a project by discounting all expected future cash inflows and outflows to the present point in time, using the Required Rate of Return (RRR)\n#### The RRR is determined by the company and the financial situation\n#### Allowing for investment risk, inflation, interest rates,...\n### Based on financial factors alone, only project with a zero or positive NPV are acceptable\n### Three-Step NPV Method\n####1. Construct a table of the relevant cash inflows and outflows\n####2. Convert the inflows and outflows into present value figures using tables or a calculator\n####3. Sum the present value figures to determine the NPV\n#### If only one project can be funded, the project with the largest positive NPV is normally selected\n### Example\n#### SFC Ltd is considering a development of new software that allows a rapid switch between product lines. They have two options available A and B. The IT director has already estimated the likely cost savings\n- ![](https://remnote-user-data.s3.amazonaws.com/ieE6em2PglK5PKmgoGb0WPQ3aA-9zgh2zdY8jYdKLP34VBBVpUcPOTEYY8nPQ8JE27H4esvCm1LHeHIJ9IYjsJOY_KsQ8_ETvq8pYEQphhNoHnH7Js-iHdDqr_LpNLnl.png) \n#### SFC Ltd has a cost of capital (discount rate)  __r__  of 10%\n#### Calculate the Net Present Value (NPV) for each option and advise the management of the company which option should be chosen\n### Discounted Cash Flows for Option A\n#### ![](https://remnote-user-data.s3.amazonaws.com/MydKwgqYTNbRFJeAfoY96AKF74C3NvQDVMMsy33ebCQVAb44RkxLUnQ-BdsJhXW4B7lWach0WF7HsUHSsgj0SGwOknARyD6dxi3UULjuG1stjDHROlTfDc7j4MqCQxp3.png) \n#### As the Net Present Value is negative, option A should be rejected\n### Discounted Cash Flows for Option B\n#### ![](https://remnote-user-data.s3.amazonaws.com/AC33xMDxa7ZJYWSzMAR6-z3oy74l-bSq8yLLAfxSDANJHkWVQal3c3rsTdX2Z7UUcITI_IndmBfO0_V-aMi2nZxPlCl5EpkdW13oviODv0iUNbedjmSM_SG0QHBxF0mD.png) \n#### As the Net Present Value is positive, option B should be accepted\n#### The project will yield a DCF return in excess of 10%\n- \n## Internal Rate of Return (IRR)\n### Represents the discount rate that equates the present value of initial outlay to the present value of the expected cash inflows\n#### IRR is the discount rate that equates the NPV of all cash flows to 0\n### The IRR method of investment appraisal is broadly equivalent to NPV\n### NPV is easier to understand and therefore is usually preferred to IRR\n- \n## Boston Consulting Group Product Portfolio Matrix\n### ![](https://remnote-user-data.s3.amazonaws.com/1vUyYxGdnqvgMoZ8VghfQKBllc3MOYk_dc5DUgs19LN8YWmhgLAeRPOZjUiwzZJV-qS8ypIQU2asFtBVQgeeH51TXv39_M_zWAwpuPgvtcTown9gcme639Nf6WGxtsaA.png) \n### Invest in your stars\n### Keep cash cows going\n### Select a few of your question marks to grow\n- \n## Multiple Criteria Decision Making/Evaluation\n### Most alternatives have a range of attributes or decision criteria\n#### The cheapest alternative is rarely the best in all respects\n- Comfort\n- Durability\n- Sustainability\n- Attractiveness\n- Accessibility\n### A Pareto optimal solution is desirable where possible\n#### Meaning no adjustment is possible without making some criterion worse\n- \n## Evidence Based Decision Making\n### Major business decisions are made by a board, committee or panel\n#### Diverse groups are known to make better decisions\n#### They weigh up the evidence more carefully\n#### Due to the voting impossibility theorems of Arrow, Gibbard and Satterthwaite\n- There has to be a way to break a voting tie, for example a casting vote\n### Outcomes cannot be predicted\n#### Researching more data to improve your predictions could take forever\n#### So you have to stop at some point and make the decision\n### A formal record is usually made of the decision and rationale\n#### Helping to defend against later accusations of negligence or legal action\n- \n## Using a Decision Matrix to Compare Alternatives\n### Counting positive and negative features\n#### ![](https://remnote-user-data.s3.amazonaws.com/X8x8X-g860_06DFAE_M_7Yb0TFUt2-dRApTaeJ1gTux-ffwCQ-kO_uytaCsKmN4l456glSBVpXZ1i_zD-ODVCV-15iN0QcMX4Z2S9RbQWH5JoLAiJ3xHxND39zK_Mxsx.png) \n### Give each attribute or criterion a weight and work out the weighted average or total score\n#### ![](https://remnote-user-data.s3.amazonaws.com/YwmNHQ2TI53oTCFfwuyIsJzydkvdLGqe9G2k6sobhX4q03HKdhs3FHONjVu4mp41V6uNCEHi6FJrMUekmqLCclxc6nr0xCFNuJLcdtCfaFrIT4w6uneZK-2lUEuDOAlT.png)\n- \n## Investment Utility, Profit and Cash Flow\n### The decision matrix turns multiple criteria into a single one\n#### The resulting notion of utility can be optimised more easily\n### Choosing an optimal portfolio of projects is also multi-dimensional\n### Accountants prefer to use monetary metrics\n# ^[Word Cloud](https://remnote-wordcloud-plugin.glitch.me/) \n# Leadership\n## ^^Leaders ^^vs ^^Managers^^ \n### ^^Do the thing right^^ vs ^^Do things right^^ \n### ^^Develop new processes^^ vs ^^Maintain the status quo^^ \n### ^^Innovate^^ vs ^^Administer^^ \n### ^^Originate^^ vs ^^Imitate^^ \n### ^^Earn their position^^ vs ^^State their position^^ \n### ^^Command respect^^ vs ^^Demand respect^^ \n### ^^Focus on people^^ vs ^^Focus on systems^^ \n### ^^Inspire trust^^ vs ^^Strive for control^^ \n### ^^Focus on potential^^ vs ^^Focus on the bottom line^^ \n### ^^Have long-term goals^^ vs ^^Have a short term view^^\n- \n## Characteristics of an Effective Project Manager\n### Leads by example\n### Visionary\n### Technically competent\n### Decisive\n### A good communicator\n### A good motivator\n### Stands up to top managemeent\n### Supports team members\n### Encourages new ideas\n- \n## How Project Managers Lead\n### Project managers function as mini-CEOs\n#### They manage \"hard\" technical details and \"soft\" people issues\n### Project managers..\n#### Acquire project resources\n#### Motivate and build teams\n#### Have a vision and fight fires\n#### Communicate\n- \n## Communication\n### It is critical for a project manager to maintain strong contact with all stakeholders\n### Task Oriented Behaviour and the Specific Outcome\n#### Structuring process - Guide and sequence discussion\n#### Stimulating communication - Increase information exchange\n#### Clarifying communication - Increase comprehension\n#### Summarizing - Check on understanding and assess progress\n#### Testing consensus - Check on agreement\n- \n## Emotional Intelligence\n### Refers to a leader's ability to understand that effective leadership is part of the emotional and relational transaction between subordinates and themselves\n### Five elements of emotional intelligence\n#### Self-awareness\n#### Self-regulation\n#### Motivation\n#### Empathy\n#### Social skills\n- \n## PMI Code of Ethics\n### The Project Managements Institute's code of ethics for project managers consists of\n#### Responsibiliy\n#### Respect\n#### Fairness\n#### Honesty\n- \n## Work Breakdown Structure (WBS)\n### A hierarchical decomposition of the total scope of work to be carried out the by the project team to accomplish the project objectives and create the project deliverables. Each deliverable is decomposed into specific bite-sized pieces representing work to be completed\n### Purposes of WBS\n#### Echoes project objectives\n#### Organization chart for the project\n#### Creates logic for tracking costs, schedule and performance specifications\n#### Communicates project status\n#### Improves project communication\n#### Demonstrates control structure\n### Organizational Breakdown Structure - Links cost, activity and responsibility\n- \n## Defining a Project Work Package\n### Work package forms lowest level in WBS\n### Work package has a deliverable result\n### Work package has one owner\n### Work package may be considered by its owner as a project in itself\n### Work package may include several milestones\n### Work package should fit organizational procedures and culture\n### The optimal size of a work package may be expressed in terms of labour hours, calendar time, cost, reporting period and risks\n- \n## Effective and Failing Project Teams\n### Effective Project Teams\n#### Clear sense of mission\n#### Productive interdependency\n#### Cohesiveness\n#### Trust\n#### Enthusiasm\n#### Results orientation\n### Reasons why Project Teams Fail\n#### Poorly developed or unclear goals\n#### Poorly defined project team roles and interdependencies\n#### Lack of project team motivation\n#### Poor communication\n#### Poor leadership\n#### Turnover among project team members\n#### Dysfunctional behaviour\n- \n## Conflict Management\n### Conflict is a process that begins when you perceive that someone has frustrated or is a bout to frustrate a major concern of yours\n### Resolving conflict through Principled Negotiation\n####1. Separate the people from the problem\n####2. Focus on interests, not positions\n####3. Invent options for mutual gain\n####4. Insist on using objective criteria\n### Sources of Conflict\n#### Organizational\n- Reward systems\n- Scarce resources\n- Uncertainty\n- Differentiation\n#### Interpersonal\n- Faulty attributions\n- Faulty communication\n- Personal grudges and prejudices\n- \n# Context\n## Projects\n### Project - A temporary endeavour undertaken to create a unique product, service or result\n### Projects are\n#### Developed to resolve a clear goal or set of goals\n#### Customer-focussed\n#### Complex one time processes\n#### Limited by budget, schedule and resources\n- \n## ^^Process ^^vs ^^Project Management^^ \n### ^^Repeat process or product^^ vs ^^New process or product^^ \n### ^^Ongoing^^ vs ^^One-shot limited life^^ \n### ^^People are homogenous^^ vs ^^More heterogeneous^^ \n### ^^Greater certainty^^ vs ^^Greater uncertainty^^ \n### ^^Part of line organization^^ vs ^^Outside of line organization^^ \n### ^^Supports status quo^^ vs ^^Upsets status quo^^ \n- \n## Project Life Cycle Stages\n### ![](https://remnote-user-data.s3.amazonaws.com/qh_nLTuhRa8fpH13uTdQLtMHPho5dcDyRdWolVvlmzEZpTZ8i7_gR0TcW1q3QnH_XBLmbrs06hY0hQI1aLlLvPGbqSZYgm_sfkPPVMAWvfgG1BvRrfVRA2N0Cofp8q0J.png) \n- \n## Quadruple Constraint of Project Success\n### ![](https://remnote-user-data.s3.amazonaws.com/plDL5bzou_90qb0XjsYIYiMSR_ciKbLwp8eZjQmRZcbSxBOGaaF63qzXbBpqZyvzkr4EgboanxOQWbesxfpjdZSOu3HCiRj-CpxAVMI0ma9ewQs11ntLhxG8OI1ZlLTT.png) \n### Cost within budget?\n### Time schedule within deadline?\n### Scope meets with customer expectations?\n### Performance meets with project objectives?\n- \n## Project Manager Responsibilities\n### Selecting a team\n### Developing project objectives and a plan for execution\n### Performing risk management activities\n### Cost estimating and budgeting\n### Scheduling\n### Managing resources\n- \n## Stakeholder Management\n### External Stakeholders\n#### Environmental, political, consumer and other intervener groups\n#### Suppliers\n#### Competitors\n#### Clients\n### Project stakeholders - Individuals or groups who have an active stake in the project and can potentially impact its development\n### Internal Stakeholders\n#### Other functional managers\n#### Project team members\n#### Top management\n#### Accountant\n- \n## Screening and Selection Issues (Evaluating which Projects to choose)\n### Risk - Unpredictability to the firm\n#### Financial\n#### Quality\n#### Technical\n#### Legal exposure\n#### Safety\n### Commercial - Market potential\n#### Payback period\n#### Ability to generate future business/new markets\n#### Potential market share\n#### Long-term market dominance\n#### Initial cash outlay\n#### Expected return on investment\n### Internal Operating - Changes need to firm operations\n#### Need to develop/train employees\n#### Change in workforce size or composition\n#### Change in manufacturing or service operations\n#### Change in physical environment\n### Additional\n#### Impact on companys image\n#### Strategic fit\n#### Prioritization\n#### Patent protection\n- \n## Payback Period\n### Determines how long it takes for a project to reach a breakeven point\n### $Payback Period = \\frac{Investment}{Annual Cash Savings}$\n### Cash flows should be discounted\n#### But still useful if just actual figures used\n### Lower numbers are better\n#### Faster payback\n- \n- Net Present Value\n### Forecasts the value of a project\n#### Is it worth investing\n### NPV=I_O + \\sum\\frac{F_t}{(1+r+p_t)^t}\n- Where\n- I - Initial cash investment\n- P_t - Inflation rate during period t\n- r - Expected rate of return\n- F_t - Net cash flow for period t\n### Higher NPV values are better\n- \n- Internal Rate of Return\n### A project must meet a minimum rate of return before it is worthy of consideration\n### Higher IRR values are better\n### IO=\\sum\\limits_{t=1}^{n}\\frac{ACF_t}{(1+IRR)^t}\n- Where\n- IO - Initial cash outlay\n- IRR - The projects expected internal rate of return\n- ACF_t - Annual after text cash flow for time period t\n- n - Projects expected life\n# Data Protection\n## Personal Data‚ÜíAny information relating to an identified or Identifiable [Natural Person](Engineering Management and Law/Data Protection/Natural Person.md) \n## Natural Person‚ÜíA person who can be identified by reference to an identifier such as a name, identification number, location data, an online identifier or to one or more factors specific to the identity of that person\n## [Processing](Engineering Management and Law/Data Protection/Processing.md) of {{personal data revealing racial or ethnic origin, political opinions, religious or philosophical beliefs or trade union membership}}, and the [Processing](Engineering Management and Law/Data Protection/Processing.md) of {{genetic data, biometric data for the purpose of uniquely identifying a sole person, data concerning health or data concerning a natural persons sex life or sexual orientation}} shall be prohibited - Unless there is explicit consent\n## Data Protection gives individuals the power to manage their personal information in the public domain\n### Control is not absolute but, situationally, may be present through ‚Üì \n#### Consenting to the use of personal information for certain purposes\n#### Knowing about the use of personal information\n#### Objecting to the use\n#### Withdrawing or correcting the personal information\n## Processing‚ÜíAny operation or set of operations which is performed on personal data, whether or not by automated means\n## Controller‚ÜíThe natural or legal person, public authority, agency or other body which, alone or jointly with others, determines the purposes and means of the [Processing](Engineering Management and Law/Data Protection/Processing.md) of personal data\n### Processor‚ÜíA natural or legal person, public authority, agency or other body which processes personal data on behalf of the [Controller](Engineering Management and Law/Data Protection/Controller.md) \n## Where to find Data Protection Law\n### In the EU‚ÜíRegulation (EU) 2016/679 of the European Parliament and of the Council of 27 April 2016 on the protection of natural persons with regard to the processing of personal data and on the free movement of such data -  __otherwise known as the General Data Protection Regulation (GDPR)__ \n### In the UK Post-Brexit\n#### UK GDPR - GDPR, as amended post-Brexit by the Data Protection, Privacy and Electronic Communications (Amendments etc.)\n#### Data Protection Act 2018 - Fills some gaps in the GDPR\n- \n# Project Management of Innovation\n## **The Iron Triangle**\n### ![](https://remnote-user-data.s3.amazonaws.com/o7L4HFpme0uHf7Yd-EISWn82JA_2htlTtELJGpVe9XoVfB0Be6e-drnXF2cRhBHVIMuBpOX2EKINzqq-h19htRA7MsuF_zm2lbS5CP_eMiJn-pHc8YlroL2WhUf5XIun.png) \n### ![](https://remnote-user-data.s3.amazonaws.com/z57m4gmROF-etnb0wYQl9m38WK2Akpg8LIAj84TQUbIXPrHpG9c1BBDZoU6yiXsswRkIm6Pam5eiaG6Uz5q5PUt5u_1K5HETjj9ZXB3UCaJjYt1fli-9QY1FasfTm1Ly.png) \n#### What is it?‚ÜíThe interdependence between cost, time and scope \n## **Waterfall vs Agile**\n### Waterfall\n#### Traditional approach\n#### ![](https://remnote-user-data.s3.amazonaws.com/Q8J_qjrbuGu9fbjvzT-V-zm4kLJF8KtbwAEAww8BvOXZq_Qbb9NlXyx2VuNerc6T58MFUlrPxsaJ_ZGUfOI_1X7XwjDYEWj9c98j_wA_nOP4ybJU5DwVhFd9neKuJvIb.png) \n### Agile Development\n#### Then review and improve through continuous improvement\n#### Aim to develop the minimum viable product\n#### ![](https://remnote-user-data.s3.amazonaws.com/TknynWo__VTHhWY7AdNJhWfmoDWQjI5u1bZIvgUQt6lMDKrFuNzj9ciKm3B2222S0krAaquiEFUjaZCClF88fQy3B-axedHGfoL7xIQtQsy_XnL6n5ENJCLR8n9PsDpu.png) \n## **The Agile Life Cycle**\n### ![](https://remnote-user-data.s3.amazonaws.com/JARRjq5O3BZk7pERxuG5TdtCATziqMZMB4tsSai_C1ZIonZyJ-xACcsV2Mbv5a61StSkF851eGvdye7D7PFgsfpocq8CPa5ICVsRh-HhgwkK6BFByJjQY1NdNbmIQywW.png) \n### Iterative (May occur several times)\n#### Explore\n#### Speculate\n#### Adapt\n### One time occurrences\n#### Close\n#### Envision\n## **Securing Commitment**\n### Project Champions\n#### Using senior executives to champion their new product development projects\n#### Risks of Championing\n- Others may fear challenging executive\n- Role as champion may cloud judgement about project\n#### Benefits of Championing\n- Senior executives have the power to fight for the project\n- They can gain access to resources\n- They can communicate with multiple areas of the firm\n- \n- \n- \n# Professional Engineering Bodies\n## **The IET**##EMLCommon ‚Üì \n### A merger of the earlier Institutions of Electrical Engineering, Incorporated Engineers, and Manufacturing Engineers\n### Accredits degrees in electrical, electronic, and information engineering\n### Runs [Inspec](Engineering Management and Law/Professional Engineering Bodies/The IET/Runs Inspec/Inspec.md) \n#### Inspec‚ÜîA respected bibliographic database\n### Publishes Electronics Letters, Engineering and Technology, ‚Ä¶\n### Produces fact files on solar power, nuclear power, fuel cells, ‚Ä¶\n### Offers associate, student and full membership\n- \n## **UK Spec Chartered Engineer Expectations**\n### Chartered engineers shall demonstrate ‚Üì \n####1. Responsibility for the financial and planning aspects of projects, sub-projects or tasks\n####2. Leadership and development of other professional staff through management, mentoring or coaching\n####3. Effective interpersonal skills in communicating technical matters\n####4. Understanding of the safety and sustainability implications of their work, seeking to improve aspects where feasible\n####5. Commitment to professional engineering values\n### Responsibilities of chartered engineers ‚Üì \n####1. Plan the work and resources needed to enable effective implementation of a significant engineering task or project ‚Üì \n#####1. Manage (organise, direct and control), programme or schedule, budget and resource elements of a significant engineering task or project\n####2. Lead teams or technical specialisms and assist others to meet changing technical and managerial needs\n####3. Bring about continuous quality improvement and promote best practice\n####4. Demonstrate personal and social skills and awareness of diversity and inclusion issues\n- \n## **UK Spec Professional Commitment** ‚Üì \n### Chartered Engineers shall demonstrate a personal commitment to professional standards, recognising obligations to society, the profession and the environment\n### Commitments of chartered engineers ‚Üì \n####1. Understand and comply with relevant codes of conduct\n####2. Understand the safety implications of their role and manage, apply and improve safe systems of work\n####3. Understand the principles of sustainable development and apply them in their work\n####4. Understand the ethical issues that may arise in their role and carry out their responsibilities in an ethical manner\n###1. Carry out and record the Continuing Professional Development (CPD) necessary to maintain and enhance competence in their own area of practice\n- \n## **Engineering Council and Professional Bodies**\n### The Engineering Council publishes the [UK-SPEC](Engineering Management and Law/Professional Engineering Bodies/Engineering Council and Professional Bodies/UK-SPEC.md) (4th edition, 2020/21)\n#### [Aliases](~/Aliases.md)\n#####1. Engineering Council\n### UK-SPEC‚ÜîStandards for Engineering Technician, Incorporated, and Chartered Engineer\n### Set up in 1981\n#### Purpose of the council‚ÜíMaintains the register of accredited engineers\n### Benefits of professional body membership ‚Üì \n####1. Recognition of the member‚Äôs professional status\n####2. Support and guidance with professional development, careers advice\n####3. Technical regional events, seminars, conferences\n####4. Monthly journals, other technical publications, and technical library\n####5. Specialist interest groups and other networking opportunities\n####6. Legal and health advice\n### Key members of the [Engineering Council](Engineering Management and Law/Professional Engineering Bodies/Engineering Council and Professional Bodies/The Engineering Council publishes the UK-SPEC (4th edition, 2020_21).md)# ‚Üì \n####1. Institute of Civil Engineers\n####2. Institute of Mechanical Engineers\n####3. Institute of Electrical Engineers\n####4. British Computer Society\n- \n## **The IET**‚ÜîA merger of the earlier Institutions of Electrical Engineering, Incorporated Engineers, and Manufacturing Engineers\n### Purpose‚ÜíAccredits degrees in electrical, electronic, and information engineering\n### Runs [Inspec](Engineering Management and Law/Professional Engineering Bodies/The IET (1)/Inspec.md) \n### Inspec‚ÜîA respected bibliographic database\n### Publishes Electronics Letters, Engineering and Technology, ‚Ä¶\n### Produces [factfiles](Website/theiet.org/Factfiles.md)  on solar power, nuclear power, fuel cells, ‚Ä¶\n### Offers associate, student and full membership\n- \n## **The BCS**\n### Members can apply to become Chartered IT Professionals\n### Purpose‚ÜíProvides a range of IT qualifications such as the ECDL \n### Also offers Higher Education Qualifications, popular in Asia\n### Publishes The Computer Journal, ITNOW, ‚Ä¶\n- \n## **Academic Engineering Accreditation**\n### One or more professional bodies may accredit a degree programme\n#### The IET accredit our Electrical and Electronic Engineering degrees\n#### The BCS and IET jointly accredit our Computer Science degrees\n#### A panel visits to review each programme every five years or so\n### An accredited degree is evidence of meeting academic requirements‚Üíacademic requirements\n#### This simplifies the process of applying to be recognised as a Chartered Engineer\n#### You still need evidence to show you meet the professional requirements\n#### Typically a reference from your employer plus an interview\n### The Engineering Council maintains a database of such degrees\n- \n## **Ethical Principles** ‚Üì \n### The Engineering council publishes a statement of ethical principles ‚Üì \n####1. Honesty and integrity\n####2. Respect for life, law, the environment and public good\n####3. Accuracy and rigour\n####4. Leadership and communication\n###1. The Engineering Council also publishes guidance on topics such as ‚Üì \n####1. Sustainability\n####2. Risk\n####3. Whistleblowing\n####4. Security\n####5. Building safety\n####6. Brexit transition\n- \n## **International Professional Bodies and Accords**\n### The [IEEE](Engineering Management and Law/Professional Engineering Bodies/International Professional Bodies and Accords/The IEEE and ACM are US equivalents of the IET and BCS/IEEE.md) and [ACM](Engineering Management and Law/Professional Engineering Bodies/International Professional Bodies and Accords/The IEEE and ACM are US equivalents of the IET and BCS/ACM.md) are US equivalents of the IET and BCS\n#### IEEE‚ÜíInstitute of Electronics and Electrical Engineers\n#### ACM‚ÜíAssociation of Computing Machinery\n### Professional accrediting bodies may recognise mutual equivalence\n#### Seoul Accord covers Computing and IT, 8+ signatories including UK, US, Japan\n#### Washington Accord covers Engineering, 21 signatories including UK, US, China\n# Self Management, Skills and Strengths\n## Psychologists have notion of flow\n### In the zone, full emersion, energised focus\n### You forget yourself and work without distraction\n### Leads to great sense of achievement and happiness\n- \n## **Personal Growth**\n### Topchik identifies 5 stages of development ‚Üì \n####1. Attention getting\n####2. Flying blind\n####3. Steadiness\n####4. On the rise\n####5. Doing\n- \n## Positive responses to \"I have the oppurtunity to do what I do best every day\" correlate with higher productivity and business success\n- \n## **Mono-Tasking**\n### Everyday life is full of distractions\n#### Topchik refers to the [\"committee of people\"](Engineering Management and Law/Self Management, Skills and Strengths/Mono-Tasking/Everyday life is full of distractions/The _committee of people_.md) \n#### The \"committee of people\"‚ÜîAll the noises in your head\n- [Aliases](~/Aliases.md)\n######1. \"committee of people\"\n### Multitasking reduces your effectiveness\n- \n## **Crystal Clear** ‚Üì \n### Crystal clear is an‚ÜíAgile method\n### The crystal clear process ‚Üì \n####1. Lead designer and two to seven other developers in a large room\n####2. Using information radiators (Whiteboards and flipcharts)\n####3. With easy access to expert users\n####4. Deliver running, tested, usable code to the users\n####5. Every month or two\n####6. Reflect and adjust working conventions periodically\n###1. Distractions kept away\n- \n## The Eisenhower Principle` ‚Üì \n### ![](https://remnote-user-data.s3.amazonaws.com/8c9_H_PWzQb-xOh6IM32gWhl99R99EY-FkcBq2sbl0Rd4HUBJpuUIsznhn64EnPSU_JxBsCU_90mKery8Zuil-zOF3yk9syiwZMoo0vJeekKPuzJVc7198MvBuukndbL.png) \n- \n## Seven habits of highly effective people ‚Üì \n###1. Be proactive - Aim to shape events and your working environment\n###2. Start with the end in mind - Identify what you want to achieve, avoid distractions\n###3. Put first things first - Prioritise activities that help you achieve your aims ‚Üì \n####1. Sharpen the saw - Take time to rest, renew and update your skills\n###4. Think win-win - Seek common ground and a solution that suits all parties\n###5. First understand, then try to be understood - Diagnose the problem before you prescribe the cure\n###6. Synergise - When the outcome is greater than the sum of the parts\n- \n## **Being Proactive**\n### Reactive Language ‚Üì \n#### There's nothing I can do\n#### That's just the way I am\n#### He makes me so mad\n#### They won't allow that\n#### I have to do that\n#### I can't\n#### I must\n#### If only\n### Proactive Language ‚Üì \n#### Let's look at alternatives\n#### I can choose a different approach\n#### I control my own feelings\n#### I can create an effective presentation\n#### I choose to response appropriately\n#### I choose\n#### I prefer\n#### I will\n- \n## **Habits and purpose**\n### Covey claims effective habits are‚ÜíInternalised principles and patterns of behaviour at the intersection of knowledge, skills and desire\n#### Knowledge‚ÜíWhat, why\n#### Skills‚ÜíHow to\n#### Desire‚ÜíWant to\n### ![](https://remnote-user-data.s3.amazonaws.com/kZRa5stFYov4laf7ES5M0gqPDpfUUsORJ0_yvK1krrrj2etcvwu0iXgTCdXOpgf0LpJukpxG1wZGYOC0dd9NSeq7cGJLUOx55itlRf2fQ4X7CuG1sG4xUNOz7A1lUaNX.png) \n#### Ikigai‚ÜîA Japanese word for  __a reason for being__ \n- \n## **A Self-Management Instrument**\n### Assessing your own self-management skills‚ÜíQuestionaires\n### Questionnaires‚ÜîA management tool based on psychology\n#### Questionnaires can measure subjective quantities\n#### May apply in situations where scientific or operations management techniques don't work\n### Then reflect on what you do and don't do well - So you can understand it and plan how to improve\n### Myers Briggs‚ÜîA personality test\n#### Useful for‚Üíassessing others e.g. a interview\n#### Hard to change your own personality, however\n#### Instead, aim to change your behaviour\n- \n## Gibbs Reflective Cycle‚Üî![](https://remnote-user-data.s3.amazonaws.com/Vv7cH-XYDiJaHVr4b2-zTsJ4PzQ8fOQBebjsrnctX7VGqsfmel8S7nYa4LzDDahGfqWn7N7EdHGcR_pF76GRwGDDJEcrw2uhsnMxcjHgl_Ohf_AgIYi58pPVAYkmn77k.png)\n- \n## **Setting Goals**\n### SMART Goals‚Üî![](https://remnote-user-data.s3.amazonaws.com/8ad6w9tOmjiclmIUaYuIIIaP6-oLqk5FxxYxYbUruvP_S1cu39mcTL64pnApVd55ghoMyhR4iGz4Rh4hvVYoXtjW4OsTjV3ZI0Sv3x5NKncduChwSW-gUDBPtXnYNoeq.png)\n- \n## Emotional Intelligence‚Üî![](https://remnote-user-data.s3.amazonaws.com/31BQlmfyhEK2IscQisKtJKUxrj_Z1-6qGX9EAtOmB1QjUHWlscoAibOmf5-ah2nt4iI9VA4ZUHBlFD_8fo0SqzFU4UcBipa6L7QlN3Ez3PEYze3cdz7-7kORR0cIsaDi.png)\n- \n- \n- \n- \n- \n","lastmodified":"2023-04-19T18:54:04.123889353Z","tags":[]},"/notes/Foundations-of-Comp-Sci/Foundations-of-Comp-Sci":{"title":"Foundations of Comp Sci","content":"\n\n\n\u003ciframe src=\"https://drive.google.com/file/d/1Li4jiD4QE1MnBID5KSZzVICuES7O0BYQ/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.123889353Z","tags":[]},"/notes/Intelligent-Agents/Intelligent-Agents-ToC":{"title":"Intelligent Agents ToC","content":"\n# **Week 1**\n#### [[Introduction to Intelligent Agents]]\n\n# **Week 2**\n#### [[Agent Based Negotiation]]\n\n# **Week 3**\n#### [[Strategic Form Games]]\n#### [[Utility]]\n\n# **Week 4**\n#### [[Strategic Form Games II]]\n\n# **Week 5**\n#### [[Extensive-Form Games]]\n\n# **Week 6**\n#### [[Linear Programming]]\n#### [[Linear Programming II]]\n\n# **Week 7**\n#### [[Preference Elicitation]]\n\n# **Week 8**\n#### [[Auctions]]\n\n# **Week 9**\n#### [[Voting]]\n\n# **Week 10**\n#### [[Cooperative Games]]","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-1/Introduction-to-Intelligent-Agents":{"title":"Introduction to Intelligent Agents","content":"\n# Agents and Environments\n\n## Agents #flashcard\nA computer system capable of autonomous action in some environment, in order to achieve its delegated goals\n\n#### autonomy #flashcard \nCapable of independent action without need for constant intervention\n\n#### delegation #flashcard \nActs on behalf of its user or owner\n\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221007150609.png)\n\nAn agent **perceives** the environment through {sensors}\nAn agent **acts** on the environment through {actuators}\n\n## Intelligent Agents\n\nExhibit, at least: #flashcard \n- Reactive behaviour\n- Pro-active behaviour\n- Social behaviour\n\n### Properties\n\n#### Reactive\nMost environments are dynamic\n\nA reactive system maintains an ongoing interaction with its environment and responds to changes that occur in it #flashcard \n\n#### Pro-activeness #flashcard \n- Generating and attempting to achieve goals\n- Not driven solely by events\n- Taking the initiative\n- Recognising oppurtunities\n\n#### Social Ability #flashcard \nThe ability in agents to interact with other agents and humans via cooperation, coordination and negotiation\n\nThe real world is a multi-agent environment\nCannot attempt to achieve goals without taking others into account\nSome goals can only be achieved by interacting with others\n\n#### Rationality #flashcard \nAgents will act in order to maximise (expected) utility\n\n#### Learning/Adaptation #flashcard \nAgents improve performance over time\n\n### Challenges\n- How to represent goals and user preferences\n- How to optimise the decision making\n- How to learn and adapt and improve over time\n\n## Multi-Agent System (MAS)\nConsists of a number of [[#Agents flashcard|Agent]]s\n[[#Agents flashcard|Agents]] will act on behalf of users with different goals and motivations with one-another\nTo successfully interact agents require the ability to\n- Cooperate\n- Coordinate\n- Negotiate\n\n### Design Challenges\n- How can cooperation emerge in societies of self-interested agents\n- How can self-interested agents recognize conflict and how can they reach agreement\n- How can autonomous agents coordinate their activities so as to cooperatively achieve goals\n\n### Collaborative vs Self-Interested\n\n#### Collaborative #flashcard \n- Agents owned by the same operson/organisation\n- Agent design can be controlled and made to coordinate\n- More robust compared to 'centralised' system\n- Agents easy to control - no incentive needed\n\n#### self-interested/competitive #flashcard \n- Each agent works on behalf of someone else\n- Each agent design is different - no control of design of other agents\n- Each agents pursues own goals\n- Still need to cooperate\n- Need mechanisms for resolving conflicts of interest\n\n\n\n\n# Tags\nFILE TAGS intelligentAgents","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-10/Cooperative-Games":{"title":"Cooperative Games","content":"\n# Coalitional Games\nCooperative games are also called coalitional games\n\n\u003e[!Definition]\n\u003eA coalitional game with transferable utility is a pair $(N,v)$ such that\n\u003e- $N=\\{1,2,...,n\\}$ is a finit set of players. A subset $S$ of $N$ is called a *coalition*. The collection of call coalitions is denoted by $2^N$\n\u003e- $v : 2^N\\rightarrow\\mathbb{R}$ is a function associating every coalition $S$ witha  real number $v(S)$ satisfying $v(\\theta)=0$. This function is called the *coalitional function* of the game\n\nThe real number $v(S)$ is called the *worth of the coalition*\nIf the members of $S$ agree to form the coalition, then, as a result, they can expect receieve utility $v(S)$\nThe utilities of all the players can be measured in a common unit (real number)\nUtility can be transferred between players\nThe coalition of all players is called the *grand coalition*\n\nWhen players form a coalition, they all agree to join it and commit to it\nA coalition cannot form without the agreement of all its members\nWhen two coalitions $S$ and $T$ are formed, we assume they are disjoint i.e. $S\\cap T=\\emptyset$\nIn a coalitional game, the value of the coalition and what players can expect to get does not depend on the behaviour of players that are not in it, nor on other coalitions that may form\n\n# Types of Coalitional Games\n## Superadditive Games\n\u003e[!Definition]\n\u003eA coalitional game $(N,v)$ is said to be *superadditive* if it satisfies $$v(s)+v(T)\\leq v(S\\cup T)$$ for every pair of disjoint coalitions $S,T \\subseteq N$\n\nPlayers have no compelling reason to form separate coalitions\nAgents can earn at least as much profit by working together within the grand coalition\nIt is usually assumed that the agents form the grand coalition\n\n\u003e[!Tip]\n\u003eA game is super additive if the agents can earn more in a coalition than their individual parts combined\n#### Example 1\n![[Pasted image 20230114221444.png]]\n![[Pasted image 20230114221457.png]]\n#### Example 2\n![[Pasted image 20230114221522.png]]\n## Simple Games\n\u003e[!Definition]\n\u003eA coalitional game $(N,v)$ is called *simple* if for each coalition $S$, either $v(S)=0$ or $v(S)=1$\n\nA coalitional game is simple if the worth of any coalition is either 1 or 0\nA coalition $S$ is called *winning* if $v(S)=1$ and is called losing if $v(S)=0$\nSometimes it is convenient to represent simple games by indicating the family of winning coalitions $$W=\\{S\\subseteq N\\text{ }|\\text{ }v(S)=1\\}$$\nSimple games can model committee votes\n#### Example\n![[Pasted image 20230114222113.png]]\n## Weighted Majority Games\nWeighted majority games are a special case of simple games\n\u003e[!Definition]\n\u003eA coalitional game is a *weighted majority game* if there exists a *quota* $q\\geq 0$ and non-negative real weights $w_i$,$i\\in N$, one for each player, such that the worth of each non-empty coalition $S$ is $$v(S)\\begin{cases}1 \u0026 \\sum_{i\\in S}w_i\\geq q\\\\ 0 \u0026 \\sum_{i\\in S}w_i \u003c q\\end{cases}$$\n\n\u003e[!Tip]\n\u003eIn a weighted majority game, each player or coalition is assigned a weight or value, and a coalition is considered winning if the sum of the weights of its members exceeds a certain threshold or quota.\n\nA weighted majority game can be given an *explicit representation* denoted by $$[q;w_1,...,w_n]$$\n#### Example\n![[Pasted image 20230114222245.png]]\n![[Pasted image 20230114223051.png]]\n\n# Outcomes\n\u003e[!Definition]\n\u003eGiven a coalitional game $(N,v)$, a *coalition structure* over $N$ is a partition of $N$, i.e. a collection of non-empty subsets $CS=\\{S_1,...,S_k\\}$ such that\n\u003e- $\\cup_{j=1}^k S_j=N$, and\n\u003e- $S_i \\cap S_j = \\emptyset$ for any $i,j\\in \\{1,...,k\\}$ such that $i\\neq j$\n\nWe denote the space of coalition structures over $N$ by $CS_N$\n\n![[Pasted image 20230114223554.png]]\n\n\u003e[!Definition]\n\u003eGiven a coalition game $(N,v)$, a vector $x=(x_1,...,x_n)\\in\\mathbb{R}^n$ such that $$x_i \\geq 0$$\n\u003eFor all $i\\in N$ is called a *payoff vector*\n\n\u003e[!Definition]\n\u003eAn *outcome* of a coalitional game $(N,v)$ is a pair $(CS,x)$, where $CS$ is a coalition structure over $N$ and $x$ is a payoff vector\n\nGiven a payoff vector $x$, we write $$x(S)=\\sum\\limits_{i\\in S}x_i$$ to denote the total payoff of a coalition $s\\subseteq N$\n\n\u003e[!Defintion]\n\u003eGiven a coalitional game $(N,v)$ and a coalition structure $CS=\\{S_1,...,S_k\\}$, a payoff vector $x$ is called efficietn if $$x(S_j)=v(S_j)$$ for every $j\\in \\{1,...,k\\}$\n\nWhen players divide into coalitions, we can assume they divide its worth among themselves\nThey cannot assign to themselves more than their worth\nIt is unreasonable to assume they will assign less than the total, wasting part of their worth\nA payoff vector is efficient for a coalition structure if every coalition gets exactly its worth\n\n\u003e[!Definition]\n\u003eGiven a coalitional game $(N,v)$, a payoff vector $x$ is called *individually rational* if $$x_i\\geq v(\\{i\\})$$ for all $i\\in N$\n\nEach player $i$ can guarantee themselves $v(\\{x_i\\})$\nIt is reasonable to assume that a player will agree to be part of a coalition if they can at least get as much as they would get by staying alone\n\n\u003e[!Defintion]\n\u003eLet $(N,v)$ be a coalitional game and $CS$ a coalition structure. A vector $x$ is called an *imputation* if it is efficient for $CS$ and is individually rational\n\nIt is reasonable to assume that players will look for an outcome where each coalition gets its worth and where they don't commit to join forces with others while they'd be better off by themsevles\nThen the only outcomes we will consider are those where the vector is an imputation\nNot all such outcomes are ideal or desirable though\nWe evaluation outcomes following different criteria\n- *Stability* - What are the incentive for a player to stay on the coalition structure\n- *Fairness* - How well each agent's payoff relfects their contribution\n\n# The Core\nConsider a coalitional game $(N,v)$ and an outcome $(CS,x)$ where $x$ is an imputation\nIf $x(S)\u003cv(S)$ for some coalition $S$, the agents in $S$ could do better by abandoning the coalition structure $CS$ and forming a coalition of their own\n![[Pasted image 20230115183207.png]]\nThis outcome is unstable because some players will have an incentive to break the coalition structure\n\n\u003e[!Definition]\n\u003eThe *core* of a coalitional game $(N,v)$, denoted by $\\text{core}(N,v)$, is the collection of all outcomes $(CS,x)$ where $x$ is an imputation such that $$x(S)\\geq v(S)$$ for every $s\\subseteq N$\n\n## Core of Superadditive Games\nFor superadditive games, the core contains outcomes based on the grand coalition and is the set of all vectors $x$ that satisfy:\n- $x_i\u003e0$ for all $i\\in N$\n- $x(N)=v(N)$\n- $x(S)\\geq v(S)$ for all $S\\subseteq N$\n\n#### Example\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020230115183811.png)\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020230115183821.png)\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020230115183833.png)\n\n## Games with an Empty Core\nConsider the following three-player majority game $(N,v)$ where $$N=\\{1,2,3\\}$$ and $$v(S)\\begin{cases}1 \u0026 |S|\\geq 2\\\\ 0 \u0026 |S|\u003c 2\\\\\\end{cases}$$ for all $S\\subseteq N$\n\nA coalition $S$ is winning if it includes at least two players\nThis is a superadditive game, so we assume the outcome is based on the grand coalition\n\nWe show the game has an empty core\nFor any outcome to be in the core it must be the case that $$\\begin{vmatrix}x_1+x_2\\geq x_1 \u0026 x_1 + x_3 \\geq 1 \u0026 x_2 + x_3 \\geq 1 \\\\ \\end{vmatrix}$$\nThis means that $$x_1 + x_2 + x_3 \\geq \\frac{3}{2}$$ contradicting the efficiency requirement $$x_1 + x_2 + x_3 = 1$$\nSo the core is empty\n\n# The Shapley Value\nThe Shapley value is a solution concept that tries to capture the notion of fairness\nIt is usually formulated with respect to the grand coalition and it assigns to every coalition game an imputation\nBased on the inutation that the payment that each agent recieves should be proptional to their contribution\n\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020230115185756.png)\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020230115185812.png)\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020230115185843.png)\n\nThe *marginal contribution* of an agent $i$ with respect to a permutation $\\pi$ in a coalitional game $(N,v)$ is denoted by $\\Delta_\\pi^{(N,v)}(i)$ and given by $$\\Delta_\\pi^{(N,v)}(i)=v(S_\\pi (i)\\cup \\{i\\})-v(S_\\pi (i))$$\nThis quantity measures by how much $i$ increases the value of the coalition consiting of its predecessors when $i$ joins the coalition\nWe define the Shapley value of a player $i$ as the average marginal contribution, where the average is taken over all permutation of $N$\n\n\u003e[!Defintion]\n\u003eGiven a coalitional game $(N,v)$ with $|N|=n$, the Shapley value fo a player $i\\in N$ denoted by $Sh_i(N,v)$ is given by $$Sh_i(N,v)=\\frac{1}{n!}\\sum\\limits_{\\pi\\in \\Pi_N}\\Delta_\\pi^{(N,v)}(i)$$\n\n#### Example\n![[Pasted image 20230115190520.png]]\n\n## Properties of the Shapley Value\nThe Shapley value is efficient\n- i.e. it distributes the value of the grand coalition among all agents\n\n\u003e[!Proposition]\n\u003eFor any coalitional game $(N,v)$ $$\\sum\\limits_{i=1}^n Sh_i(N,v)=v(N)$$\n\nA player $i$ is called a *dummy player* if for any coalition $S\\subseteq N$, $v(S)=v(S\\cup \\{i\\})$\nThe Shapely value does not allocate any payoff to dummy players\n- i.e. those players who do not contribute to any coalition\n\n\u003e[!Proposition]\n\u003eFor any coalitional game $(N,v)$, if a player $i$ is a dummy player then $$Sh_i(N,v)=0$$\n\nTwo players $i$, $j$ are symmetric if they contribute equally to each coalition\n- i.e. for all $S\\subseteq N$, $v(S\\cup \\{i\\})=v(S\\cup \\{j\\})$\n\u003e[!Proposition]\n\u003eFor any coalitional game $(N,v)$, if $i, j\\in N$ are symmetric then $$Sh_i(N,v)=Sh_j(N,v)$$\n\nConsider players $N$ involved in coalitional games $(N,v)$ and $(N,v')$\nThe sum of $(N,v)$ and $(N,v')$ is the game $(N,v+v')$\n\u003e[!Proposition]\n\u003eGiven two coalitional games $(N,v)$ and $(N,v')$ and their sum $(N,v+v')$, we have $$Sh_i(N,v+v')=Sh_i(N,v)+Sh_i(N,v')$$ for all players $i\\in N$\n\nWe have seen that the Shapley value has the following properties\n- Efficiency\n- Dummy player\n- Symmetry\n- Additivity\nThese properties can be used to simplify the computation of the Shapley value\n![[Pasted image 20230115201651.png]]\n\n# The Banzhaf Index\nAnother solution concept motivated by fairness\nMeasures the players' expected marginal contributions\nInstead of averaging over all permutations of players, it averages over all coalitions in the game\n\n\u003e[!Defintion]\n\u003eGiven a coalitional game $(N,v)$ with $|N|=n$, the *Banzhaf index* of a player $i\\in N$ denoted by $Ba_i(N,v)$ is given by $$Ba_i(N,v)=\\frac{1}{2^{n-1}}\\sum\\limits_{S\\subseteq N \\setminus \\{i\\}}(v(S\\cup\\{i\\})-v(S))$$\n\nThe Banzhaf index satisfies the same properties as the Shapley value, except efficiency\n\n# Power of a Player\nThe Banzhaf index and Shapley value measure the power of a player\n- i.e. the probability that the player can influence the outcome of the game\n\nA player is said to be *pivotal* for a coalition $S\\subseteq N$ in a game $(N,v)$, if $v(S)=1$ and $v(S\\setminus \\{i\\})=0$\nA player is *pivotal* for a permutation $\\pi:N\\rightarrow N$ if it is pivotal for the coalition $S_\\pi (i)\\cup\\{i\\}$ consisting of the player and the predecessor\n\n![[Pasted image 20230115202847.png]]","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-2/Agent-Based-Negotiation":{"title":"Agent Based Negotiation","content":"\n# **Conflict of Interest**\nConflict arises when agents have {different preferences or aims}\nIn [[Introduction to Intelligent Agents#Multi-Agent System MAS|MAS]] conflicts arise when agents are {c1|self-interested} and the agents represent {c1|different stakeholders}\n## Conflict Resolution\nConflict resolution is possible when there is {a mutual benefit to reach an agreement}\n#### approaches for conflict resolution\n- Auctions\n- Voting\n- Negotiation\n\n### Auctions #flashcard \nPrimarily used to allocate scarce resources or tasks\n\ne.g.\n- Items to buyers\n- Advertising space\n- Cloud computing\n- Stocks and shares\n\n#### Characterised by #flashcard \n- Clearly defined protocol\n- Typically requires a trusted third party e.g. auctioneer\n- Often involves a continuous resource such as money\n- Exploits competition between agents - works better with more agents\n\n### Voting #flashcard \nUsed for group based decisions (**social chocice**)\n\n#### characterised by #flashcard \n- A single decision from a (typically finite) number of options\n- Each agent can have different preferences for each option - given by a preference order (ordinal utility function)\n- Clearly defined protocol\n\n### Negotiation #flashcard \nGoverned by a protocol which defines the [[#rules of encounter flashcard|Rules of Encounter]] between the agents\n\n{More flexible} compared to other approaches\n- Prtocol typically involves {exchanging offers, but can also include other information such as arguments (reasons why)}\n- Allows for {less structured} prtocols\n- Often [[#Bilateral]], but some protocols support [[#Multi-Part Negotiation]]\n\nEnables more complex types of agreements (multi-issue negotiation)\nOften decentralised (can involve mediator - agent mediated negotiation)\n\n##### Bilateral\nBetween two agents\n##### Multi-Party Negotiation\nBetween more than two agents\n\n#### rules of encounter #flashcard \n- Type of communication allowed\n- Type of proposals that are allowed\n- Who can make what proposal at what time\n\n# **Negotiation**\n\n## Characterising Agent Negotiations\n\n### Negotiation Environment #flashcard \nSet of possible outcomes/agreements\n\n#### Single-issue Negotiation (Distributive Bargaining) #flashcard \n- e.g. price\n- Win-lose\n- Competitive setting\n\n#### Multi-issue Negotiation (Integrative Bargaining) #flashcard \n- Includes more issues\n- Allows for mutual benefit and cooperation\n\n### Agent Preferences #flashcard \nThe preferences over all possible agreements (and disagreements), typically specified using utility functions\n\n### Agent Negotiation Strategies #flashcard \n- Specifies the behaviour of the agents\n- Actions employed at each possible decision point, given the information available to the agent\n\n## Negotiation Protocols\n\n- Ultimatum Game\n- Alternating Offers\n- Monotonic Concession Protocol\n- Divide and Choose\n\n### Single-Issue Negotiation\n![|600](notes/Intelligent%20Agents/Images/Pasted%20image%2020221010165240.png)\nOverlap between sellers minimum price and buyers maximum price is the agreement space\n\n### Bilateral Negotiation: The Ultimatum Game #flashcard \n- Agent 1 suggests a division\n- Agent 2 can only choose to accept or reject the proposed division\n- If agent 2 rejects, no-one receives anything\n- 'Take it or leave it'\n\n#### Advantages/Disadvantages #flashcard \n- Agent 1 has a clear advantage - the **first-mover advantage**\n- Assumes the agreement space (the size of the pie) is known - the seller's reserve and buyer's willingness to pay are shared knowledge\n- No ability to explore the negotiation space\n\n### Alternating Offers Protocol #flashcard \n- Negotiation consists of a number of rounds\n- Agents exchange offers in an alternating fashion\n- First player starts with proposing an offer\n- Second player can either accept or reject and counter offer, or reject and break off negotiation\n- Negotiation ends after set number of rounds (deadline) or if either players breaks off negotiations\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221010173339.png)\n\n### Monotonic Concession Protocol #flashcard \n- Negotiations proceed in rounds\n- In each round, agents simultaneously propose offers (without seeing the other offer)\n- If both others 'match' then one of them is chosen\n- Otherwise the negotiation proceeds to the next round\n- In the next round at least one of the agents need to concede\n- If neither of the agents concede, the negotiation ends without a deal\n\n### Divide and Choose #flashcard \n- Used when a continuous resource needs to be divided between multiple agents\n- Agent 1 divides the pie into 2 portions\n- Agent 2 chooses one of the portions\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221014124749.png)\n\n#### Properties #flashcard \n- Only works for resource allocation problems\n- Also works for non-homogenous resources (when parts of the pie are more attractive)\n\n## Desirable Properties of a Negotiation #flashcard \n- A deal should be better than no deal for all agents (individual rationality)\n- There should be no pie left (Pareto efficiency)\n- The agreement should be fair\n\n## Agent Preferences\nAn agents preferences over outcomes are modelled using a utility function $U(o)$, where $o\\in O$ is the offer and $O$ is the set of possible offers\n\n### There are Two types of Utility Functions\n\n#### Ordinal Preferences #flashcard \nA preference order over outcomes is specified but there is no numerical utility\nThe agents specify what they prefer but now by how much\n- e.g. $U(o_1) \u003e U(o_2)$ means that $o_1$ is preferred over $o_2$\n\n#### Cardinal preferences\nEach outcome has a numerical utility value\n- e.g. $U(o_1) = 0.78, U(o_2) = 0.5$\n\nWe can always infer ordinal preferences from cardinal ones\n\n## Price Negotiation: Utility Space\nThe utility space shows the utility of the two agents on respective axis for all possible outcomes\n![[Pasted image 20221014132155.png]]\n\n## Time Pressure\n\n### Deadlines #flashcard \n- Imposed by protocol\n- Or determined by individual constraints (deadlines of agents can differ)\n\n### Break-Off Probability #flashcard \n- Imposed by protocol\n- Or agents can decide to break off negotiations themselves\n\n### Bargaining Costs #flashcard \n- Fixed bargaining costs per round\n- Discount factors\n\n## Modelling Bargaining Costs\n### Fixed Costs\nLet $c_i$ denote the costs for agent $i$, and $t$ be the time or bargaining round, then the utility at time $t$ is given by: $$U_i^t = U_i - t \\cdot c_i$$\n### Discount Factors\nLet $\\delta_i \u003c 1$ be the discount factor of agent $i$, then the utility is given by: $$U_i^t = U_i \\cdot \\delta_i^t$$\n## Multi-Issue Negotiation\nAn offer/outcome $o$ is a vector consisting of a value $o_j$ for each issue $j$\nOften a weighted additive utility function is assumed: $$U_i(o) = \\sum_j w_{i,j} \\cdot U_{i,j}(o_j)$$\nWhere $U_{i,j}(o_j)$ is the utility for issue $j$\n\n## Pareto-Efficient Agreements\nAn agreement is said to be Pareto efficient (Pareto optimal) if no further improvement is possible in the utility of one agent, without reducing the utility of the other agents\n\n**Pareto Efficient Frontier** - Set of all Pareto efficient agreements\n\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020221014135629.png)\n\n## Desriable Properties\n- Agreements should be individually rational - $U(o)\u003eU(disagreement)$\n- Agreements should be Pareto efficient\n- Agreements should be fair\n\n## Fairness\n### Utilitarian Social Welfare\nAka social welfare\nMaximise the sum of utilities $$\\max_{o\\in O}U_1(o)+U_2(o)$$\n### Egalitarian Social Welfare\nMaximise the minimum utility $$\\max_{o\\in O}\\min_{i\\in \\{1,2\\}}U_i(o)$$\n### Nash Bargaining Solution\nMaximise the product of the utility of the agents (minus the disagreement pay off) $$\\max_{o\\in O}(U_1(o)-U_1(disagreement))\\cdot (U_2(o)-U_2(disagreement))$$\nThe Nash Bargaining Solution is uniquely characterised by the following axioms or properties\n- **Individual rationality** - The solution always satisfies $U_1 \\geq U_1(dis)$ and $U_2 \\geq U_2(dis)$\n- **Pareto efficiency**\n- **Invariance to equivalent utility representations** - The solution is insensitive to affine transformations\n- **Independence of irrelevant alternative (IIA)** - Remove all the non-optimal agreements, and the optimal agreement remains the same\n- **Symmetry (SYM)** - If the agents have the same preferences, then the solution gives them the same utilities\n\n### Envy-freeness\nNo agent prefers the resources allocated to other agents\nAn agent is envious of another agent if it would prefer the allocation received by that agent\nA solution is envy free if no agent prefers the allocation of another agent (no agent is envious)\n\nAgents do not care about the utility of the other agent, only the share/allocation received by other agents\n\n\n# Negotiation Strategies\n#### Game Theoretic\n- Assumes rules of the game, preferences and beliefes of all players are common knowledge\n- Assumes full rationality on the part of all players\n- Preferences encoded in a (limited) set of player types\n- Closed systems, predetermined interaction, small sized games\n- Nash equilibrium\n#### Heuristic Perspective\n- No common knowledge or perfect rationality assumptions needed\n- Agent behaviour is modeled directly\n- Suitable for open, dynamic environments\n- Space of possibilities is very large\n## Heuristics\nHeuristics used when there is unknowns about the opponent\n### Concession Strategy\nWhat should be the target utility I think I should achieve at a particular point in the negotiation?\nWell-known strategies include:\n#### Time-dependent tactics \nOnly depend on time/current round of the negotiation and not on the opponent's action\nLet $U_{max}$ and $U_{min}$ denote the agent's maximum and minimum acceptable utility\nThe target utility offered at time $t$ will be $$U_{target}(t)=U_{min}+(1-F(t))(U_{max}-U_{min})$$\nWhere $F(t)$ is a function between 0 and 1 and gives the fraction of the distance between best and worst offer, using a function such as $$F(t)=(\\frac{\\min(t,T_{max})}{T_{\\max}})^\\frac{1}{\\beta}$$\nWhere $T_{\\max}$ is the deadline and $\\beta$ is a constant\n$F(0)=0$ and $F(T_{\\max})=1$\n\n##### Hard-Headed ($\\beta \\rightarrow 0$)\n- No concessions\n- Sticks to the initial offer throughout\n##### Linear time-dependent concession ($\\beta = 1$)\n- Concession is linear in the time remaining until the deadline\n##### Boulware ($\\beta \u003c 1$)\n- Concedes very slowly, initial offer is maintained until just before the deadline\n##### Conceder ($\\beta \u003e 1$)\n- Concedes to the reservation value very quickly\n\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221014153655.png)\n#### Tit-for-tat\nThe agent detects the concession the opponent makes during the previous negotiation round, in terms of increase in its own utility function\nThe concession the agent makes in the next round is equal to (or less than) the concession made by the opponent in the previous round $$concession\\leq U_{own}(o_{opponent}^t)-U_{own}(o_{opponent}^{t-1})$$\nAs long as the offer falls in the acceptable region\n### Muti-Issue Offer producing Strategy\nOnce a target utility is establised, what offer to produce at or around that target utility (to ensure Pareto efficiency)\n## Optimal Concession Strategy\nIf everything is known, then it is easy to compute a **best response**\n- i.e. the optimal concession given the utility and strategy of the opponent\nIf there is a lot of uncertainty about the opponents utility function and strategy, then machine learning techniques can be used to learn the opponent model\n- If the opponent does the same then game-theoretic approaches can be useful\n## Offer-producing Strategy\nIn multi-issue negotiation, you need to generate a value for each issue\nIt is a good idea to ensure that the offer is always Pareto efficient\nIf the utility functions are known, it is possible to calculate the Pareto-efficient offer at a certain target utility level\n![[Pasted image 20221017132254.png]]\n## Unknown Opponent Utility\nTypically the opponent utility is not known\n- This is **private information**\nIt is possible to guess the opponent utiity function based on the offers received so far and the conessions observed\n- e.g. The opponent is likely to concede on their least preferred issues first, this can be used to guess the weight of that issue\n## Preference Uncertainty and Elicitation\nIn many cases even the agents own utility function is not fully known by itself\nThe utility function is obtained through a process called **preference elicitation**\n- Has associated 'cognitive costs'\n- Trade-off between minimizing cognitive cost and maximising utility\n\n# Tags\nFILE TAGS intelligentAgents","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-3/Strategic-Form-Games":{"title":"Strategic Form Games","content":"\n\u003e [!Definition]\n\u003e A strategic form game is a tuple $$\\langle N,S_1,...,S_n,u_1,...,u_n \\rangle$$\nWhere\n\u003e - $N=\\{1,...,n\\}$ is a finite set of players\n\u003e - $S_i$ is a finite set of strategies for each player $i$\n\u003e - $u_i=S_1\\times ...\\times S_n\\rightarrow \\mathbb{R}$ is a utility function for player $i$\n\nEach $(s_1,...,s_n) \\in S_1 \\times ... \\times S_n$ is called a strategy profile or strategy combination\nStrategy profiles are also denoted by $$(s_i,s_{-i})$$\nto highlight the strategy of player $i$\n$s_{-i}$ denotes the strategy combination with player $i$ $$s_{-i}=(s_1,...,s_{-i},s_{i+1},...,s_n)$$\nWe assume players are rational decision makers and have complete and common knowledge about each others strategies, utilities and their rationality\n\n# Strictly Dominated Strategies\nIn a situation where the same choice will yield the player 1 a better outcome regardless of the player 2's choice, we say that the other player 2's choice is strictly dominated by player 1's\n\n\u003e [!Definition]\n\u003e A strategy $s_i$ of player $i$ is strictly dominated if there exists another strategy $s_i'$ of player $i$ such that for each strategy vector $s_{-i}\\in S_{-i}$ of the other players $$u_i(s_i ,s_{-i})\u003cu_i(s_i',s_{-i})$$\n- In this case we say $s_i$ is strictly dominated by $s_i'$\n- We have assumed all players are rational and know about each others rationality\n- Therefore we can assume that rational players will never play strictly dominated strategies, which can be eliminated from the game\n\nNot all games have strictly dominated strategies, so we cannot always reach an outcome by elimination\n\nWhen eliminating strictly dominated strategies, the result is always independent of the order of elimination\n\n## Prisoner's Dilemna Example\n![[Pasted image 20221020163339.png]]\n# Weakly Dominated Strategies\n\u003e [!Definition]\nA strategy $s_i$ of player $i$ is weakly dominated if there exists another strategy $s_i'$ of player $i$ satisfying  the following two conditions\n\u003e - For every strategy vector $s_{-i}\\in S_{-i}$ of the other players $$u_i(s_i,S_{-i})\\leq u_i(s_i',s_{-i})$$\n\u003e - There exists a strategy vector $t_{-i}\\in S_{-i}$ of the other players such that $$u_i(s_i,t_{-i})\u003c u_i(s_i',t_{-i})$$\n\nIn this case we say $s_i$ is weakly dominated by $s_i'$\nWe can then assume rational players will never play weakly dominated strategies, which can then be eliminated from the game\n\nWeakly dominated strategies cannot always be performed\nUnlike strictly dominated strategies, the order of elimination does matter and we can get different results\n#### Example 1\n![|300](notes/Intelligent%20Agents/Images/weak1.gif)\n#### example 2\n![|300](notes/Intelligent%20Agents/Images/weak2.gif)\n#### example 3\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221116135136.png)\n# Pure Nash Equilibria\nWe cannot perform elimination of dominated strategies in all games\n\nA player's best response to a strategy profile is a choice that gives the player the highest utility\nA best response does not have to be unique\n\n\u003e [!Definition]\nLet $S_{-i}$ be a strategy vector for all the players not including $i$\nPlayer $i$'s strategy $s_i$ is called a best response to $S_{-i}$ if $$u_i(s_i,s_{-i})=\\max\\limits_{s_i'\\in S_i}u_i(s_i',s_{-i})$$\n\n#### example\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221025190126.png)\nThe strategy combination $(C,F)$ is such that the strategies are the best response to each other\nIf players select this combination, none of them will benefit from changing their choices, because they have chosen a best response\n$(C,F)$ is an example of **Nash Equilibrium**\n\n## Nash Equilibria\n\u003e [!Definition]\n\u003e A strategy combination $(s_1,...,s_n)$ is a **Nash Equilibrium** if $s_i$ is a best response to $s_{-i}$ for every player $i\\in N$\n\nDetermining the existence of a nash equilibrium for a strategic form game is in logarithmic space\n\n## Computing Nash Equilibria\nFor each player, compute the strategy combination where their strategy is a best response\nTake the intersection of the sets of all players\n#### example\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221025193701.png)\nPlayer 1's combinations:\n$\\{(B,D),(A,E),(C,F)\\}$\nPlayer 2's combinations:\n$\\{(A,D),(B,E),(C,F)\\}$\nThe intersection $(C,F)$ is a nash equilibrium\n\nAlternatively, for each strategy combination, check if any player can increase their utility by deviating\nIf they can't, it is a nash equilibrium\n\n# Coordination Games\nNash equilibria may not be unique\nCoordination games are exmaples of games with multiple Nash Equilibria\nEquilibria arise when players coordinate on the same strategy\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221026142837.png)\n\n# Matching Pennies\nNot all games have Nash Equilibria\nMatching pennies is an example\n\nTwo players toss a penny simultaneously\nIf the outcomes match, player 1 keeps both pennies\nIf the outcomes dont match, player 2 keeps both coins\n\n# Iterated Elimination and Nash Equilibria\nLet $(s_1,...,s_n)$ be a strategy profile obtained from iterated elimination of strictly dominated strategies\nThen $(s_1,...,s_n)$ is a nash equilibrium\n$(s_1,...,s_n)$ is the unique equilibrium of the game\nIterated elimination of strictly dominated strategies does not eliminate equilibria\n\nGiven a game $G$, let $G^*$ be the game obtained by iterated elimination of weakly dominated strategies\nThe set of equilibria of $G^*$ is a subset of equilibria of $G$\nMeaning the iterated elimination of weakly dominated strategies can result in the elimination of some of the equilibria of the original game\n ","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-3/Utility":{"title":"Utility","content":"\n# Basic Setting\nA game is a mathematical model of interactive decision making\nDifferent agents interact with the goal to achieve the best possible outcome\n\nFor an agent, making a decision means selecting one among multiple choices\n$S = \\{s_1,...,s_m\\}$s denotes the choices available to an agent\nMaking a choice leads to an outcome\n$\\Omega = \\{\\omega_1,...,\\omega_t\\}$ denotes a set of outcomes\n\nThe outcome function $g:S\\rightarrow \\Omega$ maps each choice to an outcome\n$g$ specifies the consequence of making a certain choice\nWe assume that given a pair of outcomes $(\\omega,\\omega ')$, an agent can say which they prefer\n# Preferences\nA preference is a binary relation $\\succeq$ on $\\Omega \\times \\Omega$\nWe assume the relation is\n- Reflexive $$\\omega \\succeq \\omega \\text{ } \\forall \\text{ } \\omega \\in \\Omega$$\n- Total $$\\forall \\text{ } \\omega, \\omega '\\in \\Omega\\text{,either }\\omega \\succeq \\omega' \\text{ or }\\omega' \\succeq \\omega$$\n- Transitive $$\\forall\\text{ }\\omega,\\omega',\\omega''\\in\\Omega, \\text{if } \\omega\\succeq\\omega'\\text{ and }\\omega'\\succeq\\omega''\\text{, then }\\omega\\succeq\\omega'' $$\nGiven a pair of outcomes $\\omega,\\omega'$ $$\\omega\\succeq\\omega'$$\nMeans that an agent prefers $\\omega$ at least as much as $\\omega'$\nIf both $$\\omega\\succeq\\omega'\\text{ and }\\omega'\\succeq\\omega$$\nthen we are indifferent between the two - denoted by $$\\omega \\sim\\omega'$$\nIf both $$\\omega\\succeq\\omega'\\text{ but not }\\omega'\\succeq\\omega$$\nthen we strictly prefer $\\omega$ over $\\omega'$, and denote it by $$\\omega\\succ\\omega'$$\n# Utility\nA utility function is a mapping $$u:\\Omega\\rightarrow\\mathbb{R}$$\nA utility function $u$ over $\\Omega$ is said to represent a preference relation $\\succeq$, iff for all $\\omega,\\omega'\\in\\Omega$ $$\\omega\\succeq\\omega'\\text{ iff }u(\\omega)\\geq u( \\omega' )$$\nGiven a finite set $\\Omega$, for every preference relation $\\succeq$ on $\\Omega\\times\\Omega$ there exists a utility function $u:\\Omega\\rightarrow\\mathbb{R}$ that represents it\n\nUtility functions are a numerical representation of preferences\nAn agent chooses an outcome over another not because of the numerical value but because of their preference\nAn agent choosing the best outcome is maximising their utility, as loong as the representation is the correct one\nThe numerical values themselves are not important, the relative order is\nUtilities of different agents cannot generally be compared\n# Formal Model of Decision\nFormally representing decision-making as a tuple $$\\langle S,\\Omega ,g,\\succeq ,u\\rangle$$\nWhere\n- $S$ and $\\Omega$ are the set of choices and consequences\n- $g:S\\rightarrow\\Omega$ is an outcome function that specifies the consequence of each choice\n- $\\succeq\\subseteq\\Omega\\times\\Omega$ is the agent's preference relation\n- $u:\\Omega\\rightarrow\\mathbb{R}$ is the utility function representing $\\succeq$\n# Rational Decision-Maker\nA rational decision maker is one that makes the best possible choice\nThe agent makes the choice that maximises their utility $$s\\in \\text{argmax}_{s\\in S}u(g(s))$$\n# Decision under Uncertainty\nOften we don't know what outcome will result by making a choice\nFor ervery option $s\\in S$, there will be a range of possible outcomes with differing probabilities of occurring\n\nProbability distributions are used to represent the uncertainty of an outcome\nA probability distribution over a non-empty set of outcomes $\\Omega$ is a function $$\\mu:\\Omega\\rightarrow[0,1]$$\nsuch that $$\\sum\\limits_{saddsa}\\mu(\\omega)=1$$\n# Lotteries\nA lottery over a set of outcomes $\\Omega$ is a probability distribution over $\\Omega$\nA lottery is denoted by $L$\n![[Pasted image 20221019124845.png]]\nIf the probability distribution of a conequence is 1, and all others 0, this is called a **degenerate lottery**\n## Compound Lotteries\nA lottery of lotteries\nGiven a set $L=\\{L_1,...,L_n\\}$ of lotteries, a compound lottery is a probability distribution $\\mu$ over $L$ and is given by $$L*=[q_1(L_1),...,q_n(L_n)]$$\nwhere $q_i=\\mu(L_i)$\n# Expected Utility\nGiven a set of outcomes $\\Omega$ and a utility function $u:\\Omega\\rightarrow\\mathbb{R}$, the expected utility of a lottery $L$, with probability distribution $\\mu$, is given by $$EU(L)=\\sum\\limits_{\\omega\\in\\Omega}u(\\omega)\\mu(\\omega)$$\n$EU$ is the expected value of the function $u$ given the probability distribution $\\mu$\n$EU$ is the average utility we could expect from the lottery\n# Von Neumann Axioms\n## Axiom (Continuity)\nFor every lotteries $L_1\\succ L_2\\succ L_3$, there exist $\\alpha ,\\beta \\in [0,1]$ such that $$[\\alpha L_1,(1-\\alpha)L_3]\\succ L_2 \\succ [\\beta L_1,(1-\\beta)L_3]$$\n## Axiom (Independence)\nFor all lotteries $L_1,L_2,L_3$ and $\\alpha\\in [0,1]$ $$L_1\\succeq L_2\\text{ iff }[\\alpha L_1,(1-\\alpha)L_3]\\succeq[\\alpha L_2, (1-\\alpha)L_3]$$\n## Morgenstern Theorem\nLet $\\hat{L}$ be the set of compound lotteries over a finite set $\\Omega$ and let $\\succeq$ be a preference relation over $\\hat{L}$. Then the following are equivalent\n- $\\succeq$ satisfies continuity and independence\n- There exists a utility function over $\\Omega$ such that for all $L_1,L_2\\in \\hat{L}$ $$L_1\\succeq L_2\\text{ iff }EU(L_1)\\geq EU(L_2)$$","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-4/Strategic-Form-Games-II":{"title":"Strategic Form Games II","content":"\n# Mixed Nash Equilibria\nTo guarantee the existence of equilibria, we extend the concept of a strategic form game with the notion of mixed strategy\n\n\u003e [!Definition]\n\u003e In a strategic form game, a mixed strategy $\\sigma_i$ for player $i$ is a probability distribution over the set of strategies $S_i$, i.e. a function $\\sigma_i : S_i\\rightarrow [0,1]$ such that $$\\sum\\limits_{s_i\\in S_i}\\sigma_i(s_i)=1$$\n\nTo distinguish from mixed strategies, each strategy $s_i\\in S_i$, for all players $i$, a pure strategy\n\nGiven a strategic form game, for each player $i$, let $\\Sigma_i$ be the set of all mixed strategies over $S_i$, i.e. $$\\Sigma_i=\\{\\sigma_i | \\sigma_i : S_i \\rightarrow [0,1],\\sum\\limits_{s_i\\in S_i}\\sigma_i(s_i)=1\\}$$\nLet $\\Sigma = \\Sigma_1 \\times ... \\times \\Sigma_n$\nWe call every element $(\\sigma_1 ,..., \\sigma_n)\\in \\Sigma$ a mixed strategy or mixed strategy combination\n\nGiven a mixed strategy profile $(\\sigma_1,...,\\sigma_n)$, the expected utility of player $i$ is given by $$EU_i(\\sigma_1,...,\\sigma_n)=\\sum\\limits_{(s_1,...,s_n)\\in S_1\\times ... \\times S_n} \\bigg( \\bigg(\\prod\\limits_{j\\in N}\\sigma_j(s_j) \\bigg) u_i(s_1,...,s_n) \\bigg)$$\n\u003e[!Tip]\n\u003e The expected utility is the sum of the weighted utilities for each possible outcome\n\u003e Expected Utility of Player 1:\n\u003e Probability of Player 1's row $\\times$ Probability of Player 2's column $\\times$ Player 1's utility\n\u003e Do this for every box and sum it all together\n\n## Mixed Extension\n\u003e [!Definition]\n\u003e Let $$G=\\langle N,S_1,...,S_n,u_1,...,u_n\\rangle$$\nbe a strategic form game. The **mixed extension** of $G$ is the game $$\\Gamma = \\langle N,\\Sigma_1,..., \\Sigma_n, U_1,...,U_n\\rangle$$\nWhere\n\u003e - Each $\\Sigma_i$ is the set of mixed strategies of player $i$ over $S_i$\n\u003e - Each $U_i : \\Sigma \\rightarrow \\mathbb{R}$ is a payoff function that associates with each mixed strategy combination $(\\sigma_1,...,\\sigma_n)\\in \\Sigma$ its expected utility\n$$U_i(\\sigma_1,...,\\sigma_n)=EU_i(\\sigma_1,...,\\sigma_n)=\\sum\\limits_{(s_1,...,s_n)\\in S_1\\times ... \\times S_n} \\bigg( \\bigg(\\prod\\limits_{j\\in N}\\sigma_j(s_j) \\bigg) u_i(s_1,...,s_n) \\bigg)$$\n\n- A mixed extension is a \"new\" game built on top of a strategic-form game with only pure strategies\n- Each player now has a new set of strategies - i.e. all the mixed strategies defined over their original strategy set\n- Each player also has a new utility function, which, for each mixed strategy combination, outputs the expected utility determined by the players selecting those mixed strategies\n- This generalises the concept of a strategic-form game\n\t- Because pure strategies are special cases of mixed strategies - i.e. pure strategies correspond to those cases where a probability distribution assigns 1 to one pure strategy\n\n# Generalising Nash Equilibrium\nWe want to generalise the concept of a Nash Equilibrium to mixed strategies\nIn order to do so, we first generalise the concept of a best response\n\u003e [!Definition]\n\u003e Let $G$ be a strategic-form game and let $\\Gamma$ be its mixed exntension. Let $\\sigma_{-i}$ be a mixed strategy vector for all the players not including $i$. Player $i$'s' mixed strategy $\\sigma_i$ is called a **best response** to $\\sigma_{-i}$ if $$EU_i(\\sigma_i,\\sigma_{-i})=\\max\\limits_{\\sigma_i'\\in\\Sigma_i}EU_i(\\sigma_i',\\sigma_{-i})$$ \n\nWe can now generalise the notion of a nash equilibrium\n\u003e [!Definition]\n\u003e A mixed strategy combination $(\\sigma_1,...,\\sigma_n)$ is a **mixed strategy Nash equilibrium** if $\\sigma_i$ is a best response to $\\sigma_{-i}$ for every player $i\\in N$\n\nSince pure strategies are a special form of mixed strategies, a pure Nash equilibrium is a special form of mixed Nash equilibrium\n# Computing Mixed Nash Equilibria\nPure Nash equilibria do not always exist\nThis is not the case for mixed Nash equilibria\n\u003e [!Theorem (Nash, 1951)]\n\u003e Every strategic-form game has mixed extension that has mixed strategy Nash equilibria\n\n\u003e [!Theorem (Daskalakis, Goldberg, Papadimitriou, 2009)]\n\u003e Finding mixed Nash equilibria in a strategic-form game is PPAD-cmplete\n## 2 x 2 Games\n![[Pasted image 20221102173113.png]]\nWe represent a mixed strategy for player 1 as $x\\in [0,1]$\n- Play $T$ with probability $x$\n- Play $B$ with probability $1-x$\nWe represent a mixed strategy for player 2 as $y\\in [0,1]$\n- Play $L$ with probability $y$\n- Play $R$ with probability $1-y$\n### Best Reponse Method\nCompute the best response functions for mixed strategies, and draw a graphical representation of these functions\nThe best response function $br_1(y)$ for player 1 is $$br_1(y)=argmax_{x\\in[0,1]}EU_1(x,y)$$\nThe best response function $br_2(x)$ for player 2 is $$argmax_{y\\in[0,1]}EU_2(x,y)$$\nThe intersection between the best response functions will give the mixed Nash equilibria of the game\n#### Example\n![[Pasted image 20221102173528.png]]\nThe game has 2 pure strategy Nash equilibria $(H,H)$ and $(T,T)$\n![[Pasted image 20221102173637.png]]\n![[Pasted image 20221102173653.png]]\n![[Pasted image 20221102173802.png]]\nThe intersection of the graphs of $br_1(y)$ and $br_2(x)$ gives us the set of all equilibria of the game\nThe pure strategy equilibria are included\n![[Pasted image 20221102174028.png]]\n### The Indifference Principle\n\u003e [!Theorem (indifference principle)]\n\u003e Let $(\\sigma_1,...,\\sigma_n)$ be a mixed Nash equilibrium of a strategic-form game, and let $s_i$ and $s_i'$ be two pure strategies of player $i$\n\u003e If $$\\sigma_i(s_i)\u003e0\\text{ and }\\sigma_i(s_i')\u003e0,$$\n\u003e Then $$EU_i(s_i,\\sigma_{-i})=EU_i(s_i',\\sigma_{-i})$$\n\nThe indifference principle says that if in a mixed Nash equilibrium a player assigns positive probability to two different pure strategies, then the expected payoff of playing those strategies is the same\n\u003e [!Definition]\n\u003e We call a mixed strategy $\\sigma_i$ of player $i$ a **completely mixed strategy** (or **fully mixed**) if $$\\sigma_i(s_i)\u003e0$$\n\u003e for every pure strategy $s_i\\in S_i$\n\u003e We call a mixed Nash equilibrium $\\sigma_1,...,\\sigma_n$ a **completely mixed Nash equilibrium** (or **fully mixed**) if for every player $i$, the strategy $\\sigma_i$ is completely mixed\n\nThe indifference principle tells us that if a completely mixed Nash equilibrium exists, then for each player the expected utility of playing any pure strategies (under the given equilibrium) is the same\nEach player is indifferent to playing a pure strategy over another\n\n\u003e[!Tip]\n\u003eYou can use the indifference principle to show a set of strategies does not form a mixed nash equilibirum\n\u003eShow that the expected utility of the player's strategies are not equal, since they are not equal - they cannot form a mixed nash equilibrium\n#### Example\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107122216.png)\n### The Indifference Principle (2x2)\n\u003e [!Theorem]\n\u003e A pair of probability distributions $(x,y)\\in (0,1)^2$ is a mixed Nash Equilibrium in the generic $2\\times 2$ game if and only if $$EU_1(T,y)=EU_1(B,y)\\text{ and }EU_2(L,x)=EU_2(R,x)$$\n\nThis provides a method finding completely mixed Nash equilibria\n1. Check the equality $$EU_1(T,y)=EU_1(B,y)$$ and find solutions for $y$\n2. Check the equality $$EU_2(L,x)=EU_2(R,x)$$ and find solutions for $x$\nAny pair of solutions $(x,y)\\in (0,1)^2$ is a mixed Nash equilibrium\nWe are dealing with linear inequalities, so we can solve them in polynomial time\n#### example\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107122957.png)\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107123131.png)\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107123158.png)\n![|500](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107123408.png)","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-5/Extensive-Form-Games":{"title":"Extensive-Form Games","content":"\nIn strategic form games, players make a move simultaneously\nIn extensive form games players make choices sequentially\nExtensive form games model different kinds of strategic sequential decision making\n- Games with perfect information - Players know exactly how the current state of the game was reached\n- Games with imperfect information - Players may be uncertain about previous moves, may not know how the current state was reached\n- Games of perfect recall - No player forgets the action they previously chose\n# Ultimatum Game\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107154631.png)\nTwo agents want to share a cake\n1. First player suggests a split\n2. $P2$ can either accept the proposed split or reject it\nGame is represented as a tree\nA choice is made by one of the players are each non-terminal node\nEvery edge represents a possible action\nLeaves represent the final outcome\n# Extensive Form Games\n\u003e [!Definition]\n\u003e A finite extensive-form game with perfect information is a tuple $$G=(N,A,H,Z,\\alpha,\\pi,\\sigma,u)$$ where\n\u003e - $N$ is a finite set of players\n\u003e - $A$ is a single set of actions\n\u003e - $H$ is a set of nonterminal choice nodes\n\u003e - $Z$ is a set of terminal nodes, disjoint from $H$\n\u003e - $\\alpha : H \\rightarrow 2^A$ is the action function, which assigns to each choice node a set of possible actions\n\u003e - $\\pi : H \\rightarrow N$ is the player function, which assigns to each nonterminal node a player $i \\in N$ who chooses an action at that node\n\u003e - $\\sigma : H \\times A \\rightarrow H \\cup Z$ is the successor function, which maps a choice node and an action to a new choice node or terminal node such that for all $h_1,h_2\\in H$ and $a_1,a_2\\in A$, if $\\sigma (h_1,a_1)=\\sigma (h_2,a_2)$, then $h_1=h_2$ and $a_1=a_2$\n\u003e - $u = (u_1,...,u_n)$, where $u_i : Z \\rightarrow \\mathbb{R}$ is a real valued utility function for player $i$ on the terminal nodes $Z$\n\n#### example\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107164833.png)\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107165127.png)\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107165331.png)\n## Strategies\nA strategy for player $i$ in an extensive-form game is a complete specification of the action taken at every note belonging to the player\nAn agents strategy requires a decision at each choice node, regardless of whether or not it is possible to reach that node given the other choice nodes\n\u003e [!Definition]\n\u003e Let $G$ be a perfect-information extensive-form game. The pure strategies of player $i$ consist of the cartesian product $$\\prod\\limits_{h\\in H, \\pi (h)=i}\\alpha(h)$$\n\n#### example\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107170609.png)\n# Strategic Form Transformation\nWe can assign a utility value for each player\nWe then convert the extensive-form game into a strategic-form game\n\nIt is always possible to transform an extensive-form game into a strategic form game\nThe transformation negates the temporal nature of the game\nRedundant elements are also added\n\nIt is not always possible to transform a strategic form game into an extensive form game\n\n#### example\n\n![|450](notes/Intelligent%20Agents/Images/exten%20to%20strat.gif)\n\n\u003e[!Tip]\n\u003eYou compute the set of pure strategies by taking the cross product of the Players actions\n\u003eTo convert to a strategic form game, you write out the grid and then work out what you would end up with if you were to follow the corresponding actions at that tile\n\n\n# Equilibria\nOnce an extensive form game is transformed to a strategic form game, we can compute the pure strategy Nash equilibria\nThe existence of pure Nash equilibria is always guaranteed in extensive form games\n\u003e [!Theorem (Zermelo)]\n\u003e Given any finite perfect-information extensive form game $G$, let $G*$ be its strategic form. Then $G*$ has a pure strategy Nash equilibrium\n\n\u003e[!Tip]\n\u003ePure strategy Nash equilibria are found the same way in a converted strategic form as you would find them in a normal one\n\n## Subgames\nSome equilibria are unsatisfying (the choices do not match what we would expect rational players to make)\nSubgame perfect equilibrium captures why equilibria can be unsatisfying\n\u003e [!Definition (Subgame)]\n\u003e Given a perfect information extensive form game $G$, the subgame of $G$ rooted a node $h$ is the restriction of $G$ to the descendants of $h$\n\u003e The set of subgames of $G$ consist of all subgames rooted at some node in $G$\n\nTo find the subgames of an extensive form game, we look at each nonterminal node of the game and take the tree originating from the node\n![|450](notes/Intelligent%20Agents/Images/subtrees.gif)\n### Subgame Perfect Equilibria\n\u003e[!Definition]\n\u003eA strategy profile $s$ in an extensive form game $G$ is a **subgame perfect equilibrium** if, for each subgame $G'$ of $G$, the restriction of $s$ to $G'$ is a pure strategy Nash equilibrium\n\n\u003e[!Theorem]\n\u003eEvery extensive form game has a subgame perfect equilibrium\n\n\u003e[!Theorem]\n\u003eFor every extensive form game the set of subgame perfect equilibria is a subset of the set of pure strategy Nash equilibria\n\n#### example\n![[Pasted image 20221107181717.png]]\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107181821.png)\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107181848.png)\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107181917.png)\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020221107182003.png)\n# Backward Induction\nBackwards induction algorithm to reach the concept of a subgame perfect equilibrium\n\n1. Take the tree representing an extensive form game with $n$ players\n2. Starting from the smallest subgames (i.e. those rooted at nodes whose children are terminal nodes), compute the Nash equilibrium for the player making the choice\n3. Replace the subgame with utility $u$ obtained (i.e. make the node of the subgame a terminal node and label it with the utility of the equilibrium)\n4. Repeat the process for every subgame rooted in a node leading to terminal nodes (i.e. compute the Nash equilibirum and replace the game with the result of its equilibrium)\n5. If at any step a subgame has multiple Nash equilibria (i.e. when the utilities of  different choices are the same), select any of them\n6. Terminate when we reach the root node of the whole game\n\nThe algorithm runs in polynomial time in the size of the tree\nFor every player $i$, let $s_i$ be the vector where each component is the choice made by the player in the process of selecting the equilibrium of a subgame\n$(s_1,...,s_n)$ is a subgame perfect equilibrium and the utility $u$ at the root node is the value of the equilibrium\n\n![|450](notes/Intelligent%20Agents/Images/subgame_perfect.gif)\n#### Example\n![|450](notes/Intelligent%20Agents/Images/subgame_perfect_example.gif)\n# Ultimatum Game (General Version)\n1. Player 1 can propose a division of the cake in $n$ parts, for any natural number $n \u003e 1$\n2. Player 2 can either accept the subdivision or reject it, in that case, nobody gets anything\n3. For any game of this kind, no matter what $n$ we choose, there are always exactly two subgame perfect equilibria\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221113204129.png)\nIn the first equilibrium, $P2$ chooses yes at every node, and so $P1$ choose $\\frac{n}{0}$\n\nIn the second equilibrium, $P2$ chooses yes at every node except at the left most node - so $P1$ chooses $n-\\frac{1}{1}$\n\nWhile there are only two subgame perfect equilibria, there are many more Nash equiibria\nAny strategy combination $$(\\frac{n}{0},(yes,x_1,...,x_n))$$ where each $x_i\\in\\{no,yes\\}$ is a choice by player 2, is a Nash equilibrium\n$P1$ gets the best possible payoff by choosing $\\frac{n}{0}$\nWhen $P1$ chooses $\\frac{n}{0}$, the payoff for player 2 will be the same no matter what choice is made\n# Centipede Game\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221113204812.png)\nTwo player game with 100 stages\nIn odd stages ($t=1,3,...,99$) player 1 can either\n- Stop the game $S$ with payoff of $(t,t-1)$\n- Continue the game $C$\nIn even stages ($t=2,4,...,100$) player 2 can either\n- Stop the game $S$ with payoff of $(t-2,t+1)$\n- Continute the game $C$\nThe game ends after 100 stages if no player decides to stop before\n\nBackward induction shows that players choose to stop the game at every stage\nThis is the only subgame perfect equilibrium\nAt this equilibrium, player 1 stops the game at the first stage and the payoff is $(1,0)$\nNo player will be satisfied with this outcome and they can do much better by continuing the game","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-6/Linear-Programming":{"title":"Linear Programming","content":"\n# Linear Programs\n## Key Features\n1. A linear objective function to be maximised/minimised\n\te.g. $c_1x_1+c_2x_2+...+c_nx_n$\n\tWe often use vector notation and dot product to write $\\vec{c}\\cdot\\vec{x}$\n2. A system of linear constraints\n3. The decision variables are non-negative\n\te.g. $\\vec{x}\\geq0$\n\n$$\n\\begin{array}{ll@{}ll}\n\\text{minimise/maximise}  \u0026 \\vec{c}\\cdot\\vec{x} \u0026 \\color{red} \\text{Objective Function} \\\\\n\\text{subject to}\u0026 A_1\\vec{x}\\leq\\vec{b}_1 \u0026 \\color{red} \\text{Constraints}\\\\\n                 \u0026 A_2\\vec{x}\\geq\\vec{b}_2 \\\\\n                 \u0026 A_3\\vec{x}=\\vec{b}_3 \\\\\n                 \u0026 \\vec{x}\\geq0 \u0026 \\color{red} \\text{Non-negative Constraints} \\\\\n\\end{array}\n$$\n\nThe value of the objective function given a setting of variables is called an **objective value**\nAny setting of variables that satisfies all the constraints is called **feasible solution**\n\n#### example\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221118153844.png)\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221118153910.png)\n\n## Methods for solving LPs\n- Simplex Method\n- Ellipsoid Method\n- Karmarkar's Algorithm\n\nTools\n- MATLAB\n- Mathematica\n- CPLEX\n- GUROBI","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-6/Linear-Programming-II":{"title":"Linear Programming II","content":"\n# Computing the Nash Equilibrium of a two-player zero-sum Game\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221122180841.png)\n**Zero-Sum** - Utilities add up to 0\nExpected utility for player 1 will be:\n- If player 2 picks 'Security' -\u003e $3x-2(1-x)$\n- If player 2 picks 'Tax Cuts' -\u003e $-x+(1-x)$\n\n## Computing Player 1's Strategy in NE\nPlayer 2 will pick the pure strategy $s_2$ that maximises their utility\nSince this is a zero-sum game - $s_2$ minimises the utility of player 1\nSo Player 1's expected utility will be $$\\min(3x-2(1-x),-x+(1-x))$$\nWhen choosing $x$, Player 1 should choose it so that it maximises $\\min(3x-2(1-x),-x+(1-x))$\nWe can write this as a linear program: $$\\begin{array}{ll@{}ll}\n\\text{maximise}  \u0026 z=\\min(3x-2(1-x),-x+(1-x)) \\\\\n\\text{subject to}\u0026 3x-2(1-x)-z\\geq0 \u0026 \\color{red} \\text{Since z is the minimum of those two} \\\\\n                 \u0026 -x+(1-x)-z\\geq0 \u0026 \\color{red} \\text{it is either subtracting itself or less than it self} \\\\\n                 \u0026 x\\leq1 \u0026 \\color{red} \\text{x is a probability} \\\\\n                 \u0026 x\\geq0 \\\\\n\\end{array}$$\nSolution $z=\\frac{1}{7}$ and $x=\\frac{3}{7}$\n- Player 1 plays Economy with probability $\\frac{3}{7}$ and plays Student Fees with probability $\\frac{4}{7}$\n\n## Computing Player 2's Strategy in NE\nExpected utility for player 2 will be:\n- If player 2 picks 'Economy' -\u003e $-3y+(1-y)$\n- If player 2 picks 'Student Fees' -\u003e $2y-(1-y)$\n\nPlayer 1 will pick the pure strategy $s_1$ that maximises their utility\nSince this is a zero-sum game - $s_1$ minimises the utility of player 2\nSo Player 2's expected utility will be $$\\min(-3y+(1-y),2y-(1-y))$$When choosing $y$, Player 2 should choose it so that it maximises $\\min(-3y+(1-y),2y-(1-y))$\n\nWritten as a linear program:\n$$\\begin{array}{ll@{}ll}\n\\text{maximise}  \u0026 w=\\min(-3y+(1-y),2y-(1-y)) \\\\\n\\text{subject to}\u0026 -3y+(1-y)-w\\geq0 \u0026 \\color{red} \\text{Since z is the minimum of those two} \\\\\n                 \u0026 2y-(1-y)-w\\geq0 \u0026 \\color{red} \\text{it is either subtracting itself or less than it self} \\\\\n                 \u0026 y\\leq1 \u0026 \\color{red} \\text{x is a probability} \\\\\n                 \u0026 y\\geq0 \\\\\n\\end{array}$$\nSolution $w=-\\frac{1}{7}$ and $y=\\frac{2}{7}$\n- Player 2 plays Security with probability $\\frac{2}{7}$ and plays Tax Cuts with probability $\\frac{5}{7}$\n\nIf Player 1 plays Economy with probability $x=\\frac{3}{7}$ and Student Fees with probability $1-x=\\frac{4}{7}$\n- The expected utility of Player 1 is at least $z=\\frac{1}{7}$\nIf Player 2 plays Security with probability $y=\\frac{2}{7}$ and plays Tax Cuts with probability $1-y=\\frac{5}{7}$\n- The expected utility of Player 2 is at least $w=-\\frac{1}{7}$\nThe sum of these two minimum expected utilities is $0$\n\n# Strucutre of Linear Programs\nThe constraints in a Linear Program describe a **convex polytope** in n-dimensional space\nThe convex polytope corresponds to the **feasible region** that consists of all feasible solutions\nThe objective function will attain its minimum/maximum at a **vertex** of the polytope\nIf the set of constraints is infeasible, the linear program has no solutions\nA linear program is unbounded if it has some feasible solutions but does not have a finite optimal objective value\n\n## Unique Solutions\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221124142038.png)\n\n## Multiple Solutions\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221124142102.png)\n\n## Unbounded Solutions\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221124142125.png)\n\n## Standard vs Slack Linear Programs\n### Standard Form\nMaximisation of a linear function subject to linear inequalities\n$$\\begin{array}{ll@{}ll}\n\\text{maximise}  \u0026 \\vec{c}\\cdot\\vec{x} \\\\\n\\text{subject to}\u0026 A\\vec{x}\\leq \\vec{b} \\\\\n                 \u0026 \\vec{x}\\geq0 \\\\\n\\end{array}$$\n### Slack (a.k.a. Normal Form)\nMaximisation of a linear program subject to linear inequalities\n$$\\begin{array}{ll@{}ll}\n\\text{maximise}  \u0026 \\vec{c}\\cdot\\vec{x} \\\\\n\\text{subject to}\u0026 A\\vec{x} = \\vec{b} \\\\\n                 \u0026 \\vec{x}\\geq0 \\\\\n\\end{array}$$\n## Transforming Linear Programs\nWe can transform an inequality constraint into an equality constraint by adding slack variables\n$$\\begin{array}{ll@{}ll}\n\\vec{a}_1\\cdot\\vec{x}\\geq0\\rightarrow \\vec{a}_1\\cdot\\vec{x} - z_1=0,z_1\\geq0 \\\\\n\\vec{a}_1\\cdot\\vec{x}\\geq0\\rightarrow \\vec{a}_1\\cdot\\vec{x} + z_2=0,z_2\\geq0 \\\\\n\\end{array}$$\n$z_1$ (excess) and $z_2$ (deficit) are known as **slack variables**\n\nWe can transform an equality constraint into two inequality constraints e.g. $$\\vec{a}_1\\vec{x}=c\\rightarrow \\vec{a}_1\\cdot\\vec{x}\\geq c,\\vec{a}_1\\cdot \\vec{x}\\leq c$$\nA variable with no non-negativity constraints can be replaced by two non-negative variables\ne.g. assume $x_2$ can take on any values\n- We replace it with $x_2' - x_2''$ and add non-negativity constraints $x_2'\\geq 0$ and $x_2''\\geq 0$\n- We replace each occurrence of $x_2$ with $x_2' - x_2''$\n","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-7/Notes/Ordinal-Regression":{"title":"Ordinal Regression","content":"\n\u003e[!Info]\n\u003eAgent has partial information and their preference ordering\n\u003eGoal is to find the agent's preference ordering\n\u003eUse the partial ordering and a set of parameters to generate a complete ordering\n","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-7/Preference-Elicitation":{"title":"Preference Elicitation","content":"\n# Preference Orderings\nFor finite outcome set $O$\n$y\\succeq z$ means $y$ is weakly prefered to $z$\n$y\\succ z$ means $y$ is strictly prefered to $z$\n- It is true iff $y\\succeq z$ and $z\\cancel{\\succeq}y$\n$y\\sim z$ means indifferent between $y$ and $z$\n- It is true iff $y\\succeq z$ and $z \\succeq y$\n\n### Conditions\n#### Reflexive\n$x\\succeq x$ for all $x\\in O$\n#### transitive\nFor all $x,y,z\\in O$, if $x\\succeq y$ and $y\\succeq z$ then $x\\succeq z$\n#### total/connected\n$y\\succeq z$ or $z\\succeq y$ for all $y,z\\in O$\n\n$\\succeq$ that satisfies the above conditions is called a total preorder\n\n### Equivalence Classes\nA **tie** or **equivalence class** consists of outcomes that we are indifferent between\n\n# Preference Uncertainty\nLearning our preferences is costly\nOften there are too many outcomes and ranking them is too costly\nInstead we partially learn our preferences\n\n# Preference Elicitation\nWe start with partial (or no) information about our preferences\nWe learn more about preferences by making queries\n\n**Pairwise Queries** - Compare two given outcomes\n**Interviews** - Learn as much as possible about the value of an outcome\n\n## Pairwise Queries\nTwo given outcomes $x$ and $y$ are compared against each other and the result is one of the following\n- $x \\succ y$ \n- $y\\succ x$\n- $x\\sim y$\n\n## Interviews\nA given outcome $x$ is thoroughly investigated\nAfter interviewing $\\ell$ outcomes, we fully learn our preference ordering over these $\\ell$ outcomes\n\n## Pairwise Queries vs Interviews\nInterviews are generally assumed to be a lot more costly than pairwise comparisons\n- Pairwise comparisons are useful if the two outcomes are sufficiently distinct\n- Interviews are needed when the outcomes are similar and more information is needed to rank them\n\n## Elicitation Scheme/Strategy/Plan\nAn elicitation plan describes when and what to ask\nThe plan may depend on the result of the previous queries\n\n## Probabilistic Preferences\nNot all query results are deterministic\n\n# Multi Criteria Ranking using Multi-Attribute Additive Functions\n## Multi-Criteria Decision Analysis (MCDA)\nA finite set of outcomes or alternatives $O=\\{a,b,c,d,...\\}$ is evaluated on a family of $n$ criteria or issues where $g_i(o)\\in \\mathbb{R}$ is the evaluation of issue $i$ in outcome $o$, for all $i\\in\\{1,...,n\\}$ and $o\\in O$\n\nThe greater $g_i(o)$,$o\\in O$, the better outcome $o$ on issue $i$\n- $a$ is at least as good as $b$ with respect to issue $i$ where $g_i(a)\\geq g_i(b)$\n\n## Multi-Attribute Additive Value Functions (MAAVF)\nThe agents utility is in the form of an additive value function, such that $$U(o)=\\sum\\limits_{i=1}^{n}u_i(g_i(o))$$\nWhere $u_i : \\mathbb{R}\\rightarrow\\mathbb{R}$ is a non-decreasing marginal value function for issue $i,i\\in\\{1,...,n\\}$\nSometimes $u_i(g_i(o_i))$ will just be referred to as $u_i(o_i)$\n\nValue functions are increasing with respect to preference ordering\n- $a\\succ b \\Longleftrightarrow U(a)\u003eU(b)$\n- $a\\sim b \\Longleftrightarrow U(a) = U(b)$\n\n## Weighted Additive Utility Value Functions\nWeighted additive value/utility functions are a particular case of the multi-attribute value function where $u_i=w_i\\cdot g_i(o)$\n\n## Ordinal Regression\nThe agent has some partial information about their preference ordering\n$u_i$'s are unknown\nUsually assumed that $g_i$'s are known\n\nGoal is to find the agent's preference ordering\nUse the partial preference ordering and a set of parameters (i.e. $u_i$'s) that respect the partial information found to generate a complete preference ordering\n\n**UTA** - The first and well-known additive [[Ordinal Regression]] method\n- Assumes that the agent knows their complete preference ordering over a set of reference outcomes (or alternatives) $O^R\\subseteq O$\n- Among many compatible additive value functions that are consistent with the partial preference information, only one is selected and used to generate a complete preference ordering\n- Assumes that marginal value functions $u_i$'s are piecewise-linear\n\n**UTA$^{GMS}$** - The first method of robust additive [[Ordinal Regression]]\n- The agents ranking of reference outcomes does not need to be complete\n- Takes into consideration the whole set of compatible additive value functions\n- Marginal value functions are general non-decreasing functions\n\n# Ordinal Regression via Linear Programming\n## Principle of the UTA Method\n### Assumptions\nAgent knows their complete preference ordering over a set of reference outcomes $O^R \\subseteq O$\nThe range of $g_i$ is $[\\alpha_i,\\beta_i]$,$\\alpha_i\u003c\\beta_i$\n- Finite bound\n- $\\alpha_i$ is the worst finite evaluation for issue $i$\n- $\\beta_i$ is the best finite evaluation for issue $i$\n$u_i$'s are piecewise-linear, so that the interval $[\\alpha_i,\\beta_i]$ is divided into $\\gamma_i\\leq 1$ equal sub-intervals\n$u_i$'s are normalised to bound $U(o)$ in the interval $[0,1]$\n- $u_i(\\alpha_i)=0$,$\\forall i \\in \\{1,...,n\\}$\n- $\\sum\\limits_{i=1}^{n}u_i(\\beta_i)=1$\n\n### Reference Outcomes\nA value function $U$ is compatible if and only if for each $c,d\\in O^R$\n- $U(c)\\geq U(d)\\Longleftrightarrow c\\succeq d$\n- $U(c)\u003eU(d)\\Longleftrightarrow c\\succ d$\n- $U(c)=U(d)\\Longleftrightarrow c\\sim d$\n\n### Piece-Wise Linear Marginal Value Functions\nFor each $i\\in \\{1,...,n\\}$, the range of $g_i$ is $[\\alpha_i,\\beta_i]$,$\\alpha_i\u003c\\beta_i$\nThis interval is divided into $\\gamma_i\\geq 1$ equal sub-intervals $$[x_i^0,x_i^1],[x_i^1,x_i^2],...,[x_i^{\\gamma_i-1},x_i^{\\gamma_i}]$$ where $x_i^j=\\alpha_i+\\frac{j}{\\gamma_i}(\\beta_i-\\alpha_i),j=1\\text{...}\\gamma_i$\n\nThe marginal value of an outcome $o\\in O$ on issue $i$ is obtained by linear interpolation $$u_i(o_i)=u_i(x_i^j)+\\frac{o_i-x_i^j}{x_i^{j+1}-x_i^j}(u_i(x_i^{j+1})-u_i(x_i^j))$$ $$o_i\\in[x_i^j,x_i^{j+1}]$$The piecewise-linear additive model is completely defined by the marginal values at the breakpoints\ni.e. $u_i(x_i^0)=u_i(\\alpha_i),u_i(x_i^1),\\text{...},u_i(x_i^{\\gamma_i})=u_i(\\beta_i)$\n\n### Constraints for a Compatible Value Function\nA value function $U(o)=\\sum\\limits_{i=1}^n u_i(o_i)$ is compatible if it satisfies the following set of constraints\n$$\\begin{array}{l}\n        U(c)\u003eU(d)\\Longleftrightarrow c\\succ d\\\\\n        U(c)=U(d)\\Longleftrightarrow c\\sim d\\\\\n    \\end{array}\n \\biggr\\}\\forall c,d\\in O^R$$\n $$u_i(x_i^{j+1})-u_i(x_i^j)\\geq 0,i=1,...,n,j=1,...,\\gamma_i-1$$\n $$\\begin{array} uu_i(\\alpha_i)=0 \u0026 i=1,...,n\\\\\\end{array}$$\n$$\\sum\\limits_{i=1}^nu_i(\\beta_i)=1$$\n\n#### Example\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221125175642.png)\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221125180245.png)\n\n### Solution or No Solution\nIf the optimal value of the objective function is equal to zero (i.e. if all $\\sigma^+(c)'s$ and $\\sigma^-(c)'s$ are set to zero), then there exists at least one value function $U(o)=\\sum\\limits_{i=1}^{n}u_i(\\sigma_i)$ compatible with the preference ordering on $O^R$\n\nIf the optimal value of the objective function is greater than zero, then there is no compatible value function\nin this case you can consider\n- Increasing $\\gamma_i$ for one or several marginal values\n- Revising the preference ordering on $O^R$\n\n# Robust Ordinal Regression ($UTA^{GMS}$)\n## Limitations of UTA\nIf the linear program is feasible, then the choice of a compatible value function is arbitrary\nMarginal value functions are limited to piecewise linear function\nComplete preference ordering on reference outcomes is needed\n\n## $UTA^{GMS}$\nTakes into consideration the whole set of compatible additive value functions\nMarginal value functions are general non-decreasing functions\nThe agent's ranking of reference outcomes does not need to be complete\n\n## Assumptions\nAgent knows their partial preference ordering over a set of reference outcomes $O^R\\subset O,|O^R|=m$\nSame assumptions as in UTA\n\n## Necessary and Possible weak Preference Relations\nNecessary weak preference relation $\\succeq^N$ where $\\alpha\\succeq^N b\\Leftrightarrow U(a)\\geq U(b)$ for all compatible value functions\nPossible weak preference relation $\\succeq^p$ where $\\alpha\\succeq^p b\\Leftrightarrow U(a)\\geq U(b)$ for all compatible value function\n\n## From Partial Preference Ordering\nFor any $a,b\\in O^R$\n- If $\\alpha\\succeq b\\Rightarrow a\\succeq^N b$\n- If $\\alpha\\succ b\\Rightarrow \\neg(b \\succeq^p a)$\n\n## Constraints for a Compatible Value Function\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221205153020.png)\n\n## Turning $E^{A^R}$ into a Linear Program\nUse the same trick as used for UTA, we can rewrite the first set of constraints as $$U(c)\\geq U(d)+\\epsilon \\Leftrightarrow c \\succ d$$ for an aribitrarily small $\\epsilon$\n\n## Computation of $\\succeq^N$ and $\\succeq^P$\nFor all pairs of outcomes $(a,b)\\in O \\times O$, let $\\pi_i$ be a permutation of the indices of outcomes from set $O^R\\cup \\{a,b\\}$ that reorders them according to increasing evaluation on attribute $i$ i.e. $$g_i(a_{\\pi_i(1)})\\leq g_i(a_{\\pi_i(2)})\\leq...\\leq g_i(a_{\\pi_i(w)})$$ where $w=|O^R\\cup \\{a,b\\}|$\n\nFix the characteristic points of $u_i,i=1,...,n$ in $g_i^0=\\alpha_i$, $g_i^j=g_i(a_{\\pi_i(j)})$ for $j=1,...,w$, $g_i^{w+1}=\\beta_i$\n\n## Ordinal Regression Constraints $E(a,b)$\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221205161107.png)\n\n## Linear Programs to compute $\\succeq^N$\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221205161229.png)\n## Linear Program to compute $\\succeq^p$\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221205161328.png)\n## Summary of $UTA^{GMS}$\n\n![|450](notes/Intelligent%20Agents/Images/Pasted%20image%2020221205161438.png)","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-8/Auctions":{"title":"Auctions","content":"# Auction Design and Objectives\nAuctions should maximise social welfare - allocate resources to those who value them the most\nAuctions should be individually rational - agents should not be worse off from participating\nAuctions should not be manipulatable - agents should be incentivised to behave truthfully\nIn some cases, the aim is to maximise revenue\n# Single Item Auctions\n## Families\n### Open-outcry Auctions\n- English auction\n- Dutch auction\n- Japanese auction\n### Sealed-bid Auctions\n- First-price auction\n- Second-price (Vickrey) auction\n- All-pay auction\n## Setting\n- $n$ strategic bidders\n- Each bidder $i$ has a private valuation (willingness to pay) $\\theta_i$ for the item\n- Bidder utitlity model is quasilinear utility model\n\t- If $i$ loses and has to pay $p_i$, their utility is $-p_i$\n\t\t- In auctions where only winners pay, $i$'s utility is $0$\n\t- If $i$ wins at a price $p$, their utility is $u_i=\\theta_i-p_i$\n- Assuming\n\t- Independent private value model\n\t\t- i.e. a bidder's valuation does not depend on other bidder's valuations\n\t- Bidders cannot collude\n## Objective and Allocation Rule\nLet the goal of the auction designer be maximising the social welfare\nSocial welfare is $SW=\\sum_limits_{i=1}^n\\theta_ix_i$\n$x_i$ is $1$ if $i$ wins, and $0$ if $i$ loses\n$\\sum\\limits_{i=1}^nx_i\\leq 1$ (feasibility constraint)\nIn a single-item auction, maximising social welfare means awarding the item to the bidder with the highest value\nLet the allocation rule pick the bidder whose bid is the highest\n## English Auction\n1. Auctioneer starts the bidding at some low 'reservation price'\n2. Bidders then shout out ascending prices\n\t1. Usually by some minimum increment set by the auctioneer\n3. Auction ends once bidders stop shouting\n\t1. i.e. no bidder is willing to bid higher\n4. Highest bidder wins the item and pays their bid\n## Dutch Auction\n1. Auctioneer starts the bidding at a high price\n2. Auctioneer lowers the price until someone bids\n3. Item is allocated to the first bidder at that current price\n## Sealed-bid Auction\n1. Each bidder submits their bid in a sealed envelope\n2. Bidders do not see each others bids\n3. Bids are collected by the auctioneer\n4. Auctioneer determines the winner and the price to pay\n\t1. In the first-price sealed-bid auction, the highest bidder wins and pays their bid\n## Vickrey (Second-price Sealed-bid) Auction\n- The highest bidder wins but only pays the second highest bid (or the reserve price, whichever is higher)\n# Analysing Auctions\n## Every Auction is a Game\nConsider first-price auction\n- Let $b_i$ denote the bid placed by bidder $i$\n- Let $b=(b_1,b_2,...,b_n)$ denote the bid profile of all bidders\n- The set of actions available to each bidder is all possible bids that they can place\n\t- Effectively any non-negative real number, unless the auction has rules such as only integers\n- The utility of each bidder $i$ depends on\n\t- Their private valuation or type $\\theta_i$\n\t- The outcome (allocation + payment), which in turn depends on $b_i$ and the bids placed by the other bidders, hence on bid profile $b$\n- The game induced by the first-price auction (or any auction) is not a strategic form game\n- This is an example of a Bayesian game\n## Model Decision Theoretic Framework\nAs assumed so far, a bidder does not know the private valuations of other players\nHowever, in a decision theoretic framework, the bidder is assumed to have beliefs about the bid distribution\n- Assume in the case of ties the bidder loses\n- Let $F(b)$ denote the probability that all other bids are less than $b$ - so $F(b)$ is the probability of winning given bid $b$\nGoal is to find the bidding strategy $s:\\Theta\\rightarrow A$, where $A$ is the set of actions or bids, which maximises the expected utility for any valuation $\\theta_i\\in\\Theta$\n\n# First-Price Auction\nThe utiity is given by $$u_i(\\theta_i)=\\biggr\\{\n\\begin{array} a\\theta_i-b_i \u0026 \\text{if } b_i\u003e\\max_{j\\neq i}b_j \\\\\n0 \u0026 otherwise \\\\\n\\end{array}$$\nThe expected utility given by bid $b_i$ is then $$E[u_i(\\theta_i)|b_i]=(\\theta_i-b_i)F(b_i)$$\n## Exercise: Discrete Bids\n![[Pasted image 20221207180005.png|450]]\n## Solution\n![[Pasted image 20221207180031.png|450]]\n## Optimal Bid for Continuous Bid Distributions\nUsing the equations from [[#First-Price Auction]]\n\nLet $f(b)=\\frac{dF(b)}{db}$ denote the first derivative of $F$\n$f$ is the probability density and $F$ is the corresponding cumulative distribution\nFind the optimal bid by setting the first derivative to 0: $$\\frac{dE[u_i(\\theta_i)]}{db_i}=0\\leftrightarrow F(b_i)=(\\theta_i-b_i)f(b_i)$$\nFor uniform distribution $F\\sim U(0,1)$ this gives: (for $b_i\u003c1$) $$b_i=\\theta_i-b_i\\leftrightarrow b_i=\\frac{1}{2}\\theta_i\\leftrightarrow s(\\theta_i)=\\frac{1}{2}\\theta_i$$\n# Vickrey Auction\n## Discrete Bids\nThe utility is given by: $$u_i(\\theta_i)=\\biggr\\{\n\\begin{array} a\\theta_i-\\max_{j\\neq i}b_j \u0026 \\text{if } b_i\u003e\\max_{j\\neq i}b_j \\\\\n0 \u0026 otherwise \\\\\n\\end{array}$$\nLet $f(b)=F(b+1)-F(b)$ denote the probability that the highest opponent bid is exactly $b$\nThe expected utility given bid $b_i$ is then: $$E[u_i(\\theta_i)|b_i]=\\theta_iF(b_i)-\\sum\\limits_{b=0}^{b_i-1}b\\cdot f(b)$$\nAccording to our tie breaking rule $i$ loses if tied with the highest opponent bid, to compute the expected payment we have to consider only cases where the highest opponent bid is at most $b_i-1$\n## Exercise: Discrete Bids\n![[Pasted image 20221208133946.png|450]]\n## Solution\n![[Pasted image 20221208134018.png|450]]\n## Continuous Bids\nUsing the equations from [[#Vickrey Auction]]\nFor continuous distributions, $f$ is the probability density, and we replace the sum by the integral.\nThe expected utility given by bid $b_i$ then becomes: $$E[u_i(\\theta_i)|b_i]=\\theta_iF(b_i)-\\int\\limits_{b=0}^{b_i}b\\cdot f(b)db$$\n\u003e[!Note]\n\u003eThe integral is from $0$ to $b_i$ (and not $b_i-1$)\n\u003eThe upper bound of the integral should be the largest opponent bid at which $i$ still wins, which would be $b_i-\\epsilon$ for infinitely small $\\epsilon$\n\u003eTherefor, under some conditions that we can assume for $F$ - we can put $b_i$ as the upper bound\n\nThe optimal bid is given by: $$\\frac{dE[u_i(\\theta_i)]}{db_i}=0\\leftrightarrow \\theta_if(b_i)=b_if(b_i)$$\n\u003e [!Note]\n\u003e Note that $s(\\theta_i)=\\theta_i$ is always an optimal outcome (second derivative is negative)\n\n## Strategy Proofness\n\u003e [!Definition]\n\u003e A strategy is weakly dominant if, regardless of what any other players do, the strategy earns a player a utility at least as high as any other strategy\n\nIn the Vickrey auction, bidding $s_i(\\theta_i)=\\theta_i$ is a weakly dominant strategy\nSuch an auction is called\n- Truthful\n- Strategy-proof\n- Incentive-compatible in dominant strategies\n\n### Proof\n![[Pasted image 20221208143548.png|450]]\n![[Pasted image 20221208143614.png|450]]\n\n# Dutch Auction\nHere strategy $s(\\theta_i)$ is the point at which you bid when the clock reaches the vlaue $s(\\theta_i)$\n## First-Price Sealed-Bid Auction vs. Dutch Auction\nIn both auctions, if $i$ is the winner they pay $s(\\theta_i)$\nThe amount of available information in both cases is the same [[üìå‚Çà.‚ÇÅ]]\nTherefor the optimal strategies in Dutch and first-price sealed-bid auctions are identical\nThese auctions are said to be **strategically equivalent**\n# English Auction\nMore complicated strategy space\nA bidder may place several bids throughout the auction, conditioning their new bid on the information revealed (an extensive form game)\nTo simplify the representation of a bidder's strategy in an English auction\n- Let us interpret the strategy $s_i$ of bidder $i$ as the point at which $i$ should stop bidding\n- $s_i$ is not necessarily the same as the last bid placed by bidder $i$, $b_i$, but that $b_i\\leq s_i$ (no bidder outbids themselves)\n## Vickrey Auction vs. English Auction\nIn English auction it is a dominant strategy for bidders to bid up to (and not beyond) their valuation\n- i.e. setting $s_i=\\theta_i$ is a dominant strategy for each bidder $i$\nIn Vickrey auction it is a dominant strategy to bid truthfully\n- i.e. to set $b_i=\\theta_i$\nBidding your trure valuation (setting $b_i=\\theta_i$) is not exactly the same as bidding up to, and not beyond, your true valuation (setting $s_i=\\theta_i$) but it is closesly similar\nWe say that these two auctions are weakly strategically equivalent\n\n# Model (Bayes-Nash Framework)\n$\\theta_i$ is the type of agent $i$\nLet $\\theta_{-i}$ denote the types of other agents\n\nIn the independent private value model, a player's utility depends on their type $\\theta_i$ and on the *actions* (i.e. bids) of all the players (not on their types)\n\nEach player knows their own type $\\theta_i$ but does not know the type of other players $\\theta_{-i}$\n\nAgents have a *prior distribution* $Pr(\\theta_{-i})$ over other player's type profiles, which is *common knowledge*\n\nHence this is called a *Bayesian game*, and the solution concept is called a *Bayes-Nash equilibrium*\n\n# Revenue Equivalence\nAssume all bidders are risk-neutral and utility maximisers, and each has an indpendent private valuation for the single item, drawn from a common cumulative distribution $F(\\theta)$ that is strictly increasing and atomless on $[L,H]$\nThen any auction mechanism which\n- In equilibrium, the item will be allocated to the agent with the highest valuation and\n- Any agent with valuation $L$ has an expected utility of zero\nyields the same expected revenue, and hence results in any bidder with valuation $\\theta$ making the same expected payment\n\nThe four single-item auctions discussed before all satisfy the above. Therefore they are *revenue equivalent*\n\n# Advertising Auctions\n## Sponsored Search\nAllocation of ad space alongside search results\n- Multiple slots on single page sold simultaneously\n- Uses an auction called Generalised Second Price (GSP) Auction\n- Bidding and auction fully automated\n## Banner Advertising\nAdvertising on regular webpages usually auctioned off\n- Auctions are run by ad exchanges\n- Each item is a slot on a webpage\n- Auctioned off individually using the Vickrey auction","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-8/Notes/Formulae":{"title":"Formulae","content":"\n$F(b_i)$ - The probability of winning given bid $b_i$\n$\\theta_i$ - The value of the item to agent $i$\n\n### First Price Auction\n#### Expected Utility\n$E[u_i(\\theta_i)|b_i]=(\\theta_i-b_i)F(b_i)$\n\n### Second-Price Sealed-Bid (Vickrey)\n$f(b)=F(b+1)-F(b)$\n#### Expected Utility\n$E[u_i(\\theta_i)|b_i]=\\theta_iF(b_i)-\\sum\\limits_{b=0}^{b_i-1}b\\cdot f(b)$\n","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-8/Notes/Pins/.":{"title":"üìå‚Çà.‚ÇÅ","content":"\nNothing of value is learned until the winner is announced","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Week-9/Voting":{"title":"Voting","content":"\n# Components of a Social Choice Model\nAssume a set $Ag=\\{1,...,n\\}$ of agents (or voters)\nThese are the entities that will be expressing preferences\n\nVoters make group decisions with respect to a set $$\\Omega=\\{\\omega_1,\\omega_2,...\\}$$ of outcomes (or candidates)\n- If we have $|\\Omega|=2$ then we have a pairwise election\n- If we have $|\\Omega|\u003e2$ then we have a general voting scenario\n\nEach voter has preferences over $\\Omega$\n\n$\\Pi(\\Omega)$ is the set of all preference orderings over $\\Omega$\nLet $\\succ_i\\in\\Pi(\\Omega)$ be a preference ordering for agent $i$\n$\\omega \\succ_i \\omega'$ represents that outcome $\\omega$ is ranked above the outcome $\\omega'$ in agent $i$'s preference order $\\succ_i$\nGiven a set of agents $Ag$, we denote by $[\\succ]$ any preference ordering profile i.e. $$[\\succ]\\in\\underbrace{\\Pi(\\Omega)\\times...\\times\\Pi(\\Omega)}_{n}$$\n\n# The Social Choice Problem\nHow to combine different preference orderings to derive a group decision\n\nA *Social Welfare Function* $f$ takes $n$ voters' preferences and produces a *social preference order* $$f:\\underbrace{\\Pi(\\Omega)\\times...\\times\\Pi(\\Omega)}_n\\rightarrow \\Pi(\\Omega)$$\nA social choice function obtains just one of the possible outcomes $$f:\\underbrace{Pi(\\Omega)\\times...\\times\\Pi(\\Omega)}\\rightarrow\\Omega$$\nWe use $\\succ^*$ to refer to the outcome of a social welfare function\nGiven preference ordering $[\\succ]$ and social welfare function $f$, $f([\\succ])=\\succ^*$ is called the aggregate ranking for $[\\succ]$\n- $\\omega\\succ^*\\omega'$ means that $\\omega$ is ranked above $\\omega'$ in the social outcome\n\n# Voting Procedures\n## Plurality Vote\nEvery candidate gets one point for every preference order that ranks them first\n![|200](notes/Intelligent%20Agents/Images/Pasted%20image%2020230113175533.png)\n![|100](notes/Intelligent%20Agents/Images/Pasted%20image%2020230113175607.png)\n### The Condorcet Paradox\n*Condorcet's paradox* tells us that there are scenarios in which no matter which outcome we choose, a majority of voters will be unhappy\n### The Condorcet Criterion\nA *Condorcet winner* is the candidate who always wins in pair-wise elections using plurality\nA Condorcet winner does not always exist\nA voting system satisfies the *Condorcet criterion*, if it always chooses a Condorcet winner when one exists\nRules satisfying this property are called *Condorcet methods* and are said to be *Condorcet consistent*\n#### Example\n![|200](notes/Intelligent%20Agents/Images/Pasted%20image%2020230113180402.png)\n![|200](notes/Intelligent%20Agents/Images/Pasted%20image%2020230113180419.png)\n## Copeland Method\nEach candidate is scored based on its pairwise victories minus its pairwise losses\nThis method is Condorcet consistent\n\nThe Copeland method also works when there is no Condorcet winner\n#### Example\n![|200](notes/Intelligent%20Agents/Images/Pasted%20image%2020230113181740.png)\nWine wins twice, Beer has 1 win, Milk always loses\n\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020230113182313.png)\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020230113182333.png)\nThere is no Condorcet winner, but A is a Copeland winner\n## Borda Count\nThe Borda Count takes into account all the information from a preference order\nBorda count:\n- With $x$ candidates, each voter awards $x$ points to their first choice, $x-1$ to their second and so on\n- The candidate with the most points wins\n\nThe Borda count is not a Condorcet method\n![|300](notes/Intelligent%20Agents/Images/Pasted%20image%2020230113185557.png)\n#### Example\n![|200](notes/Intelligent%20Agents/Images/Pasted%20image%2020230113185413.png)\nBeer gets 30 points, Wine gets 31 points, Milk gets 29 points\n\n# Social Welfare Functions\n## Desirable Properties\n### Pareto Efficiency\nA social welfare function is *Pareto efficient*, if, whenever every agent $i$ prefers $\\omega$ over $\\omega'$, then $\\omega\\succ^*\\omega'$\n### Independence of Irrelevant Alternatives (IIA)\nA social welfare function is independent of irrelevant alternatives, if whether $\\omega$ is ranked above $\\omega'$ in the social outcome depends only on the relative orderings of $\\omega$ and $\\omega'$ in agents preferences\n\n\u003e[!Tip]\n\u003eA social welfare function is IIA if the outcome only depends on the relative orderings of candidates\n\u003ei.e. if $A$ $\\succ$ $B$ then the outcome won't change so long as $A$ is always ordered somewhere above $B$\n#### Example\n![|400](notes/Intelligent%20Agents/Images/Pasted%20image%2020230114173700.png)\n### Nondictatorship\nA social welfare function is nondictatorial whenever there is no voter $i$ such that for all $\\omega$, $\\omega'$, if $\\omega\\succ_i\\omega'$ then $\\omega\\succ^*\\omega'$\n## Arrow's Theorem\nWe say a social welfare function is *dictatorial* if it does not satisfy nondictatorship\n\n\u003e[!Theorem]\n\u003eFor elections with more than 2 candidates, any social welfare function satisfying Pareto efficiency and IIA is dictatorial\n\nThere are fundamental limits to democratic decision making\nArrow's theorem tells us we cannot hope to find a voting scheme that satisfies all of the notions of fairness that we find desirable\n\n# Social Choice Functions\n## Desirable Properties\n### Weak Pareto Efficiency\nA social choice function is *weakly pareto efficient*, if, when every agent $i$ prefers $\\omega$ over $\\omega'$, then $\\omega'$ cannot be the outcome of the social choice function\n\n\u003e[!Tip]\n\u003eA social choice function is weakly Pareto efficient if the outcome of the function is such that there is no other alternative that could make at least one person better off without making anyone else worse off\n### Monotonicity\nA social choice function $f$ is monotonic if, for every preference profile $[\\succ]$, such that $f([\\succ])=\\omega$, if $[\\succ']$ is another profile such that $\\omega\\succ_i'\\omega'$ whenever $\\omega\\succ_i\\omega'$ for every agent and every alternative $\\omega'$, then $f([\\omega'])=\\omega$ as well\n\n\u003e[!Tip]\n\u003eIf a certain option is the winner under a certain set of preferences, it should still be the winner if the preferences are slightly changed in its favor. This property is a desirable feature in social choice functions as it ensures that the outcome does not change arbitrarily with small changes in the preferences of the voters.\n### Nondictatorship\nA social choice function $f$ is *nondictatorial* if there does not exist an agent $i$ such that $f$ always selects the top choice in $i$'s preference ordering\n## Muller-Satterthwaites's Theorem\nWe say a social choice function is *dictatorial* if it does not satisfy nondictatorship\n\u003e[!Theorem]\n\u003eFor elections with more than 2 canddiates, any social choice function satisfying weak pareto efficiency and monotonicity is dictatorial\n\n# Strategic Voters\nA social choice function $f$, is manipulable if, for some preference ordering profile $$\\succ_1,...,\\succ_i,...,\\succ_n$$ and voter $i$, there exists some $\\succ_i'$ such that $$f(\\succ_1,...,\\succ_i',...,\\succ_n)\\succ_if(\\succ_1,...,\\succ_i,...,\\succ_n)$$\n- A voter can obtain a better outcome for themselves by unilateraly changing their preference profiles\n- By misreporting their preferences to the voting procedure\n\nAlthough voting procedures are maniuplable, their manipulation is computationaly complex\n- Not easy to maniuplate some voting procedures intelligently\n- Various unknowns\n- Computing a lie can be costly\n## Gibbard-Satterthwaitte's Theorem\nAny social choice function with at least three outcomes that satisfies citizen sovreignty and is truthful (i.e. non-manipulable) is dictatorial\n\n*Citizen sovreignty* - For every outcome $\\omega$, there exists a preference profile $[\\succ]$ such that the social choice function returns $\\omega$","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Intelligent-Agents/Worksheets/Worksheet-1":{"title":"Worksheet 1","content":"\n### (a)\n$$U_A(o)=0.9\\cdot o_1 + 0.1\\cdot o_2$$\n$$U_B(o)=0.6\\cdot (1-o_1) + 0.4\\cdot (1-o_2)$$","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Interaction-Design/Interaction-Design":{"title":"Interaction Design","content":"\n\u003ciframe src=\"https://drive.google.com/file/d/1SZeRODK4w5p7autMgB6uh9PudDZ-zV7o/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Principles-of-Cyber-Security/Principles-of-Cyber-Security":{"title":"Principals of Cyber Security","content":"\n\u003ciframe src=\"https://drive.google.com/file/d/1ViHgF4lbTdMWX283-c63o9Mdb-4wabPF/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Programming-2/Programming-2":{"title":"Programming 2","content":"\n\u003ciframe src=\"https://drive.google.com/file/d/1rSpRR5Vt0rd8ye1Wa8V5l5iRgOTQBnlR/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Programming-3/Programming-3":{"title":"Programming 3","content":"\n\u003ciframe src=\"https://drive.google.com/file/d/12CXA26SLj8qBJ5nUGXI55bTMZchbu-Qu/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/SEG/SEG":{"title":"SEG","content":"\n\u003ciframe src=\"https://drive.google.com/file/d/154ruCJGzMuzeEl2u7EyZFt1J8Z6KL3NE/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Software-Security/Courseworks/Coursework-1":{"title":"Coursework 1","content":"# imageinfo\n\n- Profile - Win7SP1x86\\_23418\n\n# pstree\n\n- jackal.exe.exe - pid 3028\n\t- cmd.exe - pid 1084\n\t- cmd.exe - pid 1608 (terminated)\n\n# 1084\n## strings\n### procdump\nRegistrys mentioned\n```\nSOFTWARE\\POLICIES\\MICROSOFT\\WINDOWS\\SYSTEM\nSOFTWARE\\MICROSOFT\\COMMAND PROCESSOR\nSOFTWARE\\CLASSES\n```\n\n## handles -t file\n```\n\\Device\\HarddiskVoIume1\\Users\\Daniel\n\\Device\\HarddiskVoIume1\\Windows\\System32 -US\\cmd.exe.mui\n\\Device\\Afd\\Endpoint\n\\Device\\Afd\\Endpoint\n\\Device\\Afd\\Endpoint\n```\n\n## handles -t key\n```\nMACHINE\\SYSTEM\\CONTROLSET001\\CONTROL\\NLS\\SORTING\\VERSIONS                                                                                                                                                          \nMACHINE\\SYSTEM\\CONTROLSET001\\CONTROL\\SESSION                                                                                                                                                                       \nMACHINE                                                                                                                                                                                                            \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000                                                                                                                                                                \nMACHINE\\SYSTEM\\CONTROLSET001\\CONTROL\\NLS\\LOCALE                                                                                                                                                                    \nMACHINE\\SYSTEM\\CONTROLSET001\\CONTROL\\NLS\\LOCALE\\ALTERNATE                                                                                                                                                          \nMACHINE\\SYSTEM\\CONTROLSET001\\CONTROL\\NLS\\LANGUAGE\n```\n\n# 3028\n## handles -t file\n```\n\\Device\\Harddiskvolume1\\Users\\Daniel\n\\Device\\HarddiskVolume1\\Users\\Daniel\\AppData\\Local\\Microsoft\\Windows\\Temporary Internet Files\\Content.IE5\\index.dat\n\\Device\\HarddiskVolume1\\Users\\Daniel\\AppData\\Windows\\Cookies\\index.dat\n\\Device\\HarddiskVolume1\\Users\\Daniel\\AppData\\Local\\Microsoft\\Windows\\History\\History.IE5\\index.dat\n\\Device\\HarddiskV01ume1\\Windows\\winsxs\\x86_microsoft.windows.common-controls_6595b64144ccf1df 6.0.7601.17514_none_41e6975e2bd6f2b2\n\\Device\\Afd\\Endpoint\n\\Device\\KsecDD\n\\Device\\Afd\\Endpoint\n\\Device\\Nsi\n\\Device\\Afd\\AsyncConnectHlp\n\\Device\\Afd\\Endpoint\n```\n\n## handles -t key\n```\nMACHINE\\SYSTEM\\CONTROLSET001\\CONTROL\\NLS\\SORTING\\VERSIONS                                                                                                                                                      \nMACHINE                                                                                                                                                                                                            \nMACHINE\\SYSTEM\\CONTROLSET001\\CONTROL\\SESSION                                                                                                                                                                       \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000                                                                                                                                                                \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\MICROSOFT\\WINDOWS                                                                                                                                     \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\MICROSOFT\\WINDOWS\\CURRENTVERSION\\INTERNET                                                                                                             \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\MICROSOFT\\WINDOWS\\CURRENTVERSION\\EXPLORER                                                                                                             \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\POLICIES\\MICROSOFT\\WINDOWS\\CURRENTVERSION\\INTERNET                                                                                                    \nMACHINE\\SOFTWARE\\POLICIES\\MICROSOFT\\WINDOWS\\CURRENTVERSION\\INTERNET                                                                                                                                                \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\MICROSOFT\\WINDOWS\\CURRENTVERSION\\INTERNET                                                                                                             \nMACHINE\\SOFTWARE\\POLICIES                                                                                                                                                                                          \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\POLICIES                                                                                                                                              \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE                                                                                                                                                       \nMACHINE\\SOFTWARE                                                                                                                                                                                                   \nMACHINE\\SOFTWARE\\MICROSOFT\\WINDOWS\\CURRENTVERSION\\INTERNET                                                                                                                                                         \nMACHINE\\SYSTEM\\CONTROLSET001\\SERVICES\\WINSOCK2\\PARAMETERS\\PROTOCOL_CATALOG9                                                                                                                                        \nMACHINE\\SYSTEM\\CONTROLSET001\\SERVICES\\WINSOCK2\\PARAMETERS\\NAMESPACE_CATALOG5                                                                                                                                       \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\MICROSOFT\\INTERNET                                                                                                                                    \nMACHINE\\SOFTWARE\\MICROSOFT\\INTERNET                                                                                                                                                                                \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000_CLASSES                                                                                                                                                        \nUSER                                                                                                                                                                                                               \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000                                                                                                                                                                \nMACHINE\\SOFTWARE\\MICROSOFT\\TRACING\\JACKAL_RASAPI32                                                                                                                                                                 \nMACHINE\\SOFTWARE\\MICROSOFT\\TRACING\\JACKAL_RASMANCS                                                                                                                                                                 \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\MICROSOFT\\WINDOWS\\CURRENTVERSION\\INTERNET                                                                                                             \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\MICROSOFT\\WINDOWS                                                                                                                                     \nMACHINE\\SOFTWARE\\MICROSOFT\\WINDOWS                                                                                                                                                                                 \nMACHINE\\SOFTWARE\\MICROSOFT\\WINDOWS                                                                                                                                                                                 \nUSER\\S-1-5-21-2833823845-3085568943-3082117713-1000\\SOFTWARE\\MICROSOFT\\WINDOWS                                                                                                                                     \nMACHINE\\SOFTWARE\\MICROSOFT\\WINDOWS\\CURRENTVERSION\\INTERNET                                                                                                                                                         \nMACHINE\\SOFTWARE\\MICROSOFT\\INTERNET                                                                                                                                                                                \nMACHINE\\SOFTWARE\\MICROSOFT\\INTERNET\n```","lastmodified":"2023-04-19T18:54:04.163889355Z","tags":[]},"/notes/Software-Security/Labs/Assembly":{"title":"Assembly","content":"# x86_64 Register Architecture\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230314192038.png)\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230314192611.png)\n\n## Example: 64-bit Addition\n\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230314193007.png)\n\n## Example: 32-bit Addition\n\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230314193037.png)\n\n## Example: 16-bit Addition\n\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230314193125.png)\n\n## Example: 8-bit Addition\n\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230314193140.png)\n\n## Byte Order\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230314193624.png)\n\n## Virtual Address Space\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230314201423.png)\n\nAddressing memory in absolute terms witha 64 bit address is not a good idea\nIt is forbidden on most architectures\nAll references to memory have to be relative from a register\n\n```\n-16(%rsp)  \n8(%rbp)  \n127(%rip)\n```\n\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230314202807.png)\n\n`disp(base,index,scale) √† base + index*scale + disp`\n\n**Example**\n`-3(%rbp,%rdi,8)`\ntypically used to access `%rbp[%rdi]` where each array element is 8 bytes long and you you‚Äôre accessing at -3 bytes from it\n\n# x86_64\n\n## Addressing Modes\n\n### Immediate\n`mov $10, %eax`\n\n### Register to Register\n`mov %r8l, %al`\n\n### Indirect\n`mov 1234(%rcx, %rax, 8), %r8w`\n\nSometimes it is necessary to add a size postfix to instructions\n`movb, movw, movl, movq (b = byte, w = word, l = long, q = quadword)`\n\n### Rip-Relative\n`movb 12(%rip), %al`\n\n### Example\nSum numbers 1 to 10 in register `%eax`\n```\n    xor %eax, %eax                   # zero %eax ‚Äì why not ‚Äúmov $0, %eax‚Äù ?  \n  mov $10, %ecx                      # set the loop index  \nlab:                                 # define label  \n\tadd %ecx, %eax                   # %eax += %ecx  \n\tloop lab                         # dec %ecx, jump to lab if not  \nzero\n```\n\n## Instruction Set\n\n### MOV\n![|550](notes/Software%20Security/Images/Pasted%20image%2020230315171206.png)\n\n### MOV v LEA\n![|550](notes/Software%20Security/Images/Pasted%20image%2020230315171355.png)\n\n### CMOV\nCMOVcc instructions can replace two instructions in situations like  \n`if ecx == 5 then eax = ebx`\n\nNormally this would need to be implemented as:  \n```\ncmp $5, %ecx  \njnz continue  \nmov %ebx, %eax  \ncontinue:  \n```\n\nInstead:  \n```\ncmp $5, %ecx  \ncmovz %ebx, %eax\n```\n\n### Tests and Jumps\n![|550](notes/Software%20Security/Images/Pasted%20image%2020230315171858.png)\n\n### Arithmetic\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230315172405.png)\n\n### Push and Pop\n![|550](notes/Software%20Security/Images/Pasted%20image%2020230315172558.png)\n\n`push \u003csrc\u003e` is like `dec %rsp; mov \u003csrc\u003e,(%rsp)` \n`pop \u003cdst\u003e` is like `mov (%rsp),\u003cdst\u003e; inc %rsp`\n\n## Program Structure\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230315173141.png)\n\n### Example: Sum an Array\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315181616.png)\n\n### Example: Max of Three\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315181747.png)\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315182023.png)\n\n## Calling Conventions\n\n### Passing and Return Arguments\nThe first six integer arguments are passed in registers as follows:\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315182317.png)\n![|300](notes/Software%20Security/Images/Pasted%20image%2020230315182335.png)\n\nThe seventh and additional arguments are passed on the stack\nStandard calling convention requires that when passing arguments (values or addresses) on the stack, the arguments should be pushed in **reverse** order\n`someFunc (one, two, three, four, five, six, seven, eight, nine)` would imply a push order of: `nine`, `eight`, and then `seven`\n\nFor floating-point arguments, the floating-point registers $\\mathbf{x m m 0}$ to $\\mathbf{x m m} 7$ are used in that order for the first eight float arguments\n\n### Calling 64-bit Code\nAfter the parameters are pushed, the call instruction is made, so when the called function gets control, the return address is at `%(rsp)`, the first memory parameter is at `8(%rsp)`, etc\n\n**The stack pointer `%RSP` must be aligned to a 16-byte boundary before making a call**\nBut the process of making a call pushes the return address (8 bytes) on the stack, so when a function gets control, `%rsp` is not aligned. You have to make that extra space yourself, by pushing something or subtracting 8 from `%rsp`\n\nThe only registers that the called function is required to preserve (the calle-save registers) are: `rbp`, `rbx`, `r12`, `r13`, `r14`, `r15`\nAll others are free to be changed by the called function\n\n![|300](notes/Software%20Security/Images/Pasted%20image%2020230315183728.png)\n\nThis is what the stack will look like on entry to a function with $9+$ arguments, assuming that the callee uses (and) therefore must save `%rbx`, `%r12`, `%r13`\nNotice that it is good practice to save `%rbp` on the stack, and set it to point at the base of the stack for the current frame - which is where it takes its name from\n\n#### Example: Hello World\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315183946.png)\n\n#### Example: Hello World with OS System Calls Directly\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315184114.png)\n\n### Summary of Stack Organization\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230315184214.png)\n![|300](notes/Software%20Security/Images/Pasted%20image%2020230315184233.png)\n\n### Summary of Register Conventions\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315184352.png)\n\n","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Software-Security/Software-Security-ToC":{"title":"Software Security ToC","content":"\n# **Week 1**\n#### [[Software Vulnerabilities]]\n\n# **Week 2**\n#### [[C Functions and Stacks]]\n#### [[Introduction to C]]\n\n# **Week 3**\n#### [[Buffer Overflow]]\n#### [[C Heaps and Memory Errors]]\n\n# **Week 4**\n#### [[Arbitrary Code Execution and Mitigation]]","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Software-Security/Week-1/Software-Vulnerabilities":{"title":"Software Vulnerabilities","content":"**Buffer Overflow** - We can overflow a buffer meant to manipulate data and overwrite arbitrary memory addresses, this can be used maliciously by overwriting the original program's code with our own code\n\n# CIA Triad\n\n**C**onfidentiality **I**ntegrity **A**vailability\n\n![|150](notes/Software%20Security/Images/Pasted%20image%2020230221170325.png)\n\nEach vulnerability can harm one or more CIA properties\n\n# Lifecycle of a Vulnerability\n\n1. Software released from a vendor (with the unknown vulnerability)\n2. Vulnerability discovered by an attacker and exploit released\n3. Vulnerability discovered by vendor\n4. Public dissemination of the vulnerability\n5. Antiviruses start revealing the exploit\n6. Patch released by the vendor\n7. Exploit mitigation deployed on all affected systems\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230221165336.png)\nAttacks performed in the period $t_e-t_0$ are called zero-day (nobody can notice)\nAttacks performed in the period $t_0-t_a$ are publicly performed\nThe closer an attack is performed to zero day, the higher the probability of success\n\n# Storing and Cataloguing Vulnerabilities\n\n**CVE** - Common Vulnerabilities and Exposures\n\nCVE Vulnerabilities\n- Identified by unique string **CVE**-**year**-**number**\n- Describing page contains\n\t- Description\n\t- URL to a detailed page\n\t- Date of creation\n\n## Example - Heartbleed\n\nBad input validation in OpenSSL\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230221170605.png)\n\n## Example - Shellshock\n\nCould enable an attacker to cause Bash to execute arbitrary commands\nExecutable remotely\n\nBash allows to export environment functions and variables making those available for a child shell\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230221170919.png)\n\nAn attacker with access to .bashrc can insert the following environment function\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230221170957.png)\nEvery time a victim opens a shell the evil_command will be executed\n\n## Shellshock vs. Heartbleed\n\nHeartbleed allows to steal confidential data but Shellshock can remotely execute arbitrary code\n\n# CVSS - Common Vulnerability Scoring System\n\nCVSS is a free and open industry standard for assessing the severity of computer system security vulnerabilities\n\n## CVSS Score\n\nScore assigning formula consists of 3 sets of metrics\n\nBase Metrics\n- Is it easy to exploit?\n- What is the impact?\nTemporal Metrics\n- Is a patch available?\n- Is an exploit available?\nEnvironmental Metrics\n- What are consequences on safety?\n- How many systems are vulnerable?\n\n# CWE\n\nUsed to catalogue **weakness** and **related score**\n\n# Difference between CWE and CVE\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230221171545.png)","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Software-Security/Week-2/C-Functions-and-Stacks":{"title":"C Functions and Stacks","content":"# Data types\n\n## Integer Types\n\n| datatype | size | range |\n| :--- | :--- | :--- |\n| char | 1 byte | -128 to 127 or 0 to 255 |\n| unsigned char | 1 byte | 0 to 255 |\n| signed char | 1 byte | -128 to 127 |\n| int | 2 or 4 bytes | -32,768 to 32,767 or -2,147,483,648 to 2,147,483,647 |\n| unsigned int | 2 or 4 bytes | 0 to 65,535 or 0 to 4,294,967,295 |\n| short | 2 bytes | -32,768 to 32,767 |\n| unsigned short | 2 bytes | 0 to 65,535 |\n| long | 4 bytes | -2,147,483,648 to 2,147,483,647 |\n| unsigned long | 4 bytes | 0 to 4,294,967,295 |\n\n## Floating Point Types\n\n| datatype | size | range | precision |\n| :--- | :--- | :--- | :--- |\n| float | 4 byte | 1.2E-38 to 3.4E+38 | 6 decimal places |\n| double | 8 byte | 2.3E-308 to 1.7E+308 | 15 decimal places |\n| long double | 10 byte | 3.4E-4932 to 1.1E+4932 | 19 decimal places |\n\n# Memory Layout\n\n## Stack\n\nThe stack is the area where local variables are stored\nWhen any function is called, a stack frame is created\nWhen a function returns, the corresponding stack frame is destroyed\n\nThe stack frame contains data like the return address, arguments passed to the function and local variables\n![|300](notes/Software%20Security/Images/Pasted%20image%2020230221212722.png)\n\n### Call by Value\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230221213738.png)\n\nCopies the actual value of the argument into the stack frame\nChanges made to the parameters inside the function affect locations on the stack that are destroyed upon exiting the function\n\n### Call by Reference\nCopies the address of the argument into the stack frame\nThe address is used to access the actual argument\nTherefore effects of the function persist after the stack frame is destroyed\n\n## * and \u0026 Operators\n\n\\* indicates the variable type is a pointer\nThis is dereferencing\n\n\u0026  allows to get the address of the variable\nThis is referencing\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230221214511.png)\n\n## Pointers Arithmetic\n\nThe pointer can be incremented or decremented\nIf pointer `p` has type `T*`, the `ith` address after `p` can be calculated by using:\n\n```C\n(p + i) == (p) + [i * sizeof(T)]\n```\n\n## Null Pointers\n\nNULL can be assigned to a pointer via:\n\n```C\nint *ptr = NULL;\n```\n\nTo check for a null pointer you can use:\n\n```C\nif (ptr) /* succeeds if p is not null */\nif (!ptr) /* succeeds if p i null*/\n```","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Software-Security/Week-2/Introduction-to-C":{"title":"Introduction to C","content":"# Memory Structure\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230221185052.png)\nAs data is added to the stack, the memory addresses decrease\nAs data is added to the heap, the memory addresses increase\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230221185232.png)\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230221185315.png)\nAfter overflowing the buffer, on re-entry, the code will try to jump back to a possibly illegal address causing a Segmentation Fault and a crash","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Software-Security/Week-3/Buffer-Overflow":{"title":"Buffer Overflow","content":"In this example the buffer is filled with 0x41 values (65 decimal,  or ASCII 'A')\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315193531.png)\n\n# Execution\n\n```\ngcc -o vuln vuln.c               //compiles\ngdb ./vuln                       //runs the program vuln inside gdb\nrun $(repeat 511 printf 'A')     //puts 511 'A' in argv[1] + terminator \\0\n```\n```C\n#include \u003cstdio.h\u003e\n#include \u003cstring.h\u003e\n\nint main (int argc, char** argv)\n{\n\tchar buffer[512];\n\tstrcpy(buffer, argv[1]);\n\t\n\treturn 0;\n}\n```\n\nThe 511 'A' will be copied into the buffer\n\n![|650](notes/Software%20Security/Images/Pasted%20image%2020230315195239.png)\n\n![|650](notes/Software%20Security/Images/Pasted%20image%2020230315195412.png)\n\n![|650](notes/Software%20Security/Images/Pasted%20image%2020230315195502.png)\n\n![|650](notes/Software%20Security/Images/Pasted%20image%2020230315195714.png)\n\n## Overflowing the Buffer\n\nWhen writing **539** bytes there is a segmentation fault\n\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315195826.png)\n\nHalf of the return register is now filled with 0x41 bytes that make it point to a non-permitted memory space\n\n```\ngdb ./vuln                        //runs the program vuln inside gdb\nrun $(repeat 539 printf 'A')      //puts 539 'A' in argv[1] + \\0\n```\n```C\n#include \u003cstdio.h\u003e\n#include \u003cstring.h\u003e\n\nint main (int argc, char** argv)\n{\n\tchar buffer[512];\n\tstrcpy(buffer, argv[1]);\n\n\treturn 0;\n}\n```\n\nThe 531 'A' will be copied into the buffer\n\nThe 'A' chars overflowing the buffer will go to `RBP` (when it is popped) and cover half of `RIP` upon return\n\n![|650](notes/Software%20Security/Images/Pasted%20image%2020230315201027.png)\n\n**Checking the Registers**\n![|300](notes/Software%20Security/Images/Pasted%20image%2020230315201156.png)\n\n---\n\nWhen writing **544** bytes there is another segmentation fault\n\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230315202315.png)\n\nAll of the return address is now filled with `0x41` bytes that make it point to a non-permitted memory space\n\n```\ngdb ./vuln                        //runs the program vuln inside gdb\nrun $(repeat 544 printf 'A')      //puts 544 'A' in argv[1] + \\0\n```\n```C\n#include \u003cstdio.h\u003e\n#include \u003cstring.h\u003e\n\nint main (int argc, char** argv)\n{\n\tchar buffer[512];\n\tstrcpy(buffer, argv[1]);\n\n\treturn 0;\n}\n```\n\nThe 544 'A' will be copied into the buffer\nThe 'A' chars overflowing the buffer will go to `RBP` (when popped) and to `RIP` upon executing return 0","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Software-Security/Week-3/C-Heaps-and-Memory-Errors":{"title":"C Heaps and Memory Errors","content":"# Heap\n\nThe heap is a region of memory that is not managed automatically\nMemory on the heap has to be allocated and released by the programmer\nMemory in the heap is allocated through `malloc()` and released through `free()`\n\n## malloc()\n\n```C\nvoid *malloc(size_t size);\n```\n\nAllocates a memory area of size `size` and returns a pointer to that area\nReturns `NULL` in case of error while allocating memory\n\n#### Example\n```C\nint* x = malloc(sizeof(int));  \nint* array = malloc(N * sizeof(int)); // int array[N]\n```\n\n## free()\n\n```C\nvoid *free(void *ptr);\n```\n\nRelease the memory area pointed to by `ptr`\n\n#### Example\n```C\nint* x = malloc(sizeof(int));  \n/*  ... body ...  */\nfree(x)\n```\n\n## Stack vs. Heap\n\n```C\nint foo() {  \nint x;  \nint* y = malloc(sizeof(int));  \n/*...*/\n}\n```\n\n`x` and `y` are allocated on the stack, but `y` contains memory that is allocated on the heap\n\n## Advantages of the Heap\n\nVariables in the heap can be accessed globally until explicitly freed  \nThose in the stack can only be accessed locally and die when they go out of scope  \nHeap variables have no limit on memory size\nStack size is dependent on the OS\nHeap variables can be resized\nIn the stack the dimension is fixed at compile time\n\n# Memory Errors\n\n```C\n#include  \u003cstdlib.h\u003e\n#include \u003cstring.h\u003e\n#include \u003cstdio.h\u003e\n#include \u003cstring.h\u003e\n\nint main(int argc, char* argv\\[\\]) {\n\tif (argc != 2)\n\t\tprintf(\"Syntax: %s \u003cstring\u003e\\n\", argv[0]);\n\t\texit(EXIT_FAILURE);\n\t}\n\n\tchar *p;\n\tsprintf(p, \"Input: %s\", \n\tprintf(\"%s\\n\", p);\n\treturn 0;\n}\n```\n\n## Segmentation Fault\n\nNotified by the OS when a program has attempted to access a restricted area of memory\n\nIn the previous code, memory wasn't allocated to store the string so the pointer `p`p is `NULL`\n`malloc()` should be used to allocate memory in the heap to store the string\n\n```C\nchar *p = malloc(strlen(argv[1]) + 1);\n```\n\nTo allocate the memory for a string you need to allocate a byte more for a string terminator\n\n## Memory Leak\n\nOccurs when memory that is no longer needed is not released\n\nCan lead to running out of memory causing the OS to thrash\n**Thrashing** - Constant state of paging (rapidly exchaning data in memory for data on disk), causing the performance of the computer to fall\n\nFix the code by releasing the allocated memory\n```C\nfree(p);\n```\n\n# Compiler Optimisation\n\nSome compilers optimise code and automatically allocate the memory for obvious usage\n\n## GCC Optimisation\n\nDifferent levels of optimisation through the flag `-0`\n`-01` or `-02` are most common, `-02` is most aggressive\n\n# Stack Overflow\n\nOccurs if the call stack pointer exceeds the stack bound\nEach stack frame has a limited amount of address space  \n- Often determined at the start of the program\n\n","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Software-Security/Week-4/Arbitrary-Code-Execution-and-Mitigation":{"title":"Arbitrary Code Execution and Mitigation","content":"# How to Execute an Arbitrary Payload\n\n1. We put the payload somewhere in the buffer\n2. We put in the return address as the address of the buffer before the payload\n3. We fill the buffer before the payload with `0x90` (`NOP` instruction)\n\t1. When the return register redirects to the buffer it will go ahead to find the payload to execute\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230317192827.png)\n\n# Creating the Payload\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230317193343.png)\n\n## Registers before Syscall\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230317193834.png)\n\n## Assemble the Payload\n\nPayload must be assembled into machine code first to be executed\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230317193921.png)\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230317194122.png)\n\n## How many NOP Operations to Create\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230317194028.png)\n\n## Creating the Exploit\n\nCreate a script that produces the command line input we need for the exploit\n- A sequence of `NOP` (436 `0x90`)\n- The payload\n- Followed by the return address (So far unknown, left as `0x41` Char 'A')\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230317195047.png)\n\nIt is necessary to avoid zeros in the payload, replace with `1-1` operations\n\n# Executing the Exploit\n\nMake the exploit script executable, (outside gdb launch):\n```\nchmod +x exploit\n```\n\nExecute the exploit inside gdb:\n```\nrun $(./exploit)\n```\n\n`RBP` and `RIP` registers should be filled with `0x41`\n\n# Locate the Memory Address of where to go\n\nExamine the stack\n\n```\nmem read %rsp %rbp\n```\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230317200208.png)\n\nWhen choosing a return address, pick an address with a `0x90`\nModify the exploit to print that as the last 8 bytes\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230317200500.png)\n\n# Launching the Exploit\n\nLaunch the exploit again and it should open a shell\n\n# Using scanf vs strcpy\n\n![|500](notes/Software%20Security/Images/Pasted%20image%2020230317201044.png)\n\nThe overflow occurs here when more than 8 chars are passed from the keyboard when we call `scanf`\nThe input will overflow the buffer and overwrite `val`\n\nLaunching the overflow inside gdb\n```\ngdb ./vuln\nrun \u003c\u003c(repeat 8 printf 'A'; printf \"\\xef\\xbe\\xad\\xde\")\n```\n\nHere we use `run \u003c\u003c(...)` as we want to simulate the input like it is typed with the keyboard \n\n# Heap Based Buffer Overflow\n\nNot as easy as overwriting a return address in the stack\nBy overflowing a buffer on the Heap we can overwrite a function pointer to point to another portion of the memory\n\nIn order to execute `winner()`, we overflow the buffer of 64 bytes so that the pointer `fp` points to `winner()` instead of `loser()`\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230317203106.png)\n\n# Mitigation to Buffer Overflow\n\n**Build and Compilation**\n- compile using features or extensions that automatically provide a protection that mitigates or eliminates buffer overflows\n- Examples: Microsoft Visual Studio /GS flag, Fedora/Red Hat FORTIFY_SOURCE GCC flag, StackGuard, and ProPolice\n- **Limitations**:\n\t- these mechanisms can only detect certain types of overflows\n\t- an attack could still cause a denial of service, since the typical response is to exit the application\n**OS Protection**: e.g. ASLR (address space layout randomisation), non-executable stack **Implementation**\n- Implement and perform bounds checking on input\n- Do not use dangerous functions (`gets`, `scanf`, `strcpy`)\n- Use safer, equivalent functions which check for boundary errors\n- Check the functions you are using (e.g. `man`)","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Software-Security/Week-5/Malware":{"title":"Malware","content":"# Exploit Kits\n\nHelp deliver malware to visitors of websites\n\nThey bundle together exploits in commonly neglected software that users will have o Javascript in the browser\n- Java (that's why it's always updating...)\n- Adobe PDFs \n\n# Create a Honeypot\n\n- Grab a domain name\n- Use various emails at that domain name on various places and paste it in various public places\n- Set up a mail server (I used sendmail)\n- Set up all incoming email addresses to be piped to a script\n- I wrote a simple script that processes any incoming email\n\nIt then grabs any received attachments, extracts them if they're compressed, and collects them into a folder\n- Now you've got a folder of fresh malware!\n\n# Types of Malware\n\nTarget\n- Mass\n- Specific (e.g. Stuxnet)\n\nForms\n- Trojan Horse: Beware of Greeks...\n- Virus: Spreading by host file\n- Worm: Spreading by vulnerability\n\n## Characteristics\n\n### Information Stealing\nCollect information from computer and send it to the attacker\nKeyloggers: Actively recording everything typed\nSniffers: Monitor for anything that looks interested\nPassword stealers: Grab autocomplete and password information from web browsers and send them off\nIntercepting: Browser extensions, proxy or similar technologies to intercept and manipulate web traffic\n- Ebay, Amazon, your bank...\n\n### Remote Access\nBackdoor\n- Allows an attacker remote access\n- Commonly a remote shell\n\nBotnet\n- P2P networks, IRC, Twitter...\n- Listen and wait for commands\n- Download this\n- Execute this\n- Send data\n- Send a photo from the webcam...\n\n### Ransomware\n- Hold all of your important files to ransom, only once it's too late\n- Silently install, and start encrypting files in the background that you're not using\n- Ideally, using asymmetric encryption, so you'd never have had the key on the system\n- Once everything is encrypted, inform the user and demand money\n\n### Scareware\nScare the user into thinking they have to pay to get their computer back\n\nDisable general computer operation\n\n### Rootkit\nHooking into operating system calls and changing their behaviour\n- Conceal the payload\n- If you can't see it, you can't easily remove it\n\t- Or even know it's there...\nCommon examples\n- File and directory hiding\n- Process hiding\n- Registry hiding\n- Falsified files\n- Preventing applications from running\n- Resisting removal\n\n### Downloaders and Launchers\nSpecific standalone code to bundle other malware\n\nDownloaders/Droppers\n- Minimal applications whose sole goal is to download malware and execute it\nLaunchers\n-  To launch other malware\n-  Generally to make use of exploits and launch in a specific way\n\t- Bypassing UAC\n\t- Elevating to SYSTEM privileges\n\t- Other operating system exploits\n\n# Malware on Windows\n\nPortable Execute format (PE)\n\nLinking\n- Static: Code from library is in executable\n- Dynamic: Imports listed, OS loads at start\n- Runtime: Connect to libraries only when function needed\n\nPE Header\n- Information about the entire file\n- Type of code\n- Flags (e.g. executable, DLL)\n- Linking information\n- Size and memory information\n\n## PE Sections\n\n- PE file made up of sections\n- Sections have names, flags (e.g. executable) and content\n- Typical layout:\n\t- .text\n\t\t- Instructions - what the CPU executes\n\t\t- Contains the executable code\n\t- .rdata\n\t\t- Imports and exports\n\t- .data\n\t\t- Global data for the program\n\t- .rsrc\n\t\t- Resources used by the program (e.g. icons, dialogs, strings)\n\n## PE Execution\n\n- Extract entry point, heap and stack sizes from PE header\n- Iterate through sections and load into virtual memory\n- Find address of entry point from symbol table\n- Load imports\n- Create a new thread at that address, and execute\n\n## Linking Information\n\n### Imports\n- What will be called outside\n- DLLs - libraries of functions that you can use\n- You will get used to seeing certain DLLs\n\t- Kernel32.dll - Core functionality (memory, files, hardware)\n\t- Advapi32.dll - Windows components (service manger, registry)\n\t- User32.dll - User interface components\n\t- Gdi32.dll - Display\n\t- Ntdll.dll - Interface to windows kernel\n\t- WSock32.dll/WS2_32.dll - Winsock (network)\n\t- Wininet.dll - High level networking functions\n\n### Exports\n- What can be called inside\n\t- Dllmain\n\n# Common Techniques\n\n## Persistence\n\nMalware generally needs to persist between system boots\n- Although becoming less important these days with \"always-on\" systems\n\nHow can they make sure they load each time?\n- Logon (Shell, Run)\n- Explorer hooks\n- Scheduled tasks\n- Services\n- Drivers\n- Boot execute\n- AppInit (DLL loaded into every application that starts)\n\nGenerally: Remove their persistence, remove the malware\n\n### Evasive Technqiues\nIf the malware is running\n- Make it hard to stop the Malware once it is running\n- Prevent removing/changing the persistence\n- Hide the presence of persistence (Rootkit behaviour)\n\nRunOnce\n- Every boot, the malware is loaded from the RunOnce key, then removed - but it's in memory\n- No tools will show it as being persistent anywhere, as the RunOnce key is no longer populated\n- On a clean shutdown, write back to the RunOnce key\n- Solution: Don't clean shutdown!\n\n## Stealth\n\nCamouflage against legitimate system files\n- Check digital signatures\n\nPretend to be Microsoft\n- Call your things stupid names, like KB138719.exe as a Windows update and put it in the updates folder... Nobody will ever suspect!\n\nInject into other processes\n- Nobody would ever expect explorer.exe\n\nReplace legitimate files\n- Legitimate + a little bit extra\n\nHiding from the operating system\n- Rootkit time!\n\nReplace things that don't get used often\n- Goodbye calculator... Until next time!\n\n## Packing and Obfuscation\n\nTake an application, then pack it inside a wrapper application\n- When the application is run, the inner application is unpacked into memory and executed\n\nWhen you try to inspect the application, you only see the wrapper\n- Makes static analysis harder\n- Can't look at the application and work out what it does\n\nBut ultimately, it needs to be unpacked at some point...\n\n# Malware Analysis\n\nBasic analysis\n- Basic static analysis\n\t- Analysing without running\n\t- Does it look suspicious?\n\t- What should it do?\n\t- Basic dynamic analysis\n\t- Analysing it in it's natural habitat\n\t- What does it do?\n\nAdvanced analysis\n- Advanced static analysis\n- Reverse engineering the code\n- Advanced dynamic analysis\n- Real-time debugging\n\n## Anti-Analysis\n\nDetect the presence of Virtualization\n- Behave differently\n- Don't behave at all!\n\nBut how does it work?\n- Look at the drivers\n- Look at the virtualized devices\n- Look for the virtualization support software\n- Look for analysis tools\n- Networking\n- Look for any other signs (low RAM, low hard drive size etc.)\n- Measure time access to System RAM, Caches,..\n\nWhat do they often do?\n- Self destruct!\n- DDoS\n\nCertain packers/wrappers - e.g. VMDetect\n- Make it easy for people to protect their malware against detection\n- However, make it easier for people to try to bypass a standard set of code\n\n## Basic Static Analysis\n\n- Examine the PE file itself\n- Signature: What was it compiled with?\n- Structure: Is it packed?\n- Sections: How is the file made up?\n- Metadata: What other information is there?\n- Certification: Has the file been digitally signed?\n- Imports: What does it use?\n- Exports: What does it make available?\n- Strings: What text does it contain?\n- Resources: What icons, menus, dialogs does it have?\n\n### Signature and Structure\n\n#### Detect it Easy\n- Helps you before you try to do static analysis o For example, working out how to unpack it, if you can\n- Uses signatures for PE information\n\n- Various PEInfo tools\n- Work out what an application is packed with\n- Work out what an application was compiled with\n- Other information about the application\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412212723.png)\n\n#### Examining the PE File\nThe Portable Executable (PE) file format is used by Windows executables, object code, and DLLs\n\nThe PE file format is a data structure that contains the information necessary for the Windows OS loader to manage the wrapped executable code\n\nThe information in the PE can provide valuable information to the malware analyst\n\nUse DependencyWalker and Peview to examine a PE file\n\n#### PE File Structure\n##### Header\nStores information about every library that will be loaded and every function that will be used by the program\n\n| Field | Information Revealed |\n| :--- | :--- |\n| Import | Functions from other libraries that are used by the malware |\n| Export | {:[\" Functions in the malware that are meant to be called by other \"],[\" programs or libraries \"]:} |\n| Time Data Stamp | Time when the program was compiled |\n| Sections | Names of sections in the file and their sizes on disk and in memory |\n| Subsystem | Indicates whether the program is a command-line or GUI application |\n| Resources | Strings, icons, menus, and other information included in the file |\n\n##### Sections\n`.text` - Contains the executable code\n\n`.rdata` - Holds read-only data that is globally accessible within the program\n\n`.data` - Stores global data accessed throughout the program\n\n`.rsrc` - Stores resources needed by the executable\n\n#### Packing and Obfuscation\nIs it packed?\n- Barely any imports\n- No useful strings\n- Non-standard names of sections\n- Section specifications\n- Section contains code\n- Section can be executed as code\n- Size differences\n- Two main functions\n\t- LoadLibrary\n\t- GetProcAddress\n- Other functions\n\t- Functions which work with virtual memory\n\t- Functions to work with libraries\n\nIs it obfuscated?\n- No useful names\n- Conventions not adhered to\n- No useful strings\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412213223.png)\n\n##### If it is packed\nYou'll want to unpack it first before doing analysis!\n\nVarious different packers\n\nSome can be easily unpacked\n- UPX: Automatic pack and unpack utility\n\nSome are harder to unpack\n- Manually extract the inner application\n- Follow the tail jump\n\nSome are nearly impossible to unpack\n- Attempt to dump the process from memory\n\n### Sections and Metadata\n\n#### PEStudio\nAllows us to see what sections an executable has\n\nAllows us to take a peek inside\n\nGives lots of other very useful information!\n\nInspects the PE and information inside, including strings and imports and exports Tells you if there's anything that is likely to be suspicious\n\nHelps filter out the legitimate from the illegitimate\n\nEasier to determine if something is suspicious!\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412213434.png)\n\n### Metadata and Ceritfication\n\nHas the file got version information\n\nHas the file been digitally signed\n\nCommon indicators as to whether is it legitimate\n\n![|800](notes/Software%20Security/Images/Pasted%20image%2020230412213536.png)\n\n### Imports and Exports\n\n#### Dependency Walker\n**Imports**: What functions does the malware use\n- Only includes those directly accessed\n\n**Exports**: What functions does the malware make available - when the malware isn't a single file\n- But they probably won't be helpfully named\n\nDependency walker breaks this down for us\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412213646.png)\n\n#### Common DLLs\n| DLL | Description |\n| :---: | :---: |\n| Kernel32.dll | This is a very common DLL that contains core functionality, such as access and manipulation of memory, files, and hardware. |\n| Advapi32.dll | This DLL provides access to advanced core Windows components such as the Service Manager and Registry. |\n| User32.dll | This DLL contains all the user-interface components, such as buttons, scroll bars, and components for controlling and responding to user actions. |\n| Gdi32.dll | This DLL contains functions for displaying and manipulating graphics. |\n| Ntdll.dll | This DLL is the interface to the Windows kernel. Executables generally do not import this file directly, although it is always imported indirectly by , Kernel32. dll. If an executable imports this file, it means that the author intended to use functionality not normally available to Windows programs. Some , tasks, such as hiding functionality or manipulating processes, will use this interface. |\n| WSock32.dll and Ws2_32.dll | These are networking DLLs. A program that accesses either of these most likely connects to a network or performs network-related tasks. |\n| Wininet.dll | This DLL contains higher-level networking functions that implement protocols such as FTP, HTTP, and NTP. |\n\n#### Exmaples of Imported Functions\n`OpenProcess`, `GetCurrentProcess`, and `GetProcessHeap`\n- open and manipulate processes\n\n`ReadFile`, `CreateFile`, and `WriteFile`\n- open and manipulate files\n\n`FindFirstFile` and `FindNextFile`\n-  search through directories\n\n### Strings\nSimple tool - find all the strings that are accessible in the file\n\nTells you functions that it calls\n\nTells you domains that it tries to connect to\n\nTells you information that may be displayed in the UI Sometimes contains fun messages from the malware authors!\n\n### Resources\n\n#### Resource Hacker\nView the sections inside the aplication\n\nView the resources that are associated with it\n\nInspect any images, icons, dialogs and other resources inside\n\nIf the application has a GUI, gives you an idea as to what it does\n\n## Advanced Static Analysis\n\nWhat is it doing, in what order, and how and when\n\n### IDA\n\nTaking the malware on the disk in binary form and disassembling it into assembly code\n- We can then explore the assembly code to learn what it is doing\n- All still without running it!\n\nWe have to work with the assembly instructions\n- The \"human readable\" version of machine code\n- Low level\n\t- Registers, memory, CPU instructions\n-  It's not easy!\n\t- But we don't need to understand everything, just the bits that are most interesting to us\n\t- Know when to give up!\n\n#### Graph and Text Mode\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412214554.png)\n\n#### Functions\nShows each function, length and flags\n- L = Library functions\n\nSortable\n- Large functions usually more important\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230412214649.png)\n\n#### Names Window\nEvery address with a name\n- Functions, named code, named data and strings\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412214734.png)\n\n#### Strings\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412214801.png)\n\n#### Imports and Exports\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412214823.png)\n\n#### Structures\nAll active data structures\n- Hover to see yellow pop up window\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230412214856.png)\n\n#### Function Call\nParameters pushed onto stack\n\nCall to start function\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230412214932.png)\n\n#### Jump to Location\nPress 'G'\nCan jump to address or named location\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412215010.png)\n\n#### Function and Argument Recognition\nIDA identifies a function, names it and also names the local variables\n\nIt is not always correct\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230412215058.png)\n\n","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Software-Security/Week-6/Malware-and-Memory-Forensics":{"title":"Malware and Memory Forensics","content":"# Memory Forensics\n\nMemory Forensics is the process of acquiring an analyzing physical memory (Called System Memory or RAM) in order to find artifacts and evidence\n\nFor complete analysis, memory forensics is performed in conjunction with disk and network forensics\n\nFileless malware != memory-only Malware\n- Memory-Only doesn't survive reboots (but may be re-infected over the network, etc)\n- Fileless can persist in the registry or some SPI/EEPROM storage in the system\n\nWhat can be Recovered\n- Disk Encryption Keys\n- Loaded Kernel Drivers\n- Malware Created Artifacts\n- Application information o (URL history, chat logs, emails)\n- Running Processes\n- Active Network Connections\n- A lot more...\n\n| Function | Sysinternal | Volatility |\n| :--- | :--- | :--- |\n| Running Processes | x | x |\n| Terminated Processes |  | x |\n| Hidden Processes |  | x |\n| Open Handles | x | x |\n| Network Connections and Sockets | x | x |\n| Kernel Modules |  | x |\n| Process dumps | x | x |\n| strings | x |  |\n| Logged On Users | x | x |\n| Command shell history |  | x |\n| MFT \u0026 MBR analysis |  | x |\n| Cached files and registry |  | x |\n| Rootkits and API hooks | Limited | Robust |\n\n## Why is this Important\n\nCan recover the entire state of the operating system\n- Applications\n\nCan also uncover entire historical information\n- E.g. processes that executed and terminated in the past\n\nSome of the data recovered from memory is never written to disk or the network\n- Browser in private mode\n\nAdvanced and Stealthy malware operates only in memoy\n\nNote: You can still run all the Malware and Incident Response tools, However, you run them after collecting the memory\n\n## Memory Forensics\n\nOS can see running processes\n\nMemory forensics can see new and old data\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230412220117.png)\n\n## Memory Analysis\n\n1. Lost when host is rebooted or shut down (It is called volatile for a reason)\n2. Not as structured as filesystems\n3. Dependent on the operating system behavior\n4. Sometimes data is not available in memory (paged to swap disk)\n\n### Analysis Techniques\nUnstructured\n- Tools: Strings, less, regexp\n- Search: passwords, logs, domains\n- Example: strings mem.ram | grep -i password\n\nStructured\n- Reconstruct operating system abstractions (Process list, process heap, process stack)\n- Interpret data in System memory just like tools on the operating system (ls, ps, ..)\n\nFile Craving\n- Office files, images, pictures, archives\n\n![|400](notes/Software%20Security/Images/Pasted%20image%2020230412220534.png)\n\n### OS Internals\nData Structures are used by the $\\mathrm{OS}$ to store data in an organized fashion\n- Each data structure has delete, insert, modify operation\n\nWe need the knowledge of the data structure in order to model memory analysis offline\n\nArray\n- Contiguous elements\n\nStrings\n- Unicode (2 bytes each)\n- NULL Terminated\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230412220705.png)\n\n### Doubly Linked List\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230412220738.png)\n\n### Memory Management\nPhysical memory refers to all slots that are physically present on RAM\n\nCovers and track all allocation of these physical addresses\n\nCover setting up Virtual Addresses\n\nWhen pages are requested but physical memory is used, the OS uses a secondary storage to make a place in the physical memory\n- This can affect the analysis if we are looking at the memory only\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230412220833.png)\n\n### Page Files/Swap Disk\nNon-Pages memory can never be swapped\n- Some Kernel Data\n\nAnything in paged memory is a candidate\n\nRegistry keys and PE headers\n\nFrequently accessed pages\n\nWhen a file is mapped into process, the virtual memory is reserved but physical pages are not allocated\n- Allocation only on first access\n\nSeveral acquisition tools can collect the pagefiles, but all tools are required to run on the same machine\n\n### Intel/ADM Architecture\nVirtual Memory\n- X86\n\t- 32bit virtual \\\u0026 physical addresses - 4GB\n\t- 2GB user and 2GB kernel\n- X86 with PAE\n\t- 32 bit virtual, 36 bit physical address - 64GB\n- X86_64\n\t- 64 bit virtual, 48bit physical address - 256TB\n\t- User mode - 8TB\n\n### Address Translation\nAt the end of the day, we will be analyzing raw data.\n- We will find Virtual Addresses in memory and we will need to find the matching physical address\n\nIn a running system, the CPU translate the virtual address to physical address to access the memory (RAM)\nWhat does it mean for a memory forensics tool?\n- It must implement the same address translation algorithm as the CPU\n\n### Memory Aquisition\nFirst step in the memory analysis process is to acquire reliable data \n- If this step is not right, analysis won't be possible\n\nAcquisition means acquiring data from the Volatile memory (RAM) to non-volatile storage\n\nWhen to acquire the data\n- Not during time of heavy execution and massive changes.\n- You might want to avoid:\n\t- Antivirus scan\n\t- System backup\n- You might want to stop your interactions with the machine until the memory acquisition is done\n\n### Acquisition Methods\nIf your target is a virtual machine\n- Use the hypervisor\n\t- Pause, Snapshot, Continue Running\n- Qemu has the option to move to shell mode and perform memory acquisition\n- You might want to introspect the machine\n- Valid if you have the right access\n- Disadvantage: might be slow\n\nIf machine is not running\n- Collect dump files, hibernation files, filepage\n\nIf machine is locked/no admin access\n- Hardware based approaches\n\n### Hardware Acquisition Method\nFirewire\n- Old protocol that works only on $\u003c4 \\mathrm{~GB}$\n- Not in use anymore\n\nPCI/USB-C/Thunerbold\n- Commercial options are very expensive\n- Some experimental platform\n- PCILeech (Open Source)\n- PCIe Gen 5 operates at 32Gbps for $\\mathrm{x} 1-\u003e256 \\mathrm{Gbps}$ for x8\n\n### Hardware Challenges\nNeed to have hardware device installed in advance\n\nFirewire DMA is disabled in new OS (Mac, Windows 8)\n\nVT-D enable -\u003e IOMMU\n- See IO-Trust for solution (Atamli et al., 2019)\n\n### What could go wrong with the Acquisition\n- Change CPU state (tampering with the evidence)\n\t- Caches, TLB, registers\n- Some ranges (e.g. PCIE regions) can cause Kernel Panic\n- Virtual Secure Mode is not accessible\n- Performance is impacted due to many cache invalidations\n- Malware spreading to USB?\n- Malware capture your login keystrokes\n\t- Make sure you are disconnected from the network\n\n### Acquistion Tools\n- Lime - Linux Memory Extractor\n- Winpmem\n\n### Volatility\nOpen Source Forensics Framework\n- https://github.com/volatilityfoundation/volatility\n\nPlugins to analyze Windows, Linux, macOS memory dumps\n\nUsed by Forensics Investigators and Researchers\n\nBasis for Virtual Machine Introspection\n- Libvmi\n\nCompile many published malware research\n\nYearly competition of best new plugins with cash prices\n\nCan be used as a library or interactive mode using the shell\n\n#### Framework\n- Cohesive framework\n\t- 86 PAE, non-PAE) and x64 windows 10\n\t- x86/x64 linux/mac\n\t- 32 bit android\n- Open Source, GNU GPLv2\n- Python\n\t- Uses distorm3, pycrypto, yara\n- Support for $10+$ memory dumps/process dump\n\t- Raw, crash, hiber,Vmware, virtualbox, qemu, hpak, lime, ewf, firewire, hyper-v, xen, kvm\n- Fast\n\t- For offline forensics research\n\t- Do not confuse this with a debugger!\n\n#### Volatility Profiles\nSets of profiles are already available\n\nMight need to make your own profile\n- Will be needed when working with Linux\n\n```bash\n$ python vol.py --info\n```\n\n| Profiles| |\n| :---: | :---: |\n| VistaSP0x64 - | - A Profile for Windows Vista SP0 x64 |\n| VistaSP0x86 - | - A Profile for Windows Vista SP0 x86 |\n| VistaSP1x64 - | - A Profile for Windows Vista SP1 x64 |\n| VistaSP1x86 - | - A Profile for Windows Vista SP1 x86 |\n| Win 10 xx64 | A Profile for Windows 10 xx64 |\n| Win10x64_10240_17770 | - A Profile for Windows 10 x64 (10.0.10240.17770 / 2018-02-10) |\n| Win10x64-10586 | - A Profile for Windows 10 x64 (10.0.10586.306 / 2016-04-23) |\n| Win 10 xx6414393 | - A Profile for Windows 10 x64 (10.0.14393.0 / 2016-07-16) |\n| Win10x64_15063 | - A Profile for Windows 10 x64 (10.0.15063.0 / 2017-04-04) |\n| Win10x64-16299 | - A Profile for Windows 10 x64 (10.0.16299.0 / 2017-09-22) |\n| Win10x64 17134 | - A Profile for Windows 10 x64 (10.0.17134.1 / 2018-04-11) |\n| Win10x64_17763 | - A Profile for Windows 10 xx64 (10.0.17763.0 / 2018-10-12) |\n| Win10x64- 18362 | - A Profile for Windows 10 x64 (10.0.18362.0 / 2019-04-23) |\n| Win10x86 14393 | - A Profile for Windows 10 x86 (10.0.14393.0 / 2016-07-16) |\n| Win10x86 15063 | - A Profile for Windows 10 x86 (10.0.15063.0 / 2017-04-04) |\n| Win2008R2SP0x64 | - A Profile for Windows 2008 R2 SPO x64 |\n\n#### Volatility Plugins\n\n```bash\n$ volatility.py --h\n```\n\n| Plugin | |\n|------------------------|-------------------------------------------------------------------------------|\n| atoms          |  - Print session and window station atom tables                       |\n|  atomscan     | - Pool scanner for atom tables                                       |\n|  bigpools     | - Dump the big page pools using BigPagePoolScanner                   |\n|  bioskbd      | - Reads the keyboard buffer from Real Mode memory                    |\n|  callback    | - Print system-wide notification routines                            |\n|  clipboar    | - Extract the contents of the windows clipboard                      |\n|  cmdline      | - Display process command-line arguments                             |\n|  cmdscan      | - Extract command history by scanning for COMMAND_HISTORY           |\n|  connections   | - Print list of open connections [Windows XP and 2003 Only]          |\n|  connscan    | - Pool scanner for tcp connections                                   |\n|  consoles    | - Extract command history by scanning for_CONSOLE_INFORMATION        |\n|  crashinfo   | - Dump crash-dump information                                        |\n|  deskscan    | - Poolscaner for tagDESKTOP (desktops)                               |\n|  devicetree   | - Show device tree                                                   |\n|  dlldump      | - Dump DLLs from a process address space                             |\n|  dlllist      | - Print list of loaded dlls for each process                         |\n|  driverirp    | - Driver IRP hook detection                                          |\n|  drivermodule | - Associate driver objects to kernel modules                         |\n|  driverscan  | - Pool scanner for driver objects                                    |\n|  dumpcerts   | - Dump RSA private and public SSL keys                               |\n|  dumpfiles   | - Extract memory mapped and cached files                             |\n|  editbox    | - Displays information about Edit controls. (Listbox experimental.)  |\n|  eventhooks   | - Print details on windows event hooks                               |\n|  filescan     | - Pool scanner for file objects                                      |\n\n```bash\n$ volatility.py -f memory.raw -profile=PROFILE PLUGIN [OPTIONS]\n```\n\n```bash\n# Avilable plugins and operation. If you add new plugin it‚Äôs suffice to add it to the right directory\n$ volatility.py -h\n```\n\n```bash\n# provide information on the plugin and how its used\n$ volatility.py \u003cplugin\u003e -h\n```\n\n```bash\n# provide general information on the profiles, address spaces\n$ volatility.py --info\n```\n\n#### If you don't know the Profile\nUse KDBG scan\n\n```bash\nvol/volatility$ python2.7 vol.py -f ./mem_dumps/xp-laptop-2005-06-25.img kdbgscan\n```\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230413003509.png)\n\n#### Processes\n\n```bash\nvol/volatility$ python2.7 vol.py -f ./mem_dumps/xp-laptop-2005-06-25.img pslist\n```\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230413004147.png)\n\n### Windows Object Manager\nStructure vs Object?\n- A structure becomes an object when Windows appends various headers to the start of the structure to manage services such as naming, access control, and reference counts\n\nFiles, drivers, mutexes, processes, threads, events\n\nEst. 45 object types on Windows 7\n\nAllocation/deallocation of objects\n\nAccess to objects\n\n| Object Type | Structure | Description |\n| :--- | :--- | :--- |\n| Process | \\_EEPROCESS | A process |\n| Thread | \\_ETHREAD | A thread |\n| File | \\_FILE_OBJECT | An open instance of a file |\n| Key | \\_CM_KEY_BODY | An open instance of a registry key |\n| Mutant | \\_KMUTANT | A mutex object |\n| Driver | \\_DRIVER_OBJECT | A driver object |\n| Token | \\_TOKEN | An object that stores security/ access controls  |\n| SymbolicLink | \\_OBJECT_SYMBOLIC_LINK | Alliases (driver letters etc) |\n\n#### X86 Object Format\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230413004653.png)\n\n#### Object Header (Pre Windows 7)\n`... dt (‚Äú_OBJECT_HEADER‚Äù)`\n`‚Äò_OBJECT HEADER‚Äô (32 bytes)`\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230413004805.png)\n\n#### Object Types\nDefine common properties for objects of a particular type\n- Name (\"Process\")\n- Counters (TotalNumberOfObjects)\n- Default access rights\n- Initialisation\n\t- What type of memory (paged, non-paged)\n- \\_OBJECT_TYPE.Key-4 byte identifier\n\t- 4 ASCII characters\n\t- Useful for finding objects in memory\nThese tell us where to look (pages or non-paged memory) and what to look for (4 byte \"tag\")\n\n#### Kernel Pool Allocation\nUser APIs lead to creation of kernel objects\n- `CreateFile`, `CreateMutex`...\n\nObjects are allocated from system memory pools\n\n`ObCreateObject()` calls `ExAllocatePoolWithtag()`\n\nPrepends `_POOL_HEADER` to the start of the allocation\n\nIf all objects exist in pools, and at the base of every pool allocation is a `_POOL_HEADER`. If we can \"fingerprint\" the `_POOL_HEADER`, it would give us a more reliable way to find all objects\n\n#### Object within a Pool\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230413010242.png)\n\n#### Pool Headers\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230413010337.png)\n\n#### Scanning for Objects in Pools\nAre the objects in paged or non-paged memory?\n- Taken from `_OBJECT_TYPE.TypeInfo.PoolType`\n\nWhat is the pool tag?\n- Taken from `_OBJECT_TYPE.Key`\n- May be protected (MSB)\n\nWhat size are the allocations?\n- Minimum can be taken from Profile.get_obj_size0 which returns the Vtype structure size\n- BlockSize \\* pool alignment $==$ total size of allocation\n\t- 8 bytes on $x 86,16$ bytes on $x 64$\n\n#### Volatility Scanning Criteria\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230413010813.png)\n\n#### Why Pool Tagging\n- Windows tags pools for debugging purposes\n- Memory management statistcs\n- Evaluating the pool tag usage can tell you what percent of memory is tied to a particular $\\operatorname{tag}$\n- You can then track it back to a driver (and perhaps a function within the driver)\n- We leverage what Microsoft built-in for identifying memory leaks to strengthen memory forensics\n\n##### Disadvantages\n- Pool tags are not OS essential, this they can be modified without causing instability\n- Pools can be e-used for similarly sized or smaller allocations (thus evidence of some types may be short-lived)\n\t- Last in/ first out schedule\n- Decoys / fake objects\n\t- As a result of being non-essential, they can be faked\n\n#### Processes (`_EPROCESS`)\n- Container for resources used when executing a program\n- Private virtual address space (DTB) except shared memory and most of kernel memory\n- Executable instructions (PE, DLLs)\n- Open handles\n- Security context (SIDs, privileges)\n- Thread(s) of execution\n\n#### Crticial System Processes\n- `Isass.exe` -local authority (password changes, creates access tokens, etc) System container for threads that run in kernel mode\n- `smss.exe` - session manager subsystem\n- `services.exe`- service control manager\n- `csrss.exe` - client/server runtime subsystem (creation of processes and threads, console windows, etc)\n- `winlogon.exe` - interactive logon manager\n- `explorer.exe` - Windows explorer\n- `svchost.exe` - shared service host process\n\n#### Process Relationships\nRed flags:\n- `cmd.exe` as child of browsers, office applications, email clients, etc.\n- `svchost.exe`, with a parent other than services.exe or that aren't running a service (xref with svscan)\n- Network connections initiated by `msiexec.exe` (plugx)\n\n#### `PsActiveProcessHead`\nDoubly-linked list head pointed to by KDBG\n\nAll live APIs reference this list (indirectly)\n- `NtQuerySystemInformation()` with `SystemInformationProcess` class\n- `CreateToolhelp32Snapshot()` with `Process32First()`/`Process32Next()`\n- WMI `Win32_Process` class\n- `EnumProcesses()` from `psapi.dll`\n\nKernel mode process list?\n- `PsGetCurrentProcess()`\n- `Nt!PsInitialSystemProcess`\n\nPsActiveProcessHead may contain terminated processes\n- Can be terminated and stull in the list\n- Objects aren't deleted/removed until the reference count reaches zero\n- Parent process forgets to close its handle\n\nIndicators of active vs unactive\n- Exit time\n- Number of threads (must be $\u003e0$ )\n- Number of handles (must be $\u003e0$ )\n\n#### Hiding Processes with DKOM\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230413011753.png)\n\n##### User Mode\n- On older systems you could do this with the proper privileges and `ZwSystemDebugControl` (XP/2003 only)\n- Or by mapping $\\backslash$ Device $\\backslash$ PhysicalMemory on systems that allow it (XP/2003 only)\n- Find one process, walk the list to your target process\n- Overwrite the Flink and Blink members of `_LIST_ENTRY`\n\n##### Kernel Mode\n- Loading a driver to access the kernel mode structures\n- Driver must be signed on 64-bit systems\n- Recent Windows 10: Microsoft must cross-sign the driver (in addition to the CA)\n- Patchguard protection on newer systems\n\n\n#### Process Object Scanning\nIn the event of DKOM, we need a way to still find the process objects\n- Provided no further tampering has occurred\n\nCan find terminated processes or residual (left-over from reboot, etc)\n- This is why we use psscan most often in modern systems\n\nMethods\n- Dispatcher header\n- Pool header (the only one currently in use:psscan)\n- Robust scanning\n\n##### Scanning with `psscan`\n\n```bash\n/vol/volatility$ python2.7 vol.py -f ./mem_dumps/dkom.mem psscan\n```\n\n![|600](notes/Software%20Security/Images/Pasted%20image%2020230413012204.png)\n\n#### Alternate Process Listings\nIf malware hides in multiple ways, we need multiple ways to find them\n- PsActiveProcessHead traversal\n- Pool tag scanning of processes\n- Pool tag scanning for threads\n\t- Even hidden processes need at least one thread of execution\n- PsCidTable\n- Csrss.exe handle table\n- Win32k subsystem structures\n\n#### Scanning for Threads\n- Windows XP and 2003\n\t- `_ETHREAD.ThreadsProcess` (PEPROCESS)\n- Windows Vista, 2008 and 7\n\t- `_ETHREAD.Tcb.Process` (PEPROCESS)\n- All versions of Windows\n\t- `_ETHREAD.Cid.UniqueProcess` (unit)\n- Abstracted with inheritance in Volatilit's API\n- `_ETHREAD.owning_process()`\n- Attacks: thread pool header manipulation\n\n#### PsCidTable\nSpecial handle table (`_HANDLE_TABLE`) for tracking processes and threads\n\nPointed to by `KDBG.PspCidTable`, resides in kernel memory\n\nAttacks: manipulated by FuTo to hide from Backlight and IceSword\n\n#### `Csrss.exe`\nClient-server runtime subsystem\n\nInvolved in the creation of every process and thread - What happens if a `csrss.exe` craches?\n\nMaintain an open handle to all objects during their lifetime\n\nAttacks: given the proper permissions, it is possible to close the handles","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Theory-of-Computing/Theory-of-Computing":{"title":"Theory of Computing","content":"\n\u003ciframe src=\"https://drive.google.com/file/d/1qcAwslNpw-0xJEF67JOzOc6mjJ09Z0cN/preview\" width=\"640\" height=\"780\" allow=\"autoplay\"\u003e\u003c/iframe\u003e","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/Web-and-Cloud-Based-Security/Web-and-Cloud-Based-Security":{"title":"Web and Cloud Based Security","content":"# Dockers\n## Setting up a new Project\nSuitable for backend\n- nodeJS\n- express API\n\nDB\n- MongoDB\n\nFrontend\n- Apache\n\n## Docker vs Hypervisors\nHypervisors are mostly used to virtualise development\n\nDockers are mostly used to virtualise deployment\n\nDockers are small linux code\n- They require some kind of operating system which can support a docker daemon\n\nOn top of this are the containers, which are a combination of the application and the libraries that the application needs\n\n![|400](https://remnote-user-data.s3.amazonaws.com/jk2VlZNAUThsyyAyXhI4TN1x9VSB3QiEXneoUc1GG-sDZBhMWTAsbfRV_p2WPc79Ov09QaWvjjKsosZGJz6K3yMnfxaXlN0fsCnvxI_RuWRmyEtthEeEzLy-QUPiRbdc.png) \n\n## How Dockers Work\nBoth containers are run for frontend and backend\n\n![|400](https://remnote-user-data.s3.amazonaws.com/sh7wDQ2GXuv-6t8yK3HMvqaDvums11KEpP3SJI-h1ksrWHlQ8sx75hoNDhgEDWwNKSzbcGwpV6L55-L04iYz8UpbZT93yuirhwqt3gvLi9NCDfvTztxW2kW7kQ5R8Zb_.png) \n\n## Container Contains\n- Networking\n- Processes\n- Dependencies\n- Code\n- Config\n \n## Service Delivery Platform\n\n![|400](https://remnote-user-data.s3.amazonaws.com/MTphwWV8AuHmylEz2HsRkq6P2ySy6mK7dVJthH6CGwQupb-N4UKqPRiDJXRzwb4Oc2OU-dgkRRjMIF2uso8u6IZoh5JPycE_alZKGdwEHzMNn7d7zHK9ByX6EKXC6t01.png) \n\nThe orchestration helps manage a large number of docker containers at once\n \n## With One Container\n- Help dockers discover each other and other services\n- Allocate resources\n- You can start, stop and restart containers if they fail\n \n## Docker Vulnerabilities\n### Software Vulnerability\nContainer Escape - The attacker gains full control of the host and can try to attack resources in the internal network segment\n- This can allow the attacker to deploy a malicious container inside the production environment\n\n# Yet More Vulnerabilities\n## The Basics of Mapping\nWhen you have an application to test, you need to understand it\n- Where does it take user input\n- What features are present\n- What pages does it have\n- What forms does it have\n \n## Different Forms of Input\n- URL Parameter - User-filled parameter that is part of the URL itself but not a GET parameter\n\t- e.g. /groups/studentscoutsandguides/\n- GET Parameter - After the ? in the URL, a key - value pair\n\t- e.g. /search?q=Scouts\n- POST Data - Form fields which are submitted with name - value pairs\n\n## Manipulating EXIF\nexiftool allows you to manipulate EXIF data in images\n- Allows us to embed code in an image while leaving it a valid image\n \n## Cross-Site Request Forgery\nTricking your browser into doing something you didn't intend to do\n\nYour browser sends your session whenever it makes a request to that website\n- Even if the request comes from another website\n\nWhat you're looking for\n- The absence of CSRF tokens in forms\n- Insecure GET actions\n- GET-based actions\n- Unprotected forms\n\n### Same Site Cookie Policy\nAllows you to decide when setting a cookie whether it should be sent when the request originates from another site\n\nBut not entirely\n- The Lax default still allows GET requests from following a link\n\nMeans CSRF is not a prominent threat\n\nThe new standard is that the default is restricted\n\nMade the majority of CSRF disappear \n\n## Server-Side Request Forgery\nThe server may be on the inside of the network\n\nThe server can access internal resources\n\nGetting the server to make a request\n- Or something that connects to another site\n- For example, via an API call\n \n## Internal Information Exposure\nError reporting, debug information, unexpected behaviours\n\nHow does the application and framework handle error reporting?\n\nHow does the application handle unexpected errors and faults?\n\nYou are trying to create those faults, situations and errors\n \n## Information leakage\nDoing something unexpected can lead to details about the server or database\n\nThe attacker needs information\n- The more information, the easier the attack\n\nNVD contains all the vulnerabilities for all the different software versions\n \n## Finding Leftover Files\nLook for variations\n\nLook for common files with common names\n- e.g. testing, phpinfo, info, debug\n \n## Parameter Manipulation\nWhat inputs are you able to find\n\nWhat types are you able to find\n\nWhat happens when you give invalid types\n\nWhat happens when you miss out information\n\nWhat happens when you give invalid information\n\nClient-side validation is insufficient\n- A client can send any response it wants to the server, regardless of client-side validation\n### Techniques\n- Leaving out input all together\n- Adding decimals\n- Out of range\n- Executing commands\n- Adding new parameters\n- Overflowing the input\n- Injection\n- Different data types\n\n## Application Logic\nSimilar to Parameter manipulation\n\nBreaking the application logic\n\nLook for\n- Multiple-step processes\n- User input processing, not just queried/stored\n \n## Out of Date Software\nRunning old software that has vulnerabilities\n\nLook for\n- Out of date components or underlying software\n- Out of date software\n- Signs of the software being used\n- Signs of the version being used\n- Vulnerabilities in the version that can be exploited remotely\n\n### National Vulnerability Database\n- Database of known vulnerabilities in software\n- Searchable\n- CVE Numbers - Unique identifiers for vulnerabilities\n \n## File Inclusion\n### Good file to aim for\npasswd contains local usernames\n\nOn Linux systems calling ../ at the root directory does nothing so you can add as many as you want\n\nAre there any places where a file is dynamically included by the URL\n\nLooking for\n- Places where files from the file system are included, based on user input\n\nCan you change what is included to something you shouldn't\n\nLook in 'Network' section of developer panel to find included external resources\n \n## Open Redirects\nCan recognise a redirect by looking for 3xx status codes\n\nCan recognise a redirect with input by looking at the request\n\nLook for redirects in the application which pass the redirect through the URL\n \n \n# Virtual Machines\n## Virtualization Types\n- Hardware virtualization\n- Server virtualization\n- Storage virtualization\n- Software virtualization\n- OS virtualization\n \n## Virtualization Tools\n\n![|400](https://remnote-user-data.s3.amazonaws.com/-_lLtrTjN9lETsTbakNKWtYSPdazwUaf3L-o8uQNGw0Qo02HAnA6aDTmHP-TQ9DS6WgEX3FEWJs1uGxf7aV7qnQvfBW3MxLweN1lvfEBGaohGDDFWRJ_tO12fTQROPBl.png) \n \n## Hypervisors\n\n![|400](https://remnote-user-data.s3.amazonaws.com/2QydkWvpDvayTOH8---wy7_akZfe3wHBtcTGkgWYbKW8crgMifOrCwwJE9c_f_odjOXsU3Gfn6aOqzafBZ7HlDwcux4L6ZcdCyOws2zNw1zuMBneN7FF_IPpMYZejgYg.png)\n\n![|400](https://remnote-user-data.s3.amazonaws.com/BS7vqjvMrILRv8H3-3mSRcP8Xo02crzCoXGcCiYAeBOG-0EKGAxuRzDviwB3aa-SDYLGOxInxDTqr9-3ZuRdIc-EiLj6i0lcLBSUPzbTWx80EK8XSLRDAZFHcYeAHklU.png)\n\nCapable hardware can virtualize many instances at once\n\nHypervisor virtualizes the hardware to install an OS and then an application\n \n## Workstation Hypervisors\nVMWare\n- Commercial\nVirtualBox\n- Open Source\n \n## Enterprise Hypervisors\nSuch as VMWare\n\nWill often provide GUI for additional support\n\n![|400](https://remnote-user-data.s3.amazonaws.com/6ug83LICKb31E47eU4zSFxGPrwZZrsmYTrxvy_QNxNzLn991nczBgOkL2D8BRK42Np-Xjc5PNk1WckpjbwKm1JMtbKySx8rBe90hY2e5RK9uDxvRKGqaTueXFvVvg6BH.png) \n\n## Hypervisors - Pass-Through\n\n![|400](https://remnote-user-data.s3.amazonaws.com/f26BggGHvfAHHKb2tUdjbOK_P5qO_sOQNs7eoIqbcQhi4snTxnMSHYbzCwzbQ3Ff1zmcjNcCrFxTy60CNx2qYN-ChUXYcsdOeEPOo0WZpV9PFwdnoP_efFnxixfsvnl9.png) \n\nYou can pass through actual hardware to a virtual machine\n- e.g. A GPU\n \n## Virtual Machine Vulnerabilities\n- Virtual Machine Escape - The process of a program breaking out of a virtual machine and interacting with the host operating system\n- Hyperjacking - Involves installing a malicious, fake hypervisor that can manage the entire server system\n- Meltdown - Instead of attacking the hypervisor, you go from one instance of a virtual machine into another, bypassing the hypervisor and getting into the hardware\n\t- Breaks the most fundamental isolation between user applications and the operating system. The attack allows a program to access the memory of other programs on the operating system\n- Spectre - Breaks the isolation between different applications. Allows an attacker to trick error-free programs, which follow best practises, into leaking information. Safety checks of these best practises increase the attack surface and may make applications more susceptible to Spectre\n\n# Infrastructure as Code\n \n## DevOps\n### Development\n- Developers\n- Quality assurance\n- Front end\n\n### Operations\n- Database admins\n- Network admins\n- System admins\n \n## Combining Operations and Development\n\n![|400](https://remnote-user-data.s3.amazonaws.com/2h1mhM8VRD5EfzUCNTgpYGRwmMLLAKAZrhqxBwGcqGXdNApgR4b11LhES7glKoLMDqPwkp3TyyEJbkYfPkKViPoKT_-hoOYtAb651CUz4_vTV5R85lDhvN2qylKLwDKU.png) \n\n## Infrastructure Creation\n### Automatically Provisioned vs Manually Provisioned \nReduction in adding new bugs vs Introduces new bugs \n\nYou can change it easily vs You cannot change it easily \n\nInfrastructure can be relocated vs Infrastructure can not be relocated \n\nInfrastructure is written using a high-level programming language vs Infrastructure is written using an operations manual \n\nOne employee can manage a big infrastructure vs A team may be needed to manage a small infrastructure \n\nInfrastructure is designed using code vs Infrastructure is designed using graphs \n\nInfrastructure can be tested and review like code vs Infrastructure can be tested and reviewed  after deployment \n\nDevelopment speed increases vs Slows development speed \n\nYou can repeat it exactly vs You cannot repeat it exactly \n\n\nArtifact - What gets versioned, tested and deployed\n\nProcedures (ala Imperative) -  An approach where the commands to produce a desired state are defined and executed \n- e.g. Bash script\n\nFunctions (aka Declarative) - Where you define the desired state and the tool conforms the system to the model of your desired state\n- e.g. SQL queries, makefiles\n \n## Service Delivery Platform\n### Application\n\n![|400](https://remnote-user-data.s3.amazonaws.com/-3NxAkOn7x79xIH8WiSmbj-y28Esakir9-y_892RZRu84KNCrwzsD7T_5ZL_7SFxCx_xTNW7Skb5uZvAXKf4qmWquorgQlw6c7RsrESJNojTMDwgFniT3LZdC6SQSImT.png) \n\nTypical application development scenario\n\n### Infrastructure\n\n![|400](https://remnote-user-data.s3.amazonaws.com/bZ4xNYF-AXj5gOI2kz3NZ_8ACjbXAmV6aX_KCMH3HX44jPGE5cW0EnS5Z_vb9Np2PpLU6iVKCObSFYJtiBkMs3Z4sJ9-aRQ7C48c_BxgCZ0FzHKj7OcCcjILRL2e3F1t.png)\n\n### Tieing both Application and Infrastructure together\n\n![|400](https://remnote-user-data.s3.amazonaws.com/1XQhcVPfRpmPgNz3dn7JsqFHJO46OxW93cgcvR8G57Igp-PjPbO57A_yoa9LLRsrr-YGc8Z09W-CWqkEitt_09N8FfOMC2gQINeVrNEoDlh_fSEHYb5woKVex8lnYLEE.png)\n\n## Provision, Deployment, Orchestration and CM\nProvisioning - The process of making a server ready for operation, including hardware, OS, system services and network connectivity\n\nDeployment - The process of automatically deploying and upgrading applications on a server\n\nOrchestration - The act of performing coordinated operations across multiple systems. Initial provisioning is done once and then the system runs for a long time, being able to control and upgrade a running system is critical\n\nConfiguration Management (CM) - The act of maintaining and upgrading application and application dependencies\n\n![|400](https://remnote-user-data.s3.amazonaws.com/mUIgQUjTYUwMnHh3e7R-wAwBTiLmv22ssaPRKIbioCFp05i1m8TB0TePHtpfpxtX4oGzb4esfSj16OOPfhvHSZDFGw1fX5eeMX7TLBH4MtE-YHe5yLcZNqQosn14iDej.png) \n\n# Cloud Services\n\n## Security By Design\nThe implementation of multiple security measures to protect the most valuable resource on your network\n\n### Involves\n1. Network\n2. Code\n3. People\n \n## **Security Myths**\n1. The cloud is secure by design\n2. The cloud is unsecure by design\n3. Someone else's platform means its someone else's problem\n \n## **Security Terms**\n1. Monitoring practises‚ÜîStorage analytics and security logs\n2. Identify/Access control‚ÜîRBAC, MFA and password policies\n3. Network security‚ÜîVPNs and network security groups\n4. Store security‚ÜîData encryption, client-side encryption and key vaults\n \n## **On Premises Computing vs. Cloud Computing**\n1. Provisions‚ÜíManually provisioned vs. Self-provisioned\n2. Hardware‚ÜíDedicated hardware vs. Shared hardware\n3. Capacity‚ÜíFixed capacity vs. Elastic capacity \n4. Expenses‚ÜíCapital \u0026 operational expenses vs. Operational expenses\n5. Managed by‚ÜíManaged via sysadmins vs. Managed via APIs\n \n## **The Five Essential Characteristic of Cloud Computing**\n1. On-demand self-service\n2. Share/pooled resources\n3. Broad network access\n4. Scalable and elastic\n5. Metered by use\n \n## **Cloud Benefits**\n1. Cost efficiencies\n\t- Zero up front captial costs\n\t- Scale as system grows\n2. Time efficiencies\n\t- Create virtual resources instead of physical\n\t- Offers substantial elasticity and scalability\n3. Power efficiencies\n\t- Will be able to easy measure power consumption use by algorithms\n4. Improved process control\n\t- Quick recovery\n5. Improved security\n6. \"Unlimited\" capacity\n \n## **Cloud Service Deployment Models**\n###1. ^^Public^^ ‚Üì \n#### Cloud infrastructure is available to general public, own by organisation selling cloud services![|400](https://remnote-user-data.s3.amazonaws.com/ROc01LKoZvza49wK9MsZkRXYOLL2zEV3R7kijzdQjeef6f7MA7GMdx82Xw27-vo15jA74K2ZmKj7GWsszcTWeHTmpCfwwUAy2uWDtsm0WN4oEoNxD-sh6PDNtBzn2-WS.png) \n###2. ^^Private^^ ‚Üì \n#### Cloud infrastructure for a single organization only, maybe managed by the organization or a third party, on or off the premise![|400](https://remnote-user-data.s3.amazonaws.com/4lv6S2Cai5XUMmnr-hmXDG7yoU261hzx4KYswfCWKPKwudajljsuf_G3-aR4MZ_uybzDGZyei4tYnUUzY8jllodf6V2jNGzzKKk0bxhYnkxeiTjZvFr6C8xvhM6H2YLn.png) \n###3. ^^Community^^ ‚Üì \n#### Cloud infrastructure shared by several organizations that have shared concern, managed by org or third party![|400](https://remnote-user-data.s3.amazonaws.com/L9ZbVwdcfmes_ly5orOWR_MNrqUJMYUeqe9DJoCfTM1WU8LG5vAbnk3s4FPrnsseXyNP3iNZuMt5RHWumP0EVA4-VJViUh9IYjsU0Ewp9WYy1xbMUNR-ngWFeb0-9lfL.png) \n###4. ^^Hybrid^^ ‚Üì \n#### Combination of cloud types![|400](https://remnote-user-data.s3.amazonaws.com/thlZ3OFs16d5X8x1XV8twkmRgKXjaF18taJ-w2pxF6haJcEj6NRM2aDsUeE-g_A47JPiX7I57SWQ20p7AKU2RVk9PSazxfdiDJ_7aOXoerRxpDamDzrYAosRs5hrTbqY.png) \n#### \n## \n## CSA Cloud Reference Model ‚Üì \n### ![|400](https://remnote-user-data.s3.amazonaws.com/MbAOuo5G5Ft80S430bYMARsdSYGY-X20Fx6grW_6GHfVxMQYhGhM8VtJL_o9qB_OfRwQ79PGSYMBh8wh0HOR-_9K2zg_2HNMV0RxeBOFa0D-nCPYTfoLhB2uwsw6EKLS.png) ![](https://remnote-user-data.s3.amazonaws.com/HmytLsmy4FqzP6zk3DVr_LlLYtn2B-sniaeBBq_9UsFpOD31rZ2bsUugS3oIB7pHjUr66ViSC68jru4n7wM4wYaEcWFhuCQj1tia3VpTzmc0nsHYWMrn_8pc2Ook8uut.png) \n## \n## **Main Service Delivery Models** ‚Üì \n###1. IaaS: Infrastructure as a Service\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/XYnio51ldAWEaWwjyOR5fiN8Av5yGhnkW570kdPLiGkAqU8FCM3ssMCLyphnhD_5Ha2yj3nxeLMThjyP8jeLlmYiqun4HFVThLGsd5S_DWiUzZegx5uvQefUFddnWhY6.png)##\n#### Consumer can provision computing resources within provider's infrastructure upon which they can deploy and run arbitrary software, including OS and applications\n#### Examples ‚Üì \n#####1. Virtual machines\n#####2. Virtual networks\n###2. PaaS\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/oy4gkjY_irDEgbODZFKHtoZnkQiwsIB7zjHMBHqrChaH81flpqnSOjjg0LGSgqZl4Zo-Bod6JI9XiEb2SyLqk-7Ukh__gOJ03sQQXBG94sueD0RdcVpaG5w5CP1F9NTd.png) \n#### Consumer can create custom applications using programming tools supported by the provider and deploy them onto the provider's cloud infrastructure\n#### Examples ‚Üì \n#####1. Auto elastic\n#####2. Continuous integration\n###3. SaaS\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/4lb8ITOGR0kqTSTTY30IA485xoC_fV-XpCchv4aT5YjCQqaAcsxZfxnq9rpILKHrjFCv0CCoN_5P0AtSpNLBUTOmJK5B3zmeLR6TJLRO1rDVbMVXPXnBx8H3D7PVqLdy.png) \n#### Consumer uses provider's applications running on provider's could infrastructure\n#### Examples ‚Üì \n#####1. Built for cloud\n#####2. Uses PaaS\n## \n## \n# Continued Vulnerabilities\n## Insecure Upload\n### Techniques\n#### Filename\n##### Does it change the file name you give it\n#### MIME types\n##### The browser sends this\n#### File extensions\n##### Can you confuse it\n###### Double extensions\n###### Zip files\n#### Content - a valid image\n##### Embedding what you want in it\n###### e.g. EXIF headers\n##### If you upload a php file as a jpg, it won't get sent to the PHP processor to execute\n###### Unless you have the ability to run things on the server in another way\n### Insecure upload functionality\n### File Upload Vulnerabilities\n#### Server commonly checks the MIME type of the file\n##### The browser is not trusted\n##### The MIME type is sent by the browser\n### Look for upload forms, send unexpected content\n### Users could upload arbitrary content to your website\n#### They could execute code on your server\n#### They could set up their own phishing site on your domain\n# More Web Vulnerabilities\n## \n## Phishing\n### Type of Phishing\n#### Server Hijacking\n##### Manipulating the legitimate website to steal information\n#### Client Hijacking\n##### Manipulating your computer to steal information\n#### Impersonation\n##### Setting up false websites to steal information\n##### Sending false emails/messages\n##### Using phishing kits/reverse proxy sites\n### Take HTML from a good site, modify it to make it malicious\n## \n## Impersonation\n### Set up a website that looks like the legitimate website\n### Add forms to collect login information or other personal information, in the same manner as the legitimate site\n### Trick the user into visiting the website\n### Techniques\n#### Modify the downloaded website to point to the phishing collector\n#### Write an email linking to the website\n#### Send the email to as many people as possible\n#### Set up a phishing collector\n#### Download the legitimate website\n#### Upload the website onto the internet\n### Try to disguise the website to make it look like the legitimate website\n### Phishing Collector\n#### Stores it for the person running the phish to collect later\n#### Retrieves the username, password or any confidential information entered on the site\n#### Redirects the user back to a legitimate page so they don't realise they've been phished\n## \n## Server Hijacking\n### Cross-site Scripting and Phishing\n#### Typically\n##### Add a new form to the page that we control and hide everything else\n##### Change the form on the page to point to the phishing collector or\n#### We can use HTML code to change what the browser displays, even after the page has loaded\n#### This javascript code gets all forms on the page and and redirects all their actions to the phishing collector\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/npzyHLk4JNMWy-pqNzygiK7a1FKrR5aMNnMERVD0306vm3mXck6dNkN10cwu1srpQnM1pmJ3zziq_-AySyVhH5v9jkFsnKqt98VQMv6t42dz4kO_mIYHcf3Mdk_Pruql.png) \n### Typically involves changing the forms on a website to point to the phishing collector instead of where they should\n### Techniques\n#### Create code to modify the website to point to the phishing collector\n#### Find an exploit somewhere on the website\n#### Create and send out an email pointing to the exploited legitimate website\n#### Set up a phishing collector\n### Three major forms of server hijacking\n#### Direct compromise - Gaining access to the server and being able to rewrite files and manipulate them directly\n#### Cross-site scripting - Allows us to \"reprogram\" the website by injecting additional code\n#### Open redirects - Being able to \"bounce\" through a legitimate website to the phishing website, so it looks legitimate\n### Exploiting a legitimate website to turn it into a phish\n## \n## Information Exposure\n### When sensitive information is accidentally exposed by an application\n#### May be application data - Leaked resources, version information, configuration details\n#### May be user data - User information\n#### May be deployment information - URLs or structure\n### As a black box tester you need to scrutinise all outputs from the application for any information you can use\n#### Headers\n#### Testing files\n#### HTML source code\n#### Other directories\n#### Backup files\n## \n## Authorisation Bypass\n### Sometimes it is possible to bypass the authorisation checks\n#### Missing authorisation throughout the process - Some applications check authorisation at the start of the process but not all the way through - sometimes you can jump in by bypassing the initial check\n#### \"Safe\" areas - Some applications have safe areas where it is presumed everything inside has already passed authorisation checks, but this isn't always the case\n#### Authorisation by omission - Some applications hide administrative controls from non-administrative users but do not enforce the check\n### Techniques\n#### Can guess a URL to gain access to something you shouldn't\n#### Example\n##### Is there \n##### If we are at \n#### Use the URLs you've seen so far to guess\n### When authorisation is not implemented properly\n## \n## Insecure Cookies\n### Cookies are used by applications to store client-side information\n#### Typically a session or user key\n#### Required so the application continues to know who you are after you've logged in\n#### When you log in, you typically get set a cookie containing some form of key which identifies you\n### Cookies are sent in the headers with every request you make\n### Cookies can be insecure\n#### If someone can forge or steal a cookie, they can become another user without ever needing their password\n### Techniques\n#### How do they change with different user accounts\n#### Can you manipulate or change them\n#### What values do they have\n#### What cookies are being set\n### Cookies ‚áí View Cookie Information (Web Developer Toolbar)\n### Application ‚áí Cookies in the DevTools\n# The Big Three\n## Languages of the Web\n### Server-side\n#### Many more...\n#### Ruby\n#### PHP\n#### .NET\n#### Server-side JavaScript (e.g. Node)\n#### Python\n#### Java\n#### Perl\n#### Go\n### Communication\n#### JSON\n#### Raw\n#### XML\n### Client-side\n#### JavaScript\n#### CSS: Stylesheets\n#### WebAssembly (Wasm)\n## \n## On-Going Communications\n### AJAX Polling\n#### Short - Make requests to the server on a timer\n#### Long - Server waits for something to happen\n### Simple AJAX/XHR (XMLHttpRequest)\n#### Open a connection to the server, send a message, get a response closing the connection\n### WebRTC\n#### Allows for real-time and peer-to-peer communication\n##### Typically used for high bandwidth applications where reliability isn't key\n###### e.g. Video/audio streaming\n### WebSockets\n#### Bidirectional communication over a TCP socket to the server\n##### Now the best option\n## \n## The Biggest Web Application Security Threats\n### Cross-site Scripting - Injecting client-side code to manipulate a page\n### SQL Injection - Injecting data into a database to manipulate a DB query\n### HTML and Parameter Manipulation\n#### Manipulating what the client sends to the server\n#### Sending the unexpected\n## \n## Cross-Site Scripting\n### The normal process\n#### This is controlled by the application\n#### This HTML is then rendered and displayed by the browser\n#### Normally it is the server and applications job to generate HTML\n### How cross-site scripting breaks this\n#### Users are able to inject new HTML code (thus scripts) into pages in a way that can be executed by  other users\n### Two major types\n#### Stored - Where a user input is written or stored and later displayed back as the result of a query\n#### Reflected - Where a user input to a page can be populated with XSS and gets output as a result when that page displays\n### Examples\n#### Server Form\n#####  \n#### Example 1\n##### Server:\n######  \n###### ![|400](https://remnote-user-data.s3.amazonaws.com/8pLrO19Y63pEdlh5eY38bCSmdqP4eCbFYkqTh8IvyVAcuL_ifsQYA6F9MHB6kiNKXhHsoS_IkUAiwyJptI5WHq_zTcsjrqifm1OBRc5TOirLkvuxn2BvkvNlqeAkS0ho.png) \n###### Good for testing\n##### Client: My username is `\u003cstrong\u003eOli\u003c /strong\u003e`\n#### Example 2\n##### Client: My username is `\u003cscript\u003ealert(1); \u003c /script\u003e`\n##### Server:\n######  \n###### ![|400](https://remnote-user-data.s3.amazonaws.com/fMe0fydjo0UsiwO1PQkrtfTzsbGAduElQ6EUu-NReKOXqVOiWdYoy5yMlBbfm4lfN7vx85F7GcVgOdEcLtW_diUw5zmSuPU921XxMdbqWfMzXJPOXO1efLaMEqh5jKfq.png) \n###### Now we have found a vulnerability\n###### ![|400](https://remnote-user-data.s3.amazonaws.com/h8M56DRuCog467S8wOkhiyuHAka18uxfXPNnU3j8f3Qahpqu92VKrRvY7Glvuau81H5t30yk-cRO_glNsVkfBfv3b22EscAeZlYfYfa8IBa4YfBs-F5xo6ZaXsKoPr7J.png) \n### Can be found using the XSS locator (polygot)\n####  \n## \n## Once a vulnerability has been found\n### You can include external javascript\n#### Botnet control\n#### Bitcoin mining\n#### Malware or compromise\n### You can run any javascript\n#### Control or manipulate the page in any way\n#### Control or manipulate the users browser\n#### Get the current content of the authentication cookie\n#### Make requests as if we were the users browser\n##### As if logged in\n#### Make outgoing requests\n## \n## SQL Injection\n### Manipulating the query sent between the server and the database (using SQL)\n### Insert something into the query to change it\n### Example\n#### Input: ^^Bob\"; DROP TABLE users; ‚Äí^^ \n#### Query\n#####  \n##### SELECT * FROM users WHERE username=\"^^Bob\"; DROP TABLE users; ‚Äí^^\"\n### Example 2\n#### Input\n##### Username: Oli\n##### Password: ^^something' OR '1='1 ^^ \n#### Query\n##### SELECT * FROM users WHERE username='Oli' AND password='^^something' OR '1'='1^^'\n#####  \n### Example 3\n#### Input\n##### Password: something\n##### Username: ^^Oli' ‚Äí^^ \n#### Query\n#####  \n##### SELECT * FROM users WHERE username='^^Oli' ‚Äí^^ AND password='something'\n## \n## HTML and Parameter Manipulation\n### Manipulating the inputs that the client sends to the server\n### Using\n#### The URL itself and its parameters\n#### Forms and their parameters\n#### JavaScript server requests \u0026 API calls\n#### Communication\n### How to do parameter manipulation\n#### Using the browser\n##### Inspect and modify using the developer tools\n#### Using client-side scripting\n##### Execute code in the console\n#### Downloading and modifying\n##### Download the source code, make local changes\n#### Using extensions\n##### Web developer toolbar\n#### Using scripts\n#### Using tools\n# Tools and Techniques 2\n## Writing Secure Code\n### Consistent\n### Logical\n### Tested\n### Easy to understand\n### In one place\n### Documented\n### Maintable\n## \n## \n## \n# Introduction to RobPress\n## \n## PHP Files\n### Anything not in PHP tags is output directly (HTML)\n### Use \u003c?php... ?\u003e tags to execute PHP code\n### use \u003c?= .. ?\u003e to output PHP code (echo)\n### ![|400](https://remnote-user-data.s3.amazonaws.com/ED4cuhpToQSKhYDbwiifOqGr_qQC8n3tNFclKn_xvciqm_6lHNpT3i6QyHkF3vWaOBef5t5BZxc8CfjSHL6NbCid4XNzZBEvlNZz8dIHEOEp5IB2b__HTLPpbyNBOqD-.png) \n## \n## Functions\n### Define a function using function keyword\n### Optional parameters are assigned default values using =\n### ![|400](https://remnote-user-data.s3.amazonaws.com/vBxnwPFjD2zNGM6BMn-7RzxFUPdGl6dSqY9oWAEvWiFghEKEgN_Pabql1W1_9hSoaZZ308l2_Czle-zveIn7MjL6qVV4VTNXuzN0tWOqN_zYFsgsC0HKAkEctG1wJJTb.png) \n## \n## Variables\n### ![|400](https://remnote-user-data.s3.amazonaws.com/j9apfpD5Y0hCh_2lwl8vKqKgsVJ1O5_H29TPNNnW81IO2MfqwJmlUt9qxSigy902QltrFpGolmYDhoHDRoDZwBKsNH5BQSY9rKzVX-W5XdQZJJDOWkBATScy02KwtgIs.png) \n## \n## Arrays\n### Create an array\n####  \n### Arrays can be numeric\n####  \n### Or associative (like hashmaps)\n####  \n### Arrays can be initialised\n#### Or for associative arrays\n#####  \n####  \n### Other array syntax\n####  \n## \n## Built in Variables (Arrays)\n### $_GET - URL parameters\n### $_POST - Posted form values\n### $_SERVER - Information about the request which was made\n## \n## Seeing inside Variables\n### print_r($variable) or var_dump($variable)\n### ![|400](https://remnote-user-data.s3.amazonaws.com/2wqlo-llBKjDUBUKcQUrPpCHarjt5Fs8AhhoiT1UZKubfCtQO_UstETMNKaWW8xKWWk-LY1Rx3Xp5hE3pcux2N4PzoJ1vj3su13F6EpTSq2m0Ffa2YEd-CIBSzjUWB_2.png) \n## \n## Conditions\n### ![|400](https://remnote-user-data.s3.amazonaws.com/PrpxJvAA2qJO0qVB2obzVv-BvLQ2poJgguoLA3_y9afd1yG1Ytqb8Vav1DU48wr3y3OalSKNM_Xu9_Qr34IjK7wwK7iJIaDxpRHk2_fiiI5uL67yugBeydg0NseB6VfM.png) \n### You can also use conditions in short tags\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/-GvvXBkhoeJvsB9qrI_00eqXDQ19Rc_iUI8HRHhBn-hl76wF5yguQj498j73lxN4V7gjcWRmfEpyJdeisOlgQYoVStqgzdb6JnCP7Bpt00g5jRbXpb03Lt9-1_w6e6J6.png) \n## \n## Loops\n### foreach\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/5ZQDO8w96iQm0eKKJsPJBG2j-4zt_NyDKKzG-BY9c1uWS94OIa7lMEPdlemQqRWi0A2Dn4XElz3EOV0s2Hmb1hTsM6lujrlvBmcOBXh6f9t3W_KycABBoB-wARJ2RIx5.png) \n#### Iterating through both keys and values\n##### ![|400](https://remnote-user-data.s3.amazonaws.com/d-TSrljdU4kAlJdYR5C-vuTFbTI4eeHQCFEJMzE6XhC2YVfz-AMlahDPZLuXt3De03Jp5OeTnn4KpSkIcEEIkX-3cnI9RYrXyaFzofNkJA9qB5SDczcR01ASEKGtvsTC.png)\n#### Special syntax for loops using short tags\n##### ![|400](https://remnote-user-data.s3.amazonaws.com/KrXJEvm5B8HD4zcsCO_OYrw50i119bEVn0ZWmbnz-0yuicdHrvj8yAH3ZIBPZdgw41i-tsXNe8iktZrQFlpJ86KTuXTQsKa2NSHbFv1RqTvbxVylKrFWlH-_h_ScmapK.png) \n## \n## FatFree\n### Maps URLs to PHP functions\n### ![|400](https://remnote-user-data.s3.amazonaws.com/FJOnFtD03dBnAc67ESoQA65bPKnPAEB_uPg2bf5gZTJ7PkCMrjHfusSBKJil1qOAqvAxtdgwJh21wj6YkUjweGLStG9s2I3lXk-94v-fe49ZW-qnMYvNNCI4-Tpj7JGv.png) \n## \n## Main Areas of RobPress\n### Public\n#### Blog\n#### User\n#### Page\n### Private - Admin\n#### Comments\n#### Posts\n#### Settings\n#### Page\n#### Users\n#### Categories\n## \n## Accessing the RobPress Database\n### Local - \n### Remote - \n## \n## Using FatFree to Automatically Provide an MVC Structure\n### ![|400](https://remnote-user-data.s3.amazonaws.com/ZdBQuHPbTXtycxz5zcZCIYnNuFg-cP-8RKQ4CRLMxnbrUAapYPcD1cjSazH_qz3CHPg0VsSkII-ByTuEWdj7uTIc9Mx9cnMgRH2-atExahi7lVNQBETimXurQ77lTBcN.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/xX8z3SobsFN2aGRFmrlZ6YxD99zfhgsfHsPWW05IP4hhlCjWyY9Jl24-2Q-9KtN_tyMUVTBm8za-fdCtZuiN81RSuN1JwRxToFkWScG9hEfP9l5STdiz1yxm7zD6GkFq.png) \n### Example\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/qYb5WJea37pCLbIaalbtIxywF7w5Jq_n8Ww-q4O1Yd7J-5M5_-Qc6QPKDvVS7p7qnfITxhqqmaVUkQdZo7PjCCpPXM_4Qlu7oX976ZoVItG8RVcCpFN0ChFFfZsOC5sn.png)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/hxm36A4wd27xWyFrkvsgDUZN9SrHaE_547OHP67HL_cALjRfmAEivp0M-gQ_BRabuSxX9nkeysQUiqjUhlGCWU6TEf2Wu5TZrXzFHx8rpJ5zcCY2zDfygN7DimgR8Goh.png)\n##### $f3 is the fatfree object\n##### PARAMS.3 accesses the third parameter (third bit of the URL) \n## \n## Using FatFree to Create Forms\n### ![|400](https://remnote-user-data.s3.amazonaws.com/MD2zeat3WrbZXEzLhRce7j_FRZxVcZVBxIO644BiLqDIYuWytLreS13iWIXtL8tg9SAZKP2mE8_U0y7rKnlXMPlB3wRLz-S8CayeGLW9rivxpZ7OJErExLds46ULTFXW.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/o_cOvQB-pHbOmTbqt2SagoDJD_p4c-CjZj2Ooi7zfOvDGrW95XnxGkoZKcM8Fa2V-WQeIjkErSH_geKwF2A77l5X_Z3jSpTLuodcoshG-DlWdT11gxOf5fjw48UFA9UL.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/e6Ylg3KFsdtcfAKEMFoe_a6XAw2W_6_zXOVNl5Q2GHh0Ct9Btynq-c2HHWj-0hBd_qRD7Su6XsngZQgmoNaIu4NR9hUzuHCEwjmgZjxvwU_JNqKD4K31EOTdQvzAkli9.png) \n### \n## \n## Templates can take Variables\n###  \n#### Maps $variablename inside the template to the $variable in the code\n### ![|400](https://remnote-user-data.s3.amazonaws.com/MV92ThwaN95K-e4ETDRRPBY44glfoXm0rVU59sG5hD7qtCwGs26qfeCDqwF5W2gBHfZBhJchG6pEbLvZHvlgwRs9o0_FrFW4BrcHSHLP7yo3YXB74QbMMOsJ5ve3SQLk.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/1kF_ldr9b2NI4Z6d1M01ENHOr0qvH8gBWLS8bFy2hpD9X52okefTinJAPozhbg-4F6NQfSQwpAR4LAp1SAaEiD_R65kXZxf3LDFjhokaki28sB43QksmqggJ8T1aHMh1.png) \n## \n## Models\n###  \n#### Model is a field on that controller\n##### It loads any of the models from that, which have functions\n#### $this refers to the current controller\n### Model functions which all models have\n####  \n##### Will return a single result\n####  \n##### Will return an array of results\n### Examples\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/ZYiEmDh-VltHs98nbVizHVGQUdsYnpduV5YrjC28nENNMQqxJghJLp_4S1_xp-UOljH0ivXqW4A2T5FgZc6q12DRpR2K29KiypOOpoADXFj-HcFHwlWVwAiXeK7_Tex6.png) \n### How are Results Returned?\n#### What is a DB mapped object\n##### But it also has functions attached to it for manipulation\n###### So you can also manipulate the database with it\n###### $user - \u003e id=5; $user‚áísave();\n##### Like an array, can access using array/object notation\n###### $user['id'] or $user - \u003e id\n#### Multiple Results - An array of DB mapped objects\n#### 1 Result - A single DB mapped object\n### Model Examples\n#### Single Result - View a Blog Post\n##### ![|400](https://remnote-user-data.s3.amazonaws.com/pdvA77gUEUqq5XmhPIIBhbExHhhSk4ASGsZBWtEzM8p0Ou4Z9JSEzPepagbz9limlV5g0KHmIxVUoOjrPFHT1_14mDxixwEi9JstiVoffJIphJHmK-OENsppOxfBKmP7.png) \n#### Multiple Result - Get all the Users\n##### ![|400](https://remnote-user-data.s3.amazonaws.com/TzZcW3-QB33meMgPNEjCviU6CKisLs74q4DGFhGbwcZENGijljtf2Z4UXQ_42Q_YCjz3ltt53EQ-KLLRia_750wvUJJ2GazT8006o7JYCB8aWMqTw4_f_u7Paw0aEtJc.png) \n# The Security of the Web\n## HTTP Requests\n### HTTP Verbs\n#### GET - Read\n#### POST - Create (or update/modify/delete/..)\n#### PUT - Update/Replace\n#### PATCH - Update/Modify\n#### DELETE\n## \n## Server Responses\n### 2xx - Success\n#### 200 - OK\n### 4xx - Client error\n#### 404 - Not found\n#### 400 - Bad request\n#### 403 - Forbidden\n#### 401 - Unauthorised\n#### 405 - Method not allowed\n#### 418 - I'm a teapot\n### 5xx - Server error\n#### 503 - Service unavailable\n#### 500 - Internal server error\n### 3xx - Redirect\n#### 304 - Not Modified (Cached)\n#### 302 - Found (Moved temporarily) (or 307)\n#### 301 - Moved permanently (or 308)\n### 1xx - Informational\n## \n## GETing by Hand\n### Methods\n####  \n####  \n####  \n## \n## Passing in User Input\n### Using GET\n#### GET query parameters\n#####  \n### Using POST\n#### POST form data\n-  \n# Testing for Infrastructure as Code\n## InfoSec Triangle\n### ![|400](https://remnote-user-data.s3.amazonaws.com/ZlGWYN_4nw2_QCNBBze9NTeHAoKfrvrhSLZVTQ46k4wn-rdMUkKQw3mxwKEW6LKKhz-1jOGi1vF1MiwP2R7gD8DF_RVObYXEmb5QacajdT7x1p4QkHoMoBIb3sF22rBT.png) \n### Reducing the functionality in software reduces its attack surface area\n### Need to find the balance between functionality and usability for optimal security\n### Varies on a case by case basis, can find the sweet spot by communicating with customers, testing and prototyping\n### ![|400](https://remnote-user-data.s3.amazonaws.com/P8xwmKnnB5svZqpS5NbTRdkUVTvvz8Vz8IsmM8JucWYlkU_6YNzHAk8fconWe-3RbbFNlSkoO_LGDO-uhmfRp5ukXX9JVPtftHff-mPcHZABLjnPe4m8dWCMCfo_8-30.png) \n- \n## Vulnerability - The weakness that enables a threat to be successful\n## Threat - A circumstance or event that could damage the confidentiality, integrity or availability of information or information systems\n# Cloud Vulnerabilities\n## Example Threat Analysis\n### ![|400](https://remnote-user-data.s3.amazonaws.com/X-PwtkZZcnLkeEoUpLanKImnFzdm08JFqxGNv55X3mCE0B8oS8Ql4vif6P0yi_T2jy5hbuo40mglNeQeuU9FNw0S-7rQFKhpnXmWvv29B0QH-6gJMWwOfCbOhhFLJAeV.png) \n- \n## Supply Chain Risks\n### ![|400](https://remnote-user-data.s3.amazonaws.com/xOlHyulgGw8jIvD6l__qnpIqbEMWu3mYS6NaSBvQQFyNgKf26SbeZ3nmtui6BJwxyqEBnzuu_9KE-CkjXhzgr3eiPUmM46iAvN5p7UXIeOGAbFXZoSm2uhz6C3L39l11.png) \n- \n## Summary of Cloud Computing Threats\n### Incident analysis and forensic support\n### Business continuity and resiliency\n### Regulatory compliance\n### Infrastructure security\n### User privacy and secondary usage of data\n### Non-production environment exposure\n### User identity federation\n### Accountability and data ownership\n### Multi-tenancy and physical security\n### Service and data integration\n- \n## Accountability and Data Ownership\n### ![|400](https://remnote-user-data.s3.amazonaws.com/3oNU4fk41w-izJch0npAP31kW96bsbpwMo31-IC8PnszCeVtgJpifhj2Qo6sHYl9Js0W5Ydz_LoyAcENN7mUB8GT4IK3zIJfeY3__sy-HdYFXTJPzRLdikhwOQmhrC7S.png) \n### Things to consider\n#### Who owns the data\n#### How to encrypt it\n#### How to destroy it\n#### Where to store it (isolation _)_ \n#### Consider data toxicity\n- \n## User Identity Federation\n### Identity providers\n#### Open ID (Oauth)\n#### SAML\n#### Access Control Design\n### One user identity can be used to login to multiple systems\n### Provides less control over user lifecycle\n### Improves user experience\n### ![|400](https://remnote-user-data.s3.amazonaws.com/m5SGxJ_H4lLK-SD5cAuM_cByohXtjk3Lucw2vti_-eAjAm91ATs5GCQZJzYjAphSzOz9NEWd_2r9mvr-UknO3a4MWNJaFwBCidywxPxhxjx1o7nQQvE8WYbTIGXtQu8O.png) \n- \n## Regulatory Compliance\n### Data perceived secure in one region is not assumed secure by another\n### Data stored in the US may not comply with EU law\n### Lack of transparency in the implementation makes it difficult for data owners to demonstrate compliance to owners\n### Lack of consistent global standard for handling data\n### Use a cloud vendor who understands and applies solutions for the various data protection laws\n#### They should also know how to handle cross-jurisdiction data protection requirements\n- \n## Business Continuity and Resiliency\n### Need to make sure that Security Level Agreements (SLAs) cover data resilience, protection, privacy and that the vendor has a robust disaster recovery process in place\n- \n## User Privacy and Secondary Usage of Data\n### $\\begin{bmatrix}\n#\\text{User Priority} \u0026 \\text{Providers Priority}\\\\\n#\\text{Keep personal data safe} \u0026 \\text{Push out the liability to user via privacy and acceptable use policy}\\\\\n#\u0026\\text{Build additional services on user behaviour}\\\\\n#\u0026\\text{Do the minimum to achieve compliance}\\\\\n#\u0026\\text{Keep their social application more open}\n#\\end{bmatrix}$\n### Things you can do\n#### Encrypt storage\n#### Anonymise personal information\n#### Terms of service with providers\n- \n## Service and Data Integration\n### Data in Transit\n#### Authentication\n#### Authorization\n#### Accounting\n#### Protected using SSL/TLS\n### Data at Rest\n#### Protected using Encryption keys\n#### Confidentiality\n#### Integrity\n#### Availability\n- \n## Multi-tenancy and Physical Security\n### Inadequate logical separations\n### Co-mingled tenant data\n### Malicious or ignorant tenants\n### Shared service, single point of failure\n### Uncoordinated change controls and misconfigurations\n### Performance risks\n### Threats\n#### Side channel attacks\n#### Scanning other tenants\n#### Cross-tenant attacks\n#### DoS\n### Architecting for multi-tenancy\n### Data encryption (per tenant)\n### Controlled and coordinated change management\n### Ability to audit the provider administrative access\n### Third party assessment\n- \n## Incident Analysis and Forensic Support\n### Cloud computing can make the forensic analysis of security incidents more difficult\n#### This is because audits and events may be logged to data centres across multiple jurisdictions\n### In the event of a data breach, you must understand how to identify and manage critical vulnerabilities so you respond to the incident as quickly and effectively as possible\n### Investigator Teams\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/WKZpPq6K-mOC5PSnWsMoxGGhLwIIvAyiUHMS1MK-jVvvSuGKYCP1xKXqLEXAS9ahTCfRUkw18yHAihiVWDxJS_VX3G_OzFwncEwHcUHyae6ZY6y8nBLtNMSSuyAtM5Pr.png) \n### Check your Cloud vendor policy on handling, evaluating and correlating event logs across jurisdictions\n#### Is there technologies in place, such as virtual machine imaging, to help in the forensic analysis of security incidents?\n- \n## Infrastructure Security\n### SANS Endpoint Security Maturity Model Curve\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/I_qx6clPu6FiguqHEBYgPBqYjo4cUMfL2lC37t_wAxjBsM5dI_pCvpSUyDY66oMS0nYJ9knUvlrK3V5TtV-GwTjqmTMHOVLi4OBFWp-Ihrkjl0-EKoXrHRKH_6uj6q62.png)\n### Cybersecurity Capability Maturity Model (C2M2)/Maturity Indicator Levels (MILs)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/K7CrYAK-dnLqiOYMwGMHDx7aErEeelYagNfAoNZxpz9oIffnchEhiWKNrVf15Kpp5avxYyg34aBHylapNHwe1MDyQs83vX60RcLPuPZygyQ59nI6hxLP_1KMtt01bUp1.png) \n- \n## Non-Production Environment Exposure\n### Don't use the cloud to develop concepts or tests\n### Always use Multi-Factor Authentication\n### Treat any pre-production environment or data as top secret\n# Service Level Agreements\n## Service Level Agreement (SLA) -  The part of a contract which defines exactly what services a service provider will provide and the required level or standard for those services\n- \n## SLA Objectives\n### Improve performance\n### Save costs\n### Provide access to technologies\n### Provide access to skills\n- \n## Description of the Services\n### The SLA should include a detailed description of the services\n### Each individual service should be defined\n- \n## Performance Standards\n### In practice, it may be impossible, unnecessary or very expensive to achieve performance standards at the highest level at the request of a customer\n### The service provider may argue that service levels should be set deliberately low in order to guarantee that the service can be delivered at a competitive price\n- \n## Compensation/Service Credits\n### Often achieved through the inclusion of a service credit regime. Where the service provider fails to achieve the agreed performance standards, the service provider will pay or credit the customer an agreed amount, which should act as incentive for improved performance\n### For the SLA to have any \"bite\", failure to achieve service levels needs to have a financial consequence for the service provider\n- \n## Critical Failure\n### Solution to critical failure includes\n#### A right for service credit\n#### A right to sue for damages\n#### A right for the customer to terminate the agreement if service delivery becomes unacceptably bad\n- \n## Service - A means of delivering value to customers by facilitating outcomes customers want to achieve without the ownership of specific costs and risks\n- \n## Elements of a Good SLA\n### Performance standards\n### Overall objectives\n### Description of the services\n### Compensation/Service credits\n### Critical failure\n- \n## Service Level Management\n### ![|400](https://remnote-user-data.s3.amazonaws.com/Lvmflx3KeeDxjlQ0K9oyWxXrzCzHEYNO2T6l0vUX5gKiV30Xg3aRygQofz6NMwRpKfv464s7J2MrpHpZp4mb5H0LHH6Mv8tH79joiDxJddJF3mxZt-4pV3cYf1b0L9zl.png) \n# Tools and Techniques\n## The Process of Penetration Testing\n### Scoping\n#### Agree on what is being tested\n#### Define boundaries\n### Gather information\n### Identify vulnerabilities\n### Exploit\n### Post-Exploit\n### Report\n- \n## Burp Suite\n### Burp Suite is an intercepting proxy\n### As you browse, everything passes through it\n#### Collects information\n#### Allows you to track what you have done\n#### Allows you to review previous requests and responses\n#### Allows you to manipulate everything\n### ![|400](https://remnote-user-data.s3.amazonaws.com/0jUBwszGgDyBaXmAEuT2x6myuX7PfAUQuYtc87ZRns79u6avCpne6aM9Spxd9nhEdip6BLbxTO6wcqP82tCHr3WAqBzxKYYGd40bDHdqZEJQLiQQBAWNht-vao1c6asV.png) \n### Set up\n#### Set up Burp Suite as the proxy\n#### Install the certificate\n### Sending a page to intruder allows you to run attacks\n#### Insert $ $ around fields you want to run the attack on\n#### Fuzzing - Long lists of inputs which are known to lead to potential vulnerabilities\n### SQLMap\n#### Provides access to the whole database once an injection hole has been found\n# Vulnerability Fixing\n## Make a Test Controller\n### ![|400](https://remnote-user-data.s3.amazonaws.com/lOAeHT0c64u1gGkUBDhTqmFnKhdw9T55bgfR0DXIke-nqaQwGq-GWSvarCinytjJP0Gj5XAZlwn6m9hgbDr5pddQewSZ5fo4GzqyyWZXbIaYKKMImU48ynQCZqfRJzSk.png) \n### Can test things without breaking anything else\n### ![|400](https://remnote-user-data.s3.amazonaws.com/4kkHqKGWTLhGj9VMROGrk3Numz7AP_97NfQTK5WhQ7GPUvqwKbJIM18blNajQv0XSdeNwz92ZfEqakKhwmUk0fqWhAZNwGm-I_qS8-KYoYkdGs3zLhUmAVe0xaexNy0a.png) \n- \n## Output Variables and Terminate\n### User var_dump and print_r \n### Use die() to stop anything else being processed\n### ![|400](https://remnote-user-data.s3.amazonaws.com/VPZ5DTN_hxtobmRIrqg46lcrcyVFL85R5tK70QS99VH8CniuDkjnNohJTBkBJGivmu09A6bgQFd0bh7QX-Fbt8BgD58i4NXwCSa8O5RtiUDqI3xPscDbbgBroQTv4S_i.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/_Il3mMZfW9DYbIlAikrqAKEzfzXlR3iIlFU4LcdFQBvYJPxddYVB_P4u3GXrvkPwVzzlTtjcG5lmG85ihBxXMYFYs6R3uczC76bh7JeViHdDp7Myc-NPKsDDQ0CgKtip.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/UYflC1WR-sRVZg-Zey-KZsOs_LmKXg1g9_53zFuXOmjTLij8Zujxgkf61F_FA6W7wHXSTCTkTo_OpXDxGi1Idz5W-nVRvUz7zr24n1DPzhXK2fsVuhJCntS9GPI9lqan.png) \n- \n## SQL Injection\n### Look for\n#### Database queries\n#### Model access, SQL keywords\n### Think about\n#### How are the queries being constructed\n#### Where are parameters coming from\n#### Are there direct queries\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/jEi6N59uxJ_9D8KnEsxMmxVZMfKswCMsU4hDQxiN5mZYICUYAfyEKUNGRZYyva-l0n0pssdGJnqtBrNKbp6gpRxzaH7qtWSMh76FEtm24Soz9hO-ISrY9W3Rea2IjhoO.png) \n### How to fix it\n#### Ensure inputs into queries are safe and expected\n#### Ensure queries are being constructed correctly\n### Use grep to search through the code to find where to look\n#### Keywords: database, query, PDO, sql\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/gcruTErWlaKfXS6HozRghJGik1OHMFuUOb7H-ylNHPG8R4PmUYmcUDB-491Fj0NK7wPoH-8UZdFyLWJPXiI7yTvGYI9J5frbeIFalZQKoLCCB8_0Cy2602JFPIA1Z3fZ.png) \n- \n## Information Exposure\n### Look for\n#### Files exposed to the web that shouldn't be\n#### Files or functions that are around that shouldn't be\n### Think about\n#### What is being used and what isn't\n#### If its not being used, why is it there?\n#### Does it need to be used, but not publicly?\n### How to fix it\n#### If theres no reason, get rid of it\n#### If it doesn't need to be public, it shouldn't be public\n### Using grep\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/C24D5gWakVd3Mjh-2-qQNZ-WgGahkBKecWvdOiOEe8ePwJnutGeYqSV_CKA10VuzZF3C3Qlv1CbXOeZKwRnPocj8t_n6fD6xb6Je9rR8QUttOSju6I9N7j3fRDHk95eD.png) \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/4VZ-rxnguoscCgjGF0h-DyAu7p4es4JhKg-o94747yON8iSPkwjCNteyA0F2brd3mZDc6o0zvafKwVrCMIfnoO1VdcRzQK16KQ_PpcGKDTyZgIA6KU--r6SBqth7E8ml.png) \n#### .bak files are backup files\n####  __find__  will output a list of all files in all folders, including hidden files\n### Can you find directories/testing files/backup files\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/K3o3MLyMkyxoH-K0Fy6LQOH6HrfNGB5q941ICPLq68Fa4kdG-BBxypLAfS8PKtVr2tY-ocVYGNmeT1W8WN7X2_KwkCdpo8oda2jplI2EniIgU7vNwoMvof4CTZVWtQhq.png) \n#### ![|400](https://remnote-user-data.s3.amazonaws.com/AAowRRv3_5A5GbFDGrld2VQWKL15Bk4L10n05bo0gjZU3tg8-jVPOsIL11woeGc8Ob4zILNXc_5bOKQS4YrvlVO2eimHgAP5ZWeSL9D6utE04WvfbOwiTl4toJ38cD9h.png) \n#### Visiting a .bak file means the server will download and display the source code\n- \n## Cross-Site Scripting/XSS\n### Look for\n#### Inputs where data is stored and later displayed\n#### Are there other places where HTML is combined with user input\n#### Can any HTML characters be used in that data\n#### Inputs which are outputs\n#### Can you manipulate that HTML\n### Think about\n#### What should acceptable input be\n#### Should the output be encoded\n### How to fix\n#### Reject or throw away invalid input\n#### Encode HTML into normal characters\n#### Strip HTML tags that shouldn't be allowed\n- \n#### Will mostly be in templates and views\n#### Create/use a function to prepare unsafe input for display\n#### Use everywhere its displayed in templates\n#### Do validation on **input**\n- Don't allow special characters in the first place\n#### Do escaping on **output** not on **input**\n- Preserve the original input in the database\n#### Remove/Escape HTML where it's not needed\n- E.g. a username\n#### Limit/Restrict HTML where it is needed\n- \n#### Use libraries such as HTML purifier\n- ![|400](https://remnote-user-data.s3.amazonaws.com/Iz5vTnOGIMTnJZKRiEfovS9_gXdmBTlEhRnT0YMzjaSF2JIwWzwNC7jgnSeVK0Jksuoay0GQffXxYiBOkAlIUK0EmQNqfY6vGKdaLV8_tv1x_PGI5Idl_ruA7v9tK0EB.png) \n### User input being directly written out, allowing for XSS\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/mcLkmS2F-H6q7hlV8KH4y_ENWN6SXzPjII3uWJxbKBUw03aR4uCXWPuxeem_gSIxJDsYgqwPb5bxcA1jj3Sc6j9fZCmMdxCwwOeAwokByi1OFN2TUYhAbUNYh66gDbqv.png)\n### Example\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/hVYLOLlHvVeP6Z5Wacx7UPNA4ocfHMcnvSPab8UmSvFa-d-0vrr1x03kGDtMkbCGt6Me8uouLpAr3uaWlr5NmNe_QVRAPLpKbiKk_0CfDet9RgrMXWk57KSeBwyL50Fr.png) \n#### h() escapes HTML and safe() limits HTML\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/9ejLBL02lhOejGlopq8HozQja1j--lgeTKkFHQmYNGzvQc1mv8Y6zq0_tz0lkuKM0y4b9qwGd_zgOUXVQ51syu0Kqm8Rz0ESxKD8u3INm94p95oSurPUvutMuwJ498wQ.png) \n#### Turns to\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/Xwx3CIkS9yVvsfQEFtzx_I-KRf1efa2fGDfnq_G1KIwsP_0NPF3FyzbsmDJrpJ5omTgiUvnWGhcKHUVUBAXSqW5Y-1LQgAdN69kxKjp7oWG8d18QmZ4QGhYw_Pu3b7oV.png)\n- \n## Insecure Upload\n### Look for\n#### Parts of code that handle uploading\n### Think about\n#### What do you want to allow\n#### What does the user have control over\n#### How could the tests be bypassed\n#### How to reject what you don't allow\n### How to fix\n#### Perform tests on every uploaded file to ensure they are exactly what you want\n### Uploads in PHP involved the move_uploaded_file function\n### Find instances of use\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/snIydDBQB5i47OIVMyME-VOHtroDaCcV9bZdDvejwBCaPGaJtie0ESWDAJGp9-BF96Un0xpEGIqXjaEJKR750a2wkxIpQRbvCV4jOvCEsSrbqNMnBt_nMA8fcKAYN-Bw.png)\n### Add functions to test for files being valid\n#### Check extension\n- Use pathinfo\n#### Use .htaccess to restrict what happens to uploads\n#### Check file type\n#### Check MIME\n- Its in the array\n#### Use a whitelist\n#### Add function to handle saving correctly\n- Generating a new name for the file\n- \n## Cross-Site Request Forgery\n### Look for\n#### Unprotected forms\n#### Insecure GET actions\n### Think about\n#### Does this need to be CSRF protected\n- Any actions which change state\n### How to fix\n#### Make forms unique so they can't be copied\n- Use a token\n#### You want global CSRF protection\n- You don't want to have to do it on every form\n- \n### ![|400](https://remnote-user-data.s3.amazonaws.com/RXyqvlXfChselJSpXHwRS-_4WwZ7cCb8BkLVX3jYvSVVqnyOSPnA1hv-l9SWRJHEgX_jxl2HzfmkQWcE-_yPunzdR2kyrC8hyXNgS3i2t1jTOGGlu0aL8Vql4xsdvo0x.png)\n#### Then add global code to verify the tokens\n#### start is called every time a form is created, is a good place to add a token to a form\n- \n### GET\n#### Look for GET requests that perform an action\n#### Are there URLs you can go to directly which change state\n#### GET should never change state\n#### Can you perform actions where you shouldn't be able to\n- \n### POST\n- \n- \n## Authorisation Bypass\n### Look for\n#### Actions that require authorisation\n### Think about\n#### How the authorisation is given\n#### What authorisation those actions require\n### How to fix\n#### Ensure for every action requiring authorisation, the action fails without authorisation\n### Log in as different levels of user\n#### Try the same actions with different levels of access\n#### Is it possible to do actions you shouldn't be able to\n### Just one function that checks access for a level\n- \n## Internal Information\n### Look for\n#### How does the application and framework handle error reporting\n#### How does the application handle unexpected errors and faults\n### Think about\n#### Separating your development and live environment\n#### Do you want to throw away the error information or keep it somewhere\n### How to fix\n#### Handle errors and faults correctly, don't make error information public\n- \n## Parameter Manipulation\n### Look for\n#### Any form fields\n### Think about\n#### What validation is being done\n#### Is it possible to get data in that shouldn't be there\n### How to fix\n#### Ensure, before any processing is done, you only ever have exactly what you expect\n- Throw away the rest\n- \n### ![|400](https://remnote-user-data.s3.amazonaws.com/sVxGjNPiCdJPAPXyTmTsWRhjpH2TD9oMcnok-i20qg1-FSq7FNwy8mj8Lt_Bu625vX90eNq3z-8X-CNOPn-lK5wEhUhFoLZd2Z6MirLZmUvWuhT86OdJsq5jbOfTezFI.png) \n- \n### Do validation at the model level\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/vupvVDVdolOpkoniC0kfHqi7ofSonYhwqf2Rq7mISdwOmHe86X4MzbWuo8e7OTLEgJZMj3yBnV8rt_gIP3gwpKo5zOcbhCYvUMrng2K8XnFRzT1Xmziv50yZsfhyQPvs.png) \n- \n## Application Logic\n### Look for\n#### Is there application logic the users can affect through user input\n### Think about\n#### How to ensure the integrity of any multi-step processes or functions or actions\n#### How can you protect the logic\n### How to fix\n#### Keep state server-side\n#### Ensure unexpected actions cannot have unexpected consequences\n- \n### Individually check if each input is invalid, so that the logic can only be followed if every single input is valid\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/-V_TdV_weuUX_zeJL-XUIgyWHW_rWzyw3KpJM5peKpMHt1wVSHRy01o4iuPl7mvy8Ku-JaNpOAxAGpUTBUG0SQ6Bt882uG2Op6WwR31HOOwOY2TPq7Uw_N_JOYMI9xoP.png)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/BoJQMbDHweDnnP-IUVn31TCtWCzR078YkDmp3NPilgUMjFjRQsBbPJKmC1N8NympnUEnPA7jMZkBZw43vrV-s7Izv8CrfkXc4NsIO86xmzuPC0FdVdgI8Z2FSd18CRIy.png) \n- \n## Out of Date Software\n### Look for out of date software and components, apply patches and install updates\n- \n## File Inclusion\n### Look for\n#### The Network section of the Developer Panel\n- What external resources are being included\n#### Places in which files from the file system are included\n#### Are there places where a file is dynamically included by the URL\n### How to fix\n#### Restrict the subset of allowable included files\n### ![|400](https://remnote-user-data.s3.amazonaws.com/KxV_MGjFWbEKC4wnr9vezmBjGry5vMEGRw9fEiVboBrbpDPW90FUEWcQB5DQ6iaQQKfKuf_pp_ex8STz1ZOTs4G597Srafg99eWKWbY3fgUmGy8FLjePAwWBsxRfoqkS.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/cRfnefhWMqBglILjaHp4taajONI49FQ4_tYTzJDMR39-Fe8fCt4pqEAeh8buFSCfKHq8ltx1REDym59ht5CiJHCPeE4OmgTfPrk1eEKHm4Y0qWTJv1zR2L5sdyFxA8Uz.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/gMYxt8L22j-r3tA-6dVie001rV9-7YG67oHN4-IErCsCMIyETESr2dMqZQF7tMirGenPZhQSTktupgjD8fr6rAgrgjoBcFC22cEav0ZDp7O2kGv-zul6E_pX606pb6le.png) \n### ![|400](https://remnote-user-data.s3.amazonaws.com/sBLDWvetbZpSIODzXDh2TS_tjDnqaAaUTCuWiUMygvM7BetZ5TFIzwhLNpW_vfXWCjye2f9X0KTOS-VeiTSB0nsCYRXcLr9Xs_TiX9q5UtUpJX7L5d_S8BMdZrYHRMSc.png) \n- \n## Cookies and Sessions\n### Cookies\n#### Used for 'remembering' you back to the site later\n#### For stuff that does amtter\n- Store it properly\n\t- Generate a token, that corresponds to something inside your database, so that you can lookup the token and find the user in a way that is unguessable and unpredictable\n#### But must not be possible to construct a cookie to log in to an account you shouldn't\n#### Need to be enough to log you in without your username and password\n#### More persistent than sessions\n#### For stuff that doesn't matter\n- Store in the cookie directly\n\t- E.g.\n\t\t- What theme are you currently using\n\t\t- How are you sorting your table\n### Sessions\n#### The session ID is all that protects your server side data and your identity to the website\n#### Make sure it cannot be guess, predicted or manipulated\n#### You have a session ID on the client, which links you to the data store on the site, on the server\n#### Have a limited life\n#### Make sure your session is handled correctly\n- \n## Insecure Cookies and Sessions\n### Insecure Sessions\n#### What happens when you log out and back in\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/n1nj4-dZWkFwlF3KndrAppg0iafac0XV83IS32AyYK5aT5TsvP8SuwNQo8pjNQta-NuTTK8YfK6CzJCfYhTJMgT4p6JknFJMzi8fTMIXH8fGL93WVrSBNTHOwrVRpc8u.png) \n#### Can you log back in with an old session\n#### StatusMessage\n- Stores messages in the sessions on one page\n- Displays messages from the sessions in another page\n- If this is not working, then the sessions have been broken\n- ![|400](https://remnote-user-data.s3.amazonaws.com/xI_NjdPoGZue22VCpUjGAAd3TbBEzGlmElQT71gYuaiO_f9IJW48B7nf1adIKT_JX4QvMkPX_mNCJLD13LGbAPaL20AZytHW-Rij2h_88xH1VZYeFALqn3QWDgMXkKfi.png)\n- ![|400](https://remnote-user-data.s3.amazonaws.com/6J7UEfojAcCVznBE6hqdGNNQ2a2hXjuKi53y2rhKxVX0SxfI1vpxBzQ4l2si9qc_RJzFA_86hZmff5k0hvnJ3Xh-eTOV5RF3JduUh640StDrNfEIDPoDAudGghrENu0-.png)\n- ![|400](https://remnote-user-data.s3.amazonaws.com/vWslpv1Ze6cZrce32ASH1dlVs13Bj0g_YUAvvoZgNPg7wPwJojf5eld84m16UdQ4XFN4aCe0mnh9xmnQwIxdi-UM4Re_gPuSZ9lLxoN7d1zs_bTE1z7bzKnJF5L0W57E.png) \n- \n#### Could you guess another users sessions\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/E_O8T-KCE7e-8_oe_TaMeHISW_Ry7WeNjsnkIq0aY5WcxODT9mJxI8rk6ViMZ_RJL02EeouxZfIJSeTXr3Ne7UlouDpKiQ2pfh135Aqf6uqZZ3Ck-lZzH7eByvpTez26.png)\n#### Look how the session is stored\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/m9xdlFqkHJSFx4jHW-LswcvSeVEZ2OWd2Qdtu_7MAjMGFXrfUGaF4WI5BaLFJRmsIVoY-0Ty1-Pr31ftvYjmuo9c8KvsG2KbdUFpZsWpF3-stguksQvQF0M1o4MxlfDD.png) \n### Insecure Cookies\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/FJXqFgTRdvucYqXZcHrfOT9y0j46NpbBqo-ax29JIeOYEvwdR1HOmyYWn4eSiwArsoWoZ0bj5RXRQZ5yZ_3iVpCVBW0gNZvUdiQaj1ZTV-ND4U6-7qeRs4I3KhtwRQoG.png)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/zPKC_DtWSnqBL9Pef5K2pCF-M7FEN43WPJ5LsU3suG1DK7dQfZZuO1TFg2i2KNr2dRMcq-kUvaLuP3bKynzCXTBJGwmqDkmloTgW637yikQVeUA1s5elSwoOgvqFmE8l.png)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/S1jzFjKXc9hXStBZJw0-ZM8i1EEDT0WabYPwn3phRZjzhQRAkpfXkTJeXGSPnB_cg_NGQ_C67Uehf9RCVQkMXNkBjAZyiBGdr1VaIdTpde1QOx74oab-AYCSN41OyTKa.png)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/wDuzYkjzl5Y9wj1RSKdBlqFGBBfRKPRcwzQLrZOSNT-0gD0Msprc4QzFbH04mqi-YfQP2fWRUZs4sEEz273OaSFxtJQlJT8rSVDfreUuz_fR1VK5WbnZ6DyEDD4DSKYI.png) \n- \n## Open Redirects\n### Look for redirects\n### Can these URLs be redirected to other pages maliciously\n- \n### $f3 - \u003e reroute is used for redirecting\n### Look for places where reroute is used with user input\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/XRr0odrGkOa7kj6qMjYeya-jwqLzeQOitlAmVAyG7zwUFbrk8rT30R3hK0e3sGQX66Q2EPDxm5EThU5mio2n8Y_ijO7BXw-5Pj5SDH1OjNawHw313DXEYBZ7ATx2VSDu.png) \n- \n## Email Functionality\n### ![|400](https://remnote-user-data.s3.amazonaws.com/n767HyB7xP7a5sfv1m9uhphl6u5ygxAFhmJJ5gE_yqYcs07h_qphZU3jxwpDzVaRVIrrT3h6C2fVdgjctis1pSGME3l8W1TgZbF8QEuyeUK1dvnvtyzDw-M_aqAI7RHo.png) \n- \n## Brute Force\n### How to fix\n#### Captcha\n#### IP blocking\n#### Don't annoy the users\n### Use a library to help with captchas\n### Add new things to the database\n#### Make a model to handle the data\n#### A table of blocked IPs\n#### Create a utility class to handle it\n### Find the IP address with $_SERVER]'REMOTE_ADDR']\n# Landscape and Policy ‚Üì \n- \n## **Reference Diagrams - Host Assets**\n### Host assets are typically equipment that have an operating system and do not typically include firmware\n### ![|400](https://remnote-user-data.s3.amazonaws.com/3dyeN805cFU9oZYQ19rgMMKTrFzBUjrzhDPsKpovEyAOJgXYHQ0Xki9KjBz0P66wOTe_UFzak8a9zv0uwCDY9zjgshkXsckP07X14gxAnAMWJ1T-jPDliHHjalEfMYL1.png)\n- \n- \n## **Reference Diagrams - Network Assets**\n### Network assets are any asset that enable communication\n### ![|400](https://remnote-user-data.s3.amazonaws.com/Nk0qXXh9OUP6zLwKZAwnskNDnQ07NBFav7sf_1osIadWsz6GiTV21qXrjoH0DQRI7dFCtzbIerZRM_nyDGg5YKbMHlS07KOYEkm_UDhuQJbMT8oZS4sg7UM5HoK4snpn.png) \n- \n- \n- \n- \n## **Reference Diagrams - Stakeholders**\n### Stakeholders are persons involved in the day to day operation of the organization\n### ![|400](https://remnote-user-data.s3.amazonaws.com/KQ0zxReKU-h4yOn1K-EkwrbI9D3Wal0fLBbKBgWexPCkkC4QfvWEljOAj9cz0mdTODS21XgvznnSkbKPZJy4GTy6IGMRn_0V7HO2GgFDmbMOWATScYAmeL3ha4gliTuf.png) \n## **Threat Analysis**\n###1. Attack model driven\n###2. Compliance driven\n###3. ![|400](https://remnote-user-data.s3.amazonaws.com/JIXJiQYQBlcHxgPBdwslg9cQBYWS6yl4KjcXtGlmwfANNvJN6gvfS6jtELYfnZjz-Kj6yditg5VdixL-vCVp0GwrpPuRhC48SGNi8Z-2TB6FDitqriMumTaGmY-vP3G8.png) \n## **Measuring Security**\n### SANS Endpoint Security Maturity Model Curve\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/eh2-YylNuD4yNper9SbXkUMtRDFmAr_XftvUT7kiMAjZHQzg1If040P_ZvcH8Gh7PcBO3xD22UPbKmRm7jFjtZPbS5m_ddBQmkjy7pGq1bVy8guaAKU2elm9QdeVBFvp.png)\n### Cybersecurity Capability Maturity Model (C2M2) Maturity Indicator Levels (MILs)\n#### ![|400](https://remnote-user-data.s3.amazonaws.com/1U56uQb8whS1ULaphxKCNzLJhMHxRD6CQxpsMidus_QG0BkGRnXuz1XXcis7iM5Re6_T24e_QmDtJf1qweMUKVt0f2xldg4cmFAiz2bKis4d2_4TBLbNCfzfSV9UErzk.png) \n## **Typical Reference Diagram**\n### ![|400](https://remnote-user-data.s3.amazonaws.com/hBojSeXmRuFypIDQ_HE3_0EkN_e1StLgE2-jjJ2-EwrFb4vZQFP6tmcbxMJFHuGX9MVA9OeuTcN2jxIuzX0E5xx0E1IJbtajhOiaV9ZowQNEcG6rVJ-8FJZ11l0qHQ5W.png)  \n### ![|400](https://remnote-user-data.s3.amazonaws.com/3ilmxK5C-c6qqW_E-HDkFtGwfw7UKL8FiCC5i6VZwDzaL07KEIWxvSCjlnzfR5WIK7LdmuHUrydDm4ob2-f-hRjB0-JVaXxPNVNVkfb2JiQ-TgtxYGbuNdptAHL-5n0g.png)  \n### ![|400](https://remnote-user-data.s3.amazonaws.com/zwCt1GVmgdP1QQ5QCPo7l5JNh2ZaBuJKhywVn0FF75m55uYkt_jVMIsOTOkLkpsjvaNe3YsLGmXf65nWAxoGMPWZ_oowiwYUYHbRn8UEelwgD5_AVzNT733F6gSA3rvZ.png)\n## **Reference Diagrams**\n### What categories do you need\n####1. Define hosts - machines\n####2. Define network - how connected together\n####3. Define stakeholders - the people\n### Basic reasoning\n#### Reuse the diagram\n#### Illustrate threats\n#### Show impact on assets\n#### Show impact on stakeholders\n#### Manager infrastructure\n### Advanced reasoning\n#### Show forbidden relationships\n#### Add monitoring nodes\n#### Identify host assets that need to stretch\n#### Identify persistent assets\n- \n## **What is Policy** ‚Üì \n###1. ^^**Network policy**^^^^:^^  \n###2. ‚Äíyou can measure\n###3. ^^**Code practise**^^^^:^^  \n###4. ‚ÄíIf you are building\n###5. ^^**People Guidance**^^^^:^^  \n###6. ‚ÄíIf you can't measure\n- \n## Policy‚ÜîA statement that reflects the rules that everyone should abide by\n- \n## **Good policies are organized as follows** ‚Üì \n###1. Purpose\n###2. Policy compliance\n###3. Date tested\n###4. Date updated\n###5. Contact\n- \n## **Frameworks** ‚Üì \n###1. ^^**Security Frameworks**^^ #**Frameworks**\n###2. ‚ÄíWe mean compliance, such as: #**Frameworks**\n###3. ‚Äí‚Äí^^ISO 27001^^ \n###4. ‚Äí‚Äí^^NIST^^ \n###5. ‚Äí‚Äí^^BSI ^^\n###6. ^^**Security Models**^^  \n###7. ‚ÄíWe mean models, such as:\n###8. ‚Äí‚Äí^^IoT^^ \n###9. ‚Äí‚Äí^^Blockchain^^ \n###10. ‚Äí‚Äí^^Cloud^^ \n- \n- \n## **Measuring Security** ‚Üì \n###1. ^^The SANS Endpoint Security Maturity Model Curve^^\n###2. Level 1:\n###3. ‚ÄíRandom, or Disorganised\n###4. Level 2:\n###5. ![|400](https://remnote-user-data.s3.amazonaws.com/LO63qD2b9d9y_Sb2vJT-T4zGPCc8OEyCDLTfJeWY_px4FX7Zj523gFRKradqyqv3JBf9QLAwx9QHMPERUpDoMhTVXx6ccPG8QwqPbXi0IumPCJJuj-mHVDzbozUoie_w.png) ","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]},"/notes/templates/post":{"title":"{{title}}","content":"","lastmodified":"2023-04-19T18:54:04.283889363Z","tags":[]}}